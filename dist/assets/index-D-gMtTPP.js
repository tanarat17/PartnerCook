function SW(e,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const i in o)if(i!=="default"&&!(i in e)){const r=Object.getOwnPropertyDescriptor(o,i);r&&Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:()=>o[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();var vW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ei(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var i=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,i.get?i:{enumerable:!0,get:function(){return e[o]}})}),n}var WW={exports:{}},ru={},VW={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $I=Symbol.for("react.element"),pY=Symbol.for("react.portal"),bY=Symbol.for("react.fragment"),fY=Symbol.for("react.strict_mode"),ZY=Symbol.for("react.profiler"),yY=Symbol.for("react.provider"),GY=Symbol.for("react.context"),BY=Symbol.for("react.forward_ref"),SY=Symbol.for("react.suspense"),vY=Symbol.for("react.memo"),WY=Symbol.for("react.lazy"),dy=Symbol.iterator;function VY(e){return e===null||typeof e!="object"?null:(e=dy&&e[dy]||e["@@iterator"],typeof e=="function"?e:null)}var RW={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kW=Object.assign,wW={};function zl(e,t,n){this.props=e,this.context=t,this.refs=wW,this.updater=n||RW}zl.prototype.isReactComponent={};zl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};zl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function XW(){}XW.prototype=zl.prototype;function Vb(e,t,n){this.props=e,this.context=t,this.refs=wW,this.updater=n||RW}var Rb=Vb.prototype=new XW;Rb.constructor=Vb;kW(Rb,zl.prototype);Rb.isPureReactComponent=!0;var uy=Array.isArray,JW=Object.prototype.hasOwnProperty,kb={current:null},YW={key:!0,ref:!0,__self:!0,__source:!0};function HW(e,t,n){var o,i={},r=null,s=null;if(t!=null)for(o in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(r=""+t.key),t)JW.call(t,o)&&!YW.hasOwnProperty(o)&&(i[o]=t[o]);var I=arguments.length-2;if(I===1)i.children=n;else if(1<I){for(var a=Array(I),c=0;c<I;c++)a[c]=arguments[c+2];i.children=a}if(e&&e.defaultProps)for(o in I=e.defaultProps,I)i[o]===void 0&&(i[o]=I[o]);return{$$typeof:$I,type:e,key:r,ref:s,props:i,_owner:kb.current}}function RY(e,t){return{$$typeof:$I,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function wb(e){return typeof e=="object"&&e!==null&&e.$$typeof===$I}function kY(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ay=/\/+/g;function Wm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?kY(""+e.key):t.toString(36)}function ZC(e,t,n,o,i){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(r){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case $I:case pY:s=!0}}if(s)return s=e,i=i(s),e=o===""?"."+Wm(s,0):o,uy(i)?(n="",e!=null&&(n=e.replace(Ay,"$&/")+"/"),ZC(i,t,n,"",function(c){return c})):i!=null&&(wb(i)&&(i=RY(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Ay,"$&/")+"/")+e)),t.push(i)),1;if(s=0,o=o===""?".":o+":",uy(e))for(var I=0;I<e.length;I++){r=e[I];var a=o+Wm(r,I);s+=ZC(r,t,n,a,i)}else if(a=VY(e),typeof a=="function")for(e=a.call(e),I=0;!(r=e.next()).done;)r=r.value,a=o+Wm(r,I++),s+=ZC(r,t,n,a,i);else if(r==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Uc(e,t,n){if(e==null)return e;var o=[],i=0;return ZC(e,o,"","",function(r){return t.call(n,r,i++)}),o}function wY(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var On={current:null},yC={transition:null},XY={ReactCurrentDispatcher:On,ReactCurrentBatchConfig:yC,ReactCurrentOwner:kb};function xW(){throw Error("act(...) is not supported in production builds of React.")}Qe.Children={map:Uc,forEach:function(e,t,n){Uc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Uc(e,function(){t++}),t},toArray:function(e){return Uc(e,function(t){return t})||[]},only:function(e){if(!wb(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Qe.Component=zl;Qe.Fragment=bY;Qe.Profiler=ZY;Qe.PureComponent=Vb;Qe.StrictMode=fY;Qe.Suspense=SY;Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XY;Qe.act=xW;Qe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=kW({},e.props),i=e.key,r=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,s=kb.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var I=e.type.defaultProps;for(a in t)JW.call(t,a)&&!YW.hasOwnProperty(a)&&(o[a]=t[a]===void 0&&I!==void 0?I[a]:t[a])}var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){I=Array(a);for(var c=0;c<a;c++)I[c]=arguments[c+2];o.children=I}return{$$typeof:$I,type:e.type,key:i,ref:r,props:o,_owner:s}};Qe.createContext=function(e){return e={$$typeof:GY,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yY,_context:e},e.Consumer=e};Qe.createElement=HW;Qe.createFactory=function(e){var t=HW.bind(null,e);return t.type=e,t};Qe.createRef=function(){return{current:null}};Qe.forwardRef=function(e){return{$$typeof:BY,render:e}};Qe.isValidElement=wb;Qe.lazy=function(e){return{$$typeof:WY,_payload:{_status:-1,_result:e},_init:wY}};Qe.memo=function(e,t){return{$$typeof:vY,type:e,compare:t===void 0?null:t}};Qe.startTransition=function(e){var t=yC.transition;yC.transition={};try{e()}finally{yC.transition=t}};Qe.unstable_act=xW;Qe.useCallback=function(e,t){return On.current.useCallback(e,t)};Qe.useContext=function(e){return On.current.useContext(e)};Qe.useDebugValue=function(){};Qe.useDeferredValue=function(e){return On.current.useDeferredValue(e)};Qe.useEffect=function(e,t){return On.current.useEffect(e,t)};Qe.useId=function(){return On.current.useId()};Qe.useImperativeHandle=function(e,t,n){return On.current.useImperativeHandle(e,t,n)};Qe.useInsertionEffect=function(e,t){return On.current.useInsertionEffect(e,t)};Qe.useLayoutEffect=function(e,t){return On.current.useLayoutEffect(e,t)};Qe.useMemo=function(e,t){return On.current.useMemo(e,t)};Qe.useReducer=function(e,t,n){return On.current.useReducer(e,t,n)};Qe.useRef=function(e){return On.current.useRef(e)};Qe.useState=function(e){return On.current.useState(e)};Qe.useSyncExternalStore=function(e,t,n){return On.current.useSyncExternalStore(e,t,n)};Qe.useTransition=function(){return On.current.useTransition()};Qe.version="18.3.1";VW.exports=Qe;var B=VW.exports;const Ee=Wb(B),OC=SW({__proto__:null,default:Ee},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JY=B,YY=Symbol.for("react.element"),HY=Symbol.for("react.fragment"),xY=Object.prototype.hasOwnProperty,NY=JY.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FY={key:!0,ref:!0,__self:!0,__source:!0};function NW(e,t,n){var o,i={},r=null,s=null;n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(s=t.ref);for(o in t)xY.call(t,o)&&!FY.hasOwnProperty(o)&&(i[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)i[o]===void 0&&(i[o]=t[o]);return{$$typeof:YY,type:e,key:r,ref:s,props:i,_owner:NY.current}}ru.Fragment=HY;ru.jsx=NW;ru.jsxs=NW;WW.exports=ru;var u=WW.exports,FW={exports:{}},ko={},KW={exports:{}},EW={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,j){var P=N.length;N.push(j);e:for(;0<P;){var ae=P-1>>>1,Ie=N[ae];if(0<i(Ie,j))N[ae]=j,N[P]=Ie,P=ae;else break e}}function n(N){return N.length===0?null:N[0]}function o(N){if(N.length===0)return null;var j=N[0],P=N.pop();if(P!==j){N[0]=P;e:for(var ae=0,Ie=N.length,ye=Ie>>>1;ae<ye;){var re=2*(ae+1)-1,ue=N[re],ie=re+1,Ye=N[ie];if(0>i(ue,P))ie<Ie&&0>i(Ye,ue)?(N[ae]=Ye,N[ie]=P,ae=ie):(N[ae]=ue,N[re]=P,ae=re);else if(ie<Ie&&0>i(Ye,P))N[ae]=Ye,N[ie]=P,ae=ie;else break e}}return j}function i(N,j){var P=N.sortIndex-j.sortIndex;return P!==0?P:N.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var s=Date,I=s.now();e.unstable_now=function(){return s.now()-I}}var a=[],c=[],C=1,A=null,m=3,p=!1,b=!1,G=!1,W=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(N){for(var j=n(c);j!==null;){if(j.callback===null)o(c);else if(j.startTime<=N)o(c),j.sortIndex=j.expirationTime,t(a,j);else break;j=n(c)}}function v(N){if(G=!1,f(N),!b)if(n(a)!==null)b=!0,ee(V);else{var j=n(c);j!==null&&te(v,j.startTime-N)}}function V(N,j){b=!1,G&&(G=!1,Z(R),R=-1),p=!0;var P=m;try{for(f(j),A=n(a);A!==null&&(!(A.expirationTime>j)||N&&!M());){var ae=A.callback;if(typeof ae=="function"){A.callback=null,m=A.priorityLevel;var Ie=ae(A.expirationTime<=j);j=e.unstable_now(),typeof Ie=="function"?A.callback=Ie:A===n(a)&&o(a),f(j)}else o(a);A=n(a)}if(A!==null)var ye=!0;else{var re=n(c);re!==null&&te(v,re.startTime-j),ye=!1}return ye}finally{A=null,m=P,p=!1}}var X=!1,w=null,R=-1,F=5,x=-1;function M(){return!(e.unstable_now()-x<F)}function Q(){if(w!==null){var N=e.unstable_now();x=N;var j=!0;try{j=w(!0,N)}finally{j?$():(X=!1,w=null)}}else X=!1}var $;if(typeof y=="function")$=function(){y(Q)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,ne=_.port2;_.port1.onmessage=Q,$=function(){ne.postMessage(null)}}else $=function(){W(Q,0)};function ee(N){w=N,X||(X=!0,$())}function te(N,j){R=W(function(){N(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){b||p||(b=!0,ee(V))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(N){switch(m){case 1:case 2:case 3:var j=3;break;default:j=m}var P=m;m=j;try{return N()}finally{m=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,j){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var P=m;m=N;try{return j()}finally{m=P}},e.unstable_scheduleCallback=function(N,j,P){var ae=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?ae+P:ae):P=ae,N){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=P+Ie,N={id:C++,callback:j,priorityLevel:N,startTime:P,expirationTime:Ie,sortIndex:-1},P>ae?(N.sortIndex=P,t(c,N),n(a)===null&&N===n(c)&&(G?(Z(R),R=-1):G=!0,te(v,P-ae))):(N.sortIndex=Ie,t(a,N),b||p||(b=!0,ee(V))),N},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(N){var j=m;return function(){var P=m;m=j;try{return N.apply(this,arguments)}finally{m=P}}}})(EW);KW.exports=EW;var KY=KW.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EY=B,Wo=KY;function oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var MW=new Set,mI={};function ts(e,t){hl(e,t),hl(e+"Capture",t)}function hl(e,t){for(mI[e]=t,e=0;e<t.length;e++)MW.add(t[e])}var cg=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nh=Object.prototype.hasOwnProperty,MY=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,my={},hy={};function LY(e){return Nh.call(hy,e)?!0:Nh.call(my,e)?!1:MY.test(e)?hy[e]=!0:(my[e]=!0,!1)}function zY(e,t,n,o){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function TY(e,t,n,o){if(t===null||typeof t>"u"||zY(e,t,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qn(e,t,n,o,i,r,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=s}var Wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Wn[e]=new qn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Wn[t]=new qn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Wn[e]=new qn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Wn[e]=new qn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Wn[e]=new qn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Wn[e]=new qn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Wn[e]=new qn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Wn[e]=new qn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Wn[e]=new qn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xb=/[\-:]([a-z])/g;function Jb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xb,Jb);Wn[t]=new qn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xb,Jb);Wn[t]=new qn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xb,Jb);Wn[t]=new qn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Wn[e]=new qn(e,1,!1,e.toLowerCase(),null,!1,!1)});Wn.xlinkHref=new qn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Wn[e]=new qn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Yb(e,t,n,o){var i=Wn.hasOwnProperty(t)?Wn[t]:null;(i!==null?i.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(TY(t,n,i,o)&&(n=null),o||i===null?LY(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,o=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}var hg=EY.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dc=Symbol.for("react.element"),Ns=Symbol.for("react.portal"),Fs=Symbol.for("react.fragment"),Hb=Symbol.for("react.strict_mode"),Fh=Symbol.for("react.profiler"),LW=Symbol.for("react.provider"),zW=Symbol.for("react.context"),xb=Symbol.for("react.forward_ref"),Kh=Symbol.for("react.suspense"),Eh=Symbol.for("react.suspense_list"),Nb=Symbol.for("react.memo"),Rg=Symbol.for("react.lazy"),TW=Symbol.for("react.offscreen"),py=Symbol.iterator;function Ga(e){return e===null||typeof e!="object"?null:(e=py&&e[py]||e["@@iterator"],typeof e=="function"?e:null)}var xt=Object.assign,Vm;function za(e){if(Vm===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Vm=t&&t[1]||""}return`
`+Vm+e}var Rm=!1;function km(e,t){if(!e||Rm)return"";Rm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var o=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){o=c}e.call(t.prototype)}else{try{throw Error()}catch(c){o=c}e()}}catch(c){if(c&&o&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),r=o.stack.split(`
`),s=i.length-1,I=r.length-1;1<=s&&0<=I&&i[s]!==r[I];)I--;for(;1<=s&&0<=I;s--,I--)if(i[s]!==r[I]){if(s!==1||I!==1)do if(s--,I--,0>I||i[s]!==r[I]){var a=`
`+i[s].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=s&&0<=I);break}}}finally{Rm=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?za(e):""}function UY(e){switch(e.tag){case 5:return za(e.type);case 16:return za("Lazy");case 13:return za("Suspense");case 19:return za("SuspenseList");case 0:case 2:case 15:return e=km(e.type,!1),e;case 11:return e=km(e.type.render,!1),e;case 1:return e=km(e.type,!0),e;default:return""}}function Mh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fs:return"Fragment";case Ns:return"Portal";case Fh:return"Profiler";case Hb:return"StrictMode";case Kh:return"Suspense";case Eh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zW:return(e.displayName||"Context")+".Consumer";case LW:return(e._context.displayName||"Context")+".Provider";case xb:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Nb:return t=e.displayName||null,t!==null?t:Mh(e.type)||"Memo";case Rg:t=e._payload,e=e._init;try{return Mh(e(t))}catch{}}return null}function DY(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mh(t);case 8:return t===Hb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Dg(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function UW(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function QY(e){var t=UW(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){o=""+s,r.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(s){o=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qc(e){e._valueTracker||(e._valueTracker=QY(e))}function DW(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=UW(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function qC(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Lh(e,t){var n=t.checked;return xt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function by(e,t){var n=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;n=Dg(t.value!=null?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function QW(e,t){t=t.checked,t!=null&&Yb(e,"checked",t,!1)}function zh(e,t){QW(e,t);var n=Dg(t.value),o=t.type;if(n!=null)o==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Th(e,t.type,n):t.hasOwnProperty("defaultValue")&&Th(e,t.type,Dg(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function fy(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Th(e,t,n){(t!=="number"||qC(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ta=Array.isArray;function il(e,t,n,o){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&o&&(e[n].defaultSelected=!0)}else{for(n=""+Dg(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,o&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Uh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(oe(91));return xt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zy(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(oe(92));if(Ta(n)){if(1<n.length)throw Error(oe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Dg(n)}}function PW(e,t){var n=Dg(t.value),o=Dg(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),o!=null&&(e.defaultValue=""+o)}function yy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function jW(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?jW(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pc,_W=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,o,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,o,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Pc=Pc||document.createElement("div"),Pc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Pc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function hI(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var eI={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PY=["Webkit","ms","Moz","O"];Object.keys(eI).forEach(function(e){PY.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),eI[t]=eI[e]})});function OW(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||eI.hasOwnProperty(e)&&eI[e]?(""+t).trim():t+"px"}function qW(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var o=n.indexOf("--")===0,i=OW(n,t[n],o);n==="float"&&(n="cssFloat"),o?e.setProperty(n,i):e[n]=i}}var jY=xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qh(e,t){if(t){if(jY[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(oe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(oe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(oe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(oe(62))}}function Ph(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jh=null;function Fb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _h=null,gl=null,rl=null;function Gy(e){if(e=nc(e)){if(typeof _h!="function")throw Error(oe(280));var t=e.stateNode;t&&(t=cu(t),_h(e.stateNode,e.type,t))}}function $W(e){gl?rl?rl.push(e):rl=[e]:gl=e}function eV(){if(gl){var e=gl,t=rl;if(rl=gl=null,Gy(e),t)for(e=0;e<t.length;e++)Gy(t[e])}}function tV(e,t){return e(t)}function nV(){}var wm=!1;function oV(e,t,n){if(wm)return e(t,n);wm=!0;try{return tV(e,t,n)}finally{wm=!1,(gl!==null||rl!==null)&&(nV(),eV())}}function pI(e,t){var n=e.stateNode;if(n===null)return null;var o=cu(n);if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(oe(231,t,typeof n));return n}var Oh=!1;if(cg)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){Oh=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{Oh=!1}function _Y(e,t,n,o,i,r,s,I,a){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(C){this.onError(C)}}var tI=!1,$C=null,ed=!1,qh=null,OY={onError:function(e){tI=!0,$C=e}};function qY(e,t,n,o,i,r,s,I,a){tI=!1,$C=null,_Y.apply(OY,arguments)}function $Y(e,t,n,o,i,r,s,I,a){if(qY.apply(this,arguments),tI){if(tI){var c=$C;tI=!1,$C=null}else throw Error(oe(198));ed||(ed=!0,qh=c)}}function ns(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function iV(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function By(e){if(ns(e)!==e)throw Error(oe(188))}function eH(e){var t=e.alternate;if(!t){if(t=ns(e),t===null)throw Error(oe(188));return t!==e?null:e}for(var n=e,o=t;;){var i=n.return;if(i===null)break;var r=i.alternate;if(r===null){if(o=i.return,o!==null){n=o;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return By(i),e;if(r===o)return By(i),t;r=r.sibling}throw Error(oe(188))}if(n.return!==o.return)n=i,o=r;else{for(var s=!1,I=i.child;I;){if(I===n){s=!0,n=i,o=r;break}if(I===o){s=!0,o=i,n=r;break}I=I.sibling}if(!s){for(I=r.child;I;){if(I===n){s=!0,n=r,o=i;break}if(I===o){s=!0,o=r,n=i;break}I=I.sibling}if(!s)throw Error(oe(189))}}if(n.alternate!==o)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?e:t}function gV(e){return e=eH(e),e!==null?rV(e):null}function rV(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rV(e);if(t!==null)return t;e=e.sibling}return null}var sV=Wo.unstable_scheduleCallback,Sy=Wo.unstable_cancelCallback,tH=Wo.unstable_shouldYield,nH=Wo.unstable_requestPaint,Ut=Wo.unstable_now,oH=Wo.unstable_getCurrentPriorityLevel,Kb=Wo.unstable_ImmediatePriority,lV=Wo.unstable_UserBlockingPriority,td=Wo.unstable_NormalPriority,iH=Wo.unstable_LowPriority,aV=Wo.unstable_IdlePriority,su=null,Ji=null;function gH(e){if(Ji&&typeof Ji.onCommitFiberRoot=="function")try{Ji.onCommitFiberRoot(su,e,void 0,(e.current.flags&128)===128)}catch{}}var ui=Math.clz32?Math.clz32:lH,rH=Math.log,sH=Math.LN2;function lH(e){return e>>>=0,e===0?32:31-(rH(e)/sH|0)|0}var jc=64,_c=4194304;function Ua(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function nd(e,t){var n=e.pendingLanes;if(n===0)return 0;var o=0,i=e.suspendedLanes,r=e.pingedLanes,s=n&268435455;if(s!==0){var I=s&~i;I!==0?o=Ua(I):(r&=s,r!==0&&(o=Ua(r)))}else s=n&~i,s!==0?o=Ua(s):r!==0&&(o=Ua(r));if(o===0)return 0;if(t!==0&&t!==o&&!(t&i)&&(i=o&-o,r=t&-t,i>=r||i===16&&(r&4194240)!==0))return t;if(o&4&&(o|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)n=31-ui(t),i=1<<n,o|=e[n],t&=~i;return o}function aH(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IH(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,i=e.expirationTimes,r=e.pendingLanes;0<r;){var s=31-ui(r),I=1<<s,a=i[s];a===-1?(!(I&n)||I&o)&&(i[s]=aH(I,t)):a<=t&&(e.expiredLanes|=I),r&=~I}}function $h(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function IV(){var e=jc;return jc<<=1,!(jc&4194240)&&(jc=64),e}function Xm(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ec(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ui(t),e[t]=n}function cH(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ui(n),r=1<<i;t[i]=0,o[i]=-1,e[i]=-1,n&=~r}}function Eb(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-ui(n),i=1<<o;i&t|e[o]&t&&(e[o]|=t),n&=~i}}var ct=0;function cV(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var CV,Mb,dV,uV,AV,ep=!1,Oc=[],Fg=null,Kg=null,Eg=null,bI=new Map,fI=new Map,wg=[],CH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vy(e,t){switch(e){case"focusin":case"focusout":Fg=null;break;case"dragenter":case"dragleave":Kg=null;break;case"mouseover":case"mouseout":Eg=null;break;case"pointerover":case"pointerout":bI.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fI.delete(t.pointerId)}}function Sa(e,t,n,o,i,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:r,targetContainers:[i]},t!==null&&(t=nc(t),t!==null&&Mb(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function dH(e,t,n,o,i){switch(t){case"focusin":return Fg=Sa(Fg,e,t,n,o,i),!0;case"dragenter":return Kg=Sa(Kg,e,t,n,o,i),!0;case"mouseover":return Eg=Sa(Eg,e,t,n,o,i),!0;case"pointerover":var r=i.pointerId;return bI.set(r,Sa(bI.get(r)||null,e,t,n,o,i)),!0;case"gotpointercapture":return r=i.pointerId,fI.set(r,Sa(fI.get(r)||null,e,t,n,o,i)),!0}return!1}function mV(e){var t=Wr(e.target);if(t!==null){var n=ns(t);if(n!==null){if(t=n.tag,t===13){if(t=iV(n),t!==null){e.blockedOn=t,AV(e.priority,function(){dV(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function GC(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=tp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);jh=o,n.target.dispatchEvent(o),jh=null}else return t=nc(n),t!==null&&Mb(t),e.blockedOn=n,!1;t.shift()}return!0}function Wy(e,t,n){GC(e)&&n.delete(t)}function uH(){ep=!1,Fg!==null&&GC(Fg)&&(Fg=null),Kg!==null&&GC(Kg)&&(Kg=null),Eg!==null&&GC(Eg)&&(Eg=null),bI.forEach(Wy),fI.forEach(Wy)}function va(e,t){e.blockedOn===t&&(e.blockedOn=null,ep||(ep=!0,Wo.unstable_scheduleCallback(Wo.unstable_NormalPriority,uH)))}function ZI(e){function t(i){return va(i,e)}if(0<Oc.length){va(Oc[0],e);for(var n=1;n<Oc.length;n++){var o=Oc[n];o.blockedOn===e&&(o.blockedOn=null)}}for(Fg!==null&&va(Fg,e),Kg!==null&&va(Kg,e),Eg!==null&&va(Eg,e),bI.forEach(t),fI.forEach(t),n=0;n<wg.length;n++)o=wg[n],o.blockedOn===e&&(o.blockedOn=null);for(;0<wg.length&&(n=wg[0],n.blockedOn===null);)mV(n),n.blockedOn===null&&wg.shift()}var sl=hg.ReactCurrentBatchConfig,od=!0;function AH(e,t,n,o){var i=ct,r=sl.transition;sl.transition=null;try{ct=1,Lb(e,t,n,o)}finally{ct=i,sl.transition=r}}function mH(e,t,n,o){var i=ct,r=sl.transition;sl.transition=null;try{ct=4,Lb(e,t,n,o)}finally{ct=i,sl.transition=r}}function Lb(e,t,n,o){if(od){var i=tp(e,t,n,o);if(i===null)Lm(e,t,o,id,n),vy(e,o);else if(dH(i,e,t,n,o))o.stopPropagation();else if(vy(e,o),t&4&&-1<CH.indexOf(e)){for(;i!==null;){var r=nc(i);if(r!==null&&CV(r),r=tp(e,t,n,o),r===null&&Lm(e,t,o,id,n),r===i)break;i=r}i!==null&&o.stopPropagation()}else Lm(e,t,o,null,n)}}var id=null;function tp(e,t,n,o){if(id=null,e=Fb(o),e=Wr(e),e!==null)if(t=ns(e),t===null)e=null;else if(n=t.tag,n===13){if(e=iV(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return id=e,null}function hV(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oH()){case Kb:return 1;case lV:return 4;case td:case iH:return 16;case aV:return 536870912;default:return 16}default:return 16}}var Jg=null,zb=null,BC=null;function pV(){if(BC)return BC;var e,t=zb,n=t.length,o,i="value"in Jg?Jg.value:Jg.textContent,r=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(o=1;o<=s&&t[n-o]===i[r-o];o++);return BC=i.slice(e,1<o?1-o:void 0)}function SC(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qc(){return!0}function Vy(){return!1}function wo(e){function t(n,o,i,r,s){this._reactName=n,this._targetInst=i,this.type=o,this.nativeEvent=r,this.target=s,this.currentTarget=null;for(var I in e)e.hasOwnProperty(I)&&(n=e[I],this[I]=n?n(r):r[I]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?qc:Vy,this.isPropagationStopped=Vy,this}return xt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qc)},persist:function(){},isPersistent:qc}),t}var Tl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tb=wo(Tl),tc=xt({},Tl,{view:0,detail:0}),hH=wo(tc),Jm,Ym,Wa,lu=xt({},tc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ub,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wa&&(Wa&&e.type==="mousemove"?(Jm=e.screenX-Wa.screenX,Ym=e.screenY-Wa.screenY):Ym=Jm=0,Wa=e),Jm)},movementY:function(e){return"movementY"in e?e.movementY:Ym}}),Ry=wo(lu),pH=xt({},lu,{dataTransfer:0}),bH=wo(pH),fH=xt({},tc,{relatedTarget:0}),Hm=wo(fH),ZH=xt({},Tl,{animationName:0,elapsedTime:0,pseudoElement:0}),yH=wo(ZH),GH=xt({},Tl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),BH=wo(GH),SH=xt({},Tl,{data:0}),ky=wo(SH),vH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RH(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=VH[e])?!!t[e]:!1}function Ub(){return RH}var kH=xt({},tc,{key:function(e){if(e.key){var t=vH[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=SC(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?WH[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ub,charCode:function(e){return e.type==="keypress"?SC(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?SC(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wH=wo(kH),XH=xt({},lu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wy=wo(XH),JH=xt({},tc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ub}),YH=wo(JH),HH=xt({},Tl,{propertyName:0,elapsedTime:0,pseudoElement:0}),xH=wo(HH),NH=xt({},lu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),FH=wo(NH),KH=[9,13,27,32],Db=cg&&"CompositionEvent"in window,nI=null;cg&&"documentMode"in document&&(nI=document.documentMode);var EH=cg&&"TextEvent"in window&&!nI,bV=cg&&(!Db||nI&&8<nI&&11>=nI),Xy=" ",Jy=!1;function fV(e,t){switch(e){case"keyup":return KH.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZV(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ks=!1;function MH(e,t){switch(e){case"compositionend":return ZV(t);case"keypress":return t.which!==32?null:(Jy=!0,Xy);case"textInput":return e=t.data,e===Xy&&Jy?null:e;default:return null}}function LH(e,t){if(Ks)return e==="compositionend"||!Db&&fV(e,t)?(e=pV(),BC=zb=Jg=null,Ks=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bV&&t.locale!=="ko"?null:t.data;default:return null}}var zH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zH[e.type]:t==="textarea"}function yV(e,t,n,o){$W(o),t=gd(t,"onChange"),0<t.length&&(n=new Tb("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var oI=null,yI=null;function TH(e){JV(e,0)}function au(e){var t=Ls(e);if(DW(t))return e}function UH(e,t){if(e==="change")return t}var GV=!1;if(cg){var xm;if(cg){var Nm="oninput"in document;if(!Nm){var Hy=document.createElement("div");Hy.setAttribute("oninput","return;"),Nm=typeof Hy.oninput=="function"}xm=Nm}else xm=!1;GV=xm&&(!document.documentMode||9<document.documentMode)}function xy(){oI&&(oI.detachEvent("onpropertychange",BV),yI=oI=null)}function BV(e){if(e.propertyName==="value"&&au(yI)){var t=[];yV(t,yI,e,Fb(e)),oV(TH,t)}}function DH(e,t,n){e==="focusin"?(xy(),oI=t,yI=n,oI.attachEvent("onpropertychange",BV)):e==="focusout"&&xy()}function QH(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return au(yI)}function PH(e,t){if(e==="click")return au(t)}function jH(e,t){if(e==="input"||e==="change")return au(t)}function _H(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hi=typeof Object.is=="function"?Object.is:_H;function GI(e,t){if(hi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var i=n[o];if(!Nh.call(t,i)||!hi(e[i],t[i]))return!1}return!0}function Ny(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fy(e,t){var n=Ny(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ny(n)}}function SV(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?SV(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vV(){for(var e=window,t=qC();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=qC(e.document)}return t}function Qb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function OH(e){var t=vV(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&SV(n.ownerDocument.documentElement,n)){if(o!==null&&Qb(n)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,r=Math.min(o.start,i);o=o.end===void 0?r:Math.min(o.end,i),!e.extend&&r>o&&(i=o,o=r,r=i),i=Fy(n,r);var s=Fy(n,o);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),r>o?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qH=cg&&"documentMode"in document&&11>=document.documentMode,Es=null,np=null,iI=null,op=!1;function Ky(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;op||Es==null||Es!==qC(o)||(o=Es,"selectionStart"in o&&Qb(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),iI&&GI(iI,o)||(iI=o,o=gd(np,"onSelect"),0<o.length&&(t=new Tb("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=Es)))}function $c(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ms={animationend:$c("Animation","AnimationEnd"),animationiteration:$c("Animation","AnimationIteration"),animationstart:$c("Animation","AnimationStart"),transitionend:$c("Transition","TransitionEnd")},Fm={},WV={};cg&&(WV=document.createElement("div").style,"AnimationEvent"in window||(delete Ms.animationend.animation,delete Ms.animationiteration.animation,delete Ms.animationstart.animation),"TransitionEvent"in window||delete Ms.transitionend.transition);function Iu(e){if(Fm[e])return Fm[e];if(!Ms[e])return e;var t=Ms[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in WV)return Fm[e]=t[n];return e}var VV=Iu("animationend"),RV=Iu("animationiteration"),kV=Iu("animationstart"),wV=Iu("transitionend"),XV=new Map,Ey="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qg(e,t){XV.set(e,t),ts(t,[e])}for(var Km=0;Km<Ey.length;Km++){var Em=Ey[Km],$H=Em.toLowerCase(),ex=Em[0].toUpperCase()+Em.slice(1);qg($H,"on"+ex)}qg(VV,"onAnimationEnd");qg(RV,"onAnimationIteration");qg(kV,"onAnimationStart");qg("dblclick","onDoubleClick");qg("focusin","onFocus");qg("focusout","onBlur");qg(wV,"onTransitionEnd");hl("onMouseEnter",["mouseout","mouseover"]);hl("onMouseLeave",["mouseout","mouseover"]);hl("onPointerEnter",["pointerout","pointerover"]);hl("onPointerLeave",["pointerout","pointerover"]);ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Da="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Da));function My(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,$Y(o,t,void 0,e),e.currentTarget=null}function JV(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],i=o.event;o=o.listeners;e:{var r=void 0;if(t)for(var s=o.length-1;0<=s;s--){var I=o[s],a=I.instance,c=I.currentTarget;if(I=I.listener,a!==r&&i.isPropagationStopped())break e;My(i,I,c),r=a}else for(s=0;s<o.length;s++){if(I=o[s],a=I.instance,c=I.currentTarget,I=I.listener,a!==r&&i.isPropagationStopped())break e;My(i,I,c),r=a}}}if(ed)throw e=qh,ed=!1,qh=null,e}function St(e,t){var n=t[lp];n===void 0&&(n=t[lp]=new Set);var o=e+"__bubble";n.has(o)||(YV(t,e,2,!1),n.add(o))}function Mm(e,t,n){var o=0;t&&(o|=4),YV(n,e,o,t)}var eC="_reactListening"+Math.random().toString(36).slice(2);function BI(e){if(!e[eC]){e[eC]=!0,MW.forEach(function(n){n!=="selectionchange"&&(tx.has(n)||Mm(n,!1,e),Mm(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[eC]||(t[eC]=!0,Mm("selectionchange",!1,t))}}function YV(e,t,n,o){switch(hV(t)){case 1:var i=AH;break;case 4:i=mH;break;default:i=Lb}n=i.bind(null,t,n,e),i=void 0,!Oh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),o?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lm(e,t,n,o,i){var r=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var s=o.tag;if(s===3||s===4){var I=o.stateNode.containerInfo;if(I===i||I.nodeType===8&&I.parentNode===i)break;if(s===4)for(s=o.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;s=s.return}for(;I!==null;){if(s=Wr(I),s===null)return;if(a=s.tag,a===5||a===6){o=r=s;continue e}I=I.parentNode}}o=o.return}oV(function(){var c=r,C=Fb(n),A=[];e:{var m=XV.get(e);if(m!==void 0){var p=Tb,b=e;switch(e){case"keypress":if(SC(n)===0)break e;case"keydown":case"keyup":p=wH;break;case"focusin":b="focus",p=Hm;break;case"focusout":b="blur",p=Hm;break;case"beforeblur":case"afterblur":p=Hm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Ry;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=bH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=YH;break;case VV:case RV:case kV:p=yH;break;case wV:p=xH;break;case"scroll":p=hH;break;case"wheel":p=FH;break;case"copy":case"cut":case"paste":p=BH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=wy}var G=(t&4)!==0,W=!G&&e==="scroll",Z=G?m!==null?m+"Capture":null:m;G=[];for(var y=c,f;y!==null;){f=y;var v=f.stateNode;if(f.tag===5&&v!==null&&(f=v,Z!==null&&(v=pI(y,Z),v!=null&&G.push(SI(y,v,f)))),W)break;y=y.return}0<G.length&&(m=new p(m,b,null,n,C),A.push({event:m,listeners:G}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&n!==jh&&(b=n.relatedTarget||n.fromElement)&&(Wr(b)||b[Cg]))break e;if((p||m)&&(m=C.window===C?C:(m=C.ownerDocument)?m.defaultView||m.parentWindow:window,p?(b=n.relatedTarget||n.toElement,p=c,b=b?Wr(b):null,b!==null&&(W=ns(b),b!==W||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=c),p!==b)){if(G=Ry,v="onMouseLeave",Z="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(G=wy,v="onPointerLeave",Z="onPointerEnter",y="pointer"),W=p==null?m:Ls(p),f=b==null?m:Ls(b),m=new G(v,y+"leave",p,n,C),m.target=W,m.relatedTarget=f,v=null,Wr(C)===c&&(G=new G(Z,y+"enter",b,n,C),G.target=f,G.relatedTarget=W,v=G),W=v,p&&b)t:{for(G=p,Z=b,y=0,f=G;f;f=Bs(f))y++;for(f=0,v=Z;v;v=Bs(v))f++;for(;0<y-f;)G=Bs(G),y--;for(;0<f-y;)Z=Bs(Z),f--;for(;y--;){if(G===Z||Z!==null&&G===Z.alternate)break t;G=Bs(G),Z=Bs(Z)}G=null}else G=null;p!==null&&Ly(A,m,p,G,!1),b!==null&&W!==null&&Ly(A,W,b,G,!0)}}e:{if(m=c?Ls(c):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var V=UH;else if(Yy(m))if(GV)V=jH;else{V=QH;var X=DH}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(V=PH);if(V&&(V=V(e,c))){yV(A,V,n,C);break e}X&&X(e,m,c),e==="focusout"&&(X=m._wrapperState)&&X.controlled&&m.type==="number"&&Th(m,"number",m.value)}switch(X=c?Ls(c):window,e){case"focusin":(Yy(X)||X.contentEditable==="true")&&(Es=X,np=c,iI=null);break;case"focusout":iI=np=Es=null;break;case"mousedown":op=!0;break;case"contextmenu":case"mouseup":case"dragend":op=!1,Ky(A,n,C);break;case"selectionchange":if(qH)break;case"keydown":case"keyup":Ky(A,n,C)}var w;if(Db)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Ks?fV(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(bV&&n.locale!=="ko"&&(Ks||R!=="onCompositionStart"?R==="onCompositionEnd"&&Ks&&(w=pV()):(Jg=C,zb="value"in Jg?Jg.value:Jg.textContent,Ks=!0)),X=gd(c,R),0<X.length&&(R=new ky(R,e,null,n,C),A.push({event:R,listeners:X}),w?R.data=w:(w=ZV(n),w!==null&&(R.data=w)))),(w=EH?MH(e,n):LH(e,n))&&(c=gd(c,"onBeforeInput"),0<c.length&&(C=new ky("onBeforeInput","beforeinput",null,n,C),A.push({event:C,listeners:c}),C.data=w))}JV(A,t)})}function SI(e,t,n){return{instance:e,listener:t,currentTarget:n}}function gd(e,t){for(var n=t+"Capture",o=[];e!==null;){var i=e,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=pI(e,n),r!=null&&o.unshift(SI(e,r,i)),r=pI(e,t),r!=null&&o.push(SI(e,r,i))),e=e.return}return o}function Bs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ly(e,t,n,o,i){for(var r=t._reactName,s=[];n!==null&&n!==o;){var I=n,a=I.alternate,c=I.stateNode;if(a!==null&&a===o)break;I.tag===5&&c!==null&&(I=c,i?(a=pI(n,r),a!=null&&s.unshift(SI(n,a,I))):i||(a=pI(n,r),a!=null&&s.push(SI(n,a,I)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var nx=/\r\n?/g,ox=/\u0000|\uFFFD/g;function zy(e){return(typeof e=="string"?e:""+e).replace(nx,`
`).replace(ox,"")}function tC(e,t,n){if(t=zy(t),zy(e)!==t&&n)throw Error(oe(425))}function rd(){}var ip=null,gp=null;function rp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sp=typeof setTimeout=="function"?setTimeout:void 0,ix=typeof clearTimeout=="function"?clearTimeout:void 0,Ty=typeof Promise=="function"?Promise:void 0,gx=typeof queueMicrotask=="function"?queueMicrotask:typeof Ty<"u"?function(e){return Ty.resolve(null).then(e).catch(rx)}:sp;function rx(e){setTimeout(function(){throw e})}function zm(e,t){var n=t,o=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(o===0){e.removeChild(i),ZI(t);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=i}while(n);ZI(t)}function Mg(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Uy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ul=Math.random().toString(36).slice(2),Xi="__reactFiber$"+Ul,vI="__reactProps$"+Ul,Cg="__reactContainer$"+Ul,lp="__reactEvents$"+Ul,sx="__reactListeners$"+Ul,lx="__reactHandles$"+Ul;function Wr(e){var t=e[Xi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Cg]||n[Xi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Uy(e);e!==null;){if(n=e[Xi])return n;e=Uy(e)}return t}e=n,n=e.parentNode}return null}function nc(e){return e=e[Xi]||e[Cg],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ls(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(oe(33))}function cu(e){return e[vI]||null}var ap=[],zs=-1;function $g(e){return{current:e}}function Wt(e){0>zs||(e.current=ap[zs],ap[zs]=null,zs--)}function yt(e,t){zs++,ap[zs]=e.current,e.current=t}var Qg={},Kn=$g(Qg),ro=$g(!1),Tr=Qg;function pl(e,t){var n=e.type.contextTypes;if(!n)return Qg;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in n)i[r]=t[r];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function so(e){return e=e.childContextTypes,e!=null}function sd(){Wt(ro),Wt(Kn)}function Dy(e,t,n){if(Kn.current!==Qg)throw Error(oe(168));yt(Kn,t),yt(ro,n)}function HV(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var i in o)if(!(i in t))throw Error(oe(108,DY(e)||"Unknown",i));return xt({},n,o)}function ld(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qg,Tr=Kn.current,yt(Kn,e),yt(ro,ro.current),!0}function Qy(e,t,n){var o=e.stateNode;if(!o)throw Error(oe(169));n?(e=HV(e,t,Tr),o.__reactInternalMemoizedMergedChildContext=e,Wt(ro),Wt(Kn),yt(Kn,e)):Wt(ro),yt(ro,n)}var $i=null,Cu=!1,Tm=!1;function xV(e){$i===null?$i=[e]:$i.push(e)}function ax(e){Cu=!0,xV(e)}function er(){if(!Tm&&$i!==null){Tm=!0;var e=0,t=ct;try{var n=$i;for(ct=1;e<n.length;e++){var o=n[e];do o=o(!0);while(o!==null)}$i=null,Cu=!1}catch(i){throw $i!==null&&($i=$i.slice(e+1)),sV(Kb,er),i}finally{ct=t,Tm=!1}}return null}var Ts=[],Us=0,ad=null,Id=0,Do=[],Qo=0,Ur=null,tg=1,ng="";function fr(e,t){Ts[Us++]=Id,Ts[Us++]=ad,ad=e,Id=t}function NV(e,t,n){Do[Qo++]=tg,Do[Qo++]=ng,Do[Qo++]=Ur,Ur=e;var o=tg;e=ng;var i=32-ui(o)-1;o&=~(1<<i),n+=1;var r=32-ui(t)+i;if(30<r){var s=i-i%5;r=(o&(1<<s)-1).toString(32),o>>=s,i-=s,tg=1<<32-ui(t)+i|n<<i|o,ng=r+e}else tg=1<<r|n<<i|o,ng=e}function Pb(e){e.return!==null&&(fr(e,1),NV(e,1,0))}function jb(e){for(;e===ad;)ad=Ts[--Us],Ts[Us]=null,Id=Ts[--Us],Ts[Us]=null;for(;e===Ur;)Ur=Do[--Qo],Do[Qo]=null,ng=Do[--Qo],Do[Qo]=null,tg=Do[--Qo],Do[Qo]=null}var Bo=null,Go=null,kt=!1,di=null;function FV(e,t){var n=jo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Py(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Bo=e,Go=Mg(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Bo=e,Go=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ur!==null?{id:tg,overflow:ng}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=jo(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Bo=e,Go=null,!0):!1;default:return!1}}function Ip(e){return(e.mode&1)!==0&&(e.flags&128)===0}function cp(e){if(kt){var t=Go;if(t){var n=t;if(!Py(e,t)){if(Ip(e))throw Error(oe(418));t=Mg(n.nextSibling);var o=Bo;t&&Py(e,t)?FV(o,n):(e.flags=e.flags&-4097|2,kt=!1,Bo=e)}}else{if(Ip(e))throw Error(oe(418));e.flags=e.flags&-4097|2,kt=!1,Bo=e}}}function jy(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Bo=e}function nC(e){if(e!==Bo)return!1;if(!kt)return jy(e),kt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!rp(e.type,e.memoizedProps)),t&&(t=Go)){if(Ip(e))throw KV(),Error(oe(418));for(;t;)FV(e,t),t=Mg(t.nextSibling)}if(jy(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(oe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Go=Mg(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Go=null}}else Go=Bo?Mg(e.stateNode.nextSibling):null;return!0}function KV(){for(var e=Go;e;)e=Mg(e.nextSibling)}function bl(){Go=Bo=null,kt=!1}function _b(e){di===null?di=[e]:di.push(e)}var Ix=hg.ReactCurrentBatchConfig;function Va(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var o=n.stateNode}if(!o)throw Error(oe(147,e));var i=o,r=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(s){var I=i.refs;s===null?delete I[r]:I[r]=s},t._stringRef=r,t)}if(typeof e!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,e))}return e}function oC(e,t){throw e=Object.prototype.toString.call(t),Error(oe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _y(e){var t=e._init;return t(e._payload)}function EV(e){function t(Z,y){if(e){var f=Z.deletions;f===null?(Z.deletions=[y],Z.flags|=16):f.push(y)}}function n(Z,y){if(!e)return null;for(;y!==null;)t(Z,y),y=y.sibling;return null}function o(Z,y){for(Z=new Map;y!==null;)y.key!==null?Z.set(y.key,y):Z.set(y.index,y),y=y.sibling;return Z}function i(Z,y){return Z=Ug(Z,y),Z.index=0,Z.sibling=null,Z}function r(Z,y,f){return Z.index=f,e?(f=Z.alternate,f!==null?(f=f.index,f<y?(Z.flags|=2,y):f):(Z.flags|=2,y)):(Z.flags|=1048576,y)}function s(Z){return e&&Z.alternate===null&&(Z.flags|=2),Z}function I(Z,y,f,v){return y===null||y.tag!==6?(y=Om(f,Z.mode,v),y.return=Z,y):(y=i(y,f),y.return=Z,y)}function a(Z,y,f,v){var V=f.type;return V===Fs?C(Z,y,f.props.children,v,f.key):y!==null&&(y.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Rg&&_y(V)===y.type)?(v=i(y,f.props),v.ref=Va(Z,y,f),v.return=Z,v):(v=XC(f.type,f.key,f.props,null,Z.mode,v),v.ref=Va(Z,y,f),v.return=Z,v)}function c(Z,y,f,v){return y===null||y.tag!==4||y.stateNode.containerInfo!==f.containerInfo||y.stateNode.implementation!==f.implementation?(y=qm(f,Z.mode,v),y.return=Z,y):(y=i(y,f.children||[]),y.return=Z,y)}function C(Z,y,f,v,V){return y===null||y.tag!==7?(y=Nr(f,Z.mode,v,V),y.return=Z,y):(y=i(y,f),y.return=Z,y)}function A(Z,y,f){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Om(""+y,Z.mode,f),y.return=Z,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Dc:return f=XC(y.type,y.key,y.props,null,Z.mode,f),f.ref=Va(Z,null,y),f.return=Z,f;case Ns:return y=qm(y,Z.mode,f),y.return=Z,y;case Rg:var v=y._init;return A(Z,v(y._payload),f)}if(Ta(y)||Ga(y))return y=Nr(y,Z.mode,f,null),y.return=Z,y;oC(Z,y)}return null}function m(Z,y,f,v){var V=y!==null?y.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return V!==null?null:I(Z,y,""+f,v);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Dc:return f.key===V?a(Z,y,f,v):null;case Ns:return f.key===V?c(Z,y,f,v):null;case Rg:return V=f._init,m(Z,y,V(f._payload),v)}if(Ta(f)||Ga(f))return V!==null?null:C(Z,y,f,v,null);oC(Z,f)}return null}function p(Z,y,f,v,V){if(typeof v=="string"&&v!==""||typeof v=="number")return Z=Z.get(f)||null,I(y,Z,""+v,V);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Dc:return Z=Z.get(v.key===null?f:v.key)||null,a(y,Z,v,V);case Ns:return Z=Z.get(v.key===null?f:v.key)||null,c(y,Z,v,V);case Rg:var X=v._init;return p(Z,y,f,X(v._payload),V)}if(Ta(v)||Ga(v))return Z=Z.get(f)||null,C(y,Z,v,V,null);oC(y,v)}return null}function b(Z,y,f,v){for(var V=null,X=null,w=y,R=y=0,F=null;w!==null&&R<f.length;R++){w.index>R?(F=w,w=null):F=w.sibling;var x=m(Z,w,f[R],v);if(x===null){w===null&&(w=F);break}e&&w&&x.alternate===null&&t(Z,w),y=r(x,y,R),X===null?V=x:X.sibling=x,X=x,w=F}if(R===f.length)return n(Z,w),kt&&fr(Z,R),V;if(w===null){for(;R<f.length;R++)w=A(Z,f[R],v),w!==null&&(y=r(w,y,R),X===null?V=w:X.sibling=w,X=w);return kt&&fr(Z,R),V}for(w=o(Z,w);R<f.length;R++)F=p(w,Z,R,f[R],v),F!==null&&(e&&F.alternate!==null&&w.delete(F.key===null?R:F.key),y=r(F,y,R),X===null?V=F:X.sibling=F,X=F);return e&&w.forEach(function(M){return t(Z,M)}),kt&&fr(Z,R),V}function G(Z,y,f,v){var V=Ga(f);if(typeof V!="function")throw Error(oe(150));if(f=V.call(f),f==null)throw Error(oe(151));for(var X=V=null,w=y,R=y=0,F=null,x=f.next();w!==null&&!x.done;R++,x=f.next()){w.index>R?(F=w,w=null):F=w.sibling;var M=m(Z,w,x.value,v);if(M===null){w===null&&(w=F);break}e&&w&&M.alternate===null&&t(Z,w),y=r(M,y,R),X===null?V=M:X.sibling=M,X=M,w=F}if(x.done)return n(Z,w),kt&&fr(Z,R),V;if(w===null){for(;!x.done;R++,x=f.next())x=A(Z,x.value,v),x!==null&&(y=r(x,y,R),X===null?V=x:X.sibling=x,X=x);return kt&&fr(Z,R),V}for(w=o(Z,w);!x.done;R++,x=f.next())x=p(w,Z,R,x.value,v),x!==null&&(e&&x.alternate!==null&&w.delete(x.key===null?R:x.key),y=r(x,y,R),X===null?V=x:X.sibling=x,X=x);return e&&w.forEach(function(Q){return t(Z,Q)}),kt&&fr(Z,R),V}function W(Z,y,f,v){if(typeof f=="object"&&f!==null&&f.type===Fs&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Dc:e:{for(var V=f.key,X=y;X!==null;){if(X.key===V){if(V=f.type,V===Fs){if(X.tag===7){n(Z,X.sibling),y=i(X,f.props.children),y.return=Z,Z=y;break e}}else if(X.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Rg&&_y(V)===X.type){n(Z,X.sibling),y=i(X,f.props),y.ref=Va(Z,X,f),y.return=Z,Z=y;break e}n(Z,X);break}else t(Z,X);X=X.sibling}f.type===Fs?(y=Nr(f.props.children,Z.mode,v,f.key),y.return=Z,Z=y):(v=XC(f.type,f.key,f.props,null,Z.mode,v),v.ref=Va(Z,y,f),v.return=Z,Z=v)}return s(Z);case Ns:e:{for(X=f.key;y!==null;){if(y.key===X)if(y.tag===4&&y.stateNode.containerInfo===f.containerInfo&&y.stateNode.implementation===f.implementation){n(Z,y.sibling),y=i(y,f.children||[]),y.return=Z,Z=y;break e}else{n(Z,y);break}else t(Z,y);y=y.sibling}y=qm(f,Z.mode,v),y.return=Z,Z=y}return s(Z);case Rg:return X=f._init,W(Z,y,X(f._payload),v)}if(Ta(f))return b(Z,y,f,v);if(Ga(f))return G(Z,y,f,v);oC(Z,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,y!==null&&y.tag===6?(n(Z,y.sibling),y=i(y,f),y.return=Z,Z=y):(n(Z,y),y=Om(f,Z.mode,v),y.return=Z,Z=y),s(Z)):n(Z,y)}return W}var fl=EV(!0),MV=EV(!1),cd=$g(null),Cd=null,Ds=null,Ob=null;function qb(){Ob=Ds=Cd=null}function $b(e){var t=cd.current;Wt(cd),e._currentValue=t}function Cp(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function ll(e,t){Cd=e,Ob=Ds=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(io=!0),e.firstContext=null)}function qo(e){var t=e._currentValue;if(Ob!==e)if(e={context:e,memoizedValue:t,next:null},Ds===null){if(Cd===null)throw Error(oe(308));Ds=e,Cd.dependencies={lanes:0,firstContext:e}}else Ds=Ds.next=e;return t}var Vr=null;function ef(e){Vr===null?Vr=[e]:Vr.push(e)}function LV(e,t,n,o){var i=t.interleaved;return i===null?(n.next=n,ef(t)):(n.next=i.next,i.next=n),t.interleaved=n,dg(e,o)}function dg(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var kg=!1;function tf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zV(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ig(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lg(e,t,n){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,$e&2){var i=o.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),o.pending=t,dg(e,n)}return i=o.interleaved,i===null?(t.next=t,ef(o)):(t.next=i.next,i.next=t),o.interleaved=t,dg(e,n)}function vC(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,Eb(e,n)}}function Oy(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var i=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?i=r=s:r=r.next=s,n=n.next}while(n!==null);r===null?i=r=t:r=r.next=t}else i=r=t;n={baseState:o.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:o.shared,effects:o.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function dd(e,t,n,o){var i=e.updateQueue;kg=!1;var r=i.firstBaseUpdate,s=i.lastBaseUpdate,I=i.shared.pending;if(I!==null){i.shared.pending=null;var a=I,c=a.next;a.next=null,s===null?r=c:s.next=c,s=a;var C=e.alternate;C!==null&&(C=C.updateQueue,I=C.lastBaseUpdate,I!==s&&(I===null?C.firstBaseUpdate=c:I.next=c,C.lastBaseUpdate=a))}if(r!==null){var A=i.baseState;s=0,C=c=a=null,I=r;do{var m=I.lane,p=I.eventTime;if((o&m)===m){C!==null&&(C=C.next={eventTime:p,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var b=e,G=I;switch(m=t,p=n,G.tag){case 1:if(b=G.payload,typeof b=="function"){A=b.call(p,A,m);break e}A=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=G.payload,m=typeof b=="function"?b.call(p,A,m):b,m==null)break e;A=xt({},A,m);break e;case 2:kg=!0}}I.callback!==null&&I.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[I]:m.push(I))}else p={eventTime:p,lane:m,tag:I.tag,payload:I.payload,callback:I.callback,next:null},C===null?(c=C=p,a=A):C=C.next=p,s|=m;if(I=I.next,I===null){if(I=i.shared.pending,I===null)break;m=I,I=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(C===null&&(a=A),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=C,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else r===null&&(i.shared.lanes=0);Qr|=s,e.lanes=s,e.memoizedState=A}}function qy(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],i=o.callback;if(i!==null){if(o.callback=null,o=n,typeof i!="function")throw Error(oe(191,i));i.call(o)}}}var oc={},Yi=$g(oc),WI=$g(oc),VI=$g(oc);function Rr(e){if(e===oc)throw Error(oe(174));return e}function nf(e,t){switch(yt(VI,t),yt(WI,e),yt(Yi,oc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Dh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Dh(t,e)}Wt(Yi),yt(Yi,t)}function Zl(){Wt(Yi),Wt(WI),Wt(VI)}function TV(e){Rr(VI.current);var t=Rr(Yi.current),n=Dh(t,e.type);t!==n&&(yt(WI,e),yt(Yi,n))}function of(e){WI.current===e&&(Wt(Yi),Wt(WI))}var Jt=$g(0);function ud(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Um=[];function gf(){for(var e=0;e<Um.length;e++)Um[e]._workInProgressVersionPrimary=null;Um.length=0}var WC=hg.ReactCurrentDispatcher,Dm=hg.ReactCurrentBatchConfig,Dr=0,Ht=null,gn=null,dn=null,Ad=!1,gI=!1,RI=0,cx=0;function kn(){throw Error(oe(321))}function rf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!hi(e[n],t[n]))return!1;return!0}function sf(e,t,n,o,i,r){if(Dr=r,Ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,WC.current=e===null||e.memoizedState===null?Ax:mx,e=n(o,i),gI){r=0;do{if(gI=!1,RI=0,25<=r)throw Error(oe(301));r+=1,dn=gn=null,t.updateQueue=null,WC.current=hx,e=n(o,i)}while(gI)}if(WC.current=md,t=gn!==null&&gn.next!==null,Dr=0,dn=gn=Ht=null,Ad=!1,t)throw Error(oe(300));return e}function lf(){var e=RI!==0;return RI=0,e}function Wi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Ht.memoizedState=dn=e:dn=dn.next=e,dn}function $o(){if(gn===null){var e=Ht.alternate;e=e!==null?e.memoizedState:null}else e=gn.next;var t=dn===null?Ht.memoizedState:dn.next;if(t!==null)dn=t,gn=e;else{if(e===null)throw Error(oe(310));gn=e,e={memoizedState:gn.memoizedState,baseState:gn.baseState,baseQueue:gn.baseQueue,queue:gn.queue,next:null},dn===null?Ht.memoizedState=dn=e:dn=dn.next=e}return dn}function kI(e,t){return typeof t=="function"?t(e):t}function Qm(e){var t=$o(),n=t.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=e;var o=gn,i=o.baseQueue,r=n.pending;if(r!==null){if(i!==null){var s=i.next;i.next=r.next,r.next=s}o.baseQueue=i=r,n.pending=null}if(i!==null){r=i.next,o=o.baseState;var I=s=null,a=null,c=r;do{var C=c.lane;if((Dr&C)===C)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),o=c.hasEagerState?c.eagerState:e(o,c.action);else{var A={lane:C,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(I=a=A,s=o):a=a.next=A,Ht.lanes|=C,Qr|=C}c=c.next}while(c!==null&&c!==r);a===null?s=o:a.next=I,hi(o,t.memoizedState)||(io=!0),t.memoizedState=o,t.baseState=s,t.baseQueue=a,n.lastRenderedState=o}if(e=n.interleaved,e!==null){i=e;do r=i.lane,Ht.lanes|=r,Qr|=r,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Pm(e){var t=$o(),n=t.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=e;var o=n.dispatch,i=n.pending,r=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do r=e(r,s.action),s=s.next;while(s!==i);hi(r,t.memoizedState)||(io=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,o]}function UV(){}function DV(e,t){var n=Ht,o=$o(),i=t(),r=!hi(o.memoizedState,i);if(r&&(o.memoizedState=i,io=!0),o=o.queue,af(jV.bind(null,n,o,e),[e]),o.getSnapshot!==t||r||dn!==null&&dn.memoizedState.tag&1){if(n.flags|=2048,wI(9,PV.bind(null,n,o,i,t),void 0,null),mn===null)throw Error(oe(349));Dr&30||QV(n,t,i)}return i}function QV(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ht.updateQueue,t===null?(t={lastEffect:null,stores:null},Ht.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function PV(e,t,n,o){t.value=n,t.getSnapshot=o,_V(t)&&OV(e)}function jV(e,t,n){return n(function(){_V(t)&&OV(e)})}function _V(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!hi(e,n)}catch{return!0}}function OV(e){var t=dg(e,1);t!==null&&Ai(t,e,1,-1)}function $y(e){var t=Wi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kI,lastRenderedState:e},t.queue=e,e=e.dispatch=ux.bind(null,Ht,e),[t.memoizedState,e]}function wI(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},t=Ht.updateQueue,t===null?(t={lastEffect:null,stores:null},Ht.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e)),e}function qV(){return $o().memoizedState}function VC(e,t,n,o){var i=Wi();Ht.flags|=e,i.memoizedState=wI(1|t,n,void 0,o===void 0?null:o)}function du(e,t,n,o){var i=$o();o=o===void 0?null:o;var r=void 0;if(gn!==null){var s=gn.memoizedState;if(r=s.destroy,o!==null&&rf(o,s.deps)){i.memoizedState=wI(t,n,r,o);return}}Ht.flags|=e,i.memoizedState=wI(1|t,n,r,o)}function eG(e,t){return VC(8390656,8,e,t)}function af(e,t){return du(2048,8,e,t)}function $V(e,t){return du(4,2,e,t)}function eR(e,t){return du(4,4,e,t)}function tR(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nR(e,t,n){return n=n!=null?n.concat([e]):null,du(4,4,tR.bind(null,t,e),n)}function If(){}function oR(e,t){var n=$o();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&rf(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function iR(e,t){var n=$o();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&rf(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function gR(e,t,n){return Dr&21?(hi(n,t)||(n=IV(),Ht.lanes|=n,Qr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,io=!0),e.memoizedState=n)}function Cx(e,t){var n=ct;ct=n!==0&&4>n?n:4,e(!0);var o=Dm.transition;Dm.transition={};try{e(!1),t()}finally{ct=n,Dm.transition=o}}function rR(){return $o().memoizedState}function dx(e,t,n){var o=Tg(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},sR(e))lR(t,n);else if(n=LV(e,t,n,o),n!==null){var i=jn();Ai(n,e,o,i),aR(n,t,o)}}function ux(e,t,n){var o=Tg(e),i={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(sR(e))lR(t,i);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var s=t.lastRenderedState,I=r(s,n);if(i.hasEagerState=!0,i.eagerState=I,hi(I,s)){var a=t.interleaved;a===null?(i.next=i,ef(t)):(i.next=a.next,a.next=i),t.interleaved=i;return}}catch{}finally{}n=LV(e,t,i,o),n!==null&&(i=jn(),Ai(n,e,o,i),aR(n,t,o))}}function sR(e){var t=e.alternate;return e===Ht||t!==null&&t===Ht}function lR(e,t){gI=Ad=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function aR(e,t,n){if(n&4194240){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,Eb(e,n)}}var md={readContext:qo,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useInsertionEffect:kn,useLayoutEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useMutableSource:kn,useSyncExternalStore:kn,useId:kn,unstable_isNewReconciler:!1},Ax={readContext:qo,useCallback:function(e,t){return Wi().memoizedState=[e,t===void 0?null:t],e},useContext:qo,useEffect:eG,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,VC(4194308,4,tR.bind(null,t,e),n)},useLayoutEffect:function(e,t){return VC(4194308,4,e,t)},useInsertionEffect:function(e,t){return VC(4,2,e,t)},useMemo:function(e,t){var n=Wi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=Wi();return t=n!==void 0?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=dx.bind(null,Ht,e),[o.memoizedState,e]},useRef:function(e){var t=Wi();return e={current:e},t.memoizedState=e},useState:$y,useDebugValue:If,useDeferredValue:function(e){return Wi().memoizedState=e},useTransition:function(){var e=$y(!1),t=e[0];return e=Cx.bind(null,e[1]),Wi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=Ht,i=Wi();if(kt){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=t(),mn===null)throw Error(oe(349));Dr&30||QV(o,t,n)}i.memoizedState=n;var r={value:n,getSnapshot:t};return i.queue=r,eG(jV.bind(null,o,r,e),[e]),o.flags|=2048,wI(9,PV.bind(null,o,r,n,t),void 0,null),n},useId:function(){var e=Wi(),t=mn.identifierPrefix;if(kt){var n=ng,o=tg;n=(o&~(1<<32-ui(o)-1)).toString(32)+n,t=":"+t+"R"+n,n=RI++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=cx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mx={readContext:qo,useCallback:oR,useContext:qo,useEffect:af,useImperativeHandle:nR,useInsertionEffect:$V,useLayoutEffect:eR,useMemo:iR,useReducer:Qm,useRef:qV,useState:function(){return Qm(kI)},useDebugValue:If,useDeferredValue:function(e){var t=$o();return gR(t,gn.memoizedState,e)},useTransition:function(){var e=Qm(kI)[0],t=$o().memoizedState;return[e,t]},useMutableSource:UV,useSyncExternalStore:DV,useId:rR,unstable_isNewReconciler:!1},hx={readContext:qo,useCallback:oR,useContext:qo,useEffect:af,useImperativeHandle:nR,useInsertionEffect:$V,useLayoutEffect:eR,useMemo:iR,useReducer:Pm,useRef:qV,useState:function(){return Pm(kI)},useDebugValue:If,useDeferredValue:function(e){var t=$o();return gn===null?t.memoizedState=e:gR(t,gn.memoizedState,e)},useTransition:function(){var e=Pm(kI)[0],t=$o().memoizedState;return[e,t]},useMutableSource:UV,useSyncExternalStore:DV,useId:rR,unstable_isNewReconciler:!1};function Ii(e,t){if(e&&e.defaultProps){t=xt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function dp(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:xt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var uu={isMounted:function(e){return(e=e._reactInternals)?ns(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=jn(),i=Tg(e),r=ig(o,i);r.payload=t,n!=null&&(r.callback=n),t=Lg(e,r,i),t!==null&&(Ai(t,e,i,o),vC(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=jn(),i=Tg(e),r=ig(o,i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Lg(e,r,i),t!==null&&(Ai(t,e,i,o),vC(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jn(),o=Tg(e),i=ig(n,o);i.tag=2,t!=null&&(i.callback=t),t=Lg(e,i,o),t!==null&&(Ai(t,e,o,n),vC(t,e,o))}};function tG(e,t,n,o,i,r,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,r,s):t.prototype&&t.prototype.isPureReactComponent?!GI(n,o)||!GI(i,r):!0}function IR(e,t,n){var o=!1,i=Qg,r=t.contextType;return typeof r=="object"&&r!==null?r=qo(r):(i=so(t)?Tr:Kn.current,o=t.contextTypes,r=(o=o!=null)?pl(e,i):Qg),t=new t(n,r),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=uu,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=r),t}function nG(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&uu.enqueueReplaceState(t,t.state,null)}function up(e,t,n,o){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},tf(e);var r=t.contextType;typeof r=="object"&&r!==null?i.context=qo(r):(r=so(t)?Tr:Kn.current,i.context=pl(e,r)),i.state=e.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(dp(e,t,r,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&uu.enqueueReplaceState(i,i.state,null),dd(e,n,i,o),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function yl(e,t){try{var n="",o=t;do n+=UY(o),o=o.return;while(o);var i=n}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:e,source:t,stack:i,digest:null}}function jm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ap(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var px=typeof WeakMap=="function"?WeakMap:Map;function cR(e,t,n){n=ig(-1,n),n.tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){pd||(pd=!0,Sp=o),Ap(e,t)},n}function CR(e,t,n){n=ig(-1,n),n.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var i=t.value;n.payload=function(){return o(i)},n.callback=function(){Ap(e,t)}}var r=e.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){Ap(e,t),typeof o!="function"&&(zg===null?zg=new Set([this]):zg.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function oG(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new px;var i=new Set;o.set(t,i)}else i=o.get(t),i===void 0&&(i=new Set,o.set(t,i));i.has(n)||(i.add(n),e=Xx.bind(null,e,t,n),t.then(e,e))}function iG(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function gG(e,t,n,o,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ig(-1,1),t.tag=2,Lg(n,t,1))),n.lanes|=1),e)}var bx=hg.ReactCurrentOwner,io=!1;function Qn(e,t,n,o){t.child=e===null?MV(t,null,n,o):fl(t,e.child,n,o)}function rG(e,t,n,o,i){n=n.render;var r=t.ref;return ll(t,i),o=sf(e,t,n,o,r,i),n=lf(),e!==null&&!io?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ug(e,t,i)):(kt&&n&&Pb(t),t.flags|=1,Qn(e,t,o,i),t.child)}function sG(e,t,n,o,i){if(e===null){var r=n.type;return typeof r=="function"&&!pf(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=r,dR(e,t,r,o,i)):(e=XC(n.type,null,o,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!(e.lanes&i)){var s=r.memoizedProps;if(n=n.compare,n=n!==null?n:GI,n(s,o)&&e.ref===t.ref)return ug(e,t,i)}return t.flags|=1,e=Ug(r,o),e.ref=t.ref,e.return=t,t.child=e}function dR(e,t,n,o,i){if(e!==null){var r=e.memoizedProps;if(GI(r,o)&&e.ref===t.ref)if(io=!1,t.pendingProps=o=r,(e.lanes&i)!==0)e.flags&131072&&(io=!0);else return t.lanes=e.lanes,ug(e,t,i)}return mp(e,t,n,o,i)}function uR(e,t,n){var o=t.pendingProps,i=o.children,r=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt(Ps,bo),bo|=n;else{if(!(n&1073741824))return e=r!==null?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,yt(Ps,bo),bo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=r!==null?r.baseLanes:n,yt(Ps,bo),bo|=o}else r!==null?(o=r.baseLanes|n,t.memoizedState=null):o=n,yt(Ps,bo),bo|=o;return Qn(e,t,i,n),t.child}function AR(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function mp(e,t,n,o,i){var r=so(n)?Tr:Kn.current;return r=pl(t,r),ll(t,i),n=sf(e,t,n,o,r,i),o=lf(),e!==null&&!io?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ug(e,t,i)):(kt&&o&&Pb(t),t.flags|=1,Qn(e,t,n,i),t.child)}function lG(e,t,n,o,i){if(so(n)){var r=!0;ld(t)}else r=!1;if(ll(t,i),t.stateNode===null)RC(e,t),IR(t,n,o),up(t,n,o,i),o=!0;else if(e===null){var s=t.stateNode,I=t.memoizedProps;s.props=I;var a=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=qo(c):(c=so(n)?Tr:Kn.current,c=pl(t,c));var C=n.getDerivedStateFromProps,A=typeof C=="function"||typeof s.getSnapshotBeforeUpdate=="function";A||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(I!==o||a!==c)&&nG(t,s,o,c),kg=!1;var m=t.memoizedState;s.state=m,dd(t,o,s,i),a=t.memoizedState,I!==o||m!==a||ro.current||kg?(typeof C=="function"&&(dp(t,n,C,o),a=t.memoizedState),(I=kg||tG(t,n,I,o,m,a,c))?(A||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=a),s.props=o,s.state=a,s.context=c,o=I):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{s=t.stateNode,zV(e,t),I=t.memoizedProps,c=t.type===t.elementType?I:Ii(t.type,I),s.props=c,A=t.pendingProps,m=s.context,a=n.contextType,typeof a=="object"&&a!==null?a=qo(a):(a=so(n)?Tr:Kn.current,a=pl(t,a));var p=n.getDerivedStateFromProps;(C=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(I!==A||m!==a)&&nG(t,s,o,a),kg=!1,m=t.memoizedState,s.state=m,dd(t,o,s,i);var b=t.memoizedState;I!==A||m!==b||ro.current||kg?(typeof p=="function"&&(dp(t,n,p,o),b=t.memoizedState),(c=kg||tG(t,n,c,o,m,b,a)||!1)?(C||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(o,b,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(o,b,a)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||I===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||I===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=b),s.props=o,s.state=b,s.context=a,o=c):(typeof s.componentDidUpdate!="function"||I===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||I===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),o=!1)}return hp(e,t,n,o,r,i)}function hp(e,t,n,o,i,r){AR(e,t);var s=(t.flags&128)!==0;if(!o&&!s)return i&&Qy(t,n,!1),ug(e,t,r);o=t.stateNode,bx.current=t;var I=s&&typeof n.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&s?(t.child=fl(t,e.child,null,r),t.child=fl(t,null,I,r)):Qn(e,t,I,r),t.memoizedState=o.state,i&&Qy(t,n,!0),t.child}function mR(e){var t=e.stateNode;t.pendingContext?Dy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Dy(e,t.context,!1),nf(e,t.containerInfo)}function aG(e,t,n,o,i){return bl(),_b(i),t.flags|=256,Qn(e,t,n,o),t.child}var pp={dehydrated:null,treeContext:null,retryLane:0};function bp(e){return{baseLanes:e,cachePool:null,transitions:null}}function hR(e,t,n){var o=t.pendingProps,i=Jt.current,r=!1,s=(t.flags&128)!==0,I;if((I=s)||(I=e!==null&&e.memoizedState===null?!1:(i&2)!==0),I?(r=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),yt(Jt,i&1),e===null)return cp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=o.children,e=o.fallback,r?(o=t.mode,r=t.child,s={mode:"hidden",children:s},!(o&1)&&r!==null?(r.childLanes=0,r.pendingProps=s):r=hu(s,o,0,null),e=Nr(e,o,n,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=bp(n),t.memoizedState=pp,e):cf(t,s));if(i=e.memoizedState,i!==null&&(I=i.dehydrated,I!==null))return fx(e,t,s,o,I,i,n);if(r){r=o.fallback,s=t.mode,i=e.child,I=i.sibling;var a={mode:"hidden",children:o.children};return!(s&1)&&t.child!==i?(o=t.child,o.childLanes=0,o.pendingProps=a,t.deletions=null):(o=Ug(i,a),o.subtreeFlags=i.subtreeFlags&14680064),I!==null?r=Ug(I,r):(r=Nr(r,s,n,null),r.flags|=2),r.return=t,o.return=t,o.sibling=r,t.child=o,o=r,r=t.child,s=e.child.memoizedState,s=s===null?bp(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},r.memoizedState=s,r.childLanes=e.childLanes&~n,t.memoizedState=pp,o}return r=e.child,e=r.sibling,o=Ug(r,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=n),o.return=t,o.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function cf(e,t){return t=hu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function iC(e,t,n,o){return o!==null&&_b(o),fl(t,e.child,null,n),e=cf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fx(e,t,n,o,i,r,s){if(n)return t.flags&256?(t.flags&=-257,o=jm(Error(oe(422))),iC(e,t,s,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(r=o.fallback,i=t.mode,o=hu({mode:"visible",children:o.children},i,0,null),r=Nr(r,i,s,null),r.flags|=2,o.return=t,r.return=t,o.sibling=r,t.child=o,t.mode&1&&fl(t,e.child,null,s),t.child.memoizedState=bp(s),t.memoizedState=pp,r);if(!(t.mode&1))return iC(e,t,s,null);if(i.data==="$!"){if(o=i.nextSibling&&i.nextSibling.dataset,o)var I=o.dgst;return o=I,r=Error(oe(419)),o=jm(r,o,void 0),iC(e,t,s,o)}if(I=(s&e.childLanes)!==0,io||I){if(o=mn,o!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(o.suspendedLanes|s)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,dg(e,i),Ai(o,e,i,-1))}return hf(),o=jm(Error(oe(421))),iC(e,t,s,o)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Jx.bind(null,e),i._reactRetry=t,null):(e=r.treeContext,Go=Mg(i.nextSibling),Bo=t,kt=!0,di=null,e!==null&&(Do[Qo++]=tg,Do[Qo++]=ng,Do[Qo++]=Ur,tg=e.id,ng=e.overflow,Ur=t),t=cf(t,o.children),t.flags|=4096,t)}function IG(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Cp(e.return,t,n)}function _m(e,t,n,o,i){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:i}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=o,r.tail=n,r.tailMode=i)}function pR(e,t,n){var o=t.pendingProps,i=o.revealOrder,r=o.tail;if(Qn(e,t,o.children,n),o=Jt.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&IG(e,n,t);else if(e.tag===19)IG(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(yt(Jt,o),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&ud(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),_m(t,!1,i,n,r);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&ud(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}_m(t,!0,n,null,r);break;case"together":_m(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function RC(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ug(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Qr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(oe(153));if(t.child!==null){for(e=t.child,n=Ug(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ug(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Zx(e,t,n){switch(t.tag){case 3:mR(t),bl();break;case 5:TV(t);break;case 1:so(t.type)&&ld(t);break;case 4:nf(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,i=t.memoizedProps.value;yt(cd,o._currentValue),o._currentValue=i;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(yt(Jt,Jt.current&1),t.flags|=128,null):n&t.child.childLanes?hR(e,t,n):(yt(Jt,Jt.current&1),e=ug(e,t,n),e!==null?e.sibling:null);yt(Jt,Jt.current&1);break;case 19:if(o=(n&t.childLanes)!==0,e.flags&128){if(o)return pR(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),yt(Jt,Jt.current),o)break;return null;case 22:case 23:return t.lanes=0,uR(e,t,n)}return ug(e,t,n)}var bR,fp,fR,ZR;bR=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fp=function(){};fR=function(e,t,n,o){var i=e.memoizedProps;if(i!==o){e=t.stateNode,Rr(Yi.current);var r=null;switch(n){case"input":i=Lh(e,i),o=Lh(e,o),r=[];break;case"select":i=xt({},i,{value:void 0}),o=xt({},o,{value:void 0}),r=[];break;case"textarea":i=Uh(e,i),o=Uh(e,o),r=[];break;default:typeof i.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=rd)}Qh(n,o);var s;n=null;for(c in i)if(!o.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var I=i[c];for(s in I)I.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(mI.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in o){var a=o[c];if(I=i!=null?i[c]:void 0,o.hasOwnProperty(c)&&a!==I&&(a!=null||I!=null))if(c==="style")if(I){for(s in I)!I.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in a)a.hasOwnProperty(s)&&I[s]!==a[s]&&(n||(n={}),n[s]=a[s])}else n||(r||(r=[]),r.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,I=I?I.__html:void 0,a!=null&&I!==a&&(r=r||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(r=r||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(mI.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&St("scroll",e),r||I===a||(r=[])):(r=r||[]).push(c,a))}n&&(r=r||[]).push("style",n);var c=r;(t.updateQueue=c)&&(t.flags|=4)}};ZR=function(e,t,n,o){n!==o&&(t.flags|=4)};function Ra(e,t){if(!kt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function wn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,o|=i.subtreeFlags&14680064,o|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,o|=i.subtreeFlags,o|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function yx(e,t,n){var o=t.pendingProps;switch(jb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(t),null;case 1:return so(t.type)&&sd(),wn(t),null;case 3:return o=t.stateNode,Zl(),Wt(ro),Wt(Kn),gf(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(nC(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,di!==null&&(Vp(di),di=null))),fp(e,t),wn(t),null;case 5:of(t);var i=Rr(VI.current);if(n=t.type,e!==null&&t.stateNode!=null)fR(e,t,n,o,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(oe(166));return wn(t),null}if(e=Rr(Yi.current),nC(t)){o=t.stateNode,n=t.type;var r=t.memoizedProps;switch(o[Xi]=t,o[vI]=r,e=(t.mode&1)!==0,n){case"dialog":St("cancel",o),St("close",o);break;case"iframe":case"object":case"embed":St("load",o);break;case"video":case"audio":for(i=0;i<Da.length;i++)St(Da[i],o);break;case"source":St("error",o);break;case"img":case"image":case"link":St("error",o),St("load",o);break;case"details":St("toggle",o);break;case"input":by(o,r),St("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!r.multiple},St("invalid",o);break;case"textarea":Zy(o,r),St("invalid",o)}Qh(n,r),i=null;for(var s in r)if(r.hasOwnProperty(s)){var I=r[s];s==="children"?typeof I=="string"?o.textContent!==I&&(r.suppressHydrationWarning!==!0&&tC(o.textContent,I,e),i=["children",I]):typeof I=="number"&&o.textContent!==""+I&&(r.suppressHydrationWarning!==!0&&tC(o.textContent,I,e),i=["children",""+I]):mI.hasOwnProperty(s)&&I!=null&&s==="onScroll"&&St("scroll",o)}switch(n){case"input":Qc(o),fy(o,r,!0);break;case"textarea":Qc(o),yy(o);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(o.onclick=rd)}o=i,t.updateQueue=o,o!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=jW(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=s.createElement(n,{is:o.is}):(e=s.createElement(n),n==="select"&&(s=e,o.multiple?s.multiple=!0:o.size&&(s.size=o.size))):e=s.createElementNS(e,n),e[Xi]=t,e[vI]=o,bR(e,t,!1,!1),t.stateNode=e;e:{switch(s=Ph(n,o),n){case"dialog":St("cancel",e),St("close",e),i=o;break;case"iframe":case"object":case"embed":St("load",e),i=o;break;case"video":case"audio":for(i=0;i<Da.length;i++)St(Da[i],e);i=o;break;case"source":St("error",e),i=o;break;case"img":case"image":case"link":St("error",e),St("load",e),i=o;break;case"details":St("toggle",e),i=o;break;case"input":by(e,o),i=Lh(e,o),St("invalid",e);break;case"option":i=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},i=xt({},o,{value:void 0}),St("invalid",e);break;case"textarea":Zy(e,o),i=Uh(e,o),St("invalid",e);break;default:i=o}Qh(n,i),I=i;for(r in I)if(I.hasOwnProperty(r)){var a=I[r];r==="style"?qW(e,a):r==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&_W(e,a)):r==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&hI(e,a):typeof a=="number"&&hI(e,""+a):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(mI.hasOwnProperty(r)?a!=null&&r==="onScroll"&&St("scroll",e):a!=null&&Yb(e,r,a,s))}switch(n){case"input":Qc(e),fy(e,o,!1);break;case"textarea":Qc(e),yy(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Dg(o.value));break;case"select":e.multiple=!!o.multiple,r=o.value,r!=null?il(e,!!o.multiple,r,!1):o.defaultValue!=null&&il(e,!!o.multiple,o.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=rd)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return wn(t),null;case 6:if(e&&t.stateNode!=null)ZR(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(oe(166));if(n=Rr(VI.current),Rr(Yi.current),nC(t)){if(o=t.stateNode,n=t.memoizedProps,o[Xi]=t,(r=o.nodeValue!==n)&&(e=Bo,e!==null))switch(e.tag){case 3:tC(o.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&tC(o.nodeValue,n,(e.mode&1)!==0)}r&&(t.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[Xi]=t,t.stateNode=o}return wn(t),null;case 13:if(Wt(Jt),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(kt&&Go!==null&&t.mode&1&&!(t.flags&128))KV(),bl(),t.flags|=98560,r=!1;else if(r=nC(t),o!==null&&o.dehydrated!==null){if(e===null){if(!r)throw Error(oe(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(oe(317));r[Xi]=t}else bl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;wn(t),r=!1}else di!==null&&(Vp(di),di=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||Jt.current&1?rn===0&&(rn=3):hf())),t.updateQueue!==null&&(t.flags|=4),wn(t),null);case 4:return Zl(),fp(e,t),e===null&&BI(t.stateNode.containerInfo),wn(t),null;case 10:return $b(t.type._context),wn(t),null;case 17:return so(t.type)&&sd(),wn(t),null;case 19:if(Wt(Jt),r=t.memoizedState,r===null)return wn(t),null;if(o=(t.flags&128)!==0,s=r.rendering,s===null)if(o)Ra(r,!1);else{if(rn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=ud(e),s!==null){for(t.flags|=128,Ra(r,!1),o=s.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;n!==null;)r=n,e=o,r.flags&=14680066,s=r.alternate,s===null?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,r.type=s.type,e=s.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return yt(Jt,Jt.current&1|2),t.child}e=e.sibling}r.tail!==null&&Ut()>Gl&&(t.flags|=128,o=!0,Ra(r,!1),t.lanes=4194304)}else{if(!o)if(e=ud(s),e!==null){if(t.flags|=128,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ra(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!kt)return wn(t),null}else 2*Ut()-r.renderingStartTime>Gl&&n!==1073741824&&(t.flags|=128,o=!0,Ra(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(n=r.last,n!==null?n.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Ut(),t.sibling=null,n=Jt.current,yt(Jt,o?n&1|2:n&1),t):(wn(t),null);case 22:case 23:return mf(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?bo&1073741824&&(wn(t),t.subtreeFlags&6&&(t.flags|=8192)):wn(t),null;case 24:return null;case 25:return null}throw Error(oe(156,t.tag))}function Gx(e,t){switch(jb(t),t.tag){case 1:return so(t.type)&&sd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zl(),Wt(ro),Wt(Kn),gf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return of(t),null;case 13:if(Wt(Jt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(oe(340));bl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Wt(Jt),null;case 4:return Zl(),null;case 10:return $b(t.type._context),null;case 22:case 23:return mf(),null;case 24:return null;default:return null}}var gC=!1,xn=!1,Bx=typeof WeakSet=="function"?WeakSet:Set,me=null;function Qs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){Et(e,t,o)}else n.current=null}function Zp(e,t,n){try{n()}catch(o){Et(e,t,o)}}var cG=!1;function Sx(e,t){if(ip=od,e=vV(),Qb(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var i=o.anchorOffset,r=o.focusNode;o=o.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var s=0,I=-1,a=-1,c=0,C=0,A=e,m=null;t:for(;;){for(var p;A!==n||i!==0&&A.nodeType!==3||(I=s+i),A!==r||o!==0&&A.nodeType!==3||(a=s+o),A.nodeType===3&&(s+=A.nodeValue.length),(p=A.firstChild)!==null;)m=A,A=p;for(;;){if(A===e)break t;if(m===n&&++c===i&&(I=s),m===r&&++C===o&&(a=s),(p=A.nextSibling)!==null)break;A=m,m=A.parentNode}A=p}n=I===-1||a===-1?null:{start:I,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(gp={focusedElem:e,selectionRange:n},od=!1,me=t;me!==null;)if(t=me,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,me=e;else for(;me!==null;){t=me;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var G=b.memoizedProps,W=b.memoizedState,Z=t.stateNode,y=Z.getSnapshotBeforeUpdate(t.elementType===t.type?G:Ii(t.type,G),W);Z.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(v){Et(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,me=e;break}me=t.return}return b=cG,cG=!1,b}function rI(e,t,n){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var i=o=o.next;do{if((i.tag&e)===e){var r=i.destroy;i.destroy=void 0,r!==void 0&&Zp(t,n,r)}i=i.next}while(i!==o)}}function Au(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function yp(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function yR(e){var t=e.alternate;t!==null&&(e.alternate=null,yR(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xi],delete t[vI],delete t[lp],delete t[sx],delete t[lx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function GR(e){return e.tag===5||e.tag===3||e.tag===4}function CG(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||GR(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gp(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=rd));else if(o!==4&&(e=e.child,e!==null))for(Gp(e,t,n),e=e.sibling;e!==null;)Gp(e,t,n),e=e.sibling}function Bp(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(Bp(e,t,n),e=e.sibling;e!==null;)Bp(e,t,n),e=e.sibling}var yn=null,ci=!1;function yg(e,t,n){for(n=n.child;n!==null;)BR(e,t,n),n=n.sibling}function BR(e,t,n){if(Ji&&typeof Ji.onCommitFiberUnmount=="function")try{Ji.onCommitFiberUnmount(su,n)}catch{}switch(n.tag){case 5:xn||Qs(n,t);case 6:var o=yn,i=ci;yn=null,yg(e,t,n),yn=o,ci=i,yn!==null&&(ci?(e=yn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):yn.removeChild(n.stateNode));break;case 18:yn!==null&&(ci?(e=yn,n=n.stateNode,e.nodeType===8?zm(e.parentNode,n):e.nodeType===1&&zm(e,n),ZI(e)):zm(yn,n.stateNode));break;case 4:o=yn,i=ci,yn=n.stateNode.containerInfo,ci=!0,yg(e,t,n),yn=o,ci=i;break;case 0:case 11:case 14:case 15:if(!xn&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){i=o=o.next;do{var r=i,s=r.destroy;r=r.tag,s!==void 0&&(r&2||r&4)&&Zp(n,t,s),i=i.next}while(i!==o)}yg(e,t,n);break;case 1:if(!xn&&(Qs(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(I){Et(n,t,I)}yg(e,t,n);break;case 21:yg(e,t,n);break;case 22:n.mode&1?(xn=(o=xn)||n.memoizedState!==null,yg(e,t,n),xn=o):yg(e,t,n);break;default:yg(e,t,n)}}function dG(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Bx),t.forEach(function(o){var i=Yx.bind(null,e,o);n.has(o)||(n.add(o),o.then(i,i))})}}function ai(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var i=n[o];try{var r=e,s=t,I=s;e:for(;I!==null;){switch(I.tag){case 5:yn=I.stateNode,ci=!1;break e;case 3:yn=I.stateNode.containerInfo,ci=!0;break e;case 4:yn=I.stateNode.containerInfo,ci=!0;break e}I=I.return}if(yn===null)throw Error(oe(160));BR(r,s,i),yn=null,ci=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){Et(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)SR(t,e),t=t.sibling}function SR(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ai(t,e),vi(e),o&4){try{rI(3,e,e.return),Au(3,e)}catch(G){Et(e,e.return,G)}try{rI(5,e,e.return)}catch(G){Et(e,e.return,G)}}break;case 1:ai(t,e),vi(e),o&512&&n!==null&&Qs(n,n.return);break;case 5:if(ai(t,e),vi(e),o&512&&n!==null&&Qs(n,n.return),e.flags&32){var i=e.stateNode;try{hI(i,"")}catch(G){Et(e,e.return,G)}}if(o&4&&(i=e.stateNode,i!=null)){var r=e.memoizedProps,s=n!==null?n.memoizedProps:r,I=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{I==="input"&&r.type==="radio"&&r.name!=null&&QW(i,r),Ph(I,s);var c=Ph(I,r);for(s=0;s<a.length;s+=2){var C=a[s],A=a[s+1];C==="style"?qW(i,A):C==="dangerouslySetInnerHTML"?_W(i,A):C==="children"?hI(i,A):Yb(i,C,A,c)}switch(I){case"input":zh(i,r);break;case"textarea":PW(i,r);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?il(i,!!r.multiple,p,!1):m!==!!r.multiple&&(r.defaultValue!=null?il(i,!!r.multiple,r.defaultValue,!0):il(i,!!r.multiple,r.multiple?[]:"",!1))}i[vI]=r}catch(G){Et(e,e.return,G)}}break;case 6:if(ai(t,e),vi(e),o&4){if(e.stateNode===null)throw Error(oe(162));i=e.stateNode,r=e.memoizedProps;try{i.nodeValue=r}catch(G){Et(e,e.return,G)}}break;case 3:if(ai(t,e),vi(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{ZI(t.containerInfo)}catch(G){Et(e,e.return,G)}break;case 4:ai(t,e),vi(e);break;case 13:ai(t,e),vi(e),i=e.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(uf=Ut())),o&4&&dG(e);break;case 22:if(C=n!==null&&n.memoizedState!==null,e.mode&1?(xn=(c=xn)||C,ai(t,e),xn=c):ai(t,e),vi(e),o&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!C&&e.mode&1)for(me=e,C=e.child;C!==null;){for(A=me=C;me!==null;){switch(m=me,p=m.child,m.tag){case 0:case 11:case 14:case 15:rI(4,m,m.return);break;case 1:Qs(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){o=m,n=m.return;try{t=o,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(G){Et(o,n,G)}}break;case 5:Qs(m,m.return);break;case 22:if(m.memoizedState!==null){AG(A);continue}}p!==null?(p.return=m,me=p):AG(A)}C=C.sibling}e:for(C=null,A=e;;){if(A.tag===5){if(C===null){C=A;try{i=A.stateNode,c?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(I=A.stateNode,a=A.memoizedProps.style,s=a!=null&&a.hasOwnProperty("display")?a.display:null,I.style.display=OW("display",s))}catch(G){Et(e,e.return,G)}}}else if(A.tag===6){if(C===null)try{A.stateNode.nodeValue=c?"":A.memoizedProps}catch(G){Et(e,e.return,G)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===e)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;A.sibling===null;){if(A.return===null||A.return===e)break e;C===A&&(C=null),A=A.return}C===A&&(C=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:ai(t,e),vi(e),o&4&&dG(e);break;case 21:break;default:ai(t,e),vi(e)}}function vi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(GR(n)){var o=n;break e}n=n.return}throw Error(oe(160))}switch(o.tag){case 5:var i=o.stateNode;o.flags&32&&(hI(i,""),o.flags&=-33);var r=CG(e);Bp(e,r,i);break;case 3:case 4:var s=o.stateNode.containerInfo,I=CG(e);Gp(e,I,s);break;default:throw Error(oe(161))}}catch(a){Et(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vx(e,t,n){me=e,vR(e)}function vR(e,t,n){for(var o=(e.mode&1)!==0;me!==null;){var i=me,r=i.child;if(i.tag===22&&o){var s=i.memoizedState!==null||gC;if(!s){var I=i.alternate,a=I!==null&&I.memoizedState!==null||xn;I=gC;var c=xn;if(gC=s,(xn=a)&&!c)for(me=i;me!==null;)s=me,a=s.child,s.tag===22&&s.memoizedState!==null?mG(i):a!==null?(a.return=s,me=a):mG(i);for(;r!==null;)me=r,vR(r),r=r.sibling;me=i,gC=I,xn=c}uG(e)}else i.subtreeFlags&8772&&r!==null?(r.return=i,me=r):uG(e)}}function uG(e){for(;me!==null;){var t=me;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:xn||Au(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!xn)if(n===null)o.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ii(t.type,n.memoizedProps);o.componentDidUpdate(i,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&qy(t,r,o);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}qy(t,s,n)}break;case 5:var I=t.stateNode;if(n===null&&t.flags&4){n=I;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var C=c.memoizedState;if(C!==null){var A=C.dehydrated;A!==null&&ZI(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}xn||t.flags&512&&yp(t)}catch(m){Et(t,t.return,m)}}if(t===e){me=null;break}if(n=t.sibling,n!==null){n.return=t.return,me=n;break}me=t.return}}function AG(e){for(;me!==null;){var t=me;if(t===e){me=null;break}var n=t.sibling;if(n!==null){n.return=t.return,me=n;break}me=t.return}}function mG(e){for(;me!==null;){var t=me;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Au(4,t)}catch(a){Et(t,n,a)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var i=t.return;try{o.componentDidMount()}catch(a){Et(t,i,a)}}var r=t.return;try{yp(t)}catch(a){Et(t,r,a)}break;case 5:var s=t.return;try{yp(t)}catch(a){Et(t,s,a)}}}catch(a){Et(t,t.return,a)}if(t===e){me=null;break}var I=t.sibling;if(I!==null){I.return=t.return,me=I;break}me=t.return}}var Wx=Math.ceil,hd=hg.ReactCurrentDispatcher,Cf=hg.ReactCurrentOwner,_o=hg.ReactCurrentBatchConfig,$e=0,mn=null,tn=null,vn=0,bo=0,Ps=$g(0),rn=0,XI=null,Qr=0,mu=0,df=0,sI=null,oo=null,uf=0,Gl=1/0,Oi=null,pd=!1,Sp=null,zg=null,rC=!1,Yg=null,bd=0,lI=0,vp=null,kC=-1,wC=0;function jn(){return $e&6?Ut():kC!==-1?kC:kC=Ut()}function Tg(e){return e.mode&1?$e&2&&vn!==0?vn&-vn:Ix.transition!==null?(wC===0&&(wC=IV()),wC):(e=ct,e!==0||(e=window.event,e=e===void 0?16:hV(e.type)),e):1}function Ai(e,t,n,o){if(50<lI)throw lI=0,vp=null,Error(oe(185));ec(e,n,o),(!($e&2)||e!==mn)&&(e===mn&&(!($e&2)&&(mu|=n),rn===4&&Xg(e,vn)),lo(e,o),n===1&&$e===0&&!(t.mode&1)&&(Gl=Ut()+500,Cu&&er()))}function lo(e,t){var n=e.callbackNode;IH(e,t);var o=nd(e,e===mn?vn:0);if(o===0)n!==null&&Sy(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(n!=null&&Sy(n),t===1)e.tag===0?ax(hG.bind(null,e)):xV(hG.bind(null,e)),gx(function(){!($e&6)&&er()}),n=null;else{switch(cV(o)){case 1:n=Kb;break;case 4:n=lV;break;case 16:n=td;break;case 536870912:n=aV;break;default:n=td}n=YR(n,WR.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function WR(e,t){if(kC=-1,wC=0,$e&6)throw Error(oe(327));var n=e.callbackNode;if(al()&&e.callbackNode!==n)return null;var o=nd(e,e===mn?vn:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=fd(e,o);else{t=o;var i=$e;$e|=2;var r=RR();(mn!==e||vn!==t)&&(Oi=null,Gl=Ut()+500,xr(e,t));do try{kx();break}catch(I){VR(e,I)}while(!0);qb(),hd.current=r,$e=i,tn!==null?t=0:(mn=null,vn=0,t=rn)}if(t!==0){if(t===2&&(i=$h(e),i!==0&&(o=i,t=Wp(e,i))),t===1)throw n=XI,xr(e,0),Xg(e,o),lo(e,Ut()),n;if(t===6)Xg(e,o);else{if(i=e.current.alternate,!(o&30)&&!Vx(i)&&(t=fd(e,o),t===2&&(r=$h(e),r!==0&&(o=r,t=Wp(e,r))),t===1))throw n=XI,xr(e,0),Xg(e,o),lo(e,Ut()),n;switch(e.finishedWork=i,e.finishedLanes=o,t){case 0:case 1:throw Error(oe(345));case 2:Zr(e,oo,Oi);break;case 3:if(Xg(e,o),(o&130023424)===o&&(t=uf+500-Ut(),10<t)){if(nd(e,0)!==0)break;if(i=e.suspendedLanes,(i&o)!==o){jn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=sp(Zr.bind(null,e,oo,Oi),t);break}Zr(e,oo,Oi);break;case 4:if(Xg(e,o),(o&4194240)===o)break;for(t=e.eventTimes,i=-1;0<o;){var s=31-ui(o);r=1<<s,s=t[s],s>i&&(i=s),o&=~r}if(o=i,o=Ut()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Wx(o/1960))-o,10<o){e.timeoutHandle=sp(Zr.bind(null,e,oo,Oi),o);break}Zr(e,oo,Oi);break;case 5:Zr(e,oo,Oi);break;default:throw Error(oe(329))}}}return lo(e,Ut()),e.callbackNode===n?WR.bind(null,e):null}function Wp(e,t){var n=sI;return e.current.memoizedState.isDehydrated&&(xr(e,t).flags|=256),e=fd(e,t),e!==2&&(t=oo,oo=n,t!==null&&Vp(t)),e}function Vp(e){oo===null?oo=e:oo.push.apply(oo,e)}function Vx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var i=n[o],r=i.getSnapshot;i=i.value;try{if(!hi(r(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xg(e,t){for(t&=~df,t&=~mu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ui(t),o=1<<n;e[n]=-1,t&=~o}}function hG(e){if($e&6)throw Error(oe(327));al();var t=nd(e,0);if(!(t&1))return lo(e,Ut()),null;var n=fd(e,t);if(e.tag!==0&&n===2){var o=$h(e);o!==0&&(t=o,n=Wp(e,o))}if(n===1)throw n=XI,xr(e,0),Xg(e,t),lo(e,Ut()),n;if(n===6)throw Error(oe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Zr(e,oo,Oi),lo(e,Ut()),null}function Af(e,t){var n=$e;$e|=1;try{return e(t)}finally{$e=n,$e===0&&(Gl=Ut()+500,Cu&&er())}}function Pr(e){Yg!==null&&Yg.tag===0&&!($e&6)&&al();var t=$e;$e|=1;var n=_o.transition,o=ct;try{if(_o.transition=null,ct=1,e)return e()}finally{ct=o,_o.transition=n,$e=t,!($e&6)&&er()}}function mf(){bo=Ps.current,Wt(Ps)}function xr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ix(n)),tn!==null)for(n=tn.return;n!==null;){var o=n;switch(jb(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&sd();break;case 3:Zl(),Wt(ro),Wt(Kn),gf();break;case 5:of(o);break;case 4:Zl();break;case 13:Wt(Jt);break;case 19:Wt(Jt);break;case 10:$b(o.type._context);break;case 22:case 23:mf()}n=n.return}if(mn=e,tn=e=Ug(e.current,null),vn=bo=t,rn=0,XI=null,df=mu=Qr=0,oo=sI=null,Vr!==null){for(t=0;t<Vr.length;t++)if(n=Vr[t],o=n.interleaved,o!==null){n.interleaved=null;var i=o.next,r=n.pending;if(r!==null){var s=r.next;r.next=i,o.next=s}n.pending=o}Vr=null}return e}function VR(e,t){do{var n=tn;try{if(qb(),WC.current=md,Ad){for(var o=Ht.memoizedState;o!==null;){var i=o.queue;i!==null&&(i.pending=null),o=o.next}Ad=!1}if(Dr=0,dn=gn=Ht=null,gI=!1,RI=0,Cf.current=null,n===null||n.return===null){rn=1,XI=t,tn=null;break}e:{var r=e,s=n.return,I=n,a=t;if(t=vn,I.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,C=I,A=C.tag;if(!(C.mode&1)&&(A===0||A===11||A===15)){var m=C.alternate;m?(C.updateQueue=m.updateQueue,C.memoizedState=m.memoizedState,C.lanes=m.lanes):(C.updateQueue=null,C.memoizedState=null)}var p=iG(s);if(p!==null){p.flags&=-257,gG(p,s,I,r,t),p.mode&1&&oG(r,c,t),t=p,a=c;var b=t.updateQueue;if(b===null){var G=new Set;G.add(a),t.updateQueue=G}else b.add(a);break e}else{if(!(t&1)){oG(r,c,t),hf();break e}a=Error(oe(426))}}else if(kt&&I.mode&1){var W=iG(s);if(W!==null){!(W.flags&65536)&&(W.flags|=256),gG(W,s,I,r,t),_b(yl(a,I));break e}}r=a=yl(a,I),rn!==4&&(rn=2),sI===null?sI=[r]:sI.push(r),r=s;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var Z=cR(r,a,t);Oy(r,Z);break e;case 1:I=a;var y=r.type,f=r.stateNode;if(!(r.flags&128)&&(typeof y.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(zg===null||!zg.has(f)))){r.flags|=65536,t&=-t,r.lanes|=t;var v=CR(r,I,t);Oy(r,v);break e}}r=r.return}while(r!==null)}wR(n)}catch(V){t=V,tn===n&&n!==null&&(tn=n=n.return);continue}break}while(!0)}function RR(){var e=hd.current;return hd.current=md,e===null?md:e}function hf(){(rn===0||rn===3||rn===2)&&(rn=4),mn===null||!(Qr&268435455)&&!(mu&268435455)||Xg(mn,vn)}function fd(e,t){var n=$e;$e|=2;var o=RR();(mn!==e||vn!==t)&&(Oi=null,xr(e,t));do try{Rx();break}catch(i){VR(e,i)}while(!0);if(qb(),$e=n,hd.current=o,tn!==null)throw Error(oe(261));return mn=null,vn=0,rn}function Rx(){for(;tn!==null;)kR(tn)}function kx(){for(;tn!==null&&!tH();)kR(tn)}function kR(e){var t=JR(e.alternate,e,bo);e.memoizedProps=e.pendingProps,t===null?wR(e):tn=t,Cf.current=null}function wR(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Gx(n,t),n!==null){n.flags&=32767,tn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rn=6,tn=null;return}}else if(n=yx(n,t,bo),n!==null){tn=n;return}if(t=t.sibling,t!==null){tn=t;return}tn=t=e}while(t!==null);rn===0&&(rn=5)}function Zr(e,t,n){var o=ct,i=_o.transition;try{_o.transition=null,ct=1,wx(e,t,n,o)}finally{_o.transition=i,ct=o}return null}function wx(e,t,n,o){do al();while(Yg!==null);if($e&6)throw Error(oe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(oe(177));e.callbackNode=null,e.callbackPriority=0;var r=n.lanes|n.childLanes;if(cH(e,r),e===mn&&(tn=mn=null,vn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rC||(rC=!0,YR(td,function(){return al(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=_o.transition,_o.transition=null;var s=ct;ct=1;var I=$e;$e|=4,Cf.current=null,Sx(e,n),SR(n,e),OH(gp),od=!!ip,gp=ip=null,e.current=n,vx(n),nH(),$e=I,ct=s,_o.transition=r}else e.current=n;if(rC&&(rC=!1,Yg=e,bd=i),r=e.pendingLanes,r===0&&(zg=null),gH(n.stateNode),lo(e,Ut()),t!==null)for(o=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],o(i.value,{componentStack:i.stack,digest:i.digest});if(pd)throw pd=!1,e=Sp,Sp=null,e;return bd&1&&e.tag!==0&&al(),r=e.pendingLanes,r&1?e===vp?lI++:(lI=0,vp=e):lI=0,er(),null}function al(){if(Yg!==null){var e=cV(bd),t=_o.transition,n=ct;try{if(_o.transition=null,ct=16>e?16:e,Yg===null)var o=!1;else{if(e=Yg,Yg=null,bd=0,$e&6)throw Error(oe(331));var i=$e;for($e|=4,me=e.current;me!==null;){var r=me,s=r.child;if(me.flags&16){var I=r.deletions;if(I!==null){for(var a=0;a<I.length;a++){var c=I[a];for(me=c;me!==null;){var C=me;switch(C.tag){case 0:case 11:case 15:rI(8,C,r)}var A=C.child;if(A!==null)A.return=C,me=A;else for(;me!==null;){C=me;var m=C.sibling,p=C.return;if(yR(C),C===c){me=null;break}if(m!==null){m.return=p,me=m;break}me=p}}}var b=r.alternate;if(b!==null){var G=b.child;if(G!==null){b.child=null;do{var W=G.sibling;G.sibling=null,G=W}while(G!==null)}}me=r}}if(r.subtreeFlags&2064&&s!==null)s.return=r,me=s;else e:for(;me!==null;){if(r=me,r.flags&2048)switch(r.tag){case 0:case 11:case 15:rI(9,r,r.return)}var Z=r.sibling;if(Z!==null){Z.return=r.return,me=Z;break e}me=r.return}}var y=e.current;for(me=y;me!==null;){s=me;var f=s.child;if(s.subtreeFlags&2064&&f!==null)f.return=s,me=f;else e:for(s=y;me!==null;){if(I=me,I.flags&2048)try{switch(I.tag){case 0:case 11:case 15:Au(9,I)}}catch(V){Et(I,I.return,V)}if(I===s){me=null;break e}var v=I.sibling;if(v!==null){v.return=I.return,me=v;break e}me=I.return}}if($e=i,er(),Ji&&typeof Ji.onPostCommitFiberRoot=="function")try{Ji.onPostCommitFiberRoot(su,e)}catch{}o=!0}return o}finally{ct=n,_o.transition=t}}return!1}function pG(e,t,n){t=yl(n,t),t=cR(e,t,1),e=Lg(e,t,1),t=jn(),e!==null&&(ec(e,1,t),lo(e,t))}function Et(e,t,n){if(e.tag===3)pG(e,e,n);else for(;t!==null;){if(t.tag===3){pG(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(zg===null||!zg.has(o))){e=yl(n,e),e=CR(t,e,1),t=Lg(t,e,1),e=jn(),t!==null&&(ec(t,1,e),lo(t,e));break}}t=t.return}}function Xx(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),t=jn(),e.pingedLanes|=e.suspendedLanes&n,mn===e&&(vn&n)===n&&(rn===4||rn===3&&(vn&130023424)===vn&&500>Ut()-uf?xr(e,0):df|=n),lo(e,t)}function XR(e,t){t===0&&(e.mode&1?(t=_c,_c<<=1,!(_c&130023424)&&(_c=4194304)):t=1);var n=jn();e=dg(e,t),e!==null&&(ec(e,t,n),lo(e,n))}function Jx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),XR(e,n)}function Yx(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(oe(314))}o!==null&&o.delete(t),XR(e,n)}var JR;JR=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ro.current)io=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return io=!1,Zx(e,t,n);io=!!(e.flags&131072)}else io=!1,kt&&t.flags&1048576&&NV(t,Id,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;RC(e,t),e=t.pendingProps;var i=pl(t,Kn.current);ll(t,n),i=sf(null,t,o,e,i,n);var r=lf();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,so(o)?(r=!0,ld(t)):r=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,tf(t),i.updater=uu,t.stateNode=i,i._reactInternals=t,up(t,o,e,n),t=hp(null,t,o,!0,r,n)):(t.tag=0,kt&&r&&Pb(t),Qn(null,t,i,n),t=t.child),t;case 16:o=t.elementType;e:{switch(RC(e,t),e=t.pendingProps,i=o._init,o=i(o._payload),t.type=o,i=t.tag=xx(o),e=Ii(o,e),i){case 0:t=mp(null,t,o,e,n);break e;case 1:t=lG(null,t,o,e,n);break e;case 11:t=rG(null,t,o,e,n);break e;case 14:t=sG(null,t,o,Ii(o.type,e),n);break e}throw Error(oe(306,o,""))}return t;case 0:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:Ii(o,i),mp(e,t,o,i,n);case 1:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:Ii(o,i),lG(e,t,o,i,n);case 3:e:{if(mR(t),e===null)throw Error(oe(387));o=t.pendingProps,r=t.memoizedState,i=r.element,zV(e,t),dd(t,o,null,n);var s=t.memoizedState;if(o=s.element,r.isDehydrated)if(r={element:o,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){i=yl(Error(oe(423)),t),t=aG(e,t,o,n,i);break e}else if(o!==i){i=yl(Error(oe(424)),t),t=aG(e,t,o,n,i);break e}else for(Go=Mg(t.stateNode.containerInfo.firstChild),Bo=t,kt=!0,di=null,n=MV(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bl(),o===i){t=ug(e,t,n);break e}Qn(e,t,o,n)}t=t.child}return t;case 5:return TV(t),e===null&&cp(t),o=t.type,i=t.pendingProps,r=e!==null?e.memoizedProps:null,s=i.children,rp(o,i)?s=null:r!==null&&rp(o,r)&&(t.flags|=32),AR(e,t),Qn(e,t,s,n),t.child;case 6:return e===null&&cp(t),null;case 13:return hR(e,t,n);case 4:return nf(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=fl(t,null,o,n):Qn(e,t,o,n),t.child;case 11:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:Ii(o,i),rG(e,t,o,i,n);case 7:return Qn(e,t,t.pendingProps,n),t.child;case 8:return Qn(e,t,t.pendingProps.children,n),t.child;case 12:return Qn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,i=t.pendingProps,r=t.memoizedProps,s=i.value,yt(cd,o._currentValue),o._currentValue=s,r!==null)if(hi(r.value,s)){if(r.children===i.children&&!ro.current){t=ug(e,t,n);break e}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var I=r.dependencies;if(I!==null){s=r.child;for(var a=I.firstContext;a!==null;){if(a.context===o){if(r.tag===1){a=ig(-1,n&-n),a.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var C=c.pending;C===null?a.next=a:(a.next=C.next,C.next=a),c.pending=a}}r.lanes|=n,a=r.alternate,a!==null&&(a.lanes|=n),Cp(r.return,n,t),I.lanes|=n;break}a=a.next}}else if(r.tag===10)s=r.type===t.type?null:r.child;else if(r.tag===18){if(s=r.return,s===null)throw Error(oe(341));s.lanes|=n,I=s.alternate,I!==null&&(I.lanes|=n),Cp(s,n,t),s=r.sibling}else s=r.child;if(s!==null)s.return=r;else for(s=r;s!==null;){if(s===t){s=null;break}if(r=s.sibling,r!==null){r.return=s.return,s=r;break}s=s.return}r=s}Qn(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,o=t.pendingProps.children,ll(t,n),i=qo(i),o=o(i),t.flags|=1,Qn(e,t,o,n),t.child;case 14:return o=t.type,i=Ii(o,t.pendingProps),i=Ii(o.type,i),sG(e,t,o,i,n);case 15:return dR(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:Ii(o,i),RC(e,t),t.tag=1,so(o)?(e=!0,ld(t)):e=!1,ll(t,n),IR(t,o,i),up(t,o,i,n),hp(null,t,o,!0,e,n);case 19:return pR(e,t,n);case 22:return uR(e,t,n)}throw Error(oe(156,t.tag))};function YR(e,t){return sV(e,t)}function Hx(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jo(e,t,n,o){return new Hx(e,t,n,o)}function pf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xx(e){if(typeof e=="function")return pf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xb)return 11;if(e===Nb)return 14}return 2}function Ug(e,t){var n=e.alternate;return n===null?(n=jo(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function XC(e,t,n,o,i,r){var s=2;if(o=e,typeof e=="function")pf(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Fs:return Nr(n.children,i,r,t);case Hb:s=8,i|=8;break;case Fh:return e=jo(12,n,t,i|2),e.elementType=Fh,e.lanes=r,e;case Kh:return e=jo(13,n,t,i),e.elementType=Kh,e.lanes=r,e;case Eh:return e=jo(19,n,t,i),e.elementType=Eh,e.lanes=r,e;case TW:return hu(n,i,r,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case LW:s=10;break e;case zW:s=9;break e;case xb:s=11;break e;case Nb:s=14;break e;case Rg:s=16,o=null;break e}throw Error(oe(130,e==null?e:typeof e,""))}return t=jo(s,n,t,i),t.elementType=e,t.type=o,t.lanes=r,t}function Nr(e,t,n,o){return e=jo(7,e,o,t),e.lanes=n,e}function hu(e,t,n,o){return e=jo(22,e,o,t),e.elementType=TW,e.lanes=n,e.stateNode={isHidden:!1},e}function Om(e,t,n){return e=jo(6,e,null,t),e.lanes=n,e}function qm(e,t,n){return t=jo(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Nx(e,t,n,o,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xm(0),this.expirationTimes=Xm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xm(0),this.identifierPrefix=o,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function bf(e,t,n,o,i,r,s,I,a){return e=new Nx(e,t,n,I,a),t===1?(t=1,r===!0&&(t|=8)):t=0,r=jo(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tf(r),e}function Fx(e,t,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ns,key:o==null?null:""+o,children:e,containerInfo:t,implementation:n}}function HR(e){if(!e)return Qg;e=e._reactInternals;e:{if(ns(e)!==e||e.tag!==1)throw Error(oe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(so(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(oe(171))}if(e.tag===1){var n=e.type;if(so(n))return HV(e,n,t)}return t}function xR(e,t,n,o,i,r,s,I,a){return e=bf(n,o,!0,e,i,r,s,I,a),e.context=HR(null),n=e.current,o=jn(),i=Tg(n),r=ig(o,i),r.callback=t??null,Lg(n,r,i),e.current.lanes=i,ec(e,i,o),lo(e,o),e}function pu(e,t,n,o){var i=t.current,r=jn(),s=Tg(i);return n=HR(n),t.context===null?t.context=n:t.pendingContext=n,t=ig(r,s),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=Lg(i,t,s),e!==null&&(Ai(e,i,s,r),vC(e,i,s)),s}function Zd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function bG(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ff(e,t){bG(e,t),(e=e.alternate)&&bG(e,t)}function Kx(){return null}var NR=typeof reportError=="function"?reportError:function(e){console.error(e)};function Zf(e){this._internalRoot=e}bu.prototype.render=Zf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(oe(409));pu(e,t,null,null)};bu.prototype.unmount=Zf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Pr(function(){pu(null,e,null,null)}),t[Cg]=null}};function bu(e){this._internalRoot=e}bu.prototype.unstable_scheduleHydration=function(e){if(e){var t=uV();e={blockedOn:null,target:e,priority:t};for(var n=0;n<wg.length&&t!==0&&t<wg[n].priority;n++);wg.splice(n,0,e),n===0&&mV(e)}};function yf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fG(){}function Ex(e,t,n,o,i){if(i){if(typeof o=="function"){var r=o;o=function(){var c=Zd(s);r.call(c)}}var s=xR(t,o,e,0,null,!1,!1,"",fG);return e._reactRootContainer=s,e[Cg]=s.current,BI(e.nodeType===8?e.parentNode:e),Pr(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof o=="function"){var I=o;o=function(){var c=Zd(a);I.call(c)}}var a=bf(e,0,!1,null,null,!1,!1,"",fG);return e._reactRootContainer=a,e[Cg]=a.current,BI(e.nodeType===8?e.parentNode:e),Pr(function(){pu(t,a,n,o)}),a}function Zu(e,t,n,o,i){var r=n._reactRootContainer;if(r){var s=r;if(typeof i=="function"){var I=i;i=function(){var a=Zd(s);I.call(a)}}pu(t,s,e,i)}else s=Ex(n,t,e,i,o);return Zd(s)}CV=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ua(t.pendingLanes);n!==0&&(Eb(t,n|1),lo(t,Ut()),!($e&6)&&(Gl=Ut()+500,er()))}break;case 13:Pr(function(){var o=dg(e,1);if(o!==null){var i=jn();Ai(o,e,1,i)}}),ff(e,1)}};Mb=function(e){if(e.tag===13){var t=dg(e,134217728);if(t!==null){var n=jn();Ai(t,e,134217728,n)}ff(e,134217728)}};dV=function(e){if(e.tag===13){var t=Tg(e),n=dg(e,t);if(n!==null){var o=jn();Ai(n,e,t,o)}ff(e,t)}};uV=function(){return ct};AV=function(e,t){var n=ct;try{return ct=e,t()}finally{ct=n}};_h=function(e,t,n){switch(t){case"input":if(zh(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var i=cu(o);if(!i)throw Error(oe(90));DW(o),zh(o,i)}}}break;case"textarea":PW(e,n);break;case"select":t=n.value,t!=null&&il(e,!!n.multiple,t,!1)}};tV=Af;nV=Pr;var Mx={usingClientEntryPoint:!1,Events:[nc,Ls,cu,$W,eV,Af]},ka={findFiberByHostInstance:Wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lx={bundleType:ka.bundleType,version:ka.version,rendererPackageName:ka.rendererPackageName,rendererConfig:ka.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hg.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=gV(e),e===null?null:e.stateNode},findFiberByHostInstance:ka.findFiberByHostInstance||Kx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sC.isDisabled&&sC.supportsFiber)try{su=sC.inject(Lx),Ji=sC}catch{}}ko.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mx;ko.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yf(t))throw Error(oe(200));return Fx(e,t,null,n)};ko.createRoot=function(e,t){if(!yf(e))throw Error(oe(299));var n=!1,o="",i=NR;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=bf(e,1,!1,null,null,n,!1,o,i),e[Cg]=t.current,BI(e.nodeType===8?e.parentNode:e),new Zf(t)};ko.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(oe(188)):(e=Object.keys(e).join(","),Error(oe(268,e)));return e=gV(t),e=e===null?null:e.stateNode,e};ko.flushSync=function(e){return Pr(e)};ko.hydrate=function(e,t,n){if(!fu(t))throw Error(oe(200));return Zu(null,e,t,!0,n)};ko.hydrateRoot=function(e,t,n){if(!yf(e))throw Error(oe(405));var o=n!=null&&n.hydratedSources||null,i=!1,r="",s=NR;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=xR(t,null,e,1,n??null,i,!1,r,s),e[Cg]=t.current,BI(e),o)for(e=0;e<o.length;e++)n=o[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new bu(t)};ko.render=function(e,t,n){if(!fu(t))throw Error(oe(200));return Zu(null,e,t,!1,n)};ko.unmountComponentAtNode=function(e){if(!fu(e))throw Error(oe(40));return e._reactRootContainer?(Pr(function(){Zu(null,null,e,!1,function(){e._reactRootContainer=null,e[Cg]=null})}),!0):!1};ko.unstable_batchedUpdates=Af;ko.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!fu(n))throw Error(oe(200));if(e==null||e._reactInternals===void 0)throw Error(oe(38));return Zu(e,t,n,!1,o)};ko.version="18.3.1-next-f1338f8080-20240426";function FR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FR)}catch(e){console.error(e)}}FR(),FW.exports=ko;var ic=FW.exports;const Qa=Wb(ic),zx=SW({__proto__:null,default:Qa},[ic]);var KR,ZG=ic;KR=ZG.createRoot,ZG.hydrateRoot;var ER={exports:{}},Tx="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ux=Tx,Dx=Ux;function MR(){}function LR(){}LR.resetWarningCache=MR;var Qx=function(){function e(o,i,r,s,I,a){if(a!==Dx){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:LR,resetWarningCache:MR};return n.PropTypes=n,n};ER.exports=Qx();var _i=ER.exports;const Px=Wb(_i);var jx=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const _x=e=>{const t=e??{},{isLoggedIn:n=()=>!1,login:o=()=>{},logout:i=()=>{}}=t,r=jx(t,["isLoggedIn","login","logout"]),[s,I]=B.useState(!1);B.useEffect(()=>{I(n())},[n]);const a=(...C)=>{o(...C),I(n())},c=()=>{i(),I(n())};return[s,Object.assign(Object.assign({},r),{isLoggedIn:n,login:a,logout:c})]},Ox="modulepreload",qx=function(e){return"/"+e},yG={},$x=function(t,n,o){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),I=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(a=>{if(a=qx(a),a in yG)return;yG[a]=!0;const c=a.endsWith(".css"),C=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${C}`))return;const A=document.createElement("link");if(A.rel=c?"stylesheet":Ox,c||(A.as="script"),A.crossOrigin="",A.href=a,I&&A.setAttribute("nonce",I),document.head.appendChild(A),c)return new Promise((m,p)=>{A.addEventListener("load",m),A.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${a}`)))})}))}function r(s){const I=new Event("vite:preloadError",{cancelable:!0});if(I.payload=s,window.dispatchEvent(I),!I.defaultPrevented)throw s}return i.then(s=>{for(const I of s||[])I.status==="rejected"&&r(I.reason);return t().catch(r)})};var zR=function(e,t,n,o){function i(r){return r instanceof n?r:new n(function(s){s(r)})}return new(n||(n=Promise))(function(r,s){function I(C){try{c(o.next(C))}catch(A){s(A)}}function a(C){try{c(o.throw(C))}catch(A){s(A)}}function c(C){C.done?r(C.value):i(C.value).then(I,a)}c((o=o.apply(e,t||[])).next())})},eN=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const tN=()=>zR(void 0,void 0,void 0,function*(){var e;return(e=window.liff)!==null&&e!==void 0?e:(yield $x(()=>import("./index-TkA9pKs3.js"),[])).default}),nN=(e,t)=>{Array.isArray(t)?e.use(...t):e.use(t)},oN=e=>zR(void 0,void 0,void 0,function*(){var{plugins:t=[],callback:n=()=>{}}=e,o=eN(e,["plugins","callback"]);const i=yield tN();return t.forEach(r=>nN(i,r)),yield i.init(o),yield n(i),i});var iN=function(e,t,n,o){function i(r){return r instanceof n?r:new n(function(s){s(r)})}return new(n||(n=Promise))(function(r,s){function I(C){try{c(o.next(C))}catch(A){s(A)}}function a(C){try{c(o.throw(C))}catch(A){s(A)}}function c(C){C.done?r(C.value):i(C.value).then(I,a)}c((o=o.apply(e,t||[])).next())})},gN=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const rN={children:_i.element.isRequired,liffId:_i.string.isRequired,withLoginOnExternalBrowser:_i.bool,plugins:_i.arrayOf(_i.oneOfType([_i.object,_i.array])),callback:_i.func},sN=e=>{const t=n=>{var{children:o}=n,i=gN(n,["children"]);const[r,s]=B.useState(),[I,a]=B.useState(!1),[c,C]=B.useState(),[A,m]=_x(c);return B.useEffect(()=>{iN(void 0,void 0,void 0,function*(){try{C(yield oN(i)),a(!0)}catch(p){s(p)}})},[i]),B.createElement(e.Provider,{value:{error:r,isLoggedIn:A,isReady:I,liff:m}},o)};return t.propTypes=rN,t},lN=()=>{const e=B.createContext({isLoggedIn:!1,isReady:!1,liff:{}});return e.displayName="LiffContext",{LiffConsumer:e.Consumer,LiffProvider:sN(e),useLiff:()=>B.useContext(e)}},{LiffConsumer:Xee,LiffProvider:aN,useLiff:Gf}=lN(),Bf=B.createContext(),TR=({children:e})=>{const[t,n]=B.useState([]),o=r=>{n(s=>{const I=[...s],a=I.findIndex(c=>c.name===r.name);return a>=0?(console.log("existingProductIndex:",a),console.log("updatedCart:",I[a].quantity),I[a].quantity+=1):I.push({...r,quantity:1}),I})},i=r=>{n(s=>s.map(a=>a.id===r&&a.quantity>0?{...a,quantity:a.quantity-1}:a).filter(a=>a.quantity>0))};return u.jsx(Bf.Provider,{value:{cartItems:t,addToCart:o,removeFromCart:i},children:e})};TR.propTypes={children:Px.node.isRequired};/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xt(){return Xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Xt.apply(this,arguments)}var qt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(qt||(qt={}));const GG="popstate";function IN(e){e===void 0&&(e={});function t(o,i){let{pathname:r,search:s,hash:I}=o.location;return JI("",{pathname:r,search:s,hash:I},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(o,i){return typeof i=="string"?i:jr(i)}return CN(t,n,null,e)}function Te(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Bl(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function cN(){return Math.random().toString(36).substr(2,8)}function BG(e,t){return{usr:e.state,key:e.key,idx:t}}function JI(e,t,n,o){return n===void 0&&(n=null),Xt({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?tr(t):t,{state:n,key:t&&t.key||o||cN()})}function jr(e){let{pathname:t="/",search:n="",hash:o=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function tr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function CN(e,t,n,o){o===void 0&&(o={});let{window:i=document.defaultView,v5Compat:r=!1}=o,s=i.history,I=qt.Pop,a=null,c=C();c==null&&(c=0,s.replaceState(Xt({},s.state,{idx:c}),""));function C(){return(s.state||{idx:null}).idx}function A(){I=qt.Pop;let W=C(),Z=W==null?null:W-c;c=W,a&&a({action:I,location:G.location,delta:Z})}function m(W,Z){I=qt.Push;let y=JI(G.location,W,Z);c=C()+1;let f=BG(y,c),v=G.createHref(y);try{s.pushState(f,"",v)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(v)}r&&a&&a({action:I,location:G.location,delta:1})}function p(W,Z){I=qt.Replace;let y=JI(G.location,W,Z);c=C();let f=BG(y,c),v=G.createHref(y);s.replaceState(f,"",v),r&&a&&a({action:I,location:G.location,delta:0})}function b(W){let Z=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof W=="string"?W:jr(W);return y=y.replace(/ $/,"%20"),Te(Z,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,Z)}let G={get action(){return I},get location(){return e(i,s)},listen(W){if(a)throw new Error("A history only accepts one active listener");return i.addEventListener(GG,A),a=W,()=>{i.removeEventListener(GG,A),a=null}},createHref(W){return t(i,W)},createURL:b,encodeLocation(W){let Z=b(W);return{pathname:Z.pathname,search:Z.search,hash:Z.hash}},push:m,replace:p,go(W){return s.go(W)}};return G}var ht;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ht||(ht={}));const dN=new Set(["lazy","caseSensitive","path","id","index","children"]);function uN(e){return e.index===!0}function YI(e,t,n,o){return n===void 0&&(n=[]),o===void 0&&(o={}),e.map((i,r)=>{let s=[...n,String(r)],I=typeof i.id=="string"?i.id:s.join("-");if(Te(i.index!==!0||!i.children,"Cannot specify children on an index route"),Te(!o[I],'Found a route id collision on id "'+I+`".  Route id's must be globally unique within Data Router usages`),uN(i)){let a=Xt({},i,t(i),{id:I});return o[I]=a,a}else{let a=Xt({},i,t(i),{id:I,children:void 0});return o[I]=a,i.children&&(a.children=YI(i.children,t,s,o)),a}})}function vr(e,t,n){return n===void 0&&(n="/"),JC(e,t,n,!1)}function JC(e,t,n,o){let i=typeof t=="string"?tr(t):t,r=Ag(i.pathname||"/",n);if(r==null)return null;let s=UR(e);mN(s);let I=null;for(let a=0;I==null&&a<s.length;++a){let c=WN(r);I=SN(s[a],c,o)}return I}function AN(e,t){let{route:n,pathname:o,params:i}=e;return{id:n.id,pathname:o,params:i,data:t[n.id],handle:n.handle}}function UR(e,t,n,o){t===void 0&&(t=[]),n===void 0&&(n=[]),o===void 0&&(o="");let i=(r,s,I)=>{let a={relativePath:I===void 0?r.path||"":I,caseSensitive:r.caseSensitive===!0,childrenIndex:s,route:r};a.relativePath.startsWith("/")&&(Te(a.relativePath.startsWith(o),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(o.length));let c=gg([o,a.relativePath]),C=n.concat(a);r.children&&r.children.length>0&&(Te(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),UR(r.children,t,C,c)),!(r.path==null&&!r.index)&&t.push({path:c,score:GN(c,r.index),routesMeta:C})};return e.forEach((r,s)=>{var I;if(r.path===""||!((I=r.path)!=null&&I.includes("?")))i(r,s);else for(let a of DR(r.path))i(r,s,a)}),t}function DR(e){let t=e.split("/");if(t.length===0)return[];let[n,...o]=t,i=n.endsWith("?"),r=n.replace(/\?$/,"");if(o.length===0)return i?[r,""]:[r];let s=DR(o.join("/")),I=[];return I.push(...s.map(a=>a===""?r:[r,a].join("/"))),i&&I.push(...s),I.map(a=>e.startsWith("/")&&a===""?"/":a)}function mN(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:BN(t.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}const hN=/^:[\w-]+$/,pN=3,bN=2,fN=1,ZN=10,yN=-2,SG=e=>e==="*";function GN(e,t){let n=e.split("/"),o=n.length;return n.some(SG)&&(o+=yN),t&&(o+=bN),n.filter(i=>!SG(i)).reduce((i,r)=>i+(hN.test(r)?pN:r===""?fN:ZN),o)}function BN(e,t){return e.length===t.length&&e.slice(0,-1).every((o,i)=>o===t[i])?e[e.length-1]-t[t.length-1]:0}function SN(e,t,n){n===void 0&&(n=!1);let{routesMeta:o}=e,i={},r="/",s=[];for(let I=0;I<o.length;++I){let a=o[I],c=I===o.length-1,C=r==="/"?t:t.slice(r.length)||"/",A=yd({path:a.relativePath,caseSensitive:a.caseSensitive,end:c},C),m=a.route;if(!A&&c&&n&&!o[o.length-1].route.index&&(A=yd({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},C)),!A)return null;Object.assign(i,A.params),s.push({params:i,pathname:gg([r,A.pathname]),pathnameBase:kN(gg([r,A.pathnameBase])),route:m}),A.pathnameBase!=="/"&&(r=gg([r,A.pathnameBase]))}return s}function yd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,o]=vN(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let r=i[0],s=r.replace(/(.)\/+$/,"$1"),I=i.slice(1);return{params:o.reduce((c,C,A)=>{let{paramName:m,isOptional:p}=C;if(m==="*"){let G=I[A]||"";s=r.slice(0,r.length-G.length).replace(/(.)\/+$/,"$1")}const b=I[A];return p&&!b?c[m]=void 0:c[m]=(b||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:s,pattern:e}}function vN(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Bl(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,I,a)=>(o.push({paramName:I,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),o]}function WN(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Bl(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ag(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,o=e.charAt(n);return o&&o!=="/"?null:e.slice(n)||"/"}function VN(e,t){t===void 0&&(t="/");let{pathname:n,search:o="",hash:i=""}=typeof e=="string"?tr(e):e;return{pathname:n?n.startsWith("/")?n:RN(n,t):t,search:wN(o),hash:XN(i)}}function RN(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function $m(e,t,n,o){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function QR(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Sf(e,t){let n=QR(e);return t?n.map((o,i)=>i===n.length-1?o.pathname:o.pathnameBase):n.map(o=>o.pathnameBase)}function vf(e,t,n,o){o===void 0&&(o=!1);let i;typeof e=="string"?i=tr(e):(i=Xt({},e),Te(!i.pathname||!i.pathname.includes("?"),$m("?","pathname","search",i)),Te(!i.pathname||!i.pathname.includes("#"),$m("#","pathname","hash",i)),Te(!i.search||!i.search.includes("#"),$m("#","search","hash",i)));let r=e===""||i.pathname==="",s=r?"/":i.pathname,I;if(s==null)I=n;else{let A=t.length-1;if(!o&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),A-=1;i.pathname=m.join("/")}I=A>=0?t[A]:"/"}let a=VN(i,I),c=s&&s!=="/"&&s.endsWith("/"),C=(r||s===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(c||C)&&(a.pathname+="/"),a}const gg=e=>e.join("/").replace(/\/\/+/g,"/"),kN=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),wN=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,XN=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Gd{constructor(t,n,o,i){i===void 0&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}}function yu(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const PR=["post","put","patch","delete"],JN=new Set(PR),YN=["get",...PR],HN=new Set(YN),xN=new Set([301,302,303,307,308]),NN=new Set([307,308]),eh={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},FN={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},wa={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Wf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KN=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),jR="remix-router-transitions";function EN(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",o=!n;Te(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let Y=e.detectErrorBoundary;i=K=>({hasErrorBoundary:Y(K)})}else i=KN;let r={},s=YI(e.routes,i,void 0,r),I,a=e.basename||"/",c=e.unstable_dataStrategy||DN,C=e.unstable_patchRoutesOnNavigation,A=Xt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),m=null,p=new Set,b=1e3,G=new Set,W=null,Z=null,y=null,f=e.hydrationData!=null,v=vr(s,e.history.location,a),V=null;if(v==null&&!C){let Y=Dn(404,{pathname:e.history.location.pathname}),{matches:K,route:z}=YG(s);v=K,V={[z.id]:Y}}v&&!e.hydrationData&&As(v,s,e.history.location.pathname).active&&(v=null);let X;if(v)if(v.some(Y=>Y.route.lazy))X=!1;else if(!v.some(Y=>Y.route.loader))X=!0;else if(A.v7_partialHydration){let Y=e.hydrationData?e.hydrationData.loaderData:null,K=e.hydrationData?e.hydrationData.errors:null,z=O=>O.route.loader?typeof O.route.loader=="function"&&O.route.loader.hydrate===!0?!1:Y&&Y[O.route.id]!==void 0||K&&K[O.route.id]!==void 0:!0;if(K){let O=v.findIndex(Ce=>K[Ce.route.id]!==void 0);X=v.slice(0,O+1).every(z)}else X=v.every(z)}else X=e.hydrationData!=null;else if(X=!1,v=[],A.v7_partialHydration){let Y=As(null,s,e.history.location.pathname);Y.active&&Y.matches&&(v=Y.matches)}let w,R={historyAction:e.history.action,location:e.history.location,matches:v,initialized:X,navigation:eh,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||V,fetchers:new Map,blockers:new Map},F=qt.Pop,x=!1,M,Q=!1,$=new Map,_=null,ne=!1,ee=!1,te=[],N=new Set,j=new Map,P=0,ae=-1,Ie=new Map,ye=new Set,re=new Map,ue=new Map,ie=new Set,Ye=new Map,Ue=new Map,je=new Map,ft;function Ke(){if(m=e.history.listen(Y=>{let{action:K,location:z,delta:O}=Y;if(ft){ft(),ft=void 0;return}Bl(Ue.size===0||O!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ce=Ia({currentLocation:R.location,nextLocation:z,historyAction:K});if(Ce&&O!=null){let be=new Promise(Ve=>{ft=Ve});e.history.go(O*-1),lr(Ce,{state:"blocked",location:z,proceed(){lr(Ce,{state:"proceeding",proceed:void 0,reset:void 0,location:z}),be.then(()=>e.history.go(O))},reset(){let Ve=new Map(R.blockers);Ve.set(Ce,wa),Re({blockers:Ve})}});return}return Bt(K,z)}),n){sF(t,$);let Y=()=>lF(t,$);t.addEventListener("pagehide",Y),_=()=>t.removeEventListener("pagehide",Y)}return R.initialized||Bt(qt.Pop,R.location,{initialHydration:!0}),w}function Le(){m&&m(),_&&_(),p.clear(),M&&M.abort(),R.fetchers.forEach((Y,K)=>Ze(K)),R.blockers.forEach((Y,K)=>aa(K))}function He(Y){return p.add(Y),()=>p.delete(Y)}function Re(Y,K){K===void 0&&(K={}),R=Xt({},R,Y);let z=[],O=[];A.v7_fetcherPersist&&R.fetchers.forEach((Ce,be)=>{Ce.state==="idle"&&(ie.has(be)?O.push(be):z.push(be))}),[...p].forEach(Ce=>Ce(R,{deletedFetchers:O,unstable_viewTransitionOpts:K.viewTransitionOpts,unstable_flushSync:K.flushSync===!0})),A.v7_fetcherPersist&&(z.forEach(Ce=>R.fetchers.delete(Ce)),O.forEach(Ce=>Ze(Ce)))}function _e(Y,K,z){var O,Ce;let{flushSync:be}=z===void 0?{}:z,Ve=R.actionData!=null&&R.navigation.formMethod!=null&&Ci(R.navigation.formMethod)&&R.navigation.state==="loading"&&((O=Y.state)==null?void 0:O._isRedirect)!==!0,ge;K.actionData?Object.keys(K.actionData).length>0?ge=K.actionData:ge=null:Ve?ge=R.actionData:ge=null;let Be=K.loaderData?XG(R.loaderData,K.loaderData,K.matches||[],K.errors):R.loaderData,he=R.blockers;he.size>0&&(he=new Map(he),he.forEach((it,mt)=>he.set(mt,wa)));let pe=x===!0||R.navigation.formMethod!=null&&Ci(R.navigation.formMethod)&&((Ce=Y.state)==null?void 0:Ce._isRedirect)!==!0;I&&(s=I,I=void 0),ne||F===qt.Pop||(F===qt.Push?e.history.push(Y,Y.state):F===qt.Replace&&e.history.replace(Y,Y.state));let qe;if(F===qt.Pop){let it=$.get(R.location.pathname);it&&it.has(Y.pathname)?qe={currentLocation:R.location,nextLocation:Y}:$.has(Y.pathname)&&(qe={currentLocation:Y,nextLocation:R.location})}else if(Q){let it=$.get(R.location.pathname);it?it.add(Y.pathname):(it=new Set([Y.pathname]),$.set(R.location.pathname,it)),qe={currentLocation:R.location,nextLocation:Y}}Re(Xt({},K,{actionData:ge,loaderData:Be,historyAction:F,location:Y,initialized:!0,navigation:eh,revalidation:"idle",restoreScrollPosition:us(Y,K.matches||R.matches),preventScrollReset:pe,blockers:he}),{viewTransitionOpts:qe,flushSync:be===!0}),F=qt.Pop,x=!1,Q=!1,ne=!1,ee=!1,te=[]}async function $n(Y,K){if(typeof Y=="number"){e.history.go(Y);return}let z=Rp(R.location,R.matches,a,A.v7_prependBasename,Y,A.v7_relativeSplatPath,K==null?void 0:K.fromRouteId,K==null?void 0:K.relative),{path:O,submission:Ce,error:be}=vG(A.v7_normalizeFormMethod,!1,z,K),Ve=R.location,ge=JI(R.location,O,K&&K.state);ge=Xt({},ge,e.history.encodeLocation(ge));let Be=K&&K.replace!=null?K.replace:void 0,he=qt.Push;Be===!0?he=qt.Replace:Be===!1||Ce!=null&&Ci(Ce.formMethod)&&Ce.formAction===R.location.pathname+R.location.search&&(he=qt.Replace);let pe=K&&"preventScrollReset"in K?K.preventScrollReset===!0:void 0,qe=(K&&K.unstable_flushSync)===!0,it=Ia({currentLocation:Ve,nextLocation:ge,historyAction:he});if(it){lr(it,{state:"blocked",location:ge,proceed(){lr(it,{state:"proceeding",proceed:void 0,reset:void 0,location:ge}),$n(Y,K)},reset(){let mt=new Map(R.blockers);mt.set(it,wa),Re({blockers:mt})}});return}return await Bt(he,ge,{submission:Ce,pendingError:be,preventScrollReset:pe,replace:K&&K.replace,enableViewTransition:K&&K.unstable_viewTransition,flushSync:qe})}function ln(){if(Ge(),Re({revalidation:"loading"}),R.navigation.state!=="submitting"){if(R.navigation.state==="idle"){Bt(R.historyAction,R.location,{startUninterruptedRevalidation:!0});return}Bt(F||R.historyAction,R.navigation.location,{overrideNavigation:R.navigation,enableViewTransition:Q===!0})}}async function Bt(Y,K,z){M&&M.abort(),M=null,F=Y,ne=(z&&z.startUninterruptedRevalidation)===!0,nm(R.location,R.matches),x=(z&&z.preventScrollReset)===!0,Q=(z&&z.enableViewTransition)===!0;let O=I||s,Ce=z&&z.overrideNavigation,be=vr(O,K,a),Ve=(z&&z.flushSync)===!0,ge=As(be,O,K.pathname);if(ge.active&&ge.matches&&(be=ge.matches),!be){let{error:Pe,notFoundMatches:wt,route:Nt}=ca(K.pathname);_e(K,{matches:wt,loaderData:{},errors:{[Nt.id]:Pe}},{flushSync:Ve});return}if(R.initialized&&!ee&&qN(R.location,K)&&!(z&&z.submission&&Ci(z.submission.formMethod))){_e(K,{matches:be},{flushSync:Ve});return}M=new AbortController;let Be=Ss(e.history,K,M.signal,z&&z.submission),he;if(z&&z.pendingError)he=[js(be).route.id,{type:ht.error,error:z.pendingError}];else if(z&&z.submission&&Ci(z.submission.formMethod)){let Pe=await zn(Be,K,z.submission,be,ge.active,{replace:z.replace,flushSync:Ve});if(Pe.shortCircuited)return;if(Pe.pendingActionResult){let[wt,Nt]=Pe.pendingActionResult;if(fo(Nt)&&yu(Nt.error)&&Nt.error.status===404){M=null,_e(K,{matches:Pe.matches,loaderData:{},errors:{[wt]:Nt.error}});return}}be=Pe.matches||be,he=Pe.pendingActionResult,Ce=th(K,z.submission),Ve=!1,ge.active=!1,Be=Ss(e.history,Be.url,Be.signal)}let{shortCircuited:pe,matches:qe,loaderData:it,errors:mt}=await fn(Be,K,be,ge.active,Ce,z&&z.submission,z&&z.fetcherSubmission,z&&z.replace,z&&z.initialHydration===!0,Ve,he);pe||(M=null,_e(K,Xt({matches:qe||be},JG(he),{loaderData:it,errors:mt})))}async function zn(Y,K,z,O,Ce,be){be===void 0&&(be={}),Ge();let Ve=gF(K,z);if(Re({navigation:Ve},{flushSync:be.flushSync===!0}),Ce){let he=await ms(O,K.pathname,Y.signal);if(he.type==="aborted")return{shortCircuited:!0};if(he.type==="error"){let{boundaryId:pe,error:qe}=ds(K.pathname,he);return{matches:he.partialMatches,pendingActionResult:[pe,{type:ht.error,error:qe}]}}else if(he.matches)O=he.matches;else{let{notFoundMatches:pe,error:qe,route:it}=ca(K.pathname);return{matches:pe,pendingActionResult:[it.id,{type:ht.error,error:qe}]}}}let ge,Be=Pa(O,K);if(!Be.route.action&&!Be.route.lazy)ge={type:ht.error,error:Dn(405,{method:Y.method,pathname:K.pathname,routeId:Be.route.id})};else if(ge=(await an("action",R,Y,[Be],O,null))[Be.route.id],Y.signal.aborted)return{shortCircuited:!0};if(kr(ge)){let he;return be&&be.replace!=null?he=be.replace:he=RG(ge.response.headers.get("Location"),new URL(Y.url),a)===R.location.pathname+R.location.search,await jt(Y,ge,!0,{submission:z,replace:he}),{shortCircuited:!0}}if(Hg(ge))throw Dn(400,{type:"defer-action"});if(fo(ge)){let he=js(O,Be.route.id);return(be&&be.replace)!==!0&&(F=qt.Push),{matches:O,pendingActionResult:[he.route.id,ge]}}return{matches:O,pendingActionResult:[Be.route.id,ge]}}async function fn(Y,K,z,O,Ce,be,Ve,ge,Be,he,pe){let qe=Ce||th(K,be),it=be||Ve||xG(qe),mt=!ne&&(!A.v7_partialHydration||!Be);if(O){if(mt){let ke=st(pe);Re(Xt({navigation:qe},ke!==void 0?{actionData:ke}:{}),{flushSync:he})}let le=await ms(z,K.pathname,Y.signal);if(le.type==="aborted")return{shortCircuited:!0};if(le.type==="error"){let{boundaryId:ke,error:cn}=ds(K.pathname,le);return{matches:le.partialMatches,loaderData:{},errors:{[ke]:cn}}}else if(le.matches)z=le.matches;else{let{error:ke,notFoundMatches:cn,route:It}=ca(K.pathname);return{matches:cn,loaderData:{},errors:{[It.id]:ke}}}}let Pe=I||s,[wt,Nt]=WG(e.history,R,z,it,K,A.v7_partialHydration&&Be===!0,A.v7_skipActionErrorRevalidation,ee,te,N,ie,re,ye,Pe,a,pe);if(Ca(le=>!(z&&z.some(ke=>ke.route.id===le))||wt&&wt.some(ke=>ke.route.id===le)),ae=++P,wt.length===0&&Nt.length===0){let le=gi();return _e(K,Xt({matches:z,loaderData:{},errors:pe&&fo(pe[1])?{[pe[0]]:pe[1].error}:null},JG(pe),le?{fetchers:new Map(R.fetchers)}:{}),{flushSync:he}),{shortCircuited:!0}}if(mt){let le={};if(!O){le.navigation=qe;let ke=st(pe);ke!==void 0&&(le.actionData=ke)}Nt.length>0&&(le.fetchers=eo(Nt)),Re(le,{flushSync:he})}Nt.forEach(le=>{j.has(le.key)&&at(le.key),le.controller&&j.set(le.key,le.controller)});let ar=()=>Nt.forEach(le=>at(le.key));M&&M.signal.addEventListener("abort",ar);let{loaderResults:ri,fetcherResults:pg}=await et(R,z,wt,Nt,Y);if(Y.signal.aborted)return{shortCircuited:!0};M&&M.signal.removeEventListener("abort",ar),Nt.forEach(le=>j.delete(le.key));let Zi=lC(ri);if(Zi)return await jt(Y,Zi.result,!0,{replace:ge}),{shortCircuited:!0};if(Zi=lC(pg),Zi)return ye.add(Zi.key),await jt(Y,Zi.result,!0,{replace:ge}),{shortCircuited:!0};let{loaderData:bg,errors:Tn}=wG(R,z,wt,ri,pe,Nt,pg,Ye);Ye.forEach((le,ke)=>{le.subscribe(cn=>{(cn||le.done)&&Ye.delete(ke)})}),A.v7_partialHydration&&Be&&R.errors&&Object.entries(R.errors).filter(le=>{let[ke]=le;return!wt.some(cn=>cn.route.id===ke)}).forEach(le=>{let[ke,cn]=le;Tn=Object.assign(Tn||{},{[ke]:cn})});let Ir=gi(),cr=vc(ae),yi=Ir||cr||Nt.length>0;return Xt({matches:z,loaderData:bg,errors:Tn},yi?{fetchers:new Map(R.fetchers)}:{})}function st(Y){if(Y&&!fo(Y[1]))return{[Y[0]]:Y[1].data};if(R.actionData)return Object.keys(R.actionData).length===0?null:R.actionData}function eo(Y){return Y.forEach(K=>{let z=R.fetchers.get(K.key),O=Xa(void 0,z?z.data:void 0);R.fetchers.set(K.key,O)}),new Map(R.fetchers)}function on(Y,K,z,O){if(o)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");j.has(Y)&&at(Y);let Ce=(O&&O.unstable_flushSync)===!0,be=I||s,Ve=Rp(R.location,R.matches,a,A.v7_prependBasename,z,A.v7_relativeSplatPath,K,O==null?void 0:O.relative),ge=vr(be,Ve,a),Be=As(ge,be,Ve);if(Be.active&&Be.matches&&(ge=Be.matches),!ge){In(Y,K,Dn(404,{pathname:Ve}),{flushSync:Ce});return}let{path:he,submission:pe,error:qe}=vG(A.v7_normalizeFormMethod,!0,Ve,O);if(qe){In(Y,K,qe,{flushSync:Ce});return}let it=Pa(ge,he);if(x=(O&&O.preventScrollReset)===!0,pe&&Ci(pe.formMethod)){At(Y,K,he,it,ge,Be.active,Ce,pe);return}re.set(Y,{routeId:K,path:he}),to(Y,K,he,it,ge,Be.active,Ce,pe)}async function At(Y,K,z,O,Ce,be,Ve,ge){Ge(),re.delete(Y);function Be(It){if(!It.route.action&&!It.route.lazy){let Rn=Dn(405,{method:ge.formMethod,pathname:z,routeId:K});return In(Y,K,Rn,{flushSync:Ve}),!0}return!1}if(!be&&Be(O))return;let he=R.fetchers.get(Y);Mt(Y,rF(ge,he),{flushSync:Ve});let pe=new AbortController,qe=Ss(e.history,z,pe.signal,ge);if(be){let It=await ms(Ce,z,qe.signal);if(It.type==="aborted")return;if(It.type==="error"){let{error:Rn}=ds(z,It);In(Y,K,Rn,{flushSync:Ve});return}else if(It.matches){if(Ce=It.matches,O=Pa(Ce,z),Be(O))return}else{In(Y,K,Dn(404,{pathname:z}),{flushSync:Ve});return}}j.set(Y,pe);let it=P,Pe=(await an("action",R,qe,[O],Ce,Y))[O.route.id];if(qe.signal.aborted){j.get(Y)===pe&&j.delete(Y);return}if(A.v7_fetcherPersist&&ie.has(Y)){if(kr(Pe)||fo(Pe)){Mt(Y,vg(void 0));return}}else{if(kr(Pe))if(j.delete(Y),ae>it){Mt(Y,vg(void 0));return}else return ye.add(Y),Mt(Y,Xa(ge)),jt(qe,Pe,!1,{fetcherSubmission:ge});if(fo(Pe)){In(Y,K,Pe.error);return}}if(Hg(Pe))throw Dn(400,{type:"defer-action"});let wt=R.navigation.location||R.location,Nt=Ss(e.history,wt,pe.signal),ar=I||s,ri=R.navigation.state!=="idle"?vr(ar,R.navigation.location,a):R.matches;Te(ri,"Didn't find any matches after fetcher action");let pg=++P;Ie.set(Y,pg);let Zi=Xa(ge,Pe.data);R.fetchers.set(Y,Zi);let[bg,Tn]=WG(e.history,R,ri,ge,wt,!1,A.v7_skipActionErrorRevalidation,ee,te,N,ie,re,ye,ar,a,[O.route.id,Pe]);Tn.filter(It=>It.key!==Y).forEach(It=>{let Rn=It.key,hs=R.fetchers.get(Rn),xe=Xa(void 0,hs?hs.data:void 0);R.fetchers.set(Rn,xe),j.has(Rn)&&at(Rn),It.controller&&j.set(Rn,It.controller)}),Re({fetchers:new Map(R.fetchers)});let Ir=()=>Tn.forEach(It=>at(It.key));pe.signal.addEventListener("abort",Ir);let{loaderResults:cr,fetcherResults:yi}=await et(R,ri,bg,Tn,Nt);if(pe.signal.aborted)return;pe.signal.removeEventListener("abort",Ir),Ie.delete(Y),j.delete(Y),Tn.forEach(It=>j.delete(It.key));let le=lC(cr);if(le)return jt(Nt,le.result,!1);if(le=lC(yi),le)return ye.add(le.key),jt(Nt,le.result,!1);let{loaderData:ke,errors:cn}=wG(R,ri,bg,cr,void 0,Tn,yi,Ye);if(R.fetchers.has(Y)){let It=vg(Pe.data);R.fetchers.set(Y,It)}vc(pg),R.navigation.state==="loading"&&pg>ae?(Te(F,"Expected pending action"),M&&M.abort(),_e(R.navigation.location,{matches:ri,loaderData:ke,errors:cn,fetchers:new Map(R.fetchers)})):(Re({errors:cn,loaderData:XG(R.loaderData,ke,ri,cn),fetchers:new Map(R.fetchers)}),ee=!1)}async function to(Y,K,z,O,Ce,be,Ve,ge){let Be=R.fetchers.get(Y);Mt(Y,Xa(ge,Be?Be.data:void 0),{flushSync:Ve});let he=new AbortController,pe=Ss(e.history,z,he.signal);if(be){let Pe=await ms(Ce,z,pe.signal);if(Pe.type==="aborted")return;if(Pe.type==="error"){let{error:wt}=ds(z,Pe);In(Y,K,wt,{flushSync:Ve});return}else if(Pe.matches)Ce=Pe.matches,O=Pa(Ce,z);else{In(Y,K,Dn(404,{pathname:z}),{flushSync:Ve});return}}j.set(Y,he);let qe=P,mt=(await an("loader",R,pe,[O],Ce,Y))[O.route.id];if(Hg(mt)&&(mt=await Vf(mt,pe.signal,!0)||mt),j.get(Y)===he&&j.delete(Y),!pe.signal.aborted){if(ie.has(Y)){Mt(Y,vg(void 0));return}if(kr(mt))if(ae>qe){Mt(Y,vg(void 0));return}else{ye.add(Y),await jt(pe,mt,!1);return}if(fo(mt)){In(Y,K,mt.error);return}Te(!Hg(mt),"Unhandled fetcher deferred data"),Mt(Y,vg(mt.data))}}async function jt(Y,K,z,O){let{submission:Ce,fetcherSubmission:be,replace:Ve}=O===void 0?{}:O;K.response.headers.has("X-Remix-Revalidate")&&(ee=!0);let ge=K.response.headers.get("Location");Te(ge,"Expected a Location header on the redirect Response"),ge=RG(ge,new URL(Y.url),a);let Be=JI(R.location,ge,{_isRedirect:!0});if(n){let Pe=!1;if(K.response.headers.has("X-Remix-Reload-Document"))Pe=!0;else if(Wf.test(ge)){const wt=e.history.createURL(ge);Pe=wt.origin!==t.location.origin||Ag(wt.pathname,a)==null}if(Pe){Ve?t.location.replace(ge):t.location.assign(ge);return}}M=null;let he=Ve===!0||K.response.headers.has("X-Remix-Replace")?qt.Replace:qt.Push,{formMethod:pe,formAction:qe,formEncType:it}=R.navigation;!Ce&&!be&&pe&&qe&&it&&(Ce=xG(R.navigation));let mt=Ce||be;if(NN.has(K.response.status)&&mt&&Ci(mt.formMethod))await Bt(he,Be,{submission:Xt({},mt,{formAction:ge}),preventScrollReset:x,enableViewTransition:z?Q:void 0});else{let Pe=th(Be,Ce);await Bt(he,Be,{overrideNavigation:Pe,fetcherSubmission:be,preventScrollReset:x,enableViewTransition:z?Q:void 0})}}async function an(Y,K,z,O,Ce,be){let Ve,ge={};try{Ve=await QN(c,Y,K,z,O,Ce,be,r,i)}catch(Be){return O.forEach(he=>{ge[he.route.id]={type:ht.error,error:Be}}),ge}for(let[Be,he]of Object.entries(Ve))if(eF(he)){let pe=he.result;ge[Be]={type:ht.redirect,response:_N(pe,z,Be,Ce,a,A.v7_relativeSplatPath)}}else ge[Be]=await jN(he);return ge}async function et(Y,K,z,O,Ce){let be=Y.matches,Ve=an("loader",Y,Ce,z,K,null),ge=Promise.all(O.map(async pe=>{if(pe.matches&&pe.match&&pe.controller){let it=(await an("loader",Y,Ss(e.history,pe.path,pe.controller.signal),[pe.match],pe.matches,pe.key))[pe.match.route.id];return{[pe.key]:it}}else return Promise.resolve({[pe.key]:{type:ht.error,error:Dn(404,{pathname:pe.path})}})})),Be=await Ve,he=(await ge).reduce((pe,qe)=>Object.assign(pe,qe),{});return await Promise.all([oF(K,Be,Ce.signal,be,Y.loaderData),iF(K,he,O)]),{loaderResults:Be,fetcherResults:he}}function Ge(){ee=!0,te.push(...Ca()),re.forEach((Y,K)=>{j.has(K)&&(N.add(K),at(K))})}function Mt(Y,K,z){z===void 0&&(z={}),R.fetchers.set(Y,K),Re({fetchers:new Map(R.fetchers)},{flushSync:(z&&z.flushSync)===!0})}function In(Y,K,z,O){O===void 0&&(O={});let Ce=js(R.matches,K);Ze(Y),Re({errors:{[Ce.route.id]:z},fetchers:new Map(R.fetchers)},{flushSync:(O&&O.flushSync)===!0})}function fi(Y){return A.v7_fetcherPersist&&(ue.set(Y,(ue.get(Y)||0)+1),ie.has(Y)&&ie.delete(Y)),R.fetchers.get(Y)||FN}function Ze(Y){let K=R.fetchers.get(Y);j.has(Y)&&!(K&&K.state==="loading"&&Ie.has(Y))&&at(Y),re.delete(Y),Ie.delete(Y),ye.delete(Y),ie.delete(Y),N.delete(Y),R.fetchers.delete(Y)}function ot(Y){if(A.v7_fetcherPersist){let K=(ue.get(Y)||0)-1;K<=0?(ue.delete(Y),ie.add(Y)):ue.set(Y,K)}else Ze(Y);Re({fetchers:new Map(R.fetchers)})}function at(Y){let K=j.get(Y);Te(K,"Expected fetch controller: "+Y),K.abort(),j.delete(Y)}function ii(Y){for(let K of Y){let z=fi(K),O=vg(z.data);R.fetchers.set(K,O)}}function gi(){let Y=[],K=!1;for(let z of ye){let O=R.fetchers.get(z);Te(O,"Expected fetcher: "+z),O.state==="loading"&&(ye.delete(z),Y.push(z),K=!0)}return ii(Y),K}function vc(Y){let K=[];for(let[z,O]of Ie)if(O<Y){let Ce=R.fetchers.get(z);Te(Ce,"Expected fetcher: "+z),Ce.state==="loading"&&(at(z),Ie.delete(z),K.push(z))}return ii(K),K.length>0}function em(Y,K){let z=R.blockers.get(Y)||wa;return Ue.get(Y)!==K&&Ue.set(Y,K),z}function aa(Y){R.blockers.delete(Y),Ue.delete(Y)}function lr(Y,K){let z=R.blockers.get(Y)||wa;Te(z.state==="unblocked"&&K.state==="blocked"||z.state==="blocked"&&K.state==="blocked"||z.state==="blocked"&&K.state==="proceeding"||z.state==="blocked"&&K.state==="unblocked"||z.state==="proceeding"&&K.state==="unblocked","Invalid blocker state transition: "+z.state+" -> "+K.state);let O=new Map(R.blockers);O.set(Y,K),Re({blockers:O})}function Ia(Y){let{currentLocation:K,nextLocation:z,historyAction:O}=Y;if(Ue.size===0)return;Ue.size>1&&Bl(!1,"A router only supports one blocker at a time");let Ce=Array.from(Ue.entries()),[be,Ve]=Ce[Ce.length-1],ge=R.blockers.get(be);if(!(ge&&ge.state==="proceeding")&&Ve({currentLocation:K,nextLocation:z,historyAction:O}))return be}function ca(Y){let K=Dn(404,{pathname:Y}),z=I||s,{matches:O,route:Ce}=YG(z);return Ca(),{notFoundMatches:O,route:Ce,error:K}}function ds(Y,K){return{boundaryId:js(K.partialMatches).route.id,error:Dn(400,{type:"route-discovery",pathname:Y,message:K.error!=null&&"message"in K.error?K.error:String(K.error)})}}function Ca(Y){let K=[];return Ye.forEach((z,O)=>{(!Y||Y(O))&&(z.cancel(),K.push(O),Ye.delete(O))}),K}function tm(Y,K,z){if(W=Y,y=K,Z=z||null,!f&&R.navigation===eh){f=!0;let O=us(R.location,R.matches);O!=null&&Re({restoreScrollPosition:O})}return()=>{W=null,y=null,Z=null}}function Wc(Y,K){return Z&&Z(Y,K.map(O=>AN(O,R.loaderData)))||Y.key}function nm(Y,K){if(W&&y){let z=Wc(Y,K);W[z]=y()}}function us(Y,K){if(W){let z=Wc(Y,K),O=W[z];if(typeof O=="number")return O}return null}function As(Y,K,z){if(C){if(G.has(z))return{active:!1,matches:Y};if(Y){if(Object.keys(Y[0].params).length>0)return{active:!0,matches:JC(K,z,a,!0)}}else return{active:!0,matches:JC(K,z,a,!0)||[]}}return{active:!1,matches:null}}async function ms(Y,K,z){let O=Y;for(;;){let Ce=I==null,be=I||s;try{await TN(C,K,O,be,r,i,je,z)}catch(Be){return{type:"error",error:Be,partialMatches:O}}finally{Ce&&(s=[...s])}if(z.aborted)return{type:"aborted"};let Ve=vr(be,K,a);if(Ve)return Vc(K,G),{type:"success",matches:Ve};let ge=JC(be,K,a,!0);if(!ge||O.length===ge.length&&O.every((Be,he)=>Be.route.id===ge[he].route.id))return Vc(K,G),{type:"success",matches:null};O=ge}}function Vc(Y,K){if(K.size>=b){let z=K.values().next().value;K.delete(z)}K.add(Y)}function om(Y){r={},I=YI(Y,i,void 0,r)}function No(Y,K){let z=I==null;OR(Y,K,I||s,r,i),z&&(s=[...s],Re({}))}return w={get basename(){return a},get future(){return A},get state(){return R},get routes(){return s},get window(){return t},initialize:Ke,subscribe:He,enableScrollRestoration:tm,navigate:$n,fetch:on,revalidate:ln,createHref:Y=>e.history.createHref(Y),encodeLocation:Y=>e.history.encodeLocation(Y),getFetcher:fi,deleteFetcher:ot,dispose:Le,getBlocker:em,deleteBlocker:aa,patchRoutes:No,_internalFetchControllers:j,_internalActiveDeferreds:Ye,_internalSetRoutes:om},w}function MN(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function Rp(e,t,n,o,i,r,s,I){let a,c;if(s){a=[];for(let A of t)if(a.push(A),A.route.id===s){c=A;break}}else a=t,c=t[t.length-1];let C=vf(i||".",Sf(a,r),Ag(e.pathname,n)||e.pathname,I==="path");return i==null&&(C.search=e.search,C.hash=e.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!Rf(C.search)&&(C.search=C.search?C.search.replace(/^\?/,"?index&"):"?index"),o&&n!=="/"&&(C.pathname=C.pathname==="/"?n:gg([n,C.pathname])),jr(C)}function vG(e,t,n,o){if(!o||!MN(o))return{path:n};if(o.formMethod&&!nF(o.formMethod))return{path:n,error:Dn(405,{method:o.formMethod})};let i=()=>({path:n,error:Dn(400,{type:"invalid-body"})}),r=o.formMethod||"get",s=e?r.toUpperCase():r.toLowerCase(),I=qR(n);if(o.body!==void 0){if(o.formEncType==="text/plain"){if(!Ci(s))return i();let m=typeof o.body=="string"?o.body:o.body instanceof FormData||o.body instanceof URLSearchParams?Array.from(o.body.entries()).reduce((p,b)=>{let[G,W]=b;return""+p+G+"="+W+`
`},""):String(o.body);return{path:n,submission:{formMethod:s,formAction:I,formEncType:o.formEncType,formData:void 0,json:void 0,text:m}}}else if(o.formEncType==="application/json"){if(!Ci(s))return i();try{let m=typeof o.body=="string"?JSON.parse(o.body):o.body;return{path:n,submission:{formMethod:s,formAction:I,formEncType:o.formEncType,formData:void 0,json:m,text:void 0}}}catch{return i()}}}Te(typeof FormData=="function","FormData is not available in this environment");let a,c;if(o.formData)a=kp(o.formData),c=o.formData;else if(o.body instanceof FormData)a=kp(o.body),c=o.body;else if(o.body instanceof URLSearchParams)a=o.body,c=kG(a);else if(o.body==null)a=new URLSearchParams,c=new FormData;else try{a=new URLSearchParams(o.body),c=kG(a)}catch{return i()}let C={formMethod:s,formAction:I,formEncType:o&&o.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Ci(C.formMethod))return{path:n,submission:C};let A=tr(n);return t&&A.search&&Rf(A.search)&&a.append("index",""),A.search="?"+a,{path:jr(A),submission:C}}function LN(e,t){let n=e;if(t){let o=e.findIndex(i=>i.route.id===t);o>=0&&(n=e.slice(0,o))}return n}function WG(e,t,n,o,i,r,s,I,a,c,C,A,m,p,b,G){let W=G?fo(G[1])?G[1].error:G[1].data:void 0,Z=e.createURL(t.location),y=e.createURL(i),f=G&&fo(G[1])?G[0]:void 0,v=f?LN(n,f):n,V=G?G[1].statusCode:void 0,X=s&&V&&V>=400,w=v.filter((F,x)=>{let{route:M}=F;if(M.lazy)return!0;if(M.loader==null)return!1;if(r)return typeof M.loader!="function"||M.loader.hydrate?!0:t.loaderData[M.id]===void 0&&(!t.errors||t.errors[M.id]===void 0);if(zN(t.loaderData,t.matches[x],F)||a.some(_=>_===F.route.id))return!0;let Q=t.matches[x],$=F;return VG(F,Xt({currentUrl:Z,currentParams:Q.params,nextUrl:y,nextParams:$.params},o,{actionResult:W,actionStatus:V,defaultShouldRevalidate:X?!1:I||Z.pathname+Z.search===y.pathname+y.search||Z.search!==y.search||_R(Q,$)}))}),R=[];return A.forEach((F,x)=>{if(r||!n.some(ne=>ne.route.id===F.routeId)||C.has(x))return;let M=vr(p,F.path,b);if(!M){R.push({key:x,routeId:F.routeId,path:F.path,matches:null,match:null,controller:null});return}let Q=t.fetchers.get(x),$=Pa(M,F.path),_=!1;m.has(x)?_=!1:c.has(x)?(c.delete(x),_=!0):Q&&Q.state!=="idle"&&Q.data===void 0?_=I:_=VG($,Xt({currentUrl:Z,currentParams:t.matches[t.matches.length-1].params,nextUrl:y,nextParams:n[n.length-1].params},o,{actionResult:W,actionStatus:V,defaultShouldRevalidate:X?!1:I})),_&&R.push({key:x,routeId:F.routeId,path:F.path,matches:M,match:$,controller:new AbortController})}),[w,R]}function zN(e,t,n){let o=!t||n.route.id!==t.route.id,i=e[n.route.id]===void 0;return o||i}function _R(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function VG(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}async function TN(e,t,n,o,i,r,s,I){let a=[t,...n.map(c=>c.route.id)].join("-");try{let c=s.get(a);c||(c=e({path:t,matches:n,patch:(C,A)=>{I.aborted||OR(C,A,o,i,r)}}),s.set(a,c)),c&&$N(c)&&await c}finally{s.delete(a)}}function OR(e,t,n,o,i){if(e){var r;let s=o[e];Te(s,"No route found to patch children into: routeId = "+e);let I=YI(t,i,[e,"patch",String(((r=s.children)==null?void 0:r.length)||"0")],o);s.children?s.children.push(...I):s.children=I}else{let s=YI(t,i,["patch",String(n.length||"0")],o);n.push(...s)}}async function UN(e,t,n){if(!e.lazy)return;let o=await e.lazy();if(!e.lazy)return;let i=n[e.id];Te(i,"No route found in manifest");let r={};for(let s in o){let a=i[s]!==void 0&&s!=="hasErrorBoundary";Bl(!a,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!a&&!dN.has(s)&&(r[s]=o[s])}Object.assign(i,r),Object.assign(i,Xt({},t(i),{lazy:void 0}))}async function DN(e){let{matches:t}=e,n=t.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,r,s)=>Object.assign(i,{[n[s].route.id]:r}),{})}async function QN(e,t,n,o,i,r,s,I,a,c){let C=r.map(p=>p.route.lazy?UN(p.route,a,I):void 0),A=r.map((p,b)=>{let G=C[b],W=i.some(y=>y.route.id===p.route.id);return Xt({},p,{shouldLoad:W,resolve:async y=>(y&&o.method==="GET"&&(p.route.lazy||p.route.loader)&&(W=!0),W?PN(t,o,p,G,y,c):Promise.resolve({type:ht.data,result:void 0}))})}),m=await e({matches:A,request:o,params:r[0].params,fetcherKey:s,context:c});try{await Promise.all(C)}catch{}return m}async function PN(e,t,n,o,i,r){let s,I,a=c=>{let C,A=new Promise((b,G)=>C=G);I=()=>C(),t.signal.addEventListener("abort",I);let m=b=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+n.route.id+"]"))):c({request:t,params:n.params,context:r},...b!==void 0?[b]:[]),p=(async()=>{try{return{type:"data",result:await(i?i(G=>m(G)):m())}}catch(b){return{type:"error",result:b}}})();return Promise.race([p,A])};try{let c=n.route[e];if(o)if(c){let C,[A]=await Promise.all([a(c).catch(m=>{C=m}),o]);if(C!==void 0)throw C;s=A}else if(await o,c=n.route[e],c)s=await a(c);else if(e==="action"){let C=new URL(t.url),A=C.pathname+C.search;throw Dn(405,{method:t.method,pathname:A,routeId:n.route.id})}else return{type:ht.data,result:void 0};else if(c)s=await a(c);else{let C=new URL(t.url),A=C.pathname+C.search;throw Dn(404,{pathname:A})}Te(s.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:ht.error,result:c}}finally{I&&t.signal.removeEventListener("abort",I)}return s}async function jN(e){let{result:t,type:n}=e;if($R(t)){let c;try{let C=t.headers.get("Content-Type");C&&/\bapplication\/json\b/.test(C)?t.body==null?c=null:c=await t.json():c=await t.text()}catch(C){return{type:ht.error,error:C}}return n===ht.error?{type:ht.error,error:new Gd(t.status,t.statusText,c),statusCode:t.status,headers:t.headers}:{type:ht.data,data:c,statusCode:t.status,headers:t.headers}}if(n===ht.error){if(HG(t)){var o;if(t.data instanceof Error){var i;return{type:ht.error,error:t.data,statusCode:(i=t.init)==null?void 0:i.status}}t=new Gd(((o=t.init)==null?void 0:o.status)||500,void 0,t.data)}return{type:ht.error,error:t,statusCode:yu(t)?t.status:void 0}}if(tF(t)){var r,s;return{type:ht.deferred,deferredData:t,statusCode:(r=t.init)==null?void 0:r.status,headers:((s=t.init)==null?void 0:s.headers)&&new Headers(t.init.headers)}}if(HG(t)){var I,a;return{type:ht.data,data:t.data,statusCode:(I=t.init)==null?void 0:I.status,headers:(a=t.init)!=null&&a.headers?new Headers(t.init.headers):void 0}}return{type:ht.data,data:t}}function _N(e,t,n,o,i,r){let s=e.headers.get("Location");if(Te(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!Wf.test(s)){let I=o.slice(0,o.findIndex(a=>a.route.id===n)+1);s=Rp(new URL(t.url),I,i,!0,s,r),e.headers.set("Location",s)}return e}function RG(e,t,n){if(Wf.test(e)){let o=e,i=o.startsWith("//")?new URL(t.protocol+o):new URL(o),r=Ag(i.pathname,n)!=null;if(i.origin===t.origin&&r)return i.pathname+i.search+i.hash}return e}function Ss(e,t,n,o){let i=e.createURL(qR(t)).toString(),r={signal:n};if(o&&Ci(o.formMethod)){let{formMethod:s,formEncType:I}=o;r.method=s.toUpperCase(),I==="application/json"?(r.headers=new Headers({"Content-Type":I}),r.body=JSON.stringify(o.json)):I==="text/plain"?r.body=o.text:I==="application/x-www-form-urlencoded"&&o.formData?r.body=kp(o.formData):r.body=o.formData}return new Request(i,r)}function kp(e){let t=new URLSearchParams;for(let[n,o]of e.entries())t.append(n,typeof o=="string"?o:o.name);return t}function kG(e){let t=new FormData;for(let[n,o]of e.entries())t.append(n,o);return t}function ON(e,t,n,o,i){let r={},s=null,I,a=!1,c={},C=n&&fo(n[1])?n[1].error:void 0;return e.forEach(A=>{if(!(A.route.id in t))return;let m=A.route.id,p=t[m];if(Te(!kr(p),"Cannot handle redirect results in processLoaderData"),fo(p)){let b=p.error;C!==void 0&&(b=C,C=void 0),s=s||{};{let G=js(e,m);s[G.route.id]==null&&(s[G.route.id]=b)}r[m]=void 0,a||(a=!0,I=yu(p.error)?p.error.status:500),p.headers&&(c[m]=p.headers)}else Hg(p)?(o.set(m,p.deferredData),r[m]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!a&&(I=p.statusCode),p.headers&&(c[m]=p.headers)):(r[m]=p.data,p.statusCode&&p.statusCode!==200&&!a&&(I=p.statusCode),p.headers&&(c[m]=p.headers))}),C!==void 0&&n&&(s={[n[0]]:C},r[n[0]]=void 0),{loaderData:r,errors:s,statusCode:I||200,loaderHeaders:c}}function wG(e,t,n,o,i,r,s,I){let{loaderData:a,errors:c}=ON(t,o,i,I);return r.forEach(C=>{let{key:A,match:m,controller:p}=C,b=s[A];if(Te(b,"Did not find corresponding fetcher result"),!(p&&p.signal.aborted))if(fo(b)){let G=js(e.matches,m==null?void 0:m.route.id);c&&c[G.route.id]||(c=Xt({},c,{[G.route.id]:b.error})),e.fetchers.delete(A)}else if(kr(b))Te(!1,"Unhandled fetcher revalidation redirect");else if(Hg(b))Te(!1,"Unhandled fetcher deferred data");else{let G=vg(b.data);e.fetchers.set(A,G)}}),{loaderData:a,errors:c}}function XG(e,t,n,o){let i=Xt({},t);for(let r of n){let s=r.route.id;if(t.hasOwnProperty(s)?t[s]!==void 0&&(i[s]=t[s]):e[s]!==void 0&&r.route.loader&&(i[s]=e[s]),o&&o.hasOwnProperty(s))break}return i}function JG(e){return e?fo(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function js(e,t){return(t?e.slice(0,e.findIndex(o=>o.route.id===t)+1):[...e]).reverse().find(o=>o.route.hasErrorBoundary===!0)||e[0]}function YG(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Dn(e,t){let{pathname:n,routeId:o,method:i,type:r,message:s}=t===void 0?{}:t,I="Unknown Server Error",a="Unknown @remix-run/router error";return e===400?(I="Bad Request",r==="route-discovery"?a='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+s):i&&n&&o?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+o+'", ')+"so there is no way to handle the request.":r==="defer-action"?a="defer() is not supported in actions":r==="invalid-body"&&(a="Unable to encode submission body")):e===403?(I="Forbidden",a='Route "'+o+'" does not match URL "'+n+'"'):e===404?(I="Not Found",a='No route matches URL "'+n+'"'):e===405&&(I="Method Not Allowed",i&&n&&o?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+o+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new Gd(e||500,I,new Error(a),!0)}function lC(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[o,i]=t[n];if(kr(i))return{key:o,result:i}}}function qR(e){let t=typeof e=="string"?tr(e):e;return jr(Xt({},t,{hash:""}))}function qN(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function $N(e){return typeof e=="object"&&e!=null&&"then"in e}function eF(e){return $R(e.result)&&xN.has(e.result.status)}function Hg(e){return e.type===ht.deferred}function fo(e){return e.type===ht.error}function kr(e){return(e&&e.type)===ht.redirect}function HG(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function tF(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function $R(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function nF(e){return HN.has(e.toLowerCase())}function Ci(e){return JN.has(e.toLowerCase())}async function oF(e,t,n,o,i){let r=Object.entries(t);for(let s=0;s<r.length;s++){let[I,a]=r[s],c=e.find(m=>(m==null?void 0:m.route.id)===I);if(!c)continue;let C=o.find(m=>m.route.id===c.route.id),A=C!=null&&!_R(C,c)&&(i&&i[c.route.id])!==void 0;Hg(a)&&A&&await Vf(a,n,!1).then(m=>{m&&(t[I]=m)})}}async function iF(e,t,n){for(let o=0;o<n.length;o++){let{key:i,routeId:r,controller:s}=n[o],I=t[i];e.find(c=>(c==null?void 0:c.route.id)===r)&&Hg(I)&&(Te(s,"Expected an AbortController for revalidating fetcher deferred result"),await Vf(I,s.signal,!0).then(c=>{c&&(t[i]=c)}))}}async function Vf(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:ht.data,data:e.deferredData.unwrappedData}}catch(i){return{type:ht.error,error:i}}return{type:ht.data,data:e.deferredData.data}}}function Rf(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Pa(e,t){let n=typeof t=="string"?tr(t).search:t.search;if(e[e.length-1].route.index&&Rf(n||""))return e[e.length-1];let o=QR(e);return o[o.length-1]}function xG(e){let{formMethod:t,formAction:n,formEncType:o,text:i,formData:r,json:s}=e;if(!(!t||!n||!o)){if(i!=null)return{formMethod:t,formAction:n,formEncType:o,formData:void 0,json:void 0,text:i};if(r!=null)return{formMethod:t,formAction:n,formEncType:o,formData:r,json:void 0,text:void 0};if(s!==void 0)return{formMethod:t,formAction:n,formEncType:o,formData:void 0,json:s,text:void 0}}}function th(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function gF(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Xa(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function rF(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function vg(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function sF(e,t){try{let n=e.sessionStorage.getItem(jR);if(n){let o=JSON.parse(n);for(let[i,r]of Object.entries(o||{}))r&&Array.isArray(r)&&t.set(i,new Set(r||[]))}}catch{}}function lF(e,t){if(t.size>0){let n={};for(let[o,i]of t)n[o]=[...i];try{e.sessionStorage.setItem(jR,JSON.stringify(n))}catch(o){Bl(!1,"Failed to save applied view transitions in sessionStorage ("+o+").")}}}/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bd(){return Bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Bd.apply(this,arguments)}const gc=B.createContext(null),kf=B.createContext(null),nr=B.createContext(null),wf=B.createContext(null),or=B.createContext({outlet:null,matches:[],isDataRoute:!1}),e2=B.createContext(null);function aF(e,t){let{relative:n}=t===void 0?{}:t;rc()||Te(!1);let{basename:o,navigator:i}=B.useContext(nr),{hash:r,pathname:s,search:I}=Bu(e,{relative:n}),a=s;return o!=="/"&&(a=s==="/"?o:gg([o,s])),i.createHref({pathname:a,search:I,hash:r})}function rc(){return B.useContext(wf)!=null}function os(){return rc()||Te(!1),B.useContext(wf).location}function t2(e){B.useContext(nr).static||B.useLayoutEffect(e)}function Xo(){let{isDataRoute:e}=B.useContext(or);return e?ZF():IF()}function IF(){rc()||Te(!1);let e=B.useContext(gc),{basename:t,future:n,navigator:o}=B.useContext(nr),{matches:i}=B.useContext(or),{pathname:r}=os(),s=JSON.stringify(Sf(i,n.v7_relativeSplatPath)),I=B.useRef(!1);return t2(()=>{I.current=!0}),B.useCallback(function(c,C){if(C===void 0&&(C={}),!I.current)return;if(typeof c=="number"){o.go(c);return}let A=vf(c,JSON.parse(s),r,C.relative==="path");e==null&&t!=="/"&&(A.pathname=A.pathname==="/"?t:gg([t,A.pathname])),(C.replace?o.replace:o.push)(A,C.state,C)},[t,o,s,r,e])}function Gu(){let{matches:e}=B.useContext(or),t=e[e.length-1];return t?t.params:{}}function Bu(e,t){let{relative:n}=t===void 0?{}:t,{future:o}=B.useContext(nr),{matches:i}=B.useContext(or),{pathname:r}=os(),s=JSON.stringify(Sf(i,o.v7_relativeSplatPath));return B.useMemo(()=>vf(e,JSON.parse(s),r,n==="path"),[e,s,r,n])}function cF(e,t,n,o){rc()||Te(!1);let{navigator:i}=B.useContext(nr),{matches:r}=B.useContext(or),s=r[r.length-1],I=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let c=os(),C;C=c;let A=C.pathname||"/",m=A;if(a!=="/"){let G=a.replace(/^\//,"").split("/");m="/"+A.replace(/^\//,"").split("/").slice(G.length).join("/")}let p=vr(e,{pathname:m});return mF(p&&p.map(G=>Object.assign({},G,{params:Object.assign({},I,G.params),pathname:gg([a,i.encodeLocation?i.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?a:gg([a,i.encodeLocation?i.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),r,n,o)}function CF(){let e=fF(),t=yu(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},t),n?B.createElement("pre",{style:i},n):null,null)}const dF=B.createElement(CF,null);class uF extends B.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?B.createElement(or.Provider,{value:this.props.routeContext},B.createElement(e2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AF(e){let{routeContext:t,match:n,children:o}=e,i=B.useContext(gc);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),B.createElement(or.Provider,{value:t},o)}function mF(e,t,n,o){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),o===void 0&&(o=null),e==null){var r;if(!n)return null;if(n.errors)e=n.matches;else if((r=o)!=null&&r.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,I=(i=n)==null?void 0:i.errors;if(I!=null){let C=s.findIndex(A=>A.route.id&&(I==null?void 0:I[A.route.id])!==void 0);C>=0||Te(!1),s=s.slice(0,Math.min(s.length,C+1))}let a=!1,c=-1;if(n&&o&&o.v7_partialHydration)for(let C=0;C<s.length;C++){let A=s[C];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(c=C),A.route.id){let{loaderData:m,errors:p}=n,b=A.route.loader&&m[A.route.id]===void 0&&(!p||p[A.route.id]===void 0);if(A.route.lazy||b){a=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((C,A,m)=>{let p,b=!1,G=null,W=null;n&&(p=I&&A.route.id?I[A.route.id]:void 0,G=A.route.errorElement||dF,a&&(c<0&&m===0?(yF("route-fallback"),b=!0,W=null):c===m&&(b=!0,W=A.route.hydrateFallbackElement||null)));let Z=t.concat(s.slice(0,m+1)),y=()=>{let f;return p?f=G:b?f=W:A.route.Component?f=B.createElement(A.route.Component,null):A.route.element?f=A.route.element:f=C,B.createElement(AF,{match:A,routeContext:{outlet:C,matches:Z,isDataRoute:n!=null},children:f})};return n&&(A.route.ErrorBoundary||A.route.errorElement||m===0)?B.createElement(uF,{location:n.location,revalidation:n.revalidation,component:G,error:p,children:y(),routeContext:{outlet:null,matches:Z,isDataRoute:!0}}):y()},null)}var n2=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(n2||{}),Sd=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Sd||{});function hF(e){let t=B.useContext(gc);return t||Te(!1),t}function pF(e){let t=B.useContext(kf);return t||Te(!1),t}function bF(e){let t=B.useContext(or);return t||Te(!1),t}function o2(e){let t=bF(),n=t.matches[t.matches.length-1];return n.route.id||Te(!1),n.route.id}function fF(){var e;let t=B.useContext(e2),n=pF(Sd.UseRouteError),o=o2(Sd.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[o]}function ZF(){let{router:e}=hF(n2.UseNavigateStable),t=o2(Sd.UseNavigateStable),n=B.useRef(!1);return t2(()=>{n.current=!0}),B.useCallback(function(i,r){r===void 0&&(r={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Bd({fromRouteId:t},r)))},[e,t])}const NG={};function yF(e,t,n){NG[e]||(NG[e]=!0)}function GF(e){let{basename:t="/",children:n=null,location:o,navigationType:i=qt.Pop,navigator:r,static:s=!1,future:I}=e;rc()&&Te(!1);let a=t.replace(/^\/*/,"/"),c=B.useMemo(()=>({basename:a,navigator:r,static:s,future:Bd({v7_relativeSplatPath:!1},I)}),[a,I,r,s]);typeof o=="string"&&(o=tr(o));let{pathname:C="/",search:A="",hash:m="",state:p=null,key:b="default"}=o,G=B.useMemo(()=>{let W=Ag(C,a);return W==null?null:{location:{pathname:W,search:A,hash:m,state:p,key:b},navigationType:i}},[a,C,A,m,p,b,i]);return G==null?null:B.createElement(nr.Provider,{value:c},B.createElement(wf.Provider,{children:n,value:G}))}new Promise(()=>{});function BF(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:B.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:B.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:B.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sl(){return Sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Sl.apply(this,arguments)}function i2(e,t){if(e==null)return{};var n={},o=Object.keys(e),i,r;for(r=0;r<o.length;r++)i=o[r],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function SF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function vF(e,t){return e.button===0&&(!t||t==="_self")&&!SF(e)}const WF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],VF=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],RF="6";try{window.__reactRouterVersion=RF}catch{}function kF(e,t){return EN({basename:void 0,future:Sl({},void 0,{v7_prependBasename:!0}),history:IN({window:void 0}),hydrationData:wF(),routes:e,mapRouteProperties:BF,unstable_dataStrategy:void 0,unstable_patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function wF(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Sl({},t,{errors:XF(t.errors)})),t}function XF(e){if(!e)return null;let t=Object.entries(e),n={};for(let[o,i]of t)if(i&&i.__type==="RouteErrorResponse")n[o]=new Gd(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let r=window[i.__subType];if(typeof r=="function")try{let s=new r(i.message);s.stack="",n[o]=s}catch{}}if(n[o]==null){let r=new Error(i.message);r.stack="",n[o]=r}}else n[o]=i;return n}const g2=B.createContext({isTransitioning:!1}),JF=B.createContext(new Map),YF="startTransition",FG=OC[YF],HF="flushSync",KG=zx[HF];function xF(e){FG?FG(e):e()}function Ja(e){KG?KG(e):e()}class NF{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=o=>{this.status==="pending"&&(this.status="resolved",t(o))},this.reject=o=>{this.status==="pending"&&(this.status="rejected",n(o))}})}}function FF(e){let{fallbackElement:t,router:n,future:o}=e,[i,r]=B.useState(n.state),[s,I]=B.useState(),[a,c]=B.useState({isTransitioning:!1}),[C,A]=B.useState(),[m,p]=B.useState(),[b,G]=B.useState(),W=B.useRef(new Map),{v7_startTransition:Z}=o||{},y=B.useCallback(R=>{Z?xF(R):R()},[Z]),f=B.useCallback((R,F)=>{let{deletedFetchers:x,unstable_flushSync:M,unstable_viewTransitionOpts:Q}=F;x.forEach(_=>W.current.delete(_)),R.fetchers.forEach((_,ne)=>{_.data!==void 0&&W.current.set(ne,_.data)});let $=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!Q||$){M?Ja(()=>r(R)):y(()=>r(R));return}if(M){Ja(()=>{m&&(C&&C.resolve(),m.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:Q.currentLocation,nextLocation:Q.nextLocation})});let _=n.window.document.startViewTransition(()=>{Ja(()=>r(R))});_.finished.finally(()=>{Ja(()=>{A(void 0),p(void 0),I(void 0),c({isTransitioning:!1})})}),Ja(()=>p(_));return}m?(C&&C.resolve(),m.skipTransition(),G({state:R,currentLocation:Q.currentLocation,nextLocation:Q.nextLocation})):(I(R),c({isTransitioning:!0,flushSync:!1,currentLocation:Q.currentLocation,nextLocation:Q.nextLocation}))},[n.window,m,C,W,y]);B.useLayoutEffect(()=>n.subscribe(f),[n,f]),B.useEffect(()=>{a.isTransitioning&&!a.flushSync&&A(new NF)},[a]),B.useEffect(()=>{if(C&&s&&n.window){let R=s,F=C.promise,x=n.window.document.startViewTransition(async()=>{y(()=>r(R)),await F});x.finished.finally(()=>{A(void 0),p(void 0),I(void 0),c({isTransitioning:!1})}),p(x)}},[y,s,C,n.window]),B.useEffect(()=>{C&&s&&i.location.key===s.location.key&&C.resolve()},[C,m,i.location,s]),B.useEffect(()=>{!a.isTransitioning&&b&&(I(b.state),c({isTransitioning:!0,flushSync:!1,currentLocation:b.currentLocation,nextLocation:b.nextLocation}),G(void 0))},[a.isTransitioning,b]),B.useEffect(()=>{},[]);let v=B.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:R=>n.navigate(R),push:(R,F,x)=>n.navigate(R,{state:F,preventScrollReset:x==null?void 0:x.preventScrollReset}),replace:(R,F,x)=>n.navigate(R,{replace:!0,state:F,preventScrollReset:x==null?void 0:x.preventScrollReset})}),[n]),V=n.basename||"/",X=B.useMemo(()=>({router:n,navigator:v,static:!1,basename:V}),[n,v,V]),w=B.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return B.createElement(B.Fragment,null,B.createElement(gc.Provider,{value:X},B.createElement(kf.Provider,{value:i},B.createElement(JF.Provider,{value:W.current},B.createElement(g2.Provider,{value:a},B.createElement(GF,{basename:V,location:i.location,navigationType:i.historyAction,navigator:v,future:w},i.initialized||n.future.v7_partialHydration?B.createElement(KF,{routes:n.routes,future:n.future,state:i}):t))))),null)}const KF=B.memo(EF);function EF(e){let{routes:t,future:n,state:o}=e;return cF(t,void 0,o,n)}const MF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",LF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Su=B.forwardRef(function(t,n){let{onClick:o,relative:i,reloadDocument:r,replace:s,state:I,target:a,to:c,preventScrollReset:C,unstable_viewTransition:A}=t,m=i2(t,WF),{basename:p}=B.useContext(nr),b,G=!1;if(typeof c=="string"&&LF.test(c)&&(b=c,MF))try{let f=new URL(window.location.href),v=c.startsWith("//")?new URL(f.protocol+c):new URL(c),V=Ag(v.pathname,p);v.origin===f.origin&&V!=null?c=V+v.search+v.hash:G=!0}catch{}let W=aF(c,{relative:i}),Z=TF(c,{replace:s,state:I,target:a,preventScrollReset:C,relative:i,unstable_viewTransition:A});function y(f){o&&o(f),f.defaultPrevented||Z(f)}return B.createElement("a",Sl({},m,{href:b||W,onClick:G||r?o:y,ref:n,target:a}))}),Zo=B.forwardRef(function(t,n){let{"aria-current":o="page",caseSensitive:i=!1,className:r="",end:s=!1,style:I,to:a,unstable_viewTransition:c,children:C}=t,A=i2(t,VF),m=Bu(a,{relative:A.relative}),p=os(),b=B.useContext(kf),{navigator:G,basename:W}=B.useContext(nr),Z=b!=null&&UF(m)&&c===!0,y=G.encodeLocation?G.encodeLocation(m).pathname:m.pathname,f=p.pathname,v=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;i||(f=f.toLowerCase(),v=v?v.toLowerCase():null,y=y.toLowerCase()),v&&W&&(v=Ag(v,W)||v);const V=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let X=f===y||!s&&f.startsWith(y)&&f.charAt(V)==="/",w=v!=null&&(v===y||!s&&v.startsWith(y)&&v.charAt(y.length)==="/"),R={isActive:X,isPending:w,isTransitioning:Z},F=X?o:void 0,x;typeof r=="function"?x=r(R):x=[r,X?"active":null,w?"pending":null,Z?"transitioning":null].filter(Boolean).join(" ");let M=typeof I=="function"?I(R):I;return B.createElement(Su,Sl({},A,{"aria-current":F,className:x,ref:n,style:M,to:a,unstable_viewTransition:c}),typeof C=="function"?C(R):C)});var wp;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(wp||(wp={}));var EG;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(EG||(EG={}));function zF(e){let t=B.useContext(gc);return t||Te(!1),t}function TF(e,t){let{target:n,replace:o,state:i,preventScrollReset:r,relative:s,unstable_viewTransition:I}=t===void 0?{}:t,a=Xo(),c=os(),C=Bu(e,{relative:s});return B.useCallback(A=>{if(vF(A,n)){A.preventDefault();let m=o!==void 0?o:jr(c)===jr(C);a(e,{replace:m,state:i,preventScrollReset:r,relative:s,unstable_viewTransition:I})}},[c,a,C,o,i,n,e,r,s,I])}function UF(e,t){t===void 0&&(t={});let n=B.useContext(g2);n==null&&Te(!1);let{basename:o}=zF(wp.useViewTransitionState),i=Bu(e,{relative:t.relative});if(!n.isTransitioning)return!1;let r=Ag(n.currentLocation.pathname,o)||n.currentLocation.pathname,s=Ag(n.nextLocation.pathname,o)||n.nextLocation.pathname;return yd(i.pathname,s)!=null||yd(i.pathname,r)!=null}const DF="http://209.58.160.245:1337",QF=async(e,t)=>{try{const n=`${DF}/api/auth/local`;console.log("identifier: ",e," password: ",t);const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,password:t})});if(!o.ok){const r=await o.json();throw console.error("Error:",r),new Error(`Request failed with status ${o.status}`)}return await o.json()}catch(n){throw console.error("Error:",n.message),n}},PF=async e=>{const t=`cook${e}@cook.com`,n="cookcook";try{const o=await QF(t,n);return{jwt:o.jwt,user:{id:o.user.id,username:o.user.username,email:o.user.email,provider:o.user.provider,confirmed:o.user.confirmed,blocked:o.user.blocked,createdAt:o.user.createdAt,updatedAt:o.user.updatedAt,lineId:o.user.lineId,backgroundImage:o.user.backgroundImage,fullName:o.user.fullName,gender:o.user.gender,address:o.user.address,cardID:o.user.cardID,telNumber:o.user.telNumber,userType:o.user.userType,point:o.user.point}}}catch(o){return console.error("Authentication failed:",o.message),!1}},jF="2006448899-kaB4QBVr",_F=()=>{const e=Xo(),{isLoggedIn:t,liff:n,error:o}=Gf(),[i,r]=B.useState(!0),[s,I]=B.useState(""),[a,c]=B.useState("");return B.useEffect(()=>{(async()=>{try{if(typeof n>"u"){console.error("LIFF is undefined. Please check if the SDK is loaded correctly."),c("LIFF is not loaded. Please refresh the page.");return}if(typeof n.init!="function"){console.error("LIFF init method is not a function. Please check your LIFF SDK version."),c("LIFF is not initialized correctly. Please try again.");return}if(await n.init({liffId:jF}),console.log("LIFF initialized successfully."),n.isLoggedIn()){const A=await n.getProfile();I(A.displayName);const m=await PF(A.userId);if(!m)e("/Login");else{const{jwt:p,user:b}=m;localStorage.setItem("accessToken",p),localStorage.setItem("user",JSON.stringify(b)),console.log("Token and user data saved to localStorage"),e("/partner/shopHome")}}else n.login()}catch(A){console.error("Initialization or login error:",A),c("Initialization or login error. Please try again.")}finally{r(!1)}})()},[n,e]),i?u.jsx("div",{className:"App",children:u.jsx("p",{children:"Loading..."})}):o?u.jsx("div",{className:"App",children:u.jsxs("p",{children:["Something went wrong: ",o.message]})}):u.jsx("div",{className:"App"})},is="http://209.58.160.245:1337",r2=async e=>{try{const t=`${is}/api/shops/?populate=image`,n=await fetch(t,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!n.ok){const r=await n.json();throw console.error("Error fetching shops:",r),new Error(`Request failed with status ${n.status}`)}return(await n.json()).data.map(r=>({id:r.id,name:r.attributes.name,location:r.attributes.location,latitude:r.attributes.latitude,longitude:r.attributes.longitude,createdAt:r.attributes.createdAt,updatedAt:r.attributes.updatedAt,publishedAt:r.attributes.publishedAt,bookBankNumber:r.attributes.bookBankNumber,image:r.attributes.image}))}catch(t){throw console.error("Error fetching shops:",t.message),t}},Dl=async(e,t)=>{try{const n=await fetch(`${is}/api/users/${t}?populate=shop`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok){const r=await n.json();throw console.error("Error fetching shop by ID:",r),new Error(`Request failed with status ${n.status}`)}const o=await n.text();if(console.log("Raw response:",o),!o)throw new Error("No data returned from the server");return JSON.parse(o)}catch(n){throw console.error("Error fetching shop by ID:",n),n}},OF=async(e,t)=>{try{const n=`${is}/api/shops`,o=await fetch(n,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({data:t})});if(!o.ok){const r=await o.json();throw console.error("Error creating shop:",r),new Error(`Request failed with status ${o.status}`)}return await o.json()}catch(n){throw console.error("Error creating shop:",n.message),n}},qF=async(e,t,n)=>{console.log("updateUserFromShop :: "),console.log("UserID :: "+t),console.log("UserData :: "+n);try{const o=`${is}/api/users/${t}`,i=await fetch(o,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!i.ok){const s=await i.json();throw console.error("Error creating UserFromShop:",s),new Error(`Request failed with status ${i.status}`)}return await i.json()}catch(o){throw console.error("Error creating UserFromShop:",o.message),o}},$F=async e=>{try{const t=`${is}/api/banks`,n=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok){const r=await n.json();throw console.error("Error fetching banks:",r),new Error(`Request failed with status ${n.status}`)}const o=await n.json();if(!o||!o.data)return console.error("No data found in response"),[];const i=o.data.map(r=>({id:r.id,name:r.attributes.name,createdAt:r.attributes.createdAt,updatedAt:r.attributes.updatedAt,publishedAt:r.attributes.publishedAt}));return console.log(i),i}catch(t){throw console.error("Error fetching banks:",t.message),t}},e5=async e=>{try{const t=`${is}/api/shops/${e}?populate[invoices][populate]=redeem.customer`,n=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok){const i=await n.json();throw console.error("Error fetching invoices:",i),new Error(`Request failed with status ${n.status}`)}const o=await n.json();return console.log("Invoices data received:",o),o}catch(t){throw console.error("Error fetching invoices:",t),t}},MG=async e=>{try{const t=`${is}/api/shops/${e}?populate=redeems`,n=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok){const i=await n.json();throw console.error("Error fetching redeem data:",i),new Error(`Request failed with status ${n.status}`)}return await n.json()}catch(t){throw console.error("Error fetching redeem data Back-END :",t),t}},s2="/assets/logo-CZ1hDsNe.png";var l2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},LG=Ee.createContext&&Ee.createContext(l2),t5=["attr","size","title"];function n5(e,t){if(e==null)return{};var n=o5(e,t),o,i;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function o5(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function vd(){return vd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},vd.apply(this,arguments)}function zG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,o)}return n}function Wd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zG(Object(n),!0).forEach(function(o){i5(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zG(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function i5(e,t,n){return t=g5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g5(e){var t=r5(e,"string");return typeof t=="symbol"?t:t+""}function r5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function a2(e){return e&&e.map((t,n)=>Ee.createElement(t.tag,Wd({key:n},t.attr),a2(t.child)))}function Mi(e){return t=>Ee.createElement(s5,vd({attr:Wd({},e.attr)},t),a2(e.child))}function s5(e){var t=n=>{var{attr:o,size:i,title:r}=e,s=n5(e,t5),I=i||n.size||"1em",a;return n.className&&(a=n.className),e.className&&(a=(a?a+" ":"")+e.className),Ee.createElement("svg",vd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,o,s,{className:a,style:Wd(Wd({color:e.color||n.color},n.style),e.style),height:I,width:I,xmlns:"http://www.w3.org/2000/svg"}),r&&Ee.createElement("title",null,r),e.children)};return LG!==void 0?Ee.createElement(LG.Consumer,null,n=>t(n)):t(l2)}function I2(e){return Mi({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 10a1 1 0 0 1 2 0v2a1 1 0 0 1-2 0zm3 0a1 1 0 0 1 2 0v2a1 1 0 0 1-2 0zm3 0a1 1 0 1 1 2 0v2a1 1 0 0 1-2 0z"},child:[]},{tag:"path",attr:{d:"M5.757 1.071a.5.5 0 0 1 .172.686L3.383 6h9.234L10.07 1.757a.5.5 0 1 1 .858-.514L13.783 6H15.5a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-.623l-1.844 6.456a.75.75 0 0 1-.722.544H3.69a.75.75 0 0 1-.722-.544L1.123 8H.5a.5.5 0 0 1-.5-.5v-1A.5.5 0 0 1 .5 6h1.717L5.07 1.243a.5.5 0 0 1 .686-.172zM2.163 8l1.714 6h8.246l1.714-6z"},child:[]}]})(e)}function c2(e){return Mi({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.5 9.511c.076.954.83 1.697 2.182 1.785V12h.6v-.709c1.4-.098 2.218-.846 2.218-1.932 0-.987-.626-1.496-1.745-1.76l-.473-.112V5.57c.6.068.982.396 1.074.85h1.052c-.076-.919-.864-1.638-2.126-1.716V4h-.6v.719c-1.195.117-2.01.836-2.01 1.853 0 .9.606 1.472 1.613 1.707l.397.098v2.034c-.615-.093-1.022-.43-1.114-.9zm2.177-2.166c-.59-.137-.91-.416-.91-.836 0-.47.345-.822.915-.925v1.76h-.005zm.692 1.193c.717.166 1.048.435 1.048.91 0 .542-.412.914-1.135.982V8.518z"},child:[]},{tag:"path",attr:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"},child:[]},{tag:"path",attr:{d:"M8 13.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11m0 .5A6 6 0 1 0 8 2a6 6 0 0 0 0 12"},child:[]}]})(e)}const Xf="http://209.58.160.245:1337",l5=async(e,t,n)=>{try{const o=`${Xf}/api/users/${e}`,i=await fetch(o,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(t)});if(!i.ok){const s=await i.json();throw console.error("Error:",s),new Error(`Request failed with status ${i.status}`)}return await i.json()}catch(o){throw console.error("Error:",o.message),o}},vu=async(e,t)=>{var n;if(!e||!t)throw new Error("No userId or token provided. User must be authenticated.");try{const o=e.toLowerCase();console.log("lowerCaseUserId",o);const i=`${Xf}/api/users?populate[photoImage]=true&filters[lineId][$eq]=${o}`,r=await fetch(i,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!r.ok){const a=await r.json();throw console.error("Error fetching user:",a),new Error(`Request failed with status ${r.status}: ${((n=a==null?void 0:a.error)==null?void 0:n.message)||"Unknown error"}`)}const s=await r.json();if(console.log("data",s),!s||!Array.isArray(s))throw new Error("Invalid response format: Expected an array of user data.");if(console.log("data.data.length",s.length),console.log("data[0].attributes.username",s[0].username),s.length===0)throw new Error("No user found with the provided lineId.");const I={id:s[0].id,username:s[0].username,email:s[0].email,fullName:s[0].fullName,lineId:s[0].lineId,gender:s[0].gender,address:s[0].address,cardID:s[0].cardID,telNumber:s[0].telNumber,userType:s[0].userType,point:s[0].point,photoImage:s[0].photoImage};return console.log("users",I),I}catch(o){throw console.error("Error fetching user:",o.message),o}},C2=async(e,t)=>{try{console.log("userData in createUser: ",e);const n=`${Xf}/api/auth/local/register`,o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("body: ",JSON.stringify(e)),!o.ok){const r=await o.json();throw console.error("Error:",r),new Error(`Request failed with status ${o.status}`)}return await o.json()}catch(n){throw console.error("Error:",n.message),n}};function Mn(){const e=localStorage.getItem("cart");let t=0;if(e){const W=JSON.parse(e);t=Object.values(W).reduce((Z,y)=>Z+y,0)}const n=void 0,o="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",[i,r]=B.useState(null),[s,I]=B.useState(!0),[a,c]=B.useState(null),{cartItems:C}=B.useContext(Bf),[A,m]=B.useState(!1);console.log("cartItems in header: ",C);const p=Xo(),b=()=>{p("/cart",{state:{storedCounts:e,cartItems:C}})};B.useEffect(()=>{(async()=>{try{I(!0);const Z=await vu(n,o);r(Z),I(!1)}catch(Z){console.error("Error fetching user:",Z),c(Z.message),I(!1)}})()},[n,o]);const G=()=>{m(W=>!W)};return s?u.jsx("p",{children:"Loading..."}):a?u.jsxs("p",{children:["Error: ",a]}):u.jsx(u.Fragment,{children:u.jsxs("nav",{className:"flex items-center justify-between p-5 pr-20 bg-white",children:[u.jsx(Zo,{to:"/",children:u.jsx("img",{src:s2,alt:"Logo",width:50})}),u.jsxs("div",{className:"flex items-center relative",children:[u.jsx(I2,{className:"w-10 h-10 text-green-700 ml-10",onClick:b}),t>0&&u.jsx("span",{className:"absolute -top-2 -right-2 bg-red-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:t})]}),u.jsx(Zo,{to:`/history-point/${i==null?void 0:i.id}`,children:u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx(c2,{className:"w-7 h-7 text-yellow-hard ml-8"}),u.jsx("p",{className:"ml-6 mt-2",children:u.jsx("strong",{children:(i==null?void 0:i.point)??0})})]})}),u.jsx("div",{children:u.jsxs("ul",{id:"navbar",className:A?"navbar open":"navbar",children:[u.jsx("li",{children:u.jsx(Zo,{className:"font-semibold hover:text-yellow-hard",to:"/update-user-profile",style:({isActive:W})=>({color:W?"yellow-hard":""}),children:"ข้อมูลส่วนตัว/ลงทะเบียน"})}),u.jsx("li",{children:u.jsx(Zo,{className:"font-semibold hover:text-yellow-hard",to:`/history-point/${i==null?void 0:i.id}`,style:({isActive:W})=>({color:W?"yellow-hard":""}),children:"คะแนนสะสมและประวัติการแลกแต้ม"})}),u.jsx("li",{children:u.jsx(Zo,{className:"font-semibold hover:text-yellow-hard",to:`/history-service-machine/${i==null?void 0:i.id}`,style:({isActive:W})=>({color:W?"yellow-hard":""}),children:"ประวัติการใช้บริการตู้"})})]})}),u.jsx("div",{id:"mobile",onClick:G,children:u.jsx("i",{id:"bar",className:A?"fas fa-times":"fas fa-bars"})})]})})}function a5(){const[e,t]=B.useState([]),[n,o]=B.useState(!0),[i,r]=B.useState(null),s="http://209.58.160.245:1337",I="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=";return B.useEffect(()=>{(async()=>{try{o(!0);const c=await r2(I);t(c),o(!1)}catch(c){console.error("Error fetching shops:",c),r(c.message),o(!1)}})()},[I]),n?u.jsx("p",{children:"Loading..."}):i?u.jsxs("p",{children:["Error: ",i]}):u.jsxs(u.Fragment,{children:[u.jsx(Mn,{}),u.jsx("div",{className:"mx-auto px-4",children:u.jsx("div",{className:"grid mt-5 md:grid-cols-2 md:gap-5 md:mt-2 lg:grid-cols-3  lg:gap-5 lg:mt-7",children:e.map(a=>{var c,C,A;return u.jsx(Su,{to:`/shop/${a.id}`,children:u.jsxs("div",{className:"shop-2",children:[u.jsx("span",{className:"circle",style:{backgroundImage:(A=(C=(c=a.image)==null?void 0:c.data)==null?void 0:C.attributes)!=null&&A.url?`url(${s}${a.image.data.attributes.url})`:"url(https://cdn.britannica.com/70/234870-050-D4D024BB/Orange-colored-cat-yawns-displaying-teeth.jpg)",backgroundSize:"cover"}}),u.jsx("span",{className:"pl-2",children:a.name})]})},a.id)})})})]})}const I5="/assets/coins-CXLUNMre.png";function _r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const c5=Object.freeze(Object.defineProperty({__proto__:null,default:_r},Symbol.toStringTag,{value:"Module"}));function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},J.apply(null,arguments)}const C5=Object.freeze(Object.defineProperty({__proto__:null,get default(){return J}},Symbol.toStringTag,{value:"Module"}));function d2(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var d5=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,u5=d2(function(e){return d5.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),A5=!1;function m5(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function h5(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var p5=function(){function e(n){var o=this;this._insertTag=function(i){var r;o.tags.length===0?o.insertionPoint?r=o.insertionPoint.nextSibling:o.prepend?r=o.container.firstChild:r=o.before:r=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(i,r),o.tags.push(i)},this.isSpeedy=n.speedy===void 0?!A5:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(o){o.forEach(this._insertTag)},t.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(h5(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var r=m5(i);try{r.insertRule(o,r.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(o));this.ctr++},t.flush=function(){this.tags.forEach(function(o){var i;return(i=o.parentNode)==null?void 0:i.removeChild(o)}),this.tags=[],this.ctr=0},e}(),Xn="-ms-",Vd="-moz-",gt="-webkit-",u2="comm",Jf="rule",Yf="decl",b5="@import",A2="@keyframes",f5="@layer",Z5=Math.abs,Wu=String.fromCharCode,y5=Object.assign;function G5(e,t){return Bn(e,0)^45?(((t<<2^Bn(e,0))<<2^Bn(e,1))<<2^Bn(e,2))<<2^Bn(e,3):0}function m2(e){return e.trim()}function B5(e,t){return(e=t.exec(e))?e[0]:e}function rt(e,t,n){return e.replace(t,n)}function Xp(e,t){return e.indexOf(t)}function Bn(e,t){return e.charCodeAt(t)|0}function HI(e,t,n){return e.slice(t,n)}function Ri(e){return e.length}function Hf(e){return e.length}function aC(e,t){return t.push(e),e}function S5(e,t){return e.map(t).join("")}var Vu=1,vl=1,h2=0,uo=0,$t=0,Ql="";function Ru(e,t,n,o,i,r,s){return{value:e,root:t,parent:n,type:o,props:i,children:r,line:Vu,column:vl,length:s,return:""}}function Ya(e,t){return y5(Ru("",null,null,"",null,null,0),e,{length:-e.length},t)}function v5(){return $t}function W5(){return $t=uo>0?Bn(Ql,--uo):0,vl--,$t===10&&(vl=1,Vu--),$t}function So(){return $t=uo<h2?Bn(Ql,uo++):0,vl++,$t===10&&(vl=1,Vu++),$t}function Hi(){return Bn(Ql,uo)}function YC(){return uo}function sc(e,t){return HI(Ql,e,t)}function xI(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function p2(e){return Vu=vl=1,h2=Ri(Ql=e),uo=0,[]}function b2(e){return Ql="",e}function HC(e){return m2(sc(uo-1,Jp(e===91?e+2:e===40?e+1:e)))}function V5(e){for(;($t=Hi())&&$t<33;)So();return xI(e)>2||xI($t)>3?"":" "}function R5(e,t){for(;--t&&So()&&!($t<48||$t>102||$t>57&&$t<65||$t>70&&$t<97););return sc(e,YC()+(t<6&&Hi()==32&&So()==32))}function Jp(e){for(;So();)switch($t){case e:return uo;case 34:case 39:e!==34&&e!==39&&Jp($t);break;case 40:e===41&&Jp(e);break;case 92:So();break}return uo}function k5(e,t){for(;So()&&e+$t!==57;)if(e+$t===84&&Hi()===47)break;return"/*"+sc(t,uo-1)+"*"+Wu(e===47?e:So())}function w5(e){for(;!xI(Hi());)So();return sc(e,uo)}function X5(e){return b2(xC("",null,null,null,[""],e=p2(e),0,[0],e))}function xC(e,t,n,o,i,r,s,I,a){for(var c=0,C=0,A=s,m=0,p=0,b=0,G=1,W=1,Z=1,y=0,f="",v=i,V=r,X=o,w=f;W;)switch(b=y,y=So()){case 40:if(b!=108&&Bn(w,A-1)==58){Xp(w+=rt(HC(y),"&","&\f"),"&\f")!=-1&&(Z=-1);break}case 34:case 39:case 91:w+=HC(y);break;case 9:case 10:case 13:case 32:w+=V5(b);break;case 92:w+=R5(YC()-1,7);continue;case 47:switch(Hi()){case 42:case 47:aC(J5(k5(So(),YC()),t,n),a);break;default:w+="/"}break;case 123*G:I[c++]=Ri(w)*Z;case 125*G:case 59:case 0:switch(y){case 0:case 125:W=0;case 59+C:Z==-1&&(w=rt(w,/\f/g,"")),p>0&&Ri(w)-A&&aC(p>32?UG(w+";",o,n,A-1):UG(rt(w," ","")+";",o,n,A-2),a);break;case 59:w+=";";default:if(aC(X=TG(w,t,n,c,C,i,I,f,v=[],V=[],A),r),y===123)if(C===0)xC(w,t,X,X,v,r,A,I,V);else switch(m===99&&Bn(w,3)===110?100:m){case 100:case 108:case 109:case 115:xC(e,X,X,o&&aC(TG(e,X,X,0,0,i,I,f,i,v=[],A),V),i,V,A,I,o?v:V);break;default:xC(w,X,X,X,[""],V,0,I,V)}}c=C=p=0,G=Z=1,f=w="",A=s;break;case 58:A=1+Ri(w),p=b;default:if(G<1){if(y==123)--G;else if(y==125&&G++==0&&W5()==125)continue}switch(w+=Wu(y),y*G){case 38:Z=C>0?1:(w+="\f",-1);break;case 44:I[c++]=(Ri(w)-1)*Z,Z=1;break;case 64:Hi()===45&&(w+=HC(So())),m=Hi(),C=A=Ri(f=w+=w5(YC())),y++;break;case 45:b===45&&Ri(w)==2&&(G=0)}}return r}function TG(e,t,n,o,i,r,s,I,a,c,C){for(var A=i-1,m=i===0?r:[""],p=Hf(m),b=0,G=0,W=0;b<o;++b)for(var Z=0,y=HI(e,A+1,A=Z5(G=s[b])),f=e;Z<p;++Z)(f=m2(G>0?m[Z]+" "+y:rt(y,/&\f/g,m[Z])))&&(a[W++]=f);return Ru(e,t,n,i===0?Jf:I,a,c,C)}function J5(e,t,n){return Ru(e,t,n,u2,Wu(v5()),HI(e,2,-2),0)}function UG(e,t,n,o){return Ru(e,t,n,Yf,HI(e,0,o),HI(e,o+1,-1),o)}function Il(e,t){for(var n="",o=Hf(e),i=0;i<o;i++)n+=t(e[i],i,e,t)||"";return n}function Y5(e,t,n,o){switch(e.type){case f5:if(e.children.length)break;case b5:case Yf:return e.return=e.return||e.value;case u2:return"";case A2:return e.return=e.value+"{"+Il(e.children,o)+"}";case Jf:e.value=e.props.join(",")}return Ri(n=Il(e.children,o))?e.return=e.value+"{"+n+"}":""}function H5(e){var t=Hf(e);return function(n,o,i,r){for(var s="",I=0;I<t;I++)s+=e[I](n,o,i,r)||"";return s}}function x5(e){return function(t){t.root||(t=t.return)&&e(t)}}var N5=function(t,n,o){for(var i=0,r=0;i=r,r=Hi(),i===38&&r===12&&(n[o]=1),!xI(r);)So();return sc(t,uo)},F5=function(t,n){var o=-1,i=44;do switch(xI(i)){case 0:i===38&&Hi()===12&&(n[o]=1),t[o]+=N5(uo-1,n,o);break;case 2:t[o]+=HC(i);break;case 4:if(i===44){t[++o]=Hi()===58?"&\f":"",n[o]=t[o].length;break}default:t[o]+=Wu(i)}while(i=So());return t},K5=function(t,n){return b2(F5(p2(t),n))},DG=new WeakMap,E5=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,o=t.parent,i=t.column===o.column&&t.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!DG.get(o))&&!i){DG.set(t,!0);for(var r=[],s=K5(n,r),I=o.props,a=0,c=0;a<s.length;a++)for(var C=0;C<I.length;C++,c++)t.props[c]=r[a]?s[a].replace(/&\f/g,I[C]):I[C]+" "+s[a]}}},M5=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function f2(e,t){switch(G5(e,t)){case 5103:return gt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return gt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return gt+e+Vd+e+Xn+e+e;case 6828:case 4268:return gt+e+Xn+e+e;case 6165:return gt+e+Xn+"flex-"+e+e;case 5187:return gt+e+rt(e,/(\w+).+(:[^]+)/,gt+"box-$1$2"+Xn+"flex-$1$2")+e;case 5443:return gt+e+Xn+"flex-item-"+rt(e,/flex-|-self/,"")+e;case 4675:return gt+e+Xn+"flex-line-pack"+rt(e,/align-content|flex-|-self/,"")+e;case 5548:return gt+e+Xn+rt(e,"shrink","negative")+e;case 5292:return gt+e+Xn+rt(e,"basis","preferred-size")+e;case 6060:return gt+"box-"+rt(e,"-grow","")+gt+e+Xn+rt(e,"grow","positive")+e;case 4554:return gt+rt(e,/([^-])(transform)/g,"$1"+gt+"$2")+e;case 6187:return rt(rt(rt(e,/(zoom-|grab)/,gt+"$1"),/(image-set)/,gt+"$1"),e,"")+e;case 5495:case 3959:return rt(e,/(image-set\([^]*)/,gt+"$1$`$1");case 4968:return rt(rt(e,/(.+:)(flex-)?(.*)/,gt+"box-pack:$3"+Xn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+gt+e+e;case 4095:case 3583:case 4068:case 2532:return rt(e,/(.+)-inline(.+)/,gt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ri(e)-1-t>6)switch(Bn(e,t+1)){case 109:if(Bn(e,t+4)!==45)break;case 102:return rt(e,/(.+:)(.+)-([^]+)/,"$1"+gt+"$2-$3$1"+Vd+(Bn(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Xp(e,"stretch")?f2(rt(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Bn(e,t+1)!==115)break;case 6444:switch(Bn(e,Ri(e)-3-(~Xp(e,"!important")&&10))){case 107:return rt(e,":",":"+gt)+e;case 101:return rt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+gt+(Bn(e,14)===45?"inline-":"")+"box$3$1"+gt+"$2$3$1"+Xn+"$2box$3")+e}break;case 5936:switch(Bn(e,t+11)){case 114:return gt+e+Xn+rt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return gt+e+Xn+rt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return gt+e+Xn+rt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return gt+e+Xn+e+e}return e}var L5=function(t,n,o,i){if(t.length>-1&&!t.return)switch(t.type){case Yf:t.return=f2(t.value,t.length);break;case A2:return Il([Ya(t,{value:rt(t.value,"@","@"+gt)})],i);case Jf:if(t.length)return S5(t.props,function(r){switch(B5(r,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Il([Ya(t,{props:[rt(r,/:(read-\w+)/,":"+Vd+"$1")]})],i);case"::placeholder":return Il([Ya(t,{props:[rt(r,/:(plac\w+)/,":"+gt+"input-$1")]}),Ya(t,{props:[rt(r,/:(plac\w+)/,":"+Vd+"$1")]}),Ya(t,{props:[rt(r,/:(plac\w+)/,Xn+"input-$1")]})],i)}return""})}},z5=[L5],Z2=function(t){var n=t.key;if(n==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(G){var W=G.getAttribute("data-emotion");W.indexOf(" ")!==-1&&(document.head.appendChild(G),G.setAttribute("data-s",""))})}var i=t.stylisPlugins||z5,r={},s,I=[];s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(G){for(var W=G.getAttribute("data-emotion").split(" "),Z=1;Z<W.length;Z++)r[W[Z]]=!0;I.push(G)});var a,c=[E5,M5];{var C,A=[Y5,x5(function(G){C.insert(G)})],m=H5(c.concat(i,A)),p=function(W){return Il(X5(W),m)};a=function(W,Z,y,f){C=y,p(W?W+"{"+Z.styles+"}":Z.styles),f&&(b.inserted[Z.name]=!0)}}var b={key:n,sheet:new p5({key:n,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:r,registered:{},insert:a};return b.sheet.hydrate(I),b},y2={exports:{}},dt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pn=typeof Symbol=="function"&&Symbol.for,xf=pn?Symbol.for("react.element"):60103,Nf=pn?Symbol.for("react.portal"):60106,ku=pn?Symbol.for("react.fragment"):60107,wu=pn?Symbol.for("react.strict_mode"):60108,Xu=pn?Symbol.for("react.profiler"):60114,Ju=pn?Symbol.for("react.provider"):60109,Yu=pn?Symbol.for("react.context"):60110,Ff=pn?Symbol.for("react.async_mode"):60111,Hu=pn?Symbol.for("react.concurrent_mode"):60111,xu=pn?Symbol.for("react.forward_ref"):60112,Nu=pn?Symbol.for("react.suspense"):60113,T5=pn?Symbol.for("react.suspense_list"):60120,Fu=pn?Symbol.for("react.memo"):60115,Ku=pn?Symbol.for("react.lazy"):60116,U5=pn?Symbol.for("react.block"):60121,D5=pn?Symbol.for("react.fundamental"):60117,Q5=pn?Symbol.for("react.responder"):60118,P5=pn?Symbol.for("react.scope"):60119;function Jo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case xf:switch(e=e.type,e){case Ff:case Hu:case ku:case Xu:case wu:case Nu:return e;default:switch(e=e&&e.$$typeof,e){case Yu:case xu:case Ku:case Fu:case Ju:return e;default:return t}}case Nf:return t}}}function G2(e){return Jo(e)===Hu}dt.AsyncMode=Ff;dt.ConcurrentMode=Hu;dt.ContextConsumer=Yu;dt.ContextProvider=Ju;dt.Element=xf;dt.ForwardRef=xu;dt.Fragment=ku;dt.Lazy=Ku;dt.Memo=Fu;dt.Portal=Nf;dt.Profiler=Xu;dt.StrictMode=wu;dt.Suspense=Nu;dt.isAsyncMode=function(e){return G2(e)||Jo(e)===Ff};dt.isConcurrentMode=G2;dt.isContextConsumer=function(e){return Jo(e)===Yu};dt.isContextProvider=function(e){return Jo(e)===Ju};dt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===xf};dt.isForwardRef=function(e){return Jo(e)===xu};dt.isFragment=function(e){return Jo(e)===ku};dt.isLazy=function(e){return Jo(e)===Ku};dt.isMemo=function(e){return Jo(e)===Fu};dt.isPortal=function(e){return Jo(e)===Nf};dt.isProfiler=function(e){return Jo(e)===Xu};dt.isStrictMode=function(e){return Jo(e)===wu};dt.isSuspense=function(e){return Jo(e)===Nu};dt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ku||e===Hu||e===Xu||e===wu||e===Nu||e===T5||typeof e=="object"&&e!==null&&(e.$$typeof===Ku||e.$$typeof===Fu||e.$$typeof===Ju||e.$$typeof===Yu||e.$$typeof===xu||e.$$typeof===D5||e.$$typeof===Q5||e.$$typeof===P5||e.$$typeof===U5)};dt.typeOf=Jo;y2.exports=dt;var j5=y2.exports,B2=j5,_5={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},O5={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},S2={};S2[B2.ForwardRef]=_5;S2[B2.Memo]=O5;var q5=!0;function $5(e,t,n){var o="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(o+=i+" ")}),o}var v2=function(t,n,o){var i=t.key+"-"+n.name;(o===!1||q5===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},W2=function(t,n,o){v2(t,n,o);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var r=n;do t.insert(n===r?"."+i:"",r,t.sheet,!0),r=r.next;while(r!==void 0)}};function e9(e){for(var t=0,n,o=0,i=e.length;i>=4;++o,i-=4)n=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(o+2)&255)<<16;case 2:t^=(e.charCodeAt(o+1)&255)<<8;case 1:t^=e.charCodeAt(o)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var t9={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},n9=!1,o9=/[A-Z]|^ms/g,i9=/_EMO_([^_]+?)_([^]*?)_EMO_/g,V2=function(t){return t.charCodeAt(1)===45},QG=function(t){return t!=null&&typeof t!="boolean"},nh=d2(function(e){return V2(e)?e:e.replace(o9,"-$&").toLowerCase()}),PG=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(i9,function(o,i,r){return ki={name:i,styles:r,next:ki},i})}return t9[t]!==1&&!V2(t)&&typeof n=="number"&&n!==0?n+"px":n},g9="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function NI(e,t,n){if(n==null)return"";var o=n;if(o.__emotion_styles!==void 0)return o;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return ki={name:i.name,styles:i.styles,next:ki},i.name;var r=n;if(r.styles!==void 0){var s=r.next;if(s!==void 0)for(;s!==void 0;)ki={name:s.name,styles:s.styles,next:ki},s=s.next;var I=r.styles+";";return I}return r9(e,t,n)}case"function":{if(e!==void 0){var a=ki,c=n(e);return ki=a,NI(e,t,c)}break}}var C=n;if(t==null)return C;var A=t[C];return A!==void 0?A:C}function r9(e,t,n){var o="";if(Array.isArray(n))for(var i=0;i<n.length;i++)o+=NI(e,t,n[i])+";";else for(var r in n){var s=n[r];if(typeof s!="object"){var I=s;t!=null&&t[I]!==void 0?o+=r+"{"+t[I]+"}":QG(I)&&(o+=nh(r)+":"+PG(r,I)+";")}else{if(r==="NO_COMPONENT_SELECTOR"&&n9)throw new Error(g9);if(Array.isArray(s)&&typeof s[0]=="string"&&(t==null||t[s[0]]===void 0))for(var a=0;a<s.length;a++)QG(s[a])&&(o+=nh(r)+":"+PG(r,s[a])+";");else{var c=NI(e,t,s);switch(r){case"animation":case"animationName":{o+=nh(r)+":"+c+";";break}default:o+=r+"{"+c+"}"}}}}return o}var jG=/label:\s*([^\s;{]+)\s*(;|$)/g,ki;function Kf(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var o=!0,i="";ki=void 0;var r=e[0];if(r==null||r.raw===void 0)o=!1,i+=NI(n,t,r);else{var s=r;i+=s[0]}for(var I=1;I<e.length;I++)if(i+=NI(n,t,e[I]),o){var a=r;i+=a[I]}jG.lastIndex=0;for(var c="",C;(C=jG.exec(i))!==null;)c+="-"+C[1];var A=e9(i)+c;return{name:A,styles:i,next:ki}}var s9=function(t){return t()},R2=OC.useInsertionEffect?OC.useInsertionEffect:!1,l9=R2||s9,_G=R2||B.useLayoutEffect,k2=B.createContext(typeof HTMLElement<"u"?Z2({key:"css"}):null),a9=k2.Provider,w2=function(t){return B.forwardRef(function(n,o){var i=B.useContext(k2);return t(n,i,o)})},lc=B.createContext({}),I9=w2(function(e,t){var n=e.styles,o=Kf([n],void 0,B.useContext(lc)),i=B.useRef();return _G(function(){var r=t.key+"-global",s=new t.sheet.constructor({key:r,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),I=!1,a=document.querySelector('style[data-emotion="'+r+" "+o.name+'"]');return t.sheet.tags.length&&(s.before=t.sheet.tags[0]),a!==null&&(I=!0,a.setAttribute("data-emotion",r),s.hydrate([a])),i.current=[s,I],function(){s.flush()}},[t]),_G(function(){var r=i.current,s=r[0],I=r[1];if(I){r[1]=!1;return}if(o.next!==void 0&&W2(t,o.next,!0),s.tags.length){var a=s.tags[s.tags.length-1].nextElementSibling;s.before=a,s.flush()}t.insert("",o,s,!1)},[t,o.name]),null});function Eu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Kf(t)}var Pl=function(){var t=Eu.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},c9=u5,C9=function(t){return t!=="theme"},OG=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?c9:C9},qG=function(t,n,o){var i;if(n){var r=n.shouldForwardProp;i=t.__emotion_forwardProp&&r?function(s){return t.__emotion_forwardProp(s)&&r(s)}:r}return typeof i!="function"&&o&&(i=t.__emotion_forwardProp),i},d9=!1,u9=function(t){var n=t.cache,o=t.serialized,i=t.isStringTag;return v2(n,o,i),l9(function(){return W2(n,o,i)}),null},A9=function e(t,n){var o=t.__emotion_real===t,i=o&&t.__emotion_base||t,r,s;n!==void 0&&(r=n.label,s=n.target);var I=qG(t,n,o),a=I||OG(i),c=!a("as");return function(){var C=arguments,A=o&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(r!==void 0&&A.push("label:"+r+";"),C[0]==null||C[0].raw===void 0)A.push.apply(A,C);else{A.push(C[0][0]);for(var m=C.length,p=1;p<m;p++)A.push(C[p],C[0][p])}var b=w2(function(G,W,Z){var y=c&&G.as||i,f="",v=[],V=G;if(G.theme==null){V={};for(var X in G)V[X]=G[X];V.theme=B.useContext(lc)}typeof G.className=="string"?f=$5(W.registered,v,G.className):G.className!=null&&(f=G.className+" ");var w=Kf(A.concat(v),W.registered,V);f+=W.key+"-"+w.name,s!==void 0&&(f+=" "+s);var R=c&&I===void 0?OG(y):a,F={};for(var x in G)c&&x==="as"||R(x)&&(F[x]=G[x]);return F.className=f,Z&&(F.ref=Z),B.createElement(B.Fragment,null,B.createElement(u9,{cache:W,serialized:w,isStringTag:typeof y=="string"}),B.createElement(y,F))});return b.displayName=r!==void 0?r:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",b.defaultProps=t.defaultProps,b.__emotion_real=b,b.__emotion_base=i,b.__emotion_styles=A,b.__emotion_forwardProp=I,Object.defineProperty(b,"toString",{value:function(){return s===void 0&&d9?"NO_COMPONENT_SELECTOR":"."+s}}),b.withComponent=function(G,W){return e(G,J({},n,W,{shouldForwardProp:qG(b,W,!0)})).apply(void 0,A)},b}},m9=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Yp=A9.bind();m9.forEach(function(e){Yp[e]=Yp(e)});let Hp;typeof document=="object"&&(Hp=Z2({key:"css",prepend:!0}));function h9(e){const{injectFirst:t,children:n}=e;return t&&Hp?u.jsx(a9,{value:Hp,children:n}):n}function p9(e){return e==null||Object.keys(e).length===0}function X2(e){const{styles:t,defaultTheme:n={}}=e,o=typeof t=="function"?i=>t(p9(i)?n:i):t;return u.jsx(I9,{styles:o})}function Ef(e,t){return Yp(e,t)}const J2=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},b9=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:X2,StyledEngineProvider:h9,ThemeContext:lc,css:Eu,default:Ef,internal_processStyles:J2,keyframes:Pl},Symbol.toStringTag,{value:"Module"}));function ce(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.includes(o))continue;n[o]=e[o]}return n}function eg(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Y2(e){if(!eg(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=Y2(e[n])}),t}function _n(e,t,n={clone:!0}){const o=n.clone?J({},e):e;return eg(e)&&eg(t)&&Object.keys(t).forEach(i=>{eg(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&eg(e[i])?o[i]=_n(e[i],t[i],n):n.clone?o[i]=eg(t[i])?Y2(t[i]):t[i]:o[i]=t[i]}),o}const f9=Object.freeze(Object.defineProperty({__proto__:null,default:_n,isPlainObject:eg},Symbol.toStringTag,{value:"Module"})),Z9=["values","unit","step"],y9=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,o)=>n.val-o.val),t.reduce((n,o)=>J({},n,{[o.key]:o.val}),{})};function H2(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:o=5}=e,i=ce(e,Z9),r=y9(t),s=Object.keys(r);function I(m){return`@media (min-width:${typeof t[m]=="number"?t[m]:m}${n})`}function a(m){return`@media (max-width:${(typeof t[m]=="number"?t[m]:m)-o/100}${n})`}function c(m,p){const b=s.indexOf(p);return`@media (min-width:${typeof t[m]=="number"?t[m]:m}${n}) and (max-width:${(b!==-1&&typeof t[s[b]]=="number"?t[s[b]]:p)-o/100}${n})`}function C(m){return s.indexOf(m)+1<s.length?c(m,s[s.indexOf(m)+1]):I(m)}function A(m){const p=s.indexOf(m);return p===0?I(s[1]):p===s.length-1?a(s[p]):c(m,s[s.indexOf(m)+1]).replace("@media","@media not all and")}return J({keys:s,values:r,up:I,down:a,between:c,only:C,not:A,unit:n},i)}const G9={borderRadius:4};function aI(e,t){return t?_n(e,t,{clone:!1}):e}const Mf={xs:0,sm:600,md:900,lg:1200,xl:1536},$G={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Mf[e]}px)`};function Ao(e,t,n){const o=e.theme||{};if(Array.isArray(t)){const r=o.breakpoints||$G;return t.reduce((s,I,a)=>(s[r.up(r.keys[a])]=n(t[a]),s),{})}if(typeof t=="object"){const r=o.breakpoints||$G;return Object.keys(t).reduce((s,I)=>{if(Object.keys(r.values||Mf).indexOf(I)!==-1){const a=r.up(I);s[a]=n(t[I],I)}else{const a=I;s[a]=t[a]}return s},{})}return n(t)}function x2(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((o,i)=>{const r=e.up(i);return o[r]={},o},{}))||{}}function N2(e,t){return e.reduce((n,o)=>{const i=n[o];return(!i||Object.keys(i).length===0)&&delete n[o],n},t)}function B9(e,...t){const n=x2(e),o=[n,...t].reduce((i,r)=>_n(i,r),{});return N2(Object.keys(n),o)}function S9(e,t){if(typeof e!="object")return{};const n={},o=Object.keys(t);return Array.isArray(e)?o.forEach((i,r)=>{r<e.length&&(n[i]=!0)}):o.forEach(i=>{e[i]!=null&&(n[i]=!0)}),n}function Fr({values:e,breakpoints:t,base:n}){const o=n||S9(e,t),i=Object.keys(o);if(i.length===0)return e;let r;return i.reduce((s,I,a)=>(Array.isArray(e)?(s[I]=e[a]!=null?e[a]:e[r],r=a):typeof e=="object"?(s[I]=e[I]!=null?e[I]:e[r],r=I):s[I]=e,s),{})}function Ae(e){if(typeof e!="string")throw new Error(_r(7));return e.charAt(0).toUpperCase()+e.slice(1)}const v9=Object.freeze(Object.defineProperty({__proto__:null,default:Ae},Symbol.toStringTag,{value:"Module"}));function Mu(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const o=`vars.${t}`.split(".").reduce((i,r)=>i&&i[r]?i[r]:null,e);if(o!=null)return o}return t.split(".").reduce((o,i)=>o&&o[i]!=null?o[i]:null,e)}function Rd(e,t,n,o=n){let i;return typeof e=="function"?i=e(n):Array.isArray(e)?i=e[n]||o:i=Mu(e,n)||o,t&&(i=t(i,o,e)),i}function Dt(e){const{prop:t,cssProperty:n=e.prop,themeKey:o,transform:i}=e,r=s=>{if(s[t]==null)return null;const I=s[t],a=s.theme,c=Mu(a,o)||{};return Ao(s,I,A=>{let m=Rd(c,i,A);return A===m&&typeof A=="string"&&(m=Rd(c,i,`${t}${A==="default"?"":Ae(A)}`,A)),n===!1?m:{[n]:m}})};return r.propTypes={},r.filterProps=[t],r}function W9(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const V9={m:"margin",p:"padding"},R9={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},eB={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},k9=W9(e=>{if(e.length>2)if(eB[e])e=eB[e];else return[e];const[t,n]=e.split(""),o=V9[t],i=R9[n]||"";return Array.isArray(i)?i.map(r=>o+r):[o+i]}),Lf=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],zf=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Lf,...zf];function ac(e,t,n,o){var i;const r=(i=Mu(e,t,!1))!=null?i:n;return typeof r=="number"?s=>typeof s=="string"?s:r*s:Array.isArray(r)?s=>typeof s=="string"?s:r[s]:typeof r=="function"?r:()=>{}}function Tf(e){return ac(e,"spacing",8)}function Or(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),o=e(n);return t>=0?o:typeof o=="number"?-o:`-${o}`}function w9(e,t){return n=>e.reduce((o,i)=>(o[i]=Or(t,n),o),{})}function X9(e,t,n,o){if(t.indexOf(n)===-1)return null;const i=k9(n),r=w9(i,o),s=e[n];return Ao(e,s,r)}function F2(e,t){const n=Tf(e.theme);return Object.keys(e).map(o=>X9(e,t,o,n)).reduce(aI,{})}function Ft(e){return F2(e,Lf)}Ft.propTypes={};Ft.filterProps=Lf;function Kt(e){return F2(e,zf)}Kt.propTypes={};Kt.filterProps=zf;function J9(e=8){if(e.mui)return e;const t=Tf({spacing:e}),n=(...o)=>(o.length===0?[1]:o).map(r=>{const s=t(r);return typeof s=="number"?`${s}px`:s}).join(" ");return n.mui=!0,n}function Lu(...e){const t=e.reduce((o,i)=>(i.filterProps.forEach(r=>{o[r]=i}),o),{}),n=o=>Object.keys(o).reduce((i,r)=>t[r]?aI(i,t[r](o)):i,{});return n.propTypes={},n.filterProps=e.reduce((o,i)=>o.concat(i.filterProps),[]),n}function Po(e){return typeof e!="number"?e:`${e}px solid`}function ni(e,t){return Dt({prop:e,themeKey:"borders",transform:t})}const Y9=ni("border",Po),H9=ni("borderTop",Po),x9=ni("borderRight",Po),N9=ni("borderBottom",Po),F9=ni("borderLeft",Po),K9=ni("borderColor"),E9=ni("borderTopColor"),M9=ni("borderRightColor"),L9=ni("borderBottomColor"),z9=ni("borderLeftColor"),T9=ni("outline",Po),U9=ni("outlineColor"),zu=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=ac(e.theme,"shape.borderRadius",4),n=o=>({borderRadius:Or(t,o)});return Ao(e,e.borderRadius,n)}return null};zu.propTypes={};zu.filterProps=["borderRadius"];Lu(Y9,H9,x9,N9,F9,K9,E9,M9,L9,z9,zu,T9,U9);const Tu=e=>{if(e.gap!==void 0&&e.gap!==null){const t=ac(e.theme,"spacing",8),n=o=>({gap:Or(t,o)});return Ao(e,e.gap,n)}return null};Tu.propTypes={};Tu.filterProps=["gap"];const Uu=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=ac(e.theme,"spacing",8),n=o=>({columnGap:Or(t,o)});return Ao(e,e.columnGap,n)}return null};Uu.propTypes={};Uu.filterProps=["columnGap"];const Du=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=ac(e.theme,"spacing",8),n=o=>({rowGap:Or(t,o)});return Ao(e,e.rowGap,n)}return null};Du.propTypes={};Du.filterProps=["rowGap"];const D9=Dt({prop:"gridColumn"}),Q9=Dt({prop:"gridRow"}),P9=Dt({prop:"gridAutoFlow"}),j9=Dt({prop:"gridAutoColumns"}),_9=Dt({prop:"gridAutoRows"}),O9=Dt({prop:"gridTemplateColumns"}),q9=Dt({prop:"gridTemplateRows"}),$9=Dt({prop:"gridTemplateAreas"}),eK=Dt({prop:"gridArea"});Lu(Tu,Uu,Du,D9,Q9,P9,j9,_9,O9,q9,$9,eK);function cl(e,t){return t==="grey"?t:e}const tK=Dt({prop:"color",themeKey:"palette",transform:cl}),nK=Dt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:cl}),oK=Dt({prop:"backgroundColor",themeKey:"palette",transform:cl});Lu(tK,nK,oK);function yo(e){return e<=1&&e!==0?`${e*100}%`:e}const iK=Dt({prop:"width",transform:yo}),Uf=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var o,i;const r=((o=e.theme)==null||(o=o.breakpoints)==null||(o=o.values)==null?void 0:o[n])||Mf[n];return r?((i=e.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${r}${e.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:yo(n)}};return Ao(e,e.maxWidth,t)}return null};Uf.filterProps=["maxWidth"];const gK=Dt({prop:"minWidth",transform:yo}),rK=Dt({prop:"height",transform:yo}),sK=Dt({prop:"maxHeight",transform:yo}),lK=Dt({prop:"minHeight",transform:yo});Dt({prop:"size",cssProperty:"width",transform:yo});Dt({prop:"size",cssProperty:"height",transform:yo});const aK=Dt({prop:"boxSizing"});Lu(iK,Uf,gK,rK,sK,lK,aK);const Ic={border:{themeKey:"borders",transform:Po},borderTop:{themeKey:"borders",transform:Po},borderRight:{themeKey:"borders",transform:Po},borderBottom:{themeKey:"borders",transform:Po},borderLeft:{themeKey:"borders",transform:Po},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Po},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:zu},color:{themeKey:"palette",transform:cl},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:cl},backgroundColor:{themeKey:"palette",transform:cl},p:{style:Kt},pt:{style:Kt},pr:{style:Kt},pb:{style:Kt},pl:{style:Kt},px:{style:Kt},py:{style:Kt},padding:{style:Kt},paddingTop:{style:Kt},paddingRight:{style:Kt},paddingBottom:{style:Kt},paddingLeft:{style:Kt},paddingX:{style:Kt},paddingY:{style:Kt},paddingInline:{style:Kt},paddingInlineStart:{style:Kt},paddingInlineEnd:{style:Kt},paddingBlock:{style:Kt},paddingBlockStart:{style:Kt},paddingBlockEnd:{style:Kt},m:{style:Ft},mt:{style:Ft},mr:{style:Ft},mb:{style:Ft},ml:{style:Ft},mx:{style:Ft},my:{style:Ft},margin:{style:Ft},marginTop:{style:Ft},marginRight:{style:Ft},marginBottom:{style:Ft},marginLeft:{style:Ft},marginX:{style:Ft},marginY:{style:Ft},marginInline:{style:Ft},marginInlineStart:{style:Ft},marginInlineEnd:{style:Ft},marginBlock:{style:Ft},marginBlockStart:{style:Ft},marginBlockEnd:{style:Ft},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Tu},rowGap:{style:Du},columnGap:{style:Uu},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:yo},maxWidth:{style:Uf},minWidth:{transform:yo},height:{transform:yo},maxHeight:{transform:yo},minHeight:{transform:yo},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function IK(...e){const t=e.reduce((o,i)=>o.concat(Object.keys(i)),[]),n=new Set(t);return e.every(o=>n.size===Object.keys(o).length)}function cK(e,t){return typeof e=="function"?e(t):e}function K2(){function e(n,o,i,r){const s={[n]:o,theme:i},I=r[n];if(!I)return{[n]:o};const{cssProperty:a=n,themeKey:c,transform:C,style:A}=I;if(o==null)return null;if(c==="typography"&&o==="inherit")return{[n]:o};const m=Mu(i,c)||{};return A?A(s):Ao(s,o,b=>{let G=Rd(m,C,b);return b===G&&typeof b=="string"&&(G=Rd(m,C,`${n}${b==="default"?"":Ae(b)}`,b)),a===!1?G:{[a]:G}})}function t(n){var o;const{sx:i,theme:r={}}=n||{};if(!i)return null;const s=(o=r.unstable_sxConfig)!=null?o:Ic;function I(a){let c=a;if(typeof a=="function")c=a(r);else if(typeof a!="object")return a;if(!c)return null;const C=x2(r.breakpoints),A=Object.keys(C);let m=C;return Object.keys(c).forEach(p=>{const b=cK(c[p],r);if(b!=null)if(typeof b=="object")if(s[p])m=aI(m,e(p,b,r,s));else{const G=Ao({theme:r},b,W=>({[p]:W}));IK(G,b)?m[p]=t({sx:b,theme:r}):m=aI(m,G)}else m=aI(m,e(p,b,r,s))}),N2(A,m)}return Array.isArray(i)?i.map(I):I(i)}return t}const jl=K2();jl.filterProps=["sx"];function E2(e,t){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:n.palette.mode===e?t:{}}const CK=["breakpoints","palette","spacing","shape"];function _l(e={},...t){const{breakpoints:n={},palette:o={},spacing:i,shape:r={}}=e,s=ce(e,CK),I=H2(n),a=J9(i);let c=_n({breakpoints:I,direction:"ltr",components:{},palette:J({mode:"light"},o),spacing:a,shape:J({},G9,r)},s);return c.applyStyles=E2,c=t.reduce((C,A)=>_n(C,A),c),c.unstable_sxConfig=J({},Ic,s==null?void 0:s.unstable_sxConfig),c.unstable_sx=function(A){return jl({sx:A,theme:this})},c}const dK=Object.freeze(Object.defineProperty({__proto__:null,default:_l,private_createBreakpoints:H2,unstable_applyStyles:E2},Symbol.toStringTag,{value:"Module"}));function uK(e){return Object.keys(e).length===0}function M2(e=null){const t=B.useContext(lc);return!t||uK(t)?e:t}const AK=_l();function Qu(e=AK){return M2(e)}function mK({styles:e,themeId:t,defaultTheme:n={}}){const o=Qu(n),i=typeof e=="function"?e(t&&o[t]||o):e;return u.jsx(X2,{styles:i})}const hK=["sx"],pK=e=>{var t,n;const o={systemProps:{},otherProps:{}},i=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:Ic;return Object.keys(e).forEach(r=>{i[r]?o.systemProps[r]=e[r]:o.otherProps[r]=e[r]}),o};function cc(e){const{sx:t}=e,n=ce(e,hK),{systemProps:o,otherProps:i}=pK(n);let r;return Array.isArray(t)?r=[o,...t]:typeof t=="function"?r=(...s)=>{const I=t(...s);return eg(I)?J({},o,I):o}:r=J({},o,t),J({},i,{sx:r})}const bK=Object.freeze(Object.defineProperty({__proto__:null,default:jl,extendSxProp:cc,unstable_createStyleFunctionSx:K2,unstable_defaultSxConfig:Ic},Symbol.toStringTag,{value:"Module"})),tB=e=>e,fK=()=>{let e=tB;return{configure(t){e=t},generate(t){return e(t)},reset(){e=tB}}},Df=fK();function L2(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=L2(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function fe(){for(var e,t,n=0,o="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=L2(e))&&(o&&(o+=" "),o+=t);return o}const ZK=["className","component"];function yK(e={}){const{themeId:t,defaultTheme:n,defaultClassName:o="MuiBox-root",generateClassName:i}=e,r=Ef("div",{shouldForwardProp:I=>I!=="theme"&&I!=="sx"&&I!=="as"})(jl);return B.forwardRef(function(a,c){const C=Qu(n),A=cc(a),{className:m,component:p="div"}=A,b=ce(A,ZK);return u.jsx(r,J({as:p,ref:c,className:fe(m,i?i(o):o),theme:t&&C[t]||C},b))})}const GK={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Xe(e,t,n="Mui"){const o=GK[t];return o?`${n}-${o}`:`${Df.generate(e)}-${t}`}function we(e,t,n="Mui"){const o={};return t.forEach(i=>{o[i]=Xe(e,i,n)}),o}var z2={exports:{}},ut={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qf=Symbol.for("react.element"),Pf=Symbol.for("react.portal"),Pu=Symbol.for("react.fragment"),ju=Symbol.for("react.strict_mode"),_u=Symbol.for("react.profiler"),Ou=Symbol.for("react.provider"),qu=Symbol.for("react.context"),BK=Symbol.for("react.server_context"),$u=Symbol.for("react.forward_ref"),eA=Symbol.for("react.suspense"),tA=Symbol.for("react.suspense_list"),nA=Symbol.for("react.memo"),oA=Symbol.for("react.lazy"),SK=Symbol.for("react.offscreen"),T2;T2=Symbol.for("react.module.reference");function oi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Qf:switch(e=e.type,e){case Pu:case _u:case ju:case eA:case tA:return e;default:switch(e=e&&e.$$typeof,e){case BK:case qu:case $u:case oA:case nA:case Ou:return e;default:return t}}case Pf:return t}}}ut.ContextConsumer=qu;ut.ContextProvider=Ou;ut.Element=Qf;ut.ForwardRef=$u;ut.Fragment=Pu;ut.Lazy=oA;ut.Memo=nA;ut.Portal=Pf;ut.Profiler=_u;ut.StrictMode=ju;ut.Suspense=eA;ut.SuspenseList=tA;ut.isAsyncMode=function(){return!1};ut.isConcurrentMode=function(){return!1};ut.isContextConsumer=function(e){return oi(e)===qu};ut.isContextProvider=function(e){return oi(e)===Ou};ut.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Qf};ut.isForwardRef=function(e){return oi(e)===$u};ut.isFragment=function(e){return oi(e)===Pu};ut.isLazy=function(e){return oi(e)===oA};ut.isMemo=function(e){return oi(e)===nA};ut.isPortal=function(e){return oi(e)===Pf};ut.isProfiler=function(e){return oi(e)===_u};ut.isStrictMode=function(e){return oi(e)===ju};ut.isSuspense=function(e){return oi(e)===eA};ut.isSuspenseList=function(e){return oi(e)===tA};ut.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Pu||e===_u||e===ju||e===eA||e===tA||e===SK||typeof e=="object"&&e!==null&&(e.$$typeof===oA||e.$$typeof===nA||e.$$typeof===Ou||e.$$typeof===qu||e.$$typeof===$u||e.$$typeof===T2||e.getModuleId!==void 0)};ut.typeOf=oi;z2.exports=ut;var nB=z2.exports;const vK=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function U2(e){const t=`${e}`.match(vK);return t&&t[1]||""}function D2(e,t=""){return e.displayName||e.name||U2(e)||t}function oB(e,t,n){const o=D2(t);return e.displayName||(o!==""?`${n}(${o})`:n)}function WK(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return D2(e,"Component");if(typeof e=="object")switch(e.$$typeof){case nB.ForwardRef:return oB(e,e.render,"ForwardRef");case nB.Memo:return oB(e,e.type,"memo");default:return}}}const VK=Object.freeze(Object.defineProperty({__proto__:null,default:WK,getFunctionName:U2},Symbol.toStringTag,{value:"Module"})),RK=["ownerState"],kK=["variants"],wK=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function XK(e){return Object.keys(e).length===0}function JK(e){return typeof e=="string"&&e.charCodeAt(0)>96}function oh(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const YK=_l(),HK=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function IC({defaultTheme:e,theme:t,themeId:n}){return XK(t)?e:t[n]||t}function xK(e){return e?(t,n)=>n[e]:null}function NC(e,t){let{ownerState:n}=t,o=ce(t,RK);const i=typeof e=="function"?e(J({ownerState:n},o)):e;if(Array.isArray(i))return i.flatMap(r=>NC(r,J({ownerState:n},o)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:r=[]}=i;let I=ce(i,kK);return r.forEach(a=>{let c=!0;typeof a.props=="function"?c=a.props(J({ownerState:n},o,n)):Object.keys(a.props).forEach(C=>{(n==null?void 0:n[C])!==a.props[C]&&o[C]!==a.props[C]&&(c=!1)}),c&&(Array.isArray(I)||(I=[I]),I.push(typeof a.style=="function"?a.style(J({ownerState:n},o,n)):a.style))}),I}return i}function NK(e={}){const{themeId:t,defaultTheme:n=YK,rootShouldForwardProp:o=oh,slotShouldForwardProp:i=oh}=e,r=s=>jl(J({},s,{theme:IC(J({},s,{defaultTheme:n,themeId:t}))}));return r.__mui_systemSx=!0,(s,I={})=>{J2(s,V=>V.filter(X=>!(X!=null&&X.__mui_systemSx)));const{name:a,slot:c,skipVariantsResolver:C,skipSx:A,overridesResolver:m=xK(HK(c))}=I,p=ce(I,wK),b=C!==void 0?C:c&&c!=="Root"&&c!=="root"||!1,G=A||!1;let W,Z=oh;c==="Root"||c==="root"?Z=o:c?Z=i:JK(s)&&(Z=void 0);const y=Ef(s,J({shouldForwardProp:Z,label:W},p)),f=V=>typeof V=="function"&&V.__emotion_real!==V||eg(V)?X=>NC(V,J({},X,{theme:IC({theme:X.theme,defaultTheme:n,themeId:t})})):V,v=(V,...X)=>{let w=f(V);const R=X?X.map(f):[];a&&m&&R.push(M=>{const Q=IC(J({},M,{defaultTheme:n,themeId:t}));if(!Q.components||!Q.components[a]||!Q.components[a].styleOverrides)return null;const $=Q.components[a].styleOverrides,_={};return Object.entries($).forEach(([ne,ee])=>{_[ne]=NC(ee,J({},M,{theme:Q}))}),m(M,_)}),a&&!b&&R.push(M=>{var Q;const $=IC(J({},M,{defaultTheme:n,themeId:t})),_=$==null||(Q=$.components)==null||(Q=Q[a])==null?void 0:Q.variants;return NC({variants:_},J({},M,{theme:$}))}),G||R.push(r);const F=R.length-X.length;if(Array.isArray(V)&&F>0){const M=new Array(F).fill("");w=[...V,...M],w.raw=[...V.raw,...M]}const x=y(w,...R);return s.muiName&&(x.muiName=s.muiName),x};return y.withConfig&&(v.withConfig=y.withConfig),v}}const Q2=NK();function FI(e,t){const n=J({},t);return Object.keys(e).forEach(o=>{if(o.toString().match(/^(components|slots)$/))n[o]=J({},e[o],n[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const i=e[o]||{},r=t[o];n[o]={},!r||!Object.keys(r)?n[o]=i:!i||!Object.keys(i)?n[o]=r:(n[o]=J({},r),Object.keys(i).forEach(s=>{n[o][s]=FI(i[s],r[s])}))}else n[o]===void 0&&(n[o]=e[o])}),n}function FK(e){const{theme:t,name:n,props:o}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?o:FI(t.components[n].defaultProps,o)}function P2({props:e,name:t,defaultTheme:n,themeId:o}){let i=Qu(n);return o&&(i=i[o]||i),FK({theme:i,name:t,props:e})}const mg=typeof window<"u"?B.useLayoutEffect:B.useEffect;function KK(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}const EK=Object.freeze(Object.defineProperty({__proto__:null,default:KK},Symbol.toStringTag,{value:"Module"}));function kd(...e){return e.reduce((t,n)=>n==null?t:function(...i){t.apply(this,i),n.apply(this,i)},()=>{})}function jf(e,t=166){let n;function o(...i){const r=()=>{e.apply(this,i)};clearTimeout(n),n=setTimeout(r,t)}return o.clear=()=>{clearTimeout(n)},o}function MK(e,t){return()=>null}function FC(e,t){var n,o;return B.isValidElement(e)&&t.indexOf((n=e.type.muiName)!=null?n:(o=e.type)==null||(o=o._payload)==null||(o=o.value)==null?void 0:o.muiName)!==-1}function ao(e){return e&&e.ownerDocument||document}function Pg(e){return ao(e).defaultView||window}function LK(e,t){return()=>null}function wd(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let iB=0;function zK(e){const[t,n]=B.useState(e),o=e||t;return B.useEffect(()=>{t==null&&(iB+=1,n(`mui-${iB}`))},[t]),o}const gB=OC.useId;function iA(e){if(gB!==void 0){const t=gB();return e??t}return zK(e)}function TK(e,t,n,o,i){return null}function KI({controlled:e,default:t,name:n,state:o="value"}){const{current:i}=B.useRef(e!==void 0),[r,s]=B.useState(t),I=i?e:r,a=B.useCallback(c=>{i||s(c)},[]);return[I,a]}function wr(e){const t=B.useRef(e);return mg(()=>{t.current=e}),B.useRef((...n)=>(0,t.current)(...n)).current}function Vn(...e){return B.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{wd(n,t)})},e)}const rB={};function UK(e,t){const n=B.useRef(rB);return n.current===rB&&(n.current=e(t)),n}const DK=[];function QK(e){B.useEffect(e,DK)}class gA{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new gA}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}function j2(){const e=UK(gA.create).current;return QK(e.disposeEffect),e}let rA=!0,xp=!1;const PK=new gA,jK={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function _K(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&jK[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function OK(e){e.metaKey||e.altKey||e.ctrlKey||(rA=!0)}function ih(){rA=!1}function qK(){this.visibilityState==="hidden"&&xp&&(rA=!0)}function $K(e){e.addEventListener("keydown",OK,!0),e.addEventListener("mousedown",ih,!0),e.addEventListener("pointerdown",ih,!0),e.addEventListener("touchstart",ih,!0),e.addEventListener("visibilitychange",qK,!0)}function e3(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return rA||_K(t)}function _2(){const e=B.useCallback(i=>{i!=null&&$K(i.ownerDocument)},[]),t=B.useRef(!1);function n(){return t.current?(xp=!0,PK.start(100,()=>{xp=!1}),t.current=!1,!0):!1}function o(i){return e3(i)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:o,onBlur:n,ref:e}}function O2(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}function Je(e,t,n=void 0){const o={};return Object.keys(e).forEach(i=>{o[i]=e[i].reduce((r,s)=>{if(s){const I=t(s);I!==""&&r.push(I),n&&n[s]&&r.push(n[s])}return r},[]).join(" ")}),o}function Xd(e){return typeof e=="string"}function t3(e,t,n){return e===void 0||Xd(e)?t:J({},t,{ownerState:J({},t.ownerState,n)})}function q2(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(o=>o.match(/^on[A-Z]/)&&typeof e[o]=="function"&&!t.includes(o)).forEach(o=>{n[o]=e[o]}),n}function sB(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function n3(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:o,externalForwardedProps:i,className:r}=e;if(!t){const p=fe(n==null?void 0:n.className,r,i==null?void 0:i.className,o==null?void 0:o.className),b=J({},n==null?void 0:n.style,i==null?void 0:i.style,o==null?void 0:o.style),G=J({},n,i,o);return p.length>0&&(G.className=p),Object.keys(b).length>0&&(G.style=b),{props:G,internalRef:void 0}}const s=q2(J({},i,o)),I=sB(o),a=sB(i),c=t(s),C=fe(c==null?void 0:c.className,n==null?void 0:n.className,r,i==null?void 0:i.className,o==null?void 0:o.className),A=J({},c==null?void 0:c.style,n==null?void 0:n.style,i==null?void 0:i.style,o==null?void 0:o.style),m=J({},c,n,a,I);return C.length>0&&(m.className=C),Object.keys(A).length>0&&(m.style=A),{props:m,internalRef:c.ref}}function o3(e,t,n){return typeof e=="function"?e(t,n):e}const i3=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function Wl(e){var t;const{elementType:n,externalSlotProps:o,ownerState:i,skipResolvingSlotProps:r=!1}=e,s=ce(e,i3),I=r?{}:o3(o,i),{props:a,internalRef:c}=n3(J({},s,{externalSlotProps:I})),C=Vn(c,I==null?void 0:I.ref,(t=e.additionalProps)==null?void 0:t.ref);return t3(n,J({},a,{ref:C}),i)}const $2=B.createContext(null);function ek(){return B.useContext($2)}const g3=typeof Symbol=="function"&&Symbol.for,r3=g3?Symbol.for("mui.nested"):"__THEME_NESTED__";function s3(e,t){return typeof t=="function"?t(e):J({},e,t)}function l3(e){const{children:t,theme:n}=e,o=ek(),i=B.useMemo(()=>{const r=o===null?n:s3(o,n);return r!=null&&(r[r3]=o!==null),r},[n,o]);return u.jsx($2.Provider,{value:i,children:t})}const a3=["value"],tk=B.createContext();function I3(e){let{value:t}=e,n=ce(e,a3);return u.jsx(tk.Provider,J({value:t??!0},n))}const c3=()=>{const e=B.useContext(tk);return e??!1},nk=B.createContext(void 0);function C3({value:e,children:t}){return u.jsx(nk.Provider,{value:e,children:t})}function d3(e){const{theme:t,name:n,props:o}=e;if(!t||!t.components||!t.components[n])return o;const i=t.components[n];return i.defaultProps?FI(i.defaultProps,o):!i.styleOverrides&&!i.variants?FI(i,o):o}function u3({props:e,name:t}){const n=B.useContext(nk);return d3({props:e,name:t,theme:{components:n}})}const lB={};function aB(e,t,n,o=!1){return B.useMemo(()=>{const i=e&&t[e]||t;if(typeof n=="function"){const r=n(i),s=e?J({},t,{[e]:r}):r;return o?()=>s:s}return e?J({},t,{[e]:n}):J({},t,n)},[e,t,n,o])}function A3(e){const{children:t,theme:n,themeId:o}=e,i=M2(lB),r=ek()||lB,s=aB(o,i,n),I=aB(o,r,n,!0),a=s.direction==="rtl";return u.jsx(l3,{theme:I,children:u.jsx(lc.Provider,{value:s,children:u.jsx(I3,{value:a,children:u.jsx(C3,{value:s==null?void 0:s.components,children:t})})})})}function EI(e){"@babel/helpers - typeof";return EI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},EI(e)}function m3(e,t){if(EI(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(EI(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function h3(e){var t=m3(e,"string");return EI(t)=="symbol"?t:t+""}const p3=["className","component","disableGutters","fixed","maxWidth","classes"],b3=_l(),f3=Q2("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${Ae(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),Z3=e=>P2({props:e,name:"MuiContainer",defaultTheme:b3}),y3=(e,t)=>{const n=a=>Xe(t,a),{classes:o,fixed:i,disableGutters:r,maxWidth:s}=e,I={root:["root",s&&`maxWidth${Ae(String(s))}`,i&&"fixed",r&&"disableGutters"]};return Je(I,n,o)};function G3(e={}){const{createStyledComponent:t=f3,useThemeProps:n=Z3,componentName:o="MuiContainer"}=e,i=t(({theme:s,ownerState:I})=>J({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!I.disableGutters&&{paddingLeft:s.spacing(2),paddingRight:s.spacing(2),[s.breakpoints.up("sm")]:{paddingLeft:s.spacing(3),paddingRight:s.spacing(3)}}),({theme:s,ownerState:I})=>I.fixed&&Object.keys(s.breakpoints.values).reduce((a,c)=>{const C=c,A=s.breakpoints.values[C];return A!==0&&(a[s.breakpoints.up(C)]={maxWidth:`${A}${s.breakpoints.unit}`}),a},{}),({theme:s,ownerState:I})=>J({},I.maxWidth==="xs"&&{[s.breakpoints.up("xs")]:{maxWidth:Math.max(s.breakpoints.values.xs,444)}},I.maxWidth&&I.maxWidth!=="xs"&&{[s.breakpoints.up(I.maxWidth)]:{maxWidth:`${s.breakpoints.values[I.maxWidth]}${s.breakpoints.unit}`}}));return B.forwardRef(function(I,a){const c=n(I),{className:C,component:A="div",disableGutters:m=!1,fixed:p=!1,maxWidth:b="lg"}=c,G=ce(c,p3),W=J({},c,{component:A,disableGutters:m,fixed:p,maxWidth:b}),Z=y3(W,o);return u.jsx(i,J({as:A,ownerState:W,className:fe(Z.root,C),ref:a},G))})}const B3=["component","direction","spacing","divider","children","className","useFlexGap"],S3=_l(),v3=Q2("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function W3(e){return P2({props:e,name:"MuiStack",defaultTheme:S3})}function V3(e,t){const n=B.Children.toArray(e).filter(Boolean);return n.reduce((o,i,r)=>(o.push(i),r<n.length-1&&o.push(B.cloneElement(t,{key:`separator-${r}`})),o),[])}const R3=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],k3=({ownerState:e,theme:t})=>{let n=J({display:"flex",flexDirection:"column"},Ao({theme:t},Fr({values:e.direction,breakpoints:t.breakpoints.values}),o=>({flexDirection:o})));if(e.spacing){const o=Tf(t),i=Object.keys(t.breakpoints.values).reduce((a,c)=>((typeof e.spacing=="object"&&e.spacing[c]!=null||typeof e.direction=="object"&&e.direction[c]!=null)&&(a[c]=!0),a),{}),r=Fr({values:e.direction,base:i}),s=Fr({values:e.spacing,base:i});typeof r=="object"&&Object.keys(r).forEach((a,c,C)=>{if(!r[a]){const m=c>0?r[C[c-1]]:"column";r[a]=m}}),n=_n(n,Ao({theme:t},s,(a,c)=>e.useFlexGap?{gap:Or(o,a)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${R3(c?r[c]:e.direction)}`]:Or(o,a)}}))}return n=B9(t.breakpoints,n),n};function w3(e={}){const{createStyledComponent:t=v3,useThemeProps:n=W3,componentName:o="MuiStack"}=e,i=()=>Je({root:["root"]},a=>Xe(o,a),{}),r=t(k3);return B.forwardRef(function(a,c){const C=n(a),A=cc(C),{component:m="div",direction:p="column",spacing:b=0,divider:G,children:W,className:Z,useFlexGap:y=!1}=A,f=ce(A,B3),v={direction:p,spacing:b,useFlexGap:y},V=i();return u.jsx(r,J({as:m,ownerState:v,ref:c,className:fe(V.root,Z)},f,{children:G?V3(W,G):W}))})}var Cc={},ok={exports:{}};(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(ok);var Ol=ok.exports;const X3=Ei(C5);var gh={exports:{}},IB;function J3(){return IB||(IB=1,function(e){function t(n,o){if(n==null)return{};var i={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(o.includes(r))continue;i[r]=n[r]}return i}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(gh)),gh.exports}const Y3=Ei(b9),H3=Ei(f9),x3=Ei(v9),N3=Ei(VK),F3=Ei(dK),K3=Ei(bK);var ql=Ol;Object.defineProperty(Cc,"__esModule",{value:!0});var E3=Cc.default=$3;Cc.shouldForwardProp=KC;Cc.systemDefaultTheme=void 0;var To=ql(X3),Np=ql(J3()),cB=Q3(Y3),M3=H3;ql(x3);ql(N3);var L3=ql(F3),z3=ql(K3);const T3=["ownerState"],U3=["variants"],D3=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function ik(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(ik=function(o){return o?n:t})(e)}function Q3(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=ik(t);if(n&&n.has(e))return n.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)){var s=i?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=e[r]}return o.default=e,n&&n.set(e,o),o}function P3(e){return Object.keys(e).length===0}function j3(e){return typeof e=="string"&&e.charCodeAt(0)>96}function KC(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const _3=Cc.systemDefaultTheme=(0,L3.default)(),O3=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function cC({defaultTheme:e,theme:t,themeId:n}){return P3(t)?e:t[n]||t}function q3(e){return e?(t,n)=>n[e]:null}function EC(e,t){let{ownerState:n}=t,o=(0,Np.default)(t,T3);const i=typeof e=="function"?e((0,To.default)({ownerState:n},o)):e;if(Array.isArray(i))return i.flatMap(r=>EC(r,(0,To.default)({ownerState:n},o)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:r=[]}=i;let I=(0,Np.default)(i,U3);return r.forEach(a=>{let c=!0;typeof a.props=="function"?c=a.props((0,To.default)({ownerState:n},o,n)):Object.keys(a.props).forEach(C=>{(n==null?void 0:n[C])!==a.props[C]&&o[C]!==a.props[C]&&(c=!1)}),c&&(Array.isArray(I)||(I=[I]),I.push(typeof a.style=="function"?a.style((0,To.default)({ownerState:n},o,n)):a.style))}),I}return i}function $3(e={}){const{themeId:t,defaultTheme:n=_3,rootShouldForwardProp:o=KC,slotShouldForwardProp:i=KC}=e,r=s=>(0,z3.default)((0,To.default)({},s,{theme:cC((0,To.default)({},s,{defaultTheme:n,themeId:t}))}));return r.__mui_systemSx=!0,(s,I={})=>{(0,cB.internal_processStyles)(s,V=>V.filter(X=>!(X!=null&&X.__mui_systemSx)));const{name:a,slot:c,skipVariantsResolver:C,skipSx:A,overridesResolver:m=q3(O3(c))}=I,p=(0,Np.default)(I,D3),b=C!==void 0?C:c&&c!=="Root"&&c!=="root"||!1,G=A||!1;let W,Z=KC;c==="Root"||c==="root"?Z=o:c?Z=i:j3(s)&&(Z=void 0);const y=(0,cB.default)(s,(0,To.default)({shouldForwardProp:Z,label:W},p)),f=V=>typeof V=="function"&&V.__emotion_real!==V||(0,M3.isPlainObject)(V)?X=>EC(V,(0,To.default)({},X,{theme:cC({theme:X.theme,defaultTheme:n,themeId:t})})):V,v=(V,...X)=>{let w=f(V);const R=X?X.map(f):[];a&&m&&R.push(M=>{const Q=cC((0,To.default)({},M,{defaultTheme:n,themeId:t}));if(!Q.components||!Q.components[a]||!Q.components[a].styleOverrides)return null;const $=Q.components[a].styleOverrides,_={};return Object.entries($).forEach(([ne,ee])=>{_[ne]=EC(ee,(0,To.default)({},M,{theme:Q}))}),m(M,_)}),a&&!b&&R.push(M=>{var Q;const $=cC((0,To.default)({},M,{defaultTheme:n,themeId:t})),_=$==null||(Q=$.components)==null||(Q=Q[a])==null?void 0:Q.variants;return EC({variants:_},(0,To.default)({},M,{theme:$}))}),G||R.push(r);const F=R.length-X.length;if(Array.isArray(V)&&F>0){const M=new Array(F).fill("");w=[...V,...M],w.raw=[...V.raw,...M]}const x=y(w,...R);return s.muiName&&(x.muiName=s.muiName),x};return y.withConfig&&(v.withConfig=y.withConfig),v}}function eE(e,t){return J({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var Qt={};const tE=Ei(c5),nE=Ei(EK);var gk=Ol;Object.defineProperty(Qt,"__esModule",{value:!0});var An=Qt.alpha=ck;Qt.blend=dE;Qt.colorChannel=void 0;var rk=Qt.darken=Of;Qt.decomposeColor=ei;Qt.emphasize=Ck;var oE=Qt.getContrastRatio=lE;Qt.getLuminance=Jd;Qt.hexToRgb=lk;Qt.hslToRgb=Ik;var sk=Qt.lighten=qf;Qt.private_safeAlpha=aE;Qt.private_safeColorChannel=void 0;Qt.private_safeDarken=IE;Qt.private_safeEmphasize=CE;Qt.private_safeLighten=cE;Qt.recomposeColor=$l;Qt.rgbToHex=sE;var CB=gk(tE),iE=gk(nE);function _f(e,t=0,n=1){return(0,iE.default)(e,t,n)}function lk(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(o=>o+o)),n?`rgb${n.length===4?"a":""}(${n.map((o,i)=>i<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function gE(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function ei(e){if(e.type)return e;if(e.charAt(0)==="#")return ei(lk(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,CB.default)(9,e));let o=e.substring(t+1,e.length-1),i;if(n==="color"){if(o=o.split(" "),i=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error((0,CB.default)(10,i))}else o=o.split(",");return o=o.map(r=>parseFloat(r)),{type:n,values:o,colorSpace:i}}const ak=e=>{const t=ei(e);return t.values.slice(0,3).map((n,o)=>t.type.indexOf("hsl")!==-1&&o!==0?`${n}%`:n).join(" ")};Qt.colorChannel=ak;const rE=(e,t)=>{try{return ak(e)}catch{return e}};Qt.private_safeColorChannel=rE;function $l(e){const{type:t,colorSpace:n}=e;let{values:o}=e;return t.indexOf("rgb")!==-1?o=o.map((i,r)=>r<3?parseInt(i,10):i):t.indexOf("hsl")!==-1&&(o[1]=`${o[1]}%`,o[2]=`${o[2]}%`),t.indexOf("color")!==-1?o=`${n} ${o.join(" ")}`:o=`${o.join(", ")}`,`${t}(${o})`}function sE(e){if(e.indexOf("#")===0)return e;const{values:t}=ei(e);return`#${t.map((n,o)=>gE(o===3?Math.round(255*n):n)).join("")}`}function Ik(e){e=ei(e);const{values:t}=e,n=t[0],o=t[1]/100,i=t[2]/100,r=o*Math.min(i,1-i),s=(c,C=(c+n/30)%12)=>i-r*Math.max(Math.min(C-3,9-C,1),-1);let I="rgb";const a=[Math.round(s(0)*255),Math.round(s(8)*255),Math.round(s(4)*255)];return e.type==="hsla"&&(I+="a",a.push(t[3])),$l({type:I,values:a})}function Jd(e){e=ei(e);let t=e.type==="hsl"||e.type==="hsla"?ei(Ik(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function lE(e,t){const n=Jd(e),o=Jd(t);return(Math.max(n,o)+.05)/(Math.min(n,o)+.05)}function ck(e,t){return e=ei(e),t=_f(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,$l(e)}function aE(e,t,n){try{return ck(e,t)}catch{return e}}function Of(e,t){if(e=ei(e),t=_f(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return $l(e)}function IE(e,t,n){try{return Of(e,t)}catch{return e}}function qf(e,t){if(e=ei(e),t=_f(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return $l(e)}function cE(e,t,n){try{return qf(e,t)}catch{return e}}function Ck(e,t=.15){return Jd(e)>.5?Of(e,t):qf(e,t)}function CE(e,t,n){try{return Ck(e,t)}catch{return e}}function dE(e,t,n,o=1){const i=(a,c)=>Math.round((a**(1/o)*(1-n)+c**(1/o)*n)**o),r=ei(e),s=ei(t),I=[i(r.values[0],s.values[0]),i(r.values[1],s.values[1]),i(r.values[2],s.values[2])];return $l({type:"rgb",values:I})}const MI={black:"#000",white:"#fff"},uE={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},vs={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Ws={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Ha={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Vs={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Rs={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},ks={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},AE=["mode","contrastThreshold","tonalOffset"],dB={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:MI.white,default:MI.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},rh={text:{primary:MI.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:MI.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function uB(e,t,n,o){const i=o.light||o,r=o.dark||o*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=sk(e.main,i):t==="dark"&&(e.dark=rk(e.main,r)))}function mE(e="light"){return e==="dark"?{main:Vs[200],light:Vs[50],dark:Vs[400]}:{main:Vs[700],light:Vs[400],dark:Vs[800]}}function hE(e="light"){return e==="dark"?{main:vs[200],light:vs[50],dark:vs[400]}:{main:vs[500],light:vs[300],dark:vs[700]}}function pE(e="light"){return e==="dark"?{main:Ws[500],light:Ws[300],dark:Ws[700]}:{main:Ws[700],light:Ws[400],dark:Ws[800]}}function bE(e="light"){return e==="dark"?{main:Rs[400],light:Rs[300],dark:Rs[700]}:{main:Rs[700],light:Rs[500],dark:Rs[900]}}function fE(e="light"){return e==="dark"?{main:ks[400],light:ks[300],dark:ks[700]}:{main:ks[800],light:ks[500],dark:ks[900]}}function ZE(e="light"){return e==="dark"?{main:Ha[400],light:Ha[300],dark:Ha[700]}:{main:"#ed6c02",light:Ha[500],dark:Ha[900]}}function yE(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:o=.2}=e,i=ce(e,AE),r=e.primary||mE(t),s=e.secondary||hE(t),I=e.error||pE(t),a=e.info||bE(t),c=e.success||fE(t),C=e.warning||ZE(t);function A(G){return oE(G,rh.text.primary)>=n?rh.text.primary:dB.text.primary}const m=({color:G,name:W,mainShade:Z=500,lightShade:y=300,darkShade:f=700})=>{if(G=J({},G),!G.main&&G[Z]&&(G.main=G[Z]),!G.hasOwnProperty("main"))throw new Error(_r(11,W?` (${W})`:"",Z));if(typeof G.main!="string")throw new Error(_r(12,W?` (${W})`:"",JSON.stringify(G.main)));return uB(G,"light",y,o),uB(G,"dark",f,o),G.contrastText||(G.contrastText=A(G.main)),G},p={dark:rh,light:dB};return _n(J({common:J({},MI),mode:t,primary:m({color:r,name:"primary"}),secondary:m({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:I,name:"error"}),warning:m({color:C,name:"warning"}),info:m({color:a,name:"info"}),success:m({color:c,name:"success"}),grey:uE,contrastThreshold:n,getContrastText:A,augmentColor:m,tonalOffset:o},p[t]),i)}const GE=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function BE(e){return Math.round(e*1e5)/1e5}const AB={textTransform:"uppercase"},mB='"Roboto", "Helvetica", "Arial", sans-serif';function SE(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:o=mB,fontSize:i=14,fontWeightLight:r=300,fontWeightRegular:s=400,fontWeightMedium:I=500,fontWeightBold:a=700,htmlFontSize:c=16,allVariants:C,pxToRem:A}=n,m=ce(n,GE),p=i/14,b=A||(Z=>`${Z/c*p}rem`),G=(Z,y,f,v,V)=>J({fontFamily:o,fontWeight:Z,fontSize:b(y),lineHeight:f},o===mB?{letterSpacing:`${BE(v/y)}em`}:{},V,C),W={h1:G(r,96,1.167,-1.5),h2:G(r,60,1.2,-.5),h3:G(s,48,1.167,0),h4:G(s,34,1.235,.25),h5:G(s,24,1.334,0),h6:G(I,20,1.6,.15),subtitle1:G(s,16,1.75,.15),subtitle2:G(I,14,1.57,.1),body1:G(s,16,1.5,.15),body2:G(s,14,1.43,.15),button:G(I,14,1.75,.4,AB),caption:G(s,12,1.66,.4),overline:G(s,12,2.66,1,AB),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return _n(J({htmlFontSize:c,pxToRem:b,fontFamily:o,fontSize:i,fontWeightLight:r,fontWeightRegular:s,fontWeightMedium:I,fontWeightBold:a},W),m,{clone:!1})}const vE=.2,WE=.14,VE=.12;function Rt(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${vE})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${WE})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${VE})`].join(",")}const RE=["none",Rt(0,2,1,-1,0,1,1,0,0,1,3,0),Rt(0,3,1,-2,0,2,2,0,0,1,5,0),Rt(0,3,3,-2,0,3,4,0,0,1,8,0),Rt(0,2,4,-1,0,4,5,0,0,1,10,0),Rt(0,3,5,-1,0,5,8,0,0,1,14,0),Rt(0,3,5,-1,0,6,10,0,0,1,18,0),Rt(0,4,5,-2,0,7,10,1,0,2,16,1),Rt(0,5,5,-3,0,8,10,1,0,3,14,2),Rt(0,5,6,-3,0,9,12,1,0,3,16,2),Rt(0,6,6,-3,0,10,14,1,0,4,18,3),Rt(0,6,7,-4,0,11,15,1,0,4,20,3),Rt(0,7,8,-4,0,12,17,2,0,5,22,4),Rt(0,7,8,-4,0,13,19,2,0,5,24,4),Rt(0,7,9,-4,0,14,21,2,0,5,26,4),Rt(0,8,9,-5,0,15,22,2,0,6,28,5),Rt(0,8,10,-5,0,16,24,2,0,6,30,5),Rt(0,8,11,-5,0,17,26,2,0,6,32,5),Rt(0,9,11,-5,0,18,28,2,0,7,34,6),Rt(0,9,12,-6,0,19,29,2,0,7,36,6),Rt(0,10,13,-6,0,20,31,3,0,8,38,7),Rt(0,10,13,-6,0,21,33,3,0,8,40,7),Rt(0,10,14,-6,0,22,35,3,0,8,42,7),Rt(0,11,14,-7,0,23,36,3,0,9,44,8),Rt(0,11,15,-7,0,24,38,3,0,9,46,8)],kE=["duration","easing","delay"],wE={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},XE={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function hB(e){return`${Math.round(e)}ms`}function JE(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function YE(e){const t=J({},wE,e.easing),n=J({},XE,e.duration);return J({getAutoHeightDuration:JE,create:(i=["all"],r={})=>{const{duration:s=n.standard,easing:I=t.easeInOut,delay:a=0}=r;return ce(r,kE),(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof s=="string"?s:hB(s)} ${I} ${typeof a=="string"?a:hB(a)}`).join(",")}},e,{easing:t,duration:n})}const HE={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},xE=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Li(e={},...t){const{mixins:n={},palette:o={},transitions:i={},typography:r={}}=e,s=ce(e,xE);if(e.vars)throw new Error(_r(18));const I=yE(o),a=_l(e);let c=_n(a,{mixins:eE(a.breakpoints,n),palette:I,shadows:RE.slice(),typography:SE(I,r),transitions:YE(i),zIndex:J({},HE)});return c=_n(c,s),c=t.reduce((C,A)=>_n(C,A),c),c.unstable_sxConfig=J({},Ic,s==null?void 0:s.unstable_sxConfig),c.unstable_sx=function(A){return jl({sx:A,theme:this})},c}const $f=Li(),Vl="$$material";function dk(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Ln=e=>dk(e)&&e!=="classes",se=E3({themeId:Vl,defaultTheme:$f,rootShouldForwardProp:Ln});function Me(e){return u3(e)}const pi=G3({createStyledComponent:se("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${Ae(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>Me({props:e,name:"MuiContainer"})}),NE="/assets/fruit-D7fCoz1X.png",FE="http://209.58.160.245:1337",KE=async(e,t)=>{try{const n=`${FE}/api/history-point?filters[user][id][$eq]=${e}&populate=user&populate=shop&populate=shop.image`,o=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!o.ok){const s=await o.json();throw console.error("Error fetching history point:",s),new Error(`Request failed with status ${o.status}`)}const r=(await o.json()).data.map(s=>{var I,a,c,C,A,m,p,b,G,W,Z,y,f,v,V,X,w,R,F,x,M,Q,$,_,ne,ee,te,N;return{id:s.id,date:s.attributes.date,time:s.attributes.time,totalPoint:s.attributes.totalPoint,user:{id:((a=(I=s.attributes.user)==null?void 0:I.data)==null?void 0:a.id)||"",username:((A=(C=(c=s.attributes.user)==null?void 0:c.data)==null?void 0:C.attributes)==null?void 0:A.username)||"",email:((b=(p=(m=s.attributes.user)==null?void 0:m.data)==null?void 0:p.attributes)==null?void 0:b.email)||"",fullName:((Z=(W=(G=s.attributes.user)==null?void 0:G.data)==null?void 0:W.attributes)==null?void 0:Z.fullName)||"",lineId:((v=(f=(y=s.attributes.user)==null?void 0:y.data)==null?void 0:f.attributes)==null?void 0:v.lineId)||"",userType:((w=(X=(V=s.attributes.user)==null?void 0:V.data)==null?void 0:X.attributes)==null?void 0:w.userType)||"",point:((x=(F=(R=s.attributes.user)==null?void 0:R.data)==null?void 0:F.attributes)==null?void 0:x.point)||0},shop:{id:((Q=(M=s.attributes.shop)==null?void 0:M.data)==null?void 0:Q.id)||"",name:((ne=(_=($=s.attributes.shop)==null?void 0:$.data)==null?void 0:_.attributes)==null?void 0:ne.name)||"",image:((N=(te=(ee=s.attributes.shop)==null?void 0:ee.data)==null?void 0:te.attributes)==null?void 0:N.image)||""}}});return console.log("recycleMachines in get: ",r),r}catch(n){throw console.error("Error fetching recycle machines:",n.message),n}},uk=(e,t)=>{const n=new Date(`${e}T${t}`),o=["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัสบดี","ศุกร์","เสาร์"],i=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],r=o[n.getDay()],s=n.getDate(),I=i[n.getMonth()],a=n.getFullYear()+543,c=n.getHours().toString().padStart(2,"0"),C=n.getMinutes().toString().padStart(2,"0");return`วัน${r}ที่ ${s} เดือน ${I} ${a} เวลา ${c}:${C} น.`};function EE(){const e="http://209.58.160.245:1337",t="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",{id:n}=Gu(),[o,i]=B.useState(null),[r,s]=B.useState(!0),[I,a]=B.useState(null);return B.useEffect(()=>{(async()=>{try{s(!0);const C=await KE(n,t);i(C),s(!1)}catch(C){console.error("Error fetching history points:",C),a(C.message),s(!1)}})()},[n,t]),r?u.jsx("p",{children:"Loading..."}):I?u.jsxs("p",{children:["Error: ",I]}):u.jsxs(u.Fragment,{children:[u.jsx(Mn,{}),u.jsxs(pi,{maxWidth:"sm",children:[u.jsx("p",{className:"text-center mt-16 text-2xl",children:"คะแนนสะสม"}),u.jsx("div",{className:"flex justify-center mt-8",children:u.jsx("img",{src:I5,alt:"coins",width:"120"})}),u.jsxs("p",{className:"text-center mt-8 text-xl font-semibold",children:[o[0].user.point," แต้ม"]}),u.jsx("p",{className:"text-center mt-10 text-2xl font-semibold",children:"ประวัติการแลกแต้ม"}),o.map((c,C)=>{var A,m,p,b,G;return u.jsxs("div",{className:"shadow-inner w-full max-w-md mx-auto h-auto bg-white mt-10 rounded-lg mb-6 p-4",children:[u.jsx("div",{className:"flex justify-center",children:u.jsx("img",{src:(b=(p=(m=(A=c.shop)==null?void 0:A.image)==null?void 0:m.data)==null?void 0:p.attributes)!=null&&b.url?`${e}${c.shop.image.data.attributes.url}`:NE,alt:`ร้าน ${(G=c.shop)==null?void 0:G.name}`,className:"rounded-full w-24 h-24 sm:w-32 sm:h-32 object-cover"})}),u.jsx("div",{className:"flex justify-center mt-4 text-lg sm:text-xl font-semibold",children:u.jsx("p",{children:c.shop.name})}),u.jsxs("div",{className:"grid grid-cols-[4fr_2fr_3fr] mt-10 text-lg sm:text-xl",children:[u.jsx("p",{className:"pl-4 sm:pl-8",children:"แลกแต้มทั้งหมด"}),u.jsx("p",{className:"text-center",children:c.totalPoint}),u.jsx("p",{className:"pr-4 sm:pr-8 text-right",children:"แต้ม"})]}),u.jsx("p",{className:"mt-6 text-center text-sm sm:text-lg",children:uk(c.date,c.time)})]},C)})]})]})}const Fp="/assets/Can_2_-Cuhqxb0c.png",Kp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAA2CAYAAADZJImDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAlHSURBVHgBrVjdbxvHEd+Pu+ORPFGkREu0ZVmUYNeyo7Yy0hSC7TppGgRqEDQGigJtkQJWCwQGigJ9aP+AvgToU4smKPpUB437B7QICrd5sBO7tYIqthynjmzJFhV9UbIk0uSR97W321lKR1PSkVaMDHA87t7e/HZmZ36zexiFSPbCrJ5BKENVlhGcZzEhmUVP+VNurN9GTynKzo5Tf7l3HmOWqTUEQhiT2j2D7EwOoRx6SiF76KkJpXRUWoq+LCDBUah7MMaZHpWdH75wM4meQnBjY/jCbNJQ2C+f9JIv+KTlV69Mjp0ooj3KNqDT786Mgk0jaI/iIzy+zOiVvQRJHejkX+8NE47Poi8oAqPiXiKytkbSZVjgUfQUggVKHqDuEydYA4qr7By8UI8onWIlmyDJ59Lqwe8e0od+9Wzq5TYNq02VYDL4pIhUTl2cHpGzCjq+PxD9RkIlRuMgQ8HxdFSJlF3Pa6YIInI4h9A4am6RGN7Ww3cPWnfEylBXrCOiUNJUEcdZ1EIIrE2msYMhwRrbCxWe/1/BzRka1l8ZMPraIlQJV8Vbum7bDFMa0TsitO7GByV/4f0Fa2rV8i3Z1lWsvnq4beBMr9G9G5C0zClFhmewRl/rVA7Ke8nj5u0NlrtX9NZkOxGh2pGU1k2A+AqOb8q+nkRb+2zRLdxccdYd5nPq0/GWQODbnMBiWEZawUHmP+ftiaXqprJAHE+wuTJb2xdT2iAo2nyB+HqVVfqTWmp/XDX+8cCcq9LaZPPNgIjne5Pyj+0L9smGm98JIuXehlVyGfcXS27x7pqdr7rc3bD9auDOUwf1DPX9LGohZHzsWA7uV1oNKrvCCxT7sOoW47Uw/1fOnHM5591gVUTFx2WqNCNdcnO2kH3rdDp3sI2arcAWy16lsd2h09iRpJa4u7a5jkdSSh+s9WgbjYeyBBHcHeWcnftBNjb8k8Ox069l9WEZfTsHTm94j3b2yTWaM11TWtsVU6OyT2CcDWMJIhCp5VGMClOBgJDhPZLRDu8cKCMrcF8gVY97Zctn0lqVknqq7I+g7C4g+VN0RHLVEfWHjG9P2kAa3QfBwa/NV5fk/7miY1qwjsGzsMCApBPFddsfZHyTVGHWxYk1LxcGJBUmo1SzHME+XbMKDhM1wpLBcnPVWg/GNXJnHUgIkiOEDS2YLD/9yM/nTNY0w6XCa3OVlaAt19KCtJCpUXb8uhc4EZldQJ20fOnN+yi/WmV7qkeyfOzTaI3dbxdYXoLsHBNqUX9/v/3ChdmplIHOFuzNjYlkiagqlIiClS6dGgYlenuEGO1QPj43/fyNNXdhJ8Bwl94B7hdzZa/caF0dSP5cGesv/u7aQjahkUyYFQyU3i/7C5cXrakAIK5iZbgr2tHXrqX6k2oawpoD9633JdXEe/fLd0OBpGgKnoDbq40PZWDcWme5YN3AQpJNReJHO7RUQqF6T7vSnoxQA8aVTJf5PTG8/xgA//tz+p+mQB0RMlGy+ahk7qWKv9bofwlwPB1JHW7XU4ryuLR8tu6sQJaWj6fVga44iQf9owOG/14zoMGkPvnr8fVLNhP1Mt4MQCZuseL5GR11pyDBPdenKPq4PGmUvwS3PzcC1V8+0Z8qVuzHEzmQUKKvDCT6Bjv1zgBEAtxath/qvpc+3k6PBkWyYLGqzyXfbkqUks6RC59lQ4GkXB87OgXBOT4A6/B8r9ErS4BkAFngPpyvzm88stGzHeSZxiosBeqTKDqe3bAMSUVRB0NdV+9gdPxhxf3WjWWUN5nw1qqeIxngZLeWPZrUsqiJVBzudkZRbZ3iKonJYgp/L22zSAgRhevrcMWgaUsGuLvhlKDQWQHNOD5izA/nQIsJ23SFaTK0sWrx5bkKfyD3iY3uq1kEJwULQGQO9V4+l53/4d9mlTWL8wBEyseQpJ8WvaUeQ4l7kJmg2Cu4fNs2+EfPqF+Rd/B27b0t9+XqQFsi632vvF7qb+t2fRS3PeExgXwFIyoHyDULFP19uvJgp2VyvBxTckVtAo3uawyGheAP1OWNQLHcz8l7ACIFJuHL+rQTyPV91KWTTtNhNRc3uq9uEbhvHdwnC1tMRcKT0cYF9uWeQO4RXLCsAhxWBZflSm6t7Kd0pPcaSrJbp8mMTtM+Fm7BEeUDbSrkooUa3bcz6j6ES/v9f9ekohcaH0iizcSxAcydOJPRDnSC8ijF9ZItd7RXl62Z5/aj9MF2NSHzcKnErMB924DAKgabFeO1vkjmoS2yQJw6EK2hEmDzBqU75ZOCN/Pxqrsw1KWnehLgbYXQQ22aIYEC94Xuo0+k9ZE5k2XRE0SG9fiKOyVJF2gi8dV9+j7Zn4yQWG9CaR9fRA9lm2g0uQuoiIp2lMafeFSU+/KPVp1cQLzH03pn8Mxlwo9pivrYfaq96xjybSiEhGC7lRWXF53JD5btmQCkJ6FFG6MSCp+tE6JK98m9/fUf90+Fuk7DWNEp0mwfuUFfUPzCqqvt8W2hLnezqxWvDBtMOjG3+o7sCwW6PlvSojEIUZVutAIIxIRElWmgkc29HTDK3MIj7/JvXjwQ389p4gqsSCjQ9IoN2W+p902hrLl+nhpqUY2ooSCbin0+vmBfPXvUEPt0bfo7WePqy3+Y7L+oiPNV5sv69m4o0COH34HvAt9MYGHnLV+HrB12QR1RiEk1kicKLcIeN4e5yIkInYK8zX80uaHfmlxKYg9n4CPV6wSJ7HzBae+IKc83BYKPTHn5BSIO9JOieOZh2Z0MGZXZukZMVEKbZZkE9aDW2qgwpzOupn77/tKxcCAKQFvLe6hDHSw73oS9RZSB6DAJAzYmwBh6RIXYwaKuyxcYSorPPO6DcRCNnO1rcvB9fHIjGCnHumPDt5etCUPFRqehpQ0dp7UWTLH1JmrTiBrXUAJzCOOwIbEqMq0GNZAjyZPZ+PccxktcHty/gGCMFt94sfeD0O8Gf/z5kAlerjF0TKMdRoRk4ESXkHfSJCXCRAi0RCn/KUJNPwPWaslMTCXgIpQI+sDfSiJKD8r+VoAwyRlY47eXi2zsZ6f7akebpoNB0dsKRWfCnsGuFhiaGsBppueLKlw2KL8BkToJtDD5zhtDu6IUoxbyi4vT8N3BexP8PEIx1mqzFbISixLG4o7g9A5B/I6H1DtvvX6k1ErX/wF4ybUEkEx81gAAAABJRU5ErkJggg==",e0="/assets/logo-CZ1hDsNe.png",ME="/assets/oil%20bottle-DWp1Sx2f.png";function ws(e){return Mi({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(e)}function LE(e){return Mi({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function zE(e){return Mi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"},child:[]}]})(e)}function TE(e){return Mi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function UE(e){return Mi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function DE(e){return Mi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM272 80v80H144V80h128zm122 352H54a6 6 0 0 1-6-6V86a6 6 0 0 1 6-6h42v104c0 13.255 10.745 24 24 24h176c13.255 0 24-10.745 24-24V83.882l78.243 78.243a6 6 0 0 1 1.757 4.243V426a6 6 0 0 1-6 6zM224 232c-48.523 0-88 39.477-88 88s39.477 88 88 88 88-39.477 88-88-39.477-88-88-88zm0 128c-22.056 0-40-17.944-40-40s17.944-40 40-40 40 17.944 40 40-17.944 40-40 40z"},child:[]}]})(e)}const QE="http://209.58.160.245:1337",PE=async(e,t)=>{try{const n=`${QE}/api/history-machine?filters[user][id][$eq]=${e}&populate[user]=true`,o=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!o.ok){const s=await o.json();throw console.error("Error fetching history machines:",s),new Error(`Request failed with status ${o.status}`)}const r=(await o.json()).data.map(s=>{var I,a,c,C,A,m,p,b,G,W,Z,y,f,v,V,X,w;return{id:s.id,type:s.attributes.type,date:s.attributes.date,time:s.attributes.time,serialNumber:s.attributes.serialNumber,point:s.attributes.point,quantity:s.attributes.quantity,user:{id:((a=(I=s.attributes.user)==null?void 0:I.data)==null?void 0:a.id)||"",username:((A=(C=(c=s.attributes.user)==null?void 0:c.data)==null?void 0:C.attributes)==null?void 0:A.username)||"",email:((b=(p=(m=s.attributes.user)==null?void 0:m.data)==null?void 0:p.attributes)==null?void 0:b.email)||"",fullName:((Z=(W=(G=s.attributes.user)==null?void 0:G.data)==null?void 0:W.attributes)==null?void 0:Z.fullName)||"",lineId:((v=(f=(y=s.attributes.user)==null?void 0:y.data)==null?void 0:f.attributes)==null?void 0:v.lineId)||"",userType:((w=(X=(V=s.attributes.user)==null?void 0:V.data)==null?void 0:X.attributes)==null?void 0:w.userType)||""}}});return console.log("recycleMachines in get: ",r),r}catch(n){throw console.error("Error fetching recycle machines:",n.message),n}};function jE(){const e="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",{id:t}=Gu(),[n,o]=B.useState(null),[i,r]=B.useState(!0),[s,I]=B.useState(null),[a,c]=B.useState("ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม"),C=A=>{c(A)};return B.useEffect(()=>{(async()=>{try{r(!0);const m=await PE(t,e);o(m),r(!1)}catch(m){console.error("Error fetching recycleMachiness:",m),I(m.message),r(!1)}})()},[t,e]),console.log("recycleMachines: ",n),i?u.jsx("p",{children:"Loading..."}):s?u.jsxs("p",{children:["Error: ",s]}):u.jsxs(u.Fragment,{children:[u.jsx(Mn,{}),u.jsxs(pi,{maxWidth:"sm",children:[u.jsx("div",{className:"text-2xl text-center mt-10",children:"ประวัติการใช้บริการตู้"}),u.jsxs("div",{className:"bg-grey-bg mt-20 grid grid-cols-2 rounded-t-lg",children:[u.jsxs("button",{className:` tablink h-40 pt-5 text-xs  rounded-t-lg ${a==="ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม"?"w3-green":""}`,onClick:()=>C("ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม"),children:["ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม",u.jsxs("div",{className:"mt-5 grid grid-cols-2 ",children:[u.jsx("img",{src:Fp,alt:"can",width:"70",className:"ml-5"}),u.jsx("img",{src:Kp,alt:"bottle",width:"40",className:"ml-5"})]})]}),u.jsxs("button",{className:`tablink text-xs  rounded-t-lg ${a==="ตู้รับน้ำมันพืชใช้แล้ว"?"w3-green":""}`,onClick:()=>C("ตู้รับน้ำมันพืชใช้แล้ว"),children:[u.jsx("p",{className:"text-center",children:"ตู้รับน้ำมันพืชใช้แล้ว"}),u.jsx("div",{className:"flex justify-center",children:u.jsx("img",{src:e0,alt:"logo",width:"70",className:"mt-5"})})]})]}),u.jsx("div",{className:"w-full h-full pb-14 bg-white shadow-md shadow-inner rounded-b-lg",children:u.jsx("div",{id:"bottle",className:"w3-container  city",style:{display:a==="ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม"?"block":"none"},children:n.map(A=>u.jsxs("div",{className:"w-full shadow-can shadow-inner mt-10 mb-3 pb-5 p-2 bg-content rounded-lg",children:[u.jsx("div",{className:"flex justify-center",children:A.type==="bottle"?u.jsx("img",{src:Kp,alt:"bottle",width:"60",className:"mt-2"}):A.type==="can"?u.jsx("img",{src:Fp,alt:"can",width:"60",className:"mt-2"}):null}),u.jsx("p",{className:"text-center text-2xl font-bold mt-5",children:A.type==="bottle"?`ขวดพลาสติก ${A.quantity||0} ขวด`:A.type==="can"?`กระป๋องอลูมิเนียม ${A.quantity||0} กระป๋อง`:null}),u.jsxs("div",{className:"grid grid-rows-3",children:[u.jsxs("div",{className:"text-base mt-5",children:[u.jsx(ws,{className:"float-left text-xl ml-3"}),"   ",uk(A.date,A.time)]}),u.jsxs("div",{className:"text-base mt-5",children:[u.jsx(ws,{className:"float-left text-xl ml-3"}),"   หมายเลขตู้เลขที่ ",A.serialNumber]}),u.jsxs("div",{className:"text-base mt-5",children:[u.jsx(ws,{className:"float-left text-xl ml-3"}),"   แต้มที่ได้รับทั้งหมด ",A.point||0," แต้ม"]})]})]},A.id))})}),u.jsx("div",{className:"w-full h-full bg-white shadow-md shadow-inner rounded-b-lg",children:u.jsx("div",{id:"oil",className:"w3-container  city",style:{display:a==="ตู้รับน้ำมันพืชใช้แล้ว"?"block":"none"},children:u.jsxs("div",{className:"w-full shadow-can shadow-inner mt-10 mb-10 pb-5 p-2 bg-content rounded-lg",children:[u.jsx("div",{className:"flex justify-center",children:u.jsx("img",{src:ME,alt:"can",width:"60",className:"mt-2"})}),u.jsx("p",{className:"text-center text-2xl font-bold mt-5",children:"ขวดน้ำมันพืชใช้แล้ว 2 ขวด"}),u.jsxs("div",{className:"grid grid-rows-3",children:[u.jsxs("div",{className:"text-base mt-5",children:[" ",u.jsx(ws,{className:"float-left text-xl ml-3"})," ","   วันอังคารที่ 17 เดือน สิงหาคม 2566 เวลา 10:30 น."]}),u.jsxs("div",{className:"text-base mt-5",children:[" ",u.jsx(ws,{className:"float-left text-xl ml-3"})," ","   หมายเลขตู้เลขที่ 00011/00111"]}),u.jsxs("div",{className:"text-base mt-5",children:[" ",u.jsx(ws,{className:"float-left text-xl ml-3"})," ","   แต้มที่ได้รับทั้งหมด 100 แต้ม"]})]})]})})})]})]})}const t0=({photoImage:e,onFileChange:t})=>{const n="https://cdn.pixabay.com/photo/2019/08/11/18/59/icon-4399701_1280.png",[o,i]=B.useState(e||n),r=B.useRef(null),s=()=>{r.current.click()},I=a=>{const c=a.target.files[0];if(c){const C=new FileReader;C.onload=A=>{i(A.target.result)},C.readAsDataURL(c),t(c)}};return u.jsx(u.Fragment,{children:u.jsx("div",{className:"container mx-auto px-4 py-9 lg:py-20",children:u.jsx("div",{className:"flex justify-center",children:u.jsxs("div",{className:"w-28 h-28 md:w-36 md:h-36 lg:w-48 lg:h-48",onClick:s,style:{cursor:"pointer",borderRadius:"50%",backgroundSize:"cover",backgroundPosition:"center",backgroundImage:`url(${o})`,position:"relative",border:"1px solid #ccc"},children:[u.jsx(zE,{size:20,style:{position:"absolute",bottom:5,right:5,backgroundColor:"white",borderRadius:"50%",padding:5}}),u.jsx("input",{type:"file",ref:r,style:{display:"none"},onChange:I,accept:"image/*"})]})})})})};function n0(){const e=Qu($f);return e[Vl]||e}const _E=["theme"];function ir(e){let{theme:t}=e,n=ce(e,_E);const o=t[Vl];return u.jsx(A3,J({},n,{themeId:o?Vl:void 0,theme:o||t}))}const pB=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)};function OE(e){return Xe("MuiSvgIcon",e)}we("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const qE=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],$E=e=>{const{color:t,fontSize:n,classes:o}=e,i={root:["root",t!=="inherit"&&`color${Ae(t)}`,`fontSize${Ae(n)}`]};return Je(i,OE,o)},eM=se("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Ae(n.color)}`],t[`fontSize${Ae(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,o,i,r,s,I,a,c,C,A,m,p,b;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(o=n.create)==null?void 0:o.call(n,"fill",{duration:(i=e.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((r=e.typography)==null||(s=r.pxToRem)==null?void 0:s.call(r,20))||"1.25rem",medium:((I=e.typography)==null||(a=I.pxToRem)==null?void 0:a.call(I,24))||"1.5rem",large:((c=e.typography)==null||(C=c.pxToRem)==null?void 0:C.call(c,35))||"2.1875rem"}[t.fontSize],color:(A=(m=(e.vars||e).palette)==null||(m=m[t.color])==null?void 0:m.main)!=null?A:{action:(p=(e.vars||e).palette)==null||(p=p.action)==null?void 0:p.active,disabled:(b=(e.vars||e).palette)==null||(b=b.action)==null?void 0:b.disabled,inherit:void 0}[t.color]}}),Ep=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiSvgIcon"}),{children:i,className:r,color:s="inherit",component:I="svg",fontSize:a="medium",htmlColor:c,inheritViewBox:C=!1,titleAccess:A,viewBox:m="0 0 24 24"}=o,p=ce(o,qE),b=B.isValidElement(i)&&i.type==="svg",G=J({},o,{color:s,component:I,fontSize:a,instanceFontSize:t.fontSize,inheritViewBox:C,viewBox:m,hasSvgAsChild:b}),W={};C||(W.viewBox=m);const Z=$E(G);return u.jsxs(eM,J({as:I,className:fe(Z.root,r),focusable:"false",color:c,"aria-hidden":A?void 0:!0,role:A?"img":void 0,ref:n},W,p,b&&i.props,{ownerState:G,children:[b?i.props.children:i,A?u.jsx("title",{children:A}):null]}))});Ep.muiName="SvgIcon";function gs(e,t){function n(o,i){return u.jsx(Ep,J({"data-testid":`${t}Icon`,ref:i},o,{children:e}))}return n.muiName=Ep.muiName,B.memo(B.forwardRef(n))}const tM={configure:e=>{Df.configure(e)}},nM=Object.freeze(Object.defineProperty({__proto__:null,capitalize:Ae,createChainedFunction:kd,createSvgIcon:gs,debounce:jf,deprecatedPropType:MK,isMuiElement:FC,ownerDocument:ao,ownerWindow:Pg,requirePropFactory:LK,setRef:wd,unstable_ClassNameGenerator:tM,unstable_useEnhancedEffect:mg,unstable_useId:iA,unsupportedProp:TK,useControlled:KI,useEventCallback:wr,useForkRef:Vn,useIsFocusVisible:_2},Symbol.toStringTag,{value:"Module"}));function Mp(e,t){return Mp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},Mp(e,t)}function Ak(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Mp(e,t)}const bB={disabled:!1},Yd=Ee.createContext(null);var oM=function(t){return t.scrollTop},ja="unmounted",yr="exited",Gr="entering",xs="entered",Lp="exiting",zi=function(e){Ak(t,e);function t(o,i){var r;r=e.call(this,o,i)||this;var s=i,I=s&&!s.isMounting?o.enter:o.appear,a;return r.appearStatus=null,o.in?I?(a=yr,r.appearStatus=Gr):a=xs:o.unmountOnExit||o.mountOnEnter?a=ja:a=yr,r.state={status:a},r.nextCallback=null,r}t.getDerivedStateFromProps=function(i,r){var s=i.in;return s&&r.status===ja?{status:yr}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var r=null;if(i!==this.props){var s=this.state.status;this.props.in?s!==Gr&&s!==xs&&(r=Gr):(s===Gr||s===xs)&&(r=Lp)}this.updateStatus(!1,r)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,r,s,I;return r=s=I=i,i!=null&&typeof i!="number"&&(r=i.exit,s=i.enter,I=i.appear!==void 0?i.appear:s),{exit:r,enter:s,appear:I}},n.updateStatus=function(i,r){if(i===void 0&&(i=!1),r!==null)if(this.cancelNextCallback(),r===Gr){if(this.props.unmountOnExit||this.props.mountOnEnter){var s=this.props.nodeRef?this.props.nodeRef.current:Qa.findDOMNode(this);s&&oM(s)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===yr&&this.setState({status:ja})},n.performEnter=function(i){var r=this,s=this.props.enter,I=this.context?this.context.isMounting:i,a=this.props.nodeRef?[I]:[Qa.findDOMNode(this),I],c=a[0],C=a[1],A=this.getTimeouts(),m=I?A.appear:A.enter;if(!i&&!s||bB.disabled){this.safeSetState({status:xs},function(){r.props.onEntered(c)});return}this.props.onEnter(c,C),this.safeSetState({status:Gr},function(){r.props.onEntering(c,C),r.onTransitionEnd(m,function(){r.safeSetState({status:xs},function(){r.props.onEntered(c,C)})})})},n.performExit=function(){var i=this,r=this.props.exit,s=this.getTimeouts(),I=this.props.nodeRef?void 0:Qa.findDOMNode(this);if(!r||bB.disabled){this.safeSetState({status:yr},function(){i.props.onExited(I)});return}this.props.onExit(I),this.safeSetState({status:Lp},function(){i.props.onExiting(I),i.onTransitionEnd(s.exit,function(){i.safeSetState({status:yr},function(){i.props.onExited(I)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,r){r=this.setNextCallback(r),this.setState(i,r)},n.setNextCallback=function(i){var r=this,s=!0;return this.nextCallback=function(I){s&&(s=!1,r.nextCallback=null,i(I))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},n.onTransitionEnd=function(i,r){this.setNextCallback(r);var s=this.props.nodeRef?this.props.nodeRef.current:Qa.findDOMNode(this),I=i==null&&!this.props.addEndListener;if(!s||I){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],c=a[0],C=a[1];this.props.addEndListener(c,C)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===ja)return null;var r=this.props,s=r.children;r.in,r.mountOnEnter,r.unmountOnExit,r.appear,r.enter,r.exit,r.timeout,r.addEndListener,r.onEnter,r.onEntering,r.onEntered,r.onExit,r.onExiting,r.onExited,r.nodeRef;var I=ce(r,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ee.createElement(Yd.Provider,{value:null},typeof s=="function"?s(i,I):Ee.cloneElement(Ee.Children.only(s),I))},t}(Ee.Component);zi.contextType=Yd;zi.propTypes={};function Xs(){}zi.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Xs,onEntering:Xs,onEntered:Xs,onExit:Xs,onExiting:Xs,onExited:Xs};zi.UNMOUNTED=ja;zi.EXITED=yr;zi.ENTERING=Gr;zi.ENTERED=xs;zi.EXITING=Lp;function iM(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o0(e,t){var n=function(r){return t&&B.isValidElement(r)?t(r):r},o=Object.create(null);return e&&B.Children.map(e,function(i){return i}).forEach(function(i){o[i.key]=n(i)}),o}function gM(e,t){e=e||{},t=t||{};function n(C){return C in t?t[C]:e[C]}var o=Object.create(null),i=[];for(var r in e)r in t?i.length&&(o[r]=i,i=[]):i.push(r);var s,I={};for(var a in t){if(o[a])for(s=0;s<o[a].length;s++){var c=o[a][s];I[o[a][s]]=n(c)}I[a]=n(a)}for(s=0;s<i.length;s++)I[i[s]]=n(i[s]);return I}function Xr(e,t,n){return n[t]!=null?n[t]:e.props[t]}function rM(e,t){return o0(e.children,function(n){return B.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Xr(n,"appear",e),enter:Xr(n,"enter",e),exit:Xr(n,"exit",e)})})}function sM(e,t,n){var o=o0(e.children),i=gM(t,o);return Object.keys(i).forEach(function(r){var s=i[r];if(B.isValidElement(s)){var I=r in t,a=r in o,c=t[r],C=B.isValidElement(c)&&!c.props.in;a&&(!I||C)?i[r]=B.cloneElement(s,{onExited:n.bind(null,s),in:!0,exit:Xr(s,"exit",e),enter:Xr(s,"enter",e)}):!a&&I&&!C?i[r]=B.cloneElement(s,{in:!1}):a&&I&&B.isValidElement(c)&&(i[r]=B.cloneElement(s,{onExited:n.bind(null,s),in:c.props.in,exit:Xr(s,"exit",e),enter:Xr(s,"enter",e)}))}}),i}var lM=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},aM={component:"div",childFactory:function(t){return t}},i0=function(e){Ak(t,e);function t(o,i){var r;r=e.call(this,o,i)||this;var s=r.handleExited.bind(iM(r));return r.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},r}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,r){var s=r.children,I=r.handleExited,a=r.firstRender;return{children:a?rM(i,I):sM(i,s,I),firstRender:!1}},n.handleExited=function(i,r){var s=o0(this.props.children);i.key in s||(i.props.onExited&&i.props.onExited(r),this.mounted&&this.setState(function(I){var a=J({},I.children);return delete a[i.key],{children:a}}))},n.render=function(){var i=this.props,r=i.component,s=i.childFactory,I=ce(i,["component","childFactory"]),a=this.state.contextValue,c=lM(this.state.children).map(s);return delete I.appear,delete I.enter,delete I.exit,r===null?Ee.createElement(Yd.Provider,{value:a},c):Ee.createElement(Yd.Provider,{value:a},Ee.createElement(r,I,c))},t}(Ee.Component);i0.propTypes={};i0.defaultProps=aM;const mk=e=>e.scrollTop;function Hd(e,t){var n,o;const{timeout:i,easing:r,style:s={}}=e;return{duration:(n=s.transitionDuration)!=null?n:typeof i=="number"?i:i[t.mode]||0,easing:(o=s.transitionTimingFunction)!=null?o:typeof r=="object"?r[t.mode]:r,delay:s.transitionDelay}}function IM(e){return Xe("MuiPaper",e)}we("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const cM=["className","component","elevation","square","variant"],CM=e=>{const{square:t,elevation:n,variant:o,classes:i}=e,r={root:["root",o,!t&&"rounded",o==="elevation"&&`elevation${n}`]};return Je(r,IM,i)},dM=se("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(({theme:e,ownerState:t})=>{var n;return J({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&J({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${An("#fff",pB(t.elevation))}, ${An("#fff",pB(t.elevation))})`},e.vars&&{backgroundImage:(n=e.vars.overlays)==null?void 0:n[t.elevation]}))}),g0=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiPaper"}),{className:i,component:r="div",elevation:s=1,square:I=!1,variant:a="elevation"}=o,c=ce(o,cM),C=J({},o,{component:r,elevation:s,square:I,variant:a}),A=CM(C);return u.jsx(dM,J({as:r,ownerState:C,className:fe(A.root,i),ref:n},c))});function uM(e){const{className:t,classes:n,pulsate:o=!1,rippleX:i,rippleY:r,rippleSize:s,in:I,onExited:a,timeout:c}=e,[C,A]=B.useState(!1),m=fe(t,n.ripple,n.rippleVisible,o&&n.ripplePulsate),p={width:s,height:s,top:-(s/2)+r,left:-(s/2)+i},b=fe(n.child,C&&n.childLeaving,o&&n.childPulsate);return!I&&!C&&A(!0),B.useEffect(()=>{if(!I&&a!=null){const G=setTimeout(a,c);return()=>{clearTimeout(G)}}},[a,I,c]),u.jsx("span",{className:m,style:p,children:u.jsx("span",{className:b})})}const Uo=we("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),AM=["center","classes","className"];let sA=e=>e,fB,ZB,yB,GB;const zp=550,mM=80,hM=Pl(fB||(fB=sA`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),pM=Pl(ZB||(ZB=sA`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),bM=Pl(yB||(yB=sA`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),fM=se("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ZM=se(uM,{name:"MuiTouchRipple",slot:"Ripple"})(GB||(GB=sA`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Uo.rippleVisible,hM,zp,({theme:e})=>e.transitions.easing.easeInOut,Uo.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,Uo.child,Uo.childLeaving,pM,zp,({theme:e})=>e.transitions.easing.easeInOut,Uo.childPulsate,bM,({theme:e})=>e.transitions.easing.easeInOut),yM=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiTouchRipple"}),{center:i=!1,classes:r={},className:s}=o,I=ce(o,AM),[a,c]=B.useState([]),C=B.useRef(0),A=B.useRef(null);B.useEffect(()=>{A.current&&(A.current(),A.current=null)},[a]);const m=B.useRef(!1),p=j2(),b=B.useRef(null),G=B.useRef(null),W=B.useCallback(v=>{const{pulsate:V,rippleX:X,rippleY:w,rippleSize:R,cb:F}=v;c(x=>[...x,u.jsx(ZM,{classes:{ripple:fe(r.ripple,Uo.ripple),rippleVisible:fe(r.rippleVisible,Uo.rippleVisible),ripplePulsate:fe(r.ripplePulsate,Uo.ripplePulsate),child:fe(r.child,Uo.child),childLeaving:fe(r.childLeaving,Uo.childLeaving),childPulsate:fe(r.childPulsate,Uo.childPulsate)},timeout:zp,pulsate:V,rippleX:X,rippleY:w,rippleSize:R},C.current)]),C.current+=1,A.current=F},[r]),Z=B.useCallback((v={},V={},X=()=>{})=>{const{pulsate:w=!1,center:R=i||V.pulsate,fakeElement:F=!1}=V;if((v==null?void 0:v.type)==="mousedown"&&m.current){m.current=!1;return}(v==null?void 0:v.type)==="touchstart"&&(m.current=!0);const x=F?null:G.current,M=x?x.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Q,$,_;if(R||v===void 0||v.clientX===0&&v.clientY===0||!v.clientX&&!v.touches)Q=Math.round(M.width/2),$=Math.round(M.height/2);else{const{clientX:ne,clientY:ee}=v.touches&&v.touches.length>0?v.touches[0]:v;Q=Math.round(ne-M.left),$=Math.round(ee-M.top)}if(R)_=Math.sqrt((2*M.width**2+M.height**2)/3),_%2===0&&(_+=1);else{const ne=Math.max(Math.abs((x?x.clientWidth:0)-Q),Q)*2+2,ee=Math.max(Math.abs((x?x.clientHeight:0)-$),$)*2+2;_=Math.sqrt(ne**2+ee**2)}v!=null&&v.touches?b.current===null&&(b.current=()=>{W({pulsate:w,rippleX:Q,rippleY:$,rippleSize:_,cb:X})},p.start(mM,()=>{b.current&&(b.current(),b.current=null)})):W({pulsate:w,rippleX:Q,rippleY:$,rippleSize:_,cb:X})},[i,W,p]),y=B.useCallback(()=>{Z({},{pulsate:!0})},[Z]),f=B.useCallback((v,V)=>{if(p.clear(),(v==null?void 0:v.type)==="touchend"&&b.current){b.current(),b.current=null,p.start(0,()=>{f(v,V)});return}b.current=null,c(X=>X.length>0?X.slice(1):X),A.current=V},[p]);return B.useImperativeHandle(n,()=>({pulsate:y,start:Z,stop:f}),[y,Z,f]),u.jsx(fM,J({className:fe(Uo.root,r.root,s),ref:G},I,{children:u.jsx(i0,{component:null,exit:!0,children:a})}))});function GM(e){return Xe("MuiButtonBase",e)}const BM=we("MuiButtonBase",["root","disabled","focusVisible"]),SM=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],vM=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:o,classes:i}=e,s=Je({root:["root",t&&"disabled",n&&"focusVisible"]},GM,i);return n&&o&&(s.root+=` ${o}`),s},WM=se("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${BM.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),lA=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiButtonBase"}),{action:i,centerRipple:r=!1,children:s,className:I,component:a="button",disabled:c=!1,disableRipple:C=!1,disableTouchRipple:A=!1,focusRipple:m=!1,LinkComponent:p="a",onBlur:b,onClick:G,onContextMenu:W,onDragLeave:Z,onFocus:y,onFocusVisible:f,onKeyDown:v,onKeyUp:V,onMouseDown:X,onMouseLeave:w,onMouseUp:R,onTouchEnd:F,onTouchMove:x,onTouchStart:M,tabIndex:Q=0,TouchRippleProps:$,touchRippleRef:_,type:ne}=o,ee=ce(o,SM),te=B.useRef(null),N=B.useRef(null),j=Vn(N,_),{isFocusVisibleRef:P,onFocus:ae,onBlur:Ie,ref:ye}=_2(),[re,ue]=B.useState(!1);c&&re&&ue(!1),B.useImperativeHandle(i,()=>({focusVisible:()=>{ue(!0),te.current.focus()}}),[]);const[ie,Ye]=B.useState(!1);B.useEffect(()=>{Ye(!0)},[]);const Ue=ie&&!C&&!c;B.useEffect(()=>{re&&m&&!C&&ie&&N.current.pulsate()},[C,m,re,ie]);function je(Ge,Mt,In=A){return wr(fi=>(Mt&&Mt(fi),!In&&N.current&&N.current[Ge](fi),!0))}const ft=je("start",X),Ke=je("stop",W),Le=je("stop",Z),He=je("stop",R),Re=je("stop",Ge=>{re&&Ge.preventDefault(),w&&w(Ge)}),_e=je("start",M),$n=je("stop",F),ln=je("stop",x),Bt=je("stop",Ge=>{Ie(Ge),P.current===!1&&ue(!1),b&&b(Ge)},!1),zn=wr(Ge=>{te.current||(te.current=Ge.currentTarget),ae(Ge),P.current===!0&&(ue(!0),f&&f(Ge)),y&&y(Ge)}),fn=()=>{const Ge=te.current;return a&&a!=="button"&&!(Ge.tagName==="A"&&Ge.href)},st=B.useRef(!1),eo=wr(Ge=>{m&&!st.current&&re&&N.current&&Ge.key===" "&&(st.current=!0,N.current.stop(Ge,()=>{N.current.start(Ge)})),Ge.target===Ge.currentTarget&&fn()&&Ge.key===" "&&Ge.preventDefault(),v&&v(Ge),Ge.target===Ge.currentTarget&&fn()&&Ge.key==="Enter"&&!c&&(Ge.preventDefault(),G&&G(Ge))}),on=wr(Ge=>{m&&Ge.key===" "&&N.current&&re&&!Ge.defaultPrevented&&(st.current=!1,N.current.stop(Ge,()=>{N.current.pulsate(Ge)})),V&&V(Ge),G&&Ge.target===Ge.currentTarget&&fn()&&Ge.key===" "&&!Ge.defaultPrevented&&G(Ge)});let At=a;At==="button"&&(ee.href||ee.to)&&(At=p);const to={};At==="button"?(to.type=ne===void 0?"button":ne,to.disabled=c):(!ee.href&&!ee.to&&(to.role="button"),c&&(to["aria-disabled"]=c));const jt=Vn(n,ye,te),an=J({},o,{centerRipple:r,component:a,disabled:c,disableRipple:C,disableTouchRipple:A,focusRipple:m,tabIndex:Q,focusVisible:re}),et=vM(an);return u.jsxs(WM,J({as:At,className:fe(et.root,I),ownerState:an,onBlur:Bt,onClick:G,onContextMenu:Ke,onFocus:zn,onKeyDown:eo,onKeyUp:on,onMouseDown:ft,onMouseLeave:Re,onMouseUp:He,onDragLeave:Le,onTouchEnd:$n,onTouchMove:ln,onTouchStart:_e,ref:jt,tabIndex:c?-1:Q,type:ne},to,ee,{children:[s,Ue?u.jsx(yM,J({ref:j,center:r},$)):null]}))});function VM(e){return Xe("MuiIconButton",e)}const RM=we("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),kM=["edge","children","className","color","disabled","disableFocusRipple","size"],wM=e=>{const{classes:t,disabled:n,color:o,edge:i,size:r}=e,s={root:["root",n&&"disabled",o!=="default"&&`color${Ae(o)}`,i&&`edge${Ae(i)}`,`size${Ae(r)}`]};return Je(s,VM,t)},XM=se(lA,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${Ae(n.color)}`],n.edge&&t[`edge${Ae(n.edge)}`],t[`size${Ae(n.size)}`]]}})(({theme:e,ownerState:t})=>J({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:An(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var n;const o=(n=(e.vars||e).palette)==null?void 0:n[t.color];return J({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&J({color:o==null?void 0:o.main},!t.disableRipple&&{"&:hover":J({},o&&{backgroundColor:e.vars?`rgba(${o.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:An(o.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${RM.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),Rl=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiIconButton"}),{edge:i=!1,children:r,className:s,color:I="default",disabled:a=!1,disableFocusRipple:c=!1,size:C="medium"}=o,A=ce(o,kM),m=J({},o,{edge:i,color:I,disabled:a,disableFocusRipple:c,size:C}),p=wM(m);return u.jsx(XM,J({className:fe(p.root,s),centerRipple:!0,focusRipple:!c,disabled:a,ref:n},A,{ownerState:m,children:r}))});function JM(e){return Xe("MuiTypography",e)}we("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const YM=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],HM=e=>{const{align:t,gutterBottom:n,noWrap:o,paragraph:i,variant:r,classes:s}=e,I={root:["root",r,e.align!=="inherit"&&`align${Ae(t)}`,n&&"gutterBottom",o&&"noWrap",i&&"paragraph"]};return Je(I,JM,s)},xM=se("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${Ae(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>J({margin:0},t.variant==="inherit"&&{font:"inherit"},t.variant!=="inherit"&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),BB={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},NM={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},FM=e=>NM[e]||e,Sn=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiTypography"}),i=FM(o.color),r=cc(J({},o,{color:i})),{align:s="inherit",className:I,component:a,gutterBottom:c=!1,noWrap:C=!1,paragraph:A=!1,variant:m="body1",variantMapping:p=BB}=r,b=ce(r,YM),G=J({},r,{align:s,color:i,className:I,component:a,gutterBottom:c,noWrap:C,paragraph:A,variant:m,variantMapping:p}),W=a||(A?"p":p[m]||BB[m])||"span",Z=HM(G);return u.jsx(xM,J({as:W,ref:n,ownerState:G,className:fe(Z.root,I)},b))});function KM(e){return typeof e=="function"?e():e}const EM=B.forwardRef(function(t,n){const{children:o,container:i,disablePortal:r=!1}=t,[s,I]=B.useState(null),a=Vn(B.isValidElement(o)?o.ref:null,n);if(mg(()=>{r||I(KM(i)||document.body)},[i,r]),mg(()=>{if(s&&!r)return wd(n,s),()=>{wd(n,null)}},[n,s,r]),r){if(B.isValidElement(o)){const c={ref:a};return B.cloneElement(o,c)}return u.jsx(B.Fragment,{children:o})}return u.jsx(B.Fragment,{children:s&&ic.createPortal(o,s)})}),MM=["onChange","maxRows","minRows","style","value"];function CC(e){return parseInt(e,10)||0}const LM={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function zM(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflowing}const TM=B.forwardRef(function(t,n){const{onChange:o,maxRows:i,minRows:r=1,style:s,value:I}=t,a=ce(t,MM),{current:c}=B.useRef(I!=null),C=B.useRef(null),A=Vn(n,C),m=B.useRef(null),p=B.useRef(null),b=B.useCallback(()=>{const Z=C.current,f=Pg(Z).getComputedStyle(Z);if(f.width==="0px")return{outerHeightStyle:0,overflowing:!1};const v=p.current;v.style.width=f.width,v.value=Z.value||t.placeholder||"x",v.value.slice(-1)===`
`&&(v.value+=" ");const V=f.boxSizing,X=CC(f.paddingBottom)+CC(f.paddingTop),w=CC(f.borderBottomWidth)+CC(f.borderTopWidth),R=v.scrollHeight;v.value="x";const F=v.scrollHeight;let x=R;r&&(x=Math.max(Number(r)*F,x)),i&&(x=Math.min(Number(i)*F,x)),x=Math.max(x,F);const M=x+(V==="border-box"?X+w:0),Q=Math.abs(x-R)<=1;return{outerHeightStyle:M,overflowing:Q}},[i,r,t.placeholder]),G=B.useCallback(()=>{const Z=b();if(zM(Z))return;const y=Z.outerHeightStyle,f=C.current;m.current!==y&&(m.current=y,f.style.height=`${y}px`),f.style.overflow=Z.overflowing?"hidden":""},[b]);mg(()=>{const Z=()=>{G()};let y;const f=jf(Z),v=C.current,V=Pg(v);V.addEventListener("resize",f);let X;return typeof ResizeObserver<"u"&&(X=new ResizeObserver(Z),X.observe(v)),()=>{f.clear(),cancelAnimationFrame(y),V.removeEventListener("resize",f),X&&X.disconnect()}},[b,G]),mg(()=>{G()});const W=Z=>{c||G(),o&&o(Z)};return u.jsxs(B.Fragment,{children:[u.jsx("textarea",J({value:I,onChange:W,ref:A,rows:r,style:s},a)),u.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:p,tabIndex:-1,style:J({},LM.shadow,s,{paddingTop:0,paddingBottom:0})})]})});function gr({props:e,states:t,muiFormControl:n}){return t.reduce((o,i)=>(o[i]=e[i],n&&typeof e[i]>"u"&&(o[i]=n[i]),o),{})}const aA=B.createContext(void 0);function Ti(){return B.useContext(aA)}function UM(e){return u.jsx(mK,J({},e,{defaultTheme:$f,themeId:Vl}))}function SB(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function xd(e,t=!1){return e&&(SB(e.value)&&e.value!==""||t&&SB(e.defaultValue)&&e.defaultValue!=="")}function DM(e){return e.startAdornment}function QM(e){return Xe("MuiInputBase",e)}const kl=we("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),PM=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],IA=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${Ae(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},cA=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},jM=e=>{const{classes:t,color:n,disabled:o,error:i,endAdornment:r,focused:s,formControl:I,fullWidth:a,hiddenLabel:c,multiline:C,readOnly:A,size:m,startAdornment:p,type:b}=e,G={root:["root",`color${Ae(n)}`,o&&"disabled",i&&"error",a&&"fullWidth",s&&"focused",I&&"formControl",m&&m!=="medium"&&`size${Ae(m)}`,C&&"multiline",p&&"adornedStart",r&&"adornedEnd",c&&"hiddenLabel",A&&"readOnly"],input:["input",o&&"disabled",b==="search"&&"inputTypeSearch",C&&"inputMultiline",m==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",r&&"inputAdornedEnd",A&&"readOnly"]};return Je(G,QM,t)},CA=se("div",{name:"MuiInputBase",slot:"Root",overridesResolver:IA})(({theme:e,ownerState:t})=>J({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${kl.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&J({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),dA=se("input",{name:"MuiInputBase",slot:"Input",overridesResolver:cA})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",o=J({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),i={opacity:"0 !important"},r=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return J({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${kl.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":r,"&:focus::-moz-placeholder":r,"&:focus:-ms-input-placeholder":r,"&:focus::-ms-input-placeholder":r},[`&.${kl.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),_M=u.jsx(UM,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),r0=B.forwardRef(function(t,n){var o;const i=Me({props:t,name:"MuiInputBase"}),{"aria-describedby":r,autoComplete:s,autoFocus:I,className:a,components:c={},componentsProps:C={},defaultValue:A,disabled:m,disableInjectingGlobalStyles:p,endAdornment:b,fullWidth:G=!1,id:W,inputComponent:Z="input",inputProps:y={},inputRef:f,maxRows:v,minRows:V,multiline:X=!1,name:w,onBlur:R,onChange:F,onClick:x,onFocus:M,onKeyDown:Q,onKeyUp:$,placeholder:_,readOnly:ne,renderSuffix:ee,rows:te,slotProps:N={},slots:j={},startAdornment:P,type:ae="text",value:Ie}=i,ye=ce(i,PM),re=y.value!=null?y.value:Ie,{current:ue}=B.useRef(re!=null),ie=B.useRef(),Ye=B.useCallback(et=>{},[]),Ue=Vn(ie,f,y.ref,Ye),[je,ft]=B.useState(!1),Ke=Ti(),Le=gr({props:i,muiFormControl:Ke,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Le.focused=Ke?Ke.focused:je,B.useEffect(()=>{!Ke&&m&&je&&(ft(!1),R&&R())},[Ke,m,je,R]);const He=Ke&&Ke.onFilled,Re=Ke&&Ke.onEmpty,_e=B.useCallback(et=>{xd(et)?He&&He():Re&&Re()},[He,Re]);mg(()=>{ue&&_e({value:re})},[re,_e,ue]);const $n=et=>{if(Le.disabled){et.stopPropagation();return}M&&M(et),y.onFocus&&y.onFocus(et),Ke&&Ke.onFocus?Ke.onFocus(et):ft(!0)},ln=et=>{R&&R(et),y.onBlur&&y.onBlur(et),Ke&&Ke.onBlur?Ke.onBlur(et):ft(!1)},Bt=(et,...Ge)=>{if(!ue){const Mt=et.target||ie.current;if(Mt==null)throw new Error(_r(1));_e({value:Mt.value})}y.onChange&&y.onChange(et,...Ge),F&&F(et,...Ge)};B.useEffect(()=>{_e(ie.current)},[]);const zn=et=>{ie.current&&et.currentTarget===et.target&&ie.current.focus(),x&&x(et)};let fn=Z,st=y;X&&fn==="input"&&(te?st=J({type:void 0,minRows:te,maxRows:te},st):st=J({type:void 0,maxRows:v,minRows:V},st),fn=TM);const eo=et=>{_e(et.animationName==="mui-auto-fill-cancel"?ie.current:{value:"x"})};B.useEffect(()=>{Ke&&Ke.setAdornedStart(!!P)},[Ke,P]);const on=J({},i,{color:Le.color||"primary",disabled:Le.disabled,endAdornment:b,error:Le.error,focused:Le.focused,formControl:Ke,fullWidth:G,hiddenLabel:Le.hiddenLabel,multiline:X,size:Le.size,startAdornment:P,type:ae}),At=jM(on),to=j.root||c.Root||CA,jt=N.root||C.root||{},an=j.input||c.Input||dA;return st=J({},st,(o=N.input)!=null?o:C.input),u.jsxs(B.Fragment,{children:[!p&&_M,u.jsxs(to,J({},jt,!Xd(to)&&{ownerState:J({},on,jt.ownerState)},{ref:n,onClick:zn},ye,{className:fe(At.root,jt.className,a,ne&&"MuiInputBase-readOnly"),children:[P,u.jsx(aA.Provider,{value:null,children:u.jsx(an,J({ownerState:on,"aria-invalid":Le.error,"aria-describedby":r,autoComplete:s,autoFocus:I,defaultValue:A,disabled:Le.disabled,id:W,onAnimationStart:eo,name:w,placeholder:_,readOnly:ne,required:Le.required,rows:te,value:re,onKeyDown:Q,onKeyUp:$,type:ae},st,!Xd(an)&&{as:fn,ownerState:J({},on,st.ownerState)},{ref:Ue,className:fe(At.input,st.className,ne&&"MuiInputBase-readOnly"),onBlur:ln,onChange:Bt,onFocus:$n}))}),b,ee?ee(J({},Le,{startAdornment:P})):null]}))]})});function OM(e){return Xe("MuiInput",e)}const xa=J({},kl,we("MuiInput",["root","underline","input"]));function qM(e){return Xe("MuiOutlinedInput",e)}const Gg=J({},kl,we("MuiOutlinedInput",["root","notchedOutline","input"]));function $M(e){return Xe("MuiFilledInput",e)}const hr=J({},kl,we("MuiFilledInput",["root","underline","input"])),eL=gs(u.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),tL=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],nL={entering:{opacity:1},entered:{opacity:1}},oL=B.forwardRef(function(t,n){const o=n0(),i={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{addEndListener:r,appear:s=!0,children:I,easing:a,in:c,onEnter:C,onEntered:A,onEntering:m,onExit:p,onExited:b,onExiting:G,style:W,timeout:Z=i,TransitionComponent:y=zi}=t,f=ce(t,tL),v=B.useRef(null),V=Vn(v,I.ref,n),X=_=>ne=>{if(_){const ee=v.current;ne===void 0?_(ee):_(ee,ne)}},w=X(m),R=X((_,ne)=>{mk(_);const ee=Hd({style:W,timeout:Z,easing:a},{mode:"enter"});_.style.webkitTransition=o.transitions.create("opacity",ee),_.style.transition=o.transitions.create("opacity",ee),C&&C(_,ne)}),F=X(A),x=X(G),M=X(_=>{const ne=Hd({style:W,timeout:Z,easing:a},{mode:"exit"});_.style.webkitTransition=o.transitions.create("opacity",ne),_.style.transition=o.transitions.create("opacity",ne),p&&p(_)}),Q=X(b),$=_=>{r&&r(v.current,_)};return u.jsx(y,J({appear:s,in:c,nodeRef:v,onEnter:R,onEntered:F,onEntering:w,onExit:M,onExited:Q,onExiting:x,addEndListener:$,timeout:Z},f,{children:(_,ne)=>B.cloneElement(I,J({style:J({opacity:0,visibility:_==="exited"&&!c?"hidden":void 0},nL[_],W,I.props.style),ref:V},ne))}))});function iL(e){return Xe("MuiBackdrop",e)}we("MuiBackdrop",["root","invisible"]);const gL=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],rL=e=>{const{classes:t,invisible:n}=e;return Je({root:["root",n&&"invisible"]},iL,t)},sL=se("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(({ownerState:e})=>J({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),lL=B.forwardRef(function(t,n){var o,i,r;const s=Me({props:t,name:"MuiBackdrop"}),{children:I,className:a,component:c="div",components:C={},componentsProps:A={},invisible:m=!1,open:p,slotProps:b={},slots:G={},TransitionComponent:W=oL,transitionDuration:Z}=s,y=ce(s,gL),f=J({},s,{component:c,invisible:m}),v=rL(f),V=(o=b.root)!=null?o:A.root;return u.jsx(W,J({in:p,timeout:Z},y,{children:u.jsx(sL,J({"aria-hidden":!0},V,{as:(i=(r=G.root)!=null?r:C.Root)!=null?i:c,className:fe(v.root,a,V==null?void 0:V.className),ownerState:J({},f,V==null?void 0:V.ownerState),classes:v,ref:n,children:I}))}))}),aL=we("MuiBox",["root"]),IL=Li(),Oo=yK({themeId:Vl,defaultTheme:IL,defaultClassName:aL.root,generateClassName:Df.generate});function cL(e){return Xe("MuiButton",e)}const dC=we("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),CL=B.createContext({}),dL=B.createContext(void 0),uL=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],AL=e=>{const{color:t,disableElevation:n,fullWidth:o,size:i,variant:r,classes:s}=e,I={root:["root",r,`${r}${Ae(t)}`,`size${Ae(i)}`,`${r}Size${Ae(i)}`,`color${Ae(t)}`,n&&"disableElevation",o&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${Ae(i)}`],endIcon:["icon","endIcon",`iconSize${Ae(i)}`]},a=Je(I,cL,s);return J({},s,a)},hk=e=>J({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),mL=se(lA,{shouldForwardProp:e=>Ln(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Ae(n.color)}`],t[`size${Ae(n.size)}`],t[`${n.variant}Size${Ae(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var n,o;const i=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],r=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return J({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":J({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:An(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:An(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:An(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:r,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":J({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${dC.focusVisible}`]:J({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${dC.disabled}`]:J({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${An(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(n=(o=e.palette).getContrastText)==null?void 0:n.call(o,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:i,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${dC.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${dC.disabled}`]:{boxShadow:"none"}}),hL=se("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${Ae(n.size)}`]]}})(({ownerState:e})=>J({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},hk(e))),pL=se("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${Ae(n.size)}`]]}})(({ownerState:e})=>J({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},hk(e))),Cl=B.forwardRef(function(t,n){const o=B.useContext(CL),i=B.useContext(dL),r=FI(o,t),s=Me({props:r,name:"MuiButton"}),{children:I,color:a="primary",component:c="button",className:C,disabled:A=!1,disableElevation:m=!1,disableFocusRipple:p=!1,endIcon:b,focusVisibleClassName:G,fullWidth:W=!1,size:Z="medium",startIcon:y,type:f,variant:v="text"}=s,V=ce(s,uL),X=J({},s,{color:a,component:c,disabled:A,disableElevation:m,disableFocusRipple:p,fullWidth:W,size:Z,type:f,variant:v}),w=AL(X),R=y&&u.jsx(hL,{className:w.startIcon,ownerState:X,children:y}),F=b&&u.jsx(pL,{className:w.endIcon,ownerState:X,children:b}),x=i||"";return u.jsxs(mL,J({ownerState:X,className:fe(o.className,w.root,C,x),component:c,disabled:A,focusRipple:!p,focusVisibleClassName:fe(w.focusVisible,G),ref:n,type:f},V,{classes:w,children:[R,I,F]}))});function bL(e){return Xe("MuiCard",e)}we("MuiCard",["root"]);const fL=["className","raised"],ZL=e=>{const{classes:t}=e;return Je({root:["root"]},bL,t)},yL=se(g0,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),Nd=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiCard"}),{className:i,raised:r=!1}=o,s=ce(o,fL),I=J({},o,{raised:r}),a=ZL(I);return u.jsx(yL,J({className:fe(a.root,i),elevation:r?8:void 0,ref:n,ownerState:I},s))});function GL(e){return Xe("MuiCardContent",e)}we("MuiCardContent",["root"]);const BL=["className","component"],SL=e=>{const{classes:t}=e;return Je({root:["root"]},GL,t)},vL=se("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),Fd=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiCardContent"}),{className:i,component:r="div"}=o,s=ce(o,BL),I=J({},o,{component:r}),a=SL(I);return u.jsx(vL,J({as:r,className:fe(a.root,i),ownerState:I,ref:n},s))});function WL(e){return Xe("MuiCardHeader",e)}const vB=we("MuiCardHeader",["root","avatar","action","content","title","subheader"]),VL=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],RL=e=>{const{classes:t}=e;return Je({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},WL,t)},kL=se("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>J({[`& .${vB.title}`]:t.title,[`& .${vB.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),wL=se("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),XL=se("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),JL=se("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),Kd=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiCardHeader"}),{action:i,avatar:r,className:s,component:I="div",disableTypography:a=!1,subheader:c,subheaderTypographyProps:C,title:A,titleTypographyProps:m}=o,p=ce(o,VL),b=J({},o,{component:I,disableTypography:a}),G=RL(b);let W=A;W!=null&&W.type!==Sn&&!a&&(W=u.jsx(Sn,J({variant:r?"body2":"h5",className:G.title,component:"span",display:"block"},m,{children:W})));let Z=c;return Z!=null&&Z.type!==Sn&&!a&&(Z=u.jsx(Sn,J({variant:r?"body2":"body1",className:G.subheader,color:"text.secondary",component:"span",display:"block"},C,{children:Z}))),u.jsxs(kL,J({className:fe(G.root,s),as:I,ref:n,ownerState:b},p,{children:[r&&u.jsx(wL,{className:G.avatar,ownerState:b,children:r}),u.jsxs(JL,{className:G.content,ownerState:b,children:[W,Z]}),i&&u.jsx(XL,{className:G.action,ownerState:b,children:i})]}))});function YL(e){return Xe("PrivateSwitchBase",e)}we("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const HL=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],xL=e=>{const{classes:t,checked:n,disabled:o,edge:i}=e,r={root:["root",n&&"checked",o&&"disabled",i&&`edge${Ae(i)}`],input:["input"]};return Je(r,YL,t)},NL=se(lA)(({ownerState:e})=>J({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),FL=se("input",{shouldForwardProp:Ln})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),pk=B.forwardRef(function(t,n){const{autoFocus:o,checked:i,checkedIcon:r,className:s,defaultChecked:I,disabled:a,disableFocusRipple:c=!1,edge:C=!1,icon:A,id:m,inputProps:p,inputRef:b,name:G,onBlur:W,onChange:Z,onFocus:y,readOnly:f,required:v=!1,tabIndex:V,type:X,value:w}=t,R=ce(t,HL),[F,x]=KI({controlled:i,default:!!I,name:"SwitchBase",state:"checked"}),M=Ti(),Q=j=>{y&&y(j),M&&M.onFocus&&M.onFocus(j)},$=j=>{W&&W(j),M&&M.onBlur&&M.onBlur(j)},_=j=>{if(j.nativeEvent.defaultPrevented)return;const P=j.target.checked;x(P),Z&&Z(j,P)};let ne=a;M&&typeof ne>"u"&&(ne=M.disabled);const ee=X==="checkbox"||X==="radio",te=J({},t,{checked:F,disabled:ne,disableFocusRipple:c,edge:C}),N=xL(te);return u.jsxs(NL,J({component:"span",className:fe(N.root,s),centerRipple:!0,focusRipple:!c,disabled:ne,tabIndex:null,role:void 0,onFocus:Q,onBlur:$,ownerState:te,ref:n},R,{children:[u.jsx(FL,J({autoFocus:o,checked:i,defaultChecked:I,className:N.input,disabled:ne,id:ee?m:void 0,name:G,onChange:_,readOnly:f,ref:b,required:v,ownerState:te,tabIndex:V,type:X},X==="checkbox"&&w===void 0?{}:{value:w},p)),F?r:A]}))}),KL=gs(u.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),EL=gs(u.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),ML=gs(u.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function LL(e){return Xe("MuiCheckbox",e)}const sh=we("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),zL=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],TL=e=>{const{classes:t,indeterminate:n,color:o,size:i}=e,r={root:["root",n&&"indeterminate",`color${Ae(o)}`,`size${Ae(i)}`]},s=Je(r,LL,t);return J({},t,s)},UL=se(pk,{shouldForwardProp:e=>Ln(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t[`size${Ae(n.size)}`],n.color!=="default"&&t[`color${Ae(n.color)}`]]}})(({theme:e,ownerState:t})=>J({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:An(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${sh.checked}, &.${sh.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${sh.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),DL=u.jsx(EL,{}),QL=u.jsx(KL,{}),PL=u.jsx(ML,{}),ea=B.forwardRef(function(t,n){var o,i;const r=Me({props:t,name:"MuiCheckbox"}),{checkedIcon:s=DL,color:I="primary",icon:a=QL,indeterminate:c=!1,indeterminateIcon:C=PL,inputProps:A,size:m="medium",className:p}=r,b=ce(r,zL),G=c?C:a,W=c?C:s,Z=J({},r,{color:I,indeterminate:c,size:m}),y=TL(Z);return u.jsx(UL,J({type:"checkbox",inputProps:J({"data-indeterminate":c},A),icon:B.cloneElement(G,{fontSize:(o=G.props.fontSize)!=null?o:m}),checkedIcon:B.cloneElement(W,{fontSize:(i=W.props.fontSize)!=null?i:m}),ownerState:Z,ref:n,className:fe(y.root,p)},b,{classes:y}))});function jL(e){return Xe("MuiCircularProgress",e)}we("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const _L=["className","color","disableShrink","size","style","thickness","value","variant"];let uA=e=>e,WB,VB,RB,kB;const Bg=44,OL=Pl(WB||(WB=uA`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),qL=Pl(VB||(VB=uA`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),$L=e=>{const{classes:t,variant:n,color:o,disableShrink:i}=e,r={root:["root",n,`color${Ae(o)}`],svg:["svg"],circle:["circle",`circle${Ae(n)}`,i&&"circleDisableShrink"]};return Je(r,jL,t)},ez=se("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${Ae(n.color)}`]]}})(({ownerState:e,theme:t})=>J({display:"inline-block"},e.variant==="determinate"&&{transition:t.transitions.create("transform")},e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main}),({ownerState:e})=>e.variant==="indeterminate"&&Eu(RB||(RB=uA`
      animation: ${0} 1.4s linear infinite;
    `),OL)),tz=se("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),nz=se("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${Ae(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(({ownerState:e,theme:t})=>J({stroke:"currentColor"},e.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&Eu(kB||(kB=uA`
      animation: ${0} 1.4s ease-in-out infinite;
    `),qL)),oz=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiCircularProgress"}),{className:i,color:r="primary",disableShrink:s=!1,size:I=40,style:a,thickness:c=3.6,value:C=0,variant:A="indeterminate"}=o,m=ce(o,_L),p=J({},o,{color:r,disableShrink:s,size:I,thickness:c,value:C,variant:A}),b=$L(p),G={},W={},Z={};if(A==="determinate"){const y=2*Math.PI*((Bg-c)/2);G.strokeDasharray=y.toFixed(3),Z["aria-valuenow"]=Math.round(C),G.strokeDashoffset=`${((100-C)/100*y).toFixed(3)}px`,W.transform="rotate(-90deg)"}return u.jsx(ez,J({className:fe(b.root,i),style:J({width:I,height:I},W,a),ownerState:p,ref:n,role:"progressbar"},Z,m,{children:u.jsx(tz,{className:b.svg,ownerState:p,viewBox:`${Bg/2} ${Bg/2} ${Bg} ${Bg}`,children:u.jsx(nz,{className:b.circle,style:G,ownerState:p,cx:Bg,cy:Bg,r:(Bg-c)/2,fill:"none",strokeWidth:c})})}))});function iz(e){const t=ao(e);return t.body===e?Pg(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function II(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function wB(e){return parseInt(Pg(e).getComputedStyle(e).paddingRight,10)||0}function gz(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,o=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||o}function XB(e,t,n,o,i){const r=[t,n,...o];[].forEach.call(e.children,s=>{const I=r.indexOf(s)===-1,a=!gz(s);I&&a&&II(s,i)})}function lh(e,t){let n=-1;return e.some((o,i)=>t(o)?(n=i,!0):!1),n}function rz(e,t){const n=[],o=e.container;if(!t.disableScrollLock){if(iz(o)){const s=O2(ao(o));n.push({value:o.style.paddingRight,property:"padding-right",el:o}),o.style.paddingRight=`${wB(o)+s}px`;const I=ao(o).querySelectorAll(".mui-fixed");[].forEach.call(I,a=>{n.push({value:a.style.paddingRight,property:"padding-right",el:a}),a.style.paddingRight=`${wB(a)+s}px`})}let r;if(o.parentNode instanceof DocumentFragment)r=ao(o).body;else{const s=o.parentElement,I=Pg(o);r=(s==null?void 0:s.nodeName)==="HTML"&&I.getComputedStyle(s).overflowY==="scroll"?s:o}n.push({value:r.style.overflow,property:"overflow",el:r},{value:r.style.overflowX,property:"overflow-x",el:r},{value:r.style.overflowY,property:"overflow-y",el:r}),r.style.overflow="hidden"}return()=>{n.forEach(({value:r,el:s,property:I})=>{r?s.style.setProperty(I,r):s.style.removeProperty(I)})}}function sz(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class lz{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let o=this.modals.indexOf(t);if(o!==-1)return o;o=this.modals.length,this.modals.push(t),t.modalRef&&II(t.modalRef,!1);const i=sz(n);XB(n,t.mount,t.modalRef,i,!0);const r=lh(this.containers,s=>s.container===n);return r!==-1?(this.containers[r].modals.push(t),o):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:i}),o)}mount(t,n){const o=lh(this.containers,r=>r.modals.indexOf(t)!==-1),i=this.containers[o];i.restore||(i.restore=rz(i,n))}remove(t,n=!0){const o=this.modals.indexOf(t);if(o===-1)return o;const i=lh(this.containers,s=>s.modals.indexOf(t)!==-1),r=this.containers[i];if(r.modals.splice(r.modals.indexOf(t),1),this.modals.splice(o,1),r.modals.length===0)r.restore&&r.restore(),t.modalRef&&II(t.modalRef,n),XB(r.container,t.mount,t.modalRef,r.hiddenSiblings,!1),this.containers.splice(i,1);else{const s=r.modals[r.modals.length-1];s.modalRef&&II(s.modalRef,!1)}return o}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const az=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Iz(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function cz(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=o=>e.ownerDocument.querySelector(`input[type="radio"]${o}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function Cz(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||cz(e))}function dz(e){const t=[],n=[];return Array.from(e.querySelectorAll(az)).forEach((o,i)=>{const r=Iz(o);r===-1||!Cz(o)||(r===0?t.push(o):n.push({documentOrder:i,tabIndex:r,node:o}))}),n.sort((o,i)=>o.tabIndex===i.tabIndex?o.documentOrder-i.documentOrder:o.tabIndex-i.tabIndex).map(o=>o.node).concat(t)}function uz(){return!0}function Az(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:o=!1,disableRestoreFocus:i=!1,getTabbable:r=dz,isEnabled:s=uz,open:I}=e,a=B.useRef(!1),c=B.useRef(null),C=B.useRef(null),A=B.useRef(null),m=B.useRef(null),p=B.useRef(!1),b=B.useRef(null),G=Vn(t.ref,b),W=B.useRef(null);B.useEffect(()=>{!I||!b.current||(p.current=!n)},[n,I]),B.useEffect(()=>{if(!I||!b.current)return;const f=ao(b.current);return b.current.contains(f.activeElement)||(b.current.hasAttribute("tabIndex")||b.current.setAttribute("tabIndex","-1"),p.current&&b.current.focus()),()=>{i||(A.current&&A.current.focus&&(a.current=!0,A.current.focus()),A.current=null)}},[I]),B.useEffect(()=>{if(!I||!b.current)return;const f=ao(b.current),v=w=>{W.current=w,!(o||!s()||w.key!=="Tab")&&f.activeElement===b.current&&w.shiftKey&&(a.current=!0,C.current&&C.current.focus())},V=()=>{const w=b.current;if(w===null)return;if(!f.hasFocus()||!s()||a.current){a.current=!1;return}if(w.contains(f.activeElement)||o&&f.activeElement!==c.current&&f.activeElement!==C.current)return;if(f.activeElement!==m.current)m.current=null;else if(m.current!==null)return;if(!p.current)return;let R=[];if((f.activeElement===c.current||f.activeElement===C.current)&&(R=r(b.current)),R.length>0){var F,x;const M=!!((F=W.current)!=null&&F.shiftKey&&((x=W.current)==null?void 0:x.key)==="Tab"),Q=R[0],$=R[R.length-1];typeof Q!="string"&&typeof $!="string"&&(M?$.focus():Q.focus())}else w.focus()};f.addEventListener("focusin",V),f.addEventListener("keydown",v,!0);const X=setInterval(()=>{f.activeElement&&f.activeElement.tagName==="BODY"&&V()},50);return()=>{clearInterval(X),f.removeEventListener("focusin",V),f.removeEventListener("keydown",v,!0)}},[n,o,i,s,I,r]);const Z=f=>{A.current===null&&(A.current=f.relatedTarget),p.current=!0,m.current=f.target;const v=t.props.onFocus;v&&v(f)},y=f=>{A.current===null&&(A.current=f.relatedTarget),p.current=!0};return u.jsxs(B.Fragment,{children:[u.jsx("div",{tabIndex:I?0:-1,onFocus:y,ref:c,"data-testid":"sentinelStart"}),B.cloneElement(t,{ref:G,onFocus:Z}),u.jsx("div",{tabIndex:I?0:-1,onFocus:y,ref:C,"data-testid":"sentinelEnd"})]})}function mz(e){return typeof e=="function"?e():e}function hz(e){return e?e.props.hasOwnProperty("in"):!1}const pz=new lz;function bz(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:o=!1,manager:i=pz,closeAfterTransition:r=!1,onTransitionEnter:s,onTransitionExited:I,children:a,onClose:c,open:C,rootRef:A}=e,m=B.useRef({}),p=B.useRef(null),b=B.useRef(null),G=Vn(b,A),[W,Z]=B.useState(!C),y=hz(a);let f=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(f=!1);const v=()=>ao(p.current),V=()=>(m.current.modalRef=b.current,m.current.mount=p.current,m.current),X=()=>{i.mount(V(),{disableScrollLock:o}),b.current&&(b.current.scrollTop=0)},w=wr(()=>{const ee=mz(t)||v().body;i.add(V(),ee),b.current&&X()}),R=B.useCallback(()=>i.isTopModal(V()),[i]),F=wr(ee=>{p.current=ee,ee&&(C&&R()?X():b.current&&II(b.current,f))}),x=B.useCallback(()=>{i.remove(V(),f)},[f,i]);B.useEffect(()=>()=>{x()},[x]),B.useEffect(()=>{C?w():(!y||!r)&&x()},[C,x,y,r,w]);const M=ee=>te=>{var N;(N=ee.onKeyDown)==null||N.call(ee,te),!(te.key!=="Escape"||te.which===229||!R())&&(n||(te.stopPropagation(),c&&c(te,"escapeKeyDown")))},Q=ee=>te=>{var N;(N=ee.onClick)==null||N.call(ee,te),te.target===te.currentTarget&&c&&c(te,"backdropClick")};return{getRootProps:(ee={})=>{const te=q2(e);delete te.onTransitionEnter,delete te.onTransitionExited;const N=J({},te,ee);return J({role:"presentation"},N,{onKeyDown:M(N),ref:G})},getBackdropProps:(ee={})=>{const te=ee;return J({"aria-hidden":!0},te,{onClick:Q(te),open:C})},getTransitionProps:()=>{const ee=()=>{Z(!1),s&&s()},te=()=>{Z(!0),I&&I(),r&&x()};return{onEnter:kd(ee,a==null?void 0:a.props.onEnter),onExited:kd(te,a==null?void 0:a.props.onExited)}},rootRef:G,portalRef:F,isTopModal:R,exited:W,hasTransition:y}}function fz(e){return Xe("MuiModal",e)}we("MuiModal",["root","hidden","backdrop"]);const Zz=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],yz=e=>{const{open:t,exited:n,classes:o}=e;return Je({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},fz,o)},Gz=se("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(({theme:e,ownerState:t})=>J({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),Bz=se(lL,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),s0=B.forwardRef(function(t,n){var o,i,r,s,I,a;const c=Me({name:"MuiModal",props:t}),{BackdropComponent:C=Bz,BackdropProps:A,className:m,closeAfterTransition:p=!1,children:b,container:G,component:W,components:Z={},componentsProps:y={},disableAutoFocus:f=!1,disableEnforceFocus:v=!1,disableEscapeKeyDown:V=!1,disablePortal:X=!1,disableRestoreFocus:w=!1,disableScrollLock:R=!1,hideBackdrop:F=!1,keepMounted:x=!1,onBackdropClick:M,open:Q,slotProps:$,slots:_}=c,ne=ce(c,Zz),ee=J({},c,{closeAfterTransition:p,disableAutoFocus:f,disableEnforceFocus:v,disableEscapeKeyDown:V,disablePortal:X,disableRestoreFocus:w,disableScrollLock:R,hideBackdrop:F,keepMounted:x}),{getRootProps:te,getBackdropProps:N,getTransitionProps:j,portalRef:P,isTopModal:ae,exited:Ie,hasTransition:ye}=bz(J({},ee,{rootRef:n})),re=J({},ee,{exited:Ie}),ue=yz(re),ie={};if(b.props.tabIndex===void 0&&(ie.tabIndex="-1"),ye){const{onEnter:He,onExited:Re}=j();ie.onEnter=He,ie.onExited=Re}const Ye=(o=(i=_==null?void 0:_.root)!=null?i:Z.Root)!=null?o:Gz,Ue=(r=(s=_==null?void 0:_.backdrop)!=null?s:Z.Backdrop)!=null?r:C,je=(I=$==null?void 0:$.root)!=null?I:y.root,ft=(a=$==null?void 0:$.backdrop)!=null?a:y.backdrop,Ke=Wl({elementType:Ye,externalSlotProps:je,externalForwardedProps:ne,getSlotProps:te,additionalProps:{ref:n,as:W},ownerState:re,className:fe(m,je==null?void 0:je.className,ue==null?void 0:ue.root,!re.open&&re.exited&&(ue==null?void 0:ue.hidden))}),Le=Wl({elementType:Ue,externalSlotProps:ft,additionalProps:A,getSlotProps:He=>N(J({},He,{onClick:Re=>{M&&M(Re),He!=null&&He.onClick&&He.onClick(Re)}})),className:fe(ft==null?void 0:ft.className,A==null?void 0:A.className,ue==null?void 0:ue.backdrop),ownerState:re});return!x&&!Q&&(!ye||Ie)?null:u.jsx(EM,{ref:P,container:G,disablePortal:X,children:u.jsxs(Ye,J({},Ke,{children:[!F&&C?u.jsx(Ue,J({},Le)):null,u.jsx(Az,{disableEnforceFocus:v,disableAutoFocus:f,disableRestoreFocus:w,isEnabled:ae,open:Q,children:B.cloneElement(b,ie)})]}))})}),JB=we("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Sz=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],vz=e=>{const{classes:t,disableUnderline:n}=e,i=Je({root:["root",!n&&"underline"],input:["input"]},$M,t);return J({},t,i)},Wz=se(CA,{shouldForwardProp:e=>Ln(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...IA(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var n;const o=e.palette.mode==="light",i=o?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=o?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=o?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",I=o?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return J({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r}},[`&.${hr.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r},[`&.${hr.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:I}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(e.vars||e).palette[t.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${hr.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${hr.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${hr.disabled}, .${hr.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${hr.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&J({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9}))}),Vz=se(dA,{name:"MuiFilledInput",slot:"Input",overridesResolver:cA})(({theme:e,ownerState:t})=>J({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),l0=B.forwardRef(function(t,n){var o,i,r,s;const I=Me({props:t,name:"MuiFilledInput"}),{components:a={},componentsProps:c,fullWidth:C=!1,inputComponent:A="input",multiline:m=!1,slotProps:p,slots:b={},type:G="text"}=I,W=ce(I,Sz),Z=J({},I,{fullWidth:C,inputComponent:A,multiline:m,type:G}),y=vz(I),f={root:{ownerState:Z},input:{ownerState:Z}},v=p??c?_n(f,p??c):f,V=(o=(i=b.root)!=null?i:a.Root)!=null?o:Wz,X=(r=(s=b.input)!=null?s:a.Input)!=null?r:Vz;return u.jsx(r0,J({slots:{root:V,input:X},componentsProps:v,fullWidth:C,inputComponent:A,multiline:m,ref:n,type:G},W,{classes:y}))});l0.muiName="Input";function Rz(e){return Xe("MuiFormControl",e)}we("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const kz=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],wz=e=>{const{classes:t,margin:n,fullWidth:o}=e,i={root:["root",n!=="none"&&`margin${Ae(n)}`,o&&"fullWidth"]};return Je(i,Rz,t)},Xz=se("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>J({},t.root,t[`margin${Ae(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>J({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),rs=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiFormControl"}),{children:i,className:r,color:s="primary",component:I="div",disabled:a=!1,error:c=!1,focused:C,fullWidth:A=!1,hiddenLabel:m=!1,margin:p="none",required:b=!1,size:G="medium",variant:W="outlined"}=o,Z=ce(o,kz),y=J({},o,{color:s,component:I,disabled:a,error:c,fullWidth:A,hiddenLabel:m,margin:p,required:b,size:G,variant:W}),f=wz(y),[v,V]=B.useState(()=>{let $=!1;return i&&B.Children.forEach(i,_=>{if(!FC(_,["Input","Select"]))return;const ne=FC(_,["Select"])?_.props.input:_;ne&&DM(ne.props)&&($=!0)}),$}),[X,w]=B.useState(()=>{let $=!1;return i&&B.Children.forEach(i,_=>{FC(_,["Input","Select"])&&(xd(_.props,!0)||xd(_.props.inputProps,!0))&&($=!0)}),$}),[R,F]=B.useState(!1);a&&R&&F(!1);const x=C!==void 0&&!a?C:R;let M;const Q=B.useMemo(()=>({adornedStart:v,setAdornedStart:V,color:s,disabled:a,error:c,filled:X,focused:x,fullWidth:A,hiddenLabel:m,size:G,onBlur:()=>{F(!1)},onEmpty:()=>{w(!1)},onFilled:()=>{w(!0)},onFocus:()=>{F(!0)},registerEffect:M,required:b,variant:W}),[v,s,a,c,X,x,A,m,M,b,G,W]);return u.jsx(aA.Provider,{value:Q,children:u.jsx(Xz,J({as:I,ownerState:y,className:fe(f.root,r),ref:n},Z,{children:i}))})}),Jz=w3({createStyledComponent:se("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>Me({props:e,name:"MuiStack"})});function Yz(e){return Xe("MuiFormControlLabel",e)}const _a=we("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Hz=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],xz=e=>{const{classes:t,disabled:n,labelPlacement:o,error:i,required:r}=e,s={root:["root",n&&"disabled",`labelPlacement${Ae(o)}`,i&&"error",r&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return Je(s,Yz,t)},Nz=se("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${_a.label}`]:t.label},t.root,t[`labelPlacement${Ae(n.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>J({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${_a.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${_a.label}`]:{[`&.${_a.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),Fz=se("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${_a.error}`]:{color:(e.vars||e).palette.error.main}})),wl=B.forwardRef(function(t,n){var o,i;const r=Me({props:t,name:"MuiFormControlLabel"}),{className:s,componentsProps:I={},control:a,disabled:c,disableTypography:C,label:A,labelPlacement:m="end",required:p,slotProps:b={}}=r,G=ce(r,Hz),W=Ti(),Z=(o=c??a.props.disabled)!=null?o:W==null?void 0:W.disabled,y=p??a.props.required,f={disabled:Z,required:y};["checked","name","onChange","value","inputRef"].forEach(F=>{typeof a.props[F]>"u"&&typeof r[F]<"u"&&(f[F]=r[F])});const v=gr({props:r,muiFormControl:W,states:["error"]}),V=J({},r,{disabled:Z,labelPlacement:m,required:y,error:v.error}),X=xz(V),w=(i=b.typography)!=null?i:I.typography;let R=A;return R!=null&&R.type!==Sn&&!C&&(R=u.jsx(Sn,J({component:"span"},w,{className:fe(X.label,w==null?void 0:w.className),children:R}))),u.jsxs(Nz,J({className:fe(X.root,s),ownerState:V,ref:n},G,{children:[B.cloneElement(a,f),y?u.jsxs(Jz,{display:"block",children:[R,u.jsxs(Fz,{ownerState:V,"aria-hidden":!0,className:X.asterisk,children:[" ","*"]})]}):R]}))});function Kz(e){return Xe("MuiFormGroup",e)}we("MuiFormGroup",["root","row","error"]);const Ez=["className","row"],Mz=e=>{const{classes:t,row:n,error:o}=e;return Je({root:["root",n&&"row",o&&"error"]},Kz,t)},Lz=se("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.row&&t.row]}})(({ownerState:e})=>J({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),zz=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiFormGroup"}),{className:i,row:r=!1}=o,s=ce(o,Ez),I=Ti(),a=gr({props:o,muiFormControl:I,states:["error"]}),c=J({},o,{row:r,error:a.error}),C=Mz(c);return u.jsx(Lz,J({className:fe(C.root,i),ownerState:c,ref:n},s))});function Tz(e){return Xe("MuiFormHelperText",e)}const YB=we("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var HB;const Uz=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Dz=e=>{const{classes:t,contained:n,size:o,disabled:i,error:r,filled:s,focused:I,required:a}=e,c={root:["root",i&&"disabled",r&&"error",o&&`size${Ae(o)}`,n&&"contained",I&&"focused",s&&"filled",a&&"required"]};return Je(c,Tz,t)},Qz=se("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${Ae(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(({theme:e,ownerState:t})=>J({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${YB.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${YB.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),Pz=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiFormHelperText"}),{children:i,className:r,component:s="p"}=o,I=ce(o,Uz),a=Ti(),c=gr({props:o,muiFormControl:a,states:["variant","size","disabled","error","filled","focused","required"]}),C=J({},o,{component:s,contained:c.variant==="filled"||c.variant==="outlined",variant:c.variant,size:c.size,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),A=Dz(C);return u.jsx(Qz,J({as:s,ownerState:C,className:fe(A.root,r),ref:n},I,{children:i===" "?HB||(HB=u.jsx("span",{className:"notranslate",children:"​"})):i}))});function jz(e){return Xe("MuiFormLabel",e)}const cI=we("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),_z=["children","className","color","component","disabled","error","filled","focused","required"],Oz=e=>{const{classes:t,color:n,focused:o,disabled:i,error:r,filled:s,required:I}=e,a={root:["root",`color${Ae(n)}`,i&&"disabled",r&&"error",s&&"filled",o&&"focused",I&&"required"],asterisk:["asterisk",r&&"error"]};return Je(a,jz,t)},qz=se("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>J({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>J({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${cI.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${cI.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${cI.error}`]:{color:(e.vars||e).palette.error.main}})),$z=se("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${cI.error}`]:{color:(e.vars||e).palette.error.main}})),AA=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiFormLabel"}),{children:i,className:r,component:s="label"}=o,I=ce(o,_z),a=Ti(),c=gr({props:o,muiFormControl:a,states:["color","required","focused","disabled","error","filled"]}),C=J({},o,{color:c.color||"primary",component:s,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),A=Oz(C);return u.jsxs(qz,J({as:s,ownerState:C,className:fe(A.root,r),ref:n},I,{children:[i,c.required&&u.jsxs($z,{ownerState:C,"aria-hidden":!0,className:A.asterisk,children:[" ","*"]})]}))}),xB=B.createContext();function eT(e){return Xe("MuiGrid",e)}const tT=[0,1,2,3,4,5,6,7,8,9,10],nT=["column-reverse","column","row-reverse","row"],oT=["nowrap","wrap-reverse","wrap"],Na=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],LI=we("MuiGrid",["root","container","item","zeroMinWidth",...tT.map(e=>`spacing-xs-${e}`),...nT.map(e=>`direction-xs-${e}`),...oT.map(e=>`wrap-xs-${e}`),...Na.map(e=>`grid-xs-${e}`),...Na.map(e=>`grid-sm-${e}`),...Na.map(e=>`grid-md-${e}`),...Na.map(e=>`grid-lg-${e}`),...Na.map(e=>`grid-xl-${e}`)]),iT=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function dl(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function gT({theme:e,ownerState:t}){let n;return e.breakpoints.keys.reduce((o,i)=>{let r={};if(t[i]&&(n=t[i]),!n)return o;if(n===!0)r={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")r={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const s=Fr({values:t.columns,breakpoints:e.breakpoints.values}),I=typeof s=="object"?s[i]:s;if(I==null)return o;const a=`${Math.round(n/I*1e8)/1e6}%`;let c={};if(t.container&&t.item&&t.columnSpacing!==0){const C=e.spacing(t.columnSpacing);if(C!=="0px"){const A=`calc(${a} + ${dl(C)})`;c={flexBasis:A,maxWidth:A}}}r=J({flexBasis:a,flexGrow:0,maxWidth:a},c)}return e.breakpoints.values[i]===0?Object.assign(o,r):o[e.breakpoints.up(i)]=r,o},{})}function rT({theme:e,ownerState:t}){const n=Fr({values:t.direction,breakpoints:e.breakpoints.values});return Ao({theme:e},n,o=>{const i={flexDirection:o};return o.indexOf("column")===0&&(i[`& > .${LI.item}`]={maxWidth:"none"}),i})}function bk({breakpoints:e,values:t}){let n="";Object.keys(t).forEach(i=>{n===""&&t[i]!==0&&(n=i)});const o=Object.keys(e).sort((i,r)=>e[i]-e[r]);return o.slice(0,o.indexOf(n))}function sT({theme:e,ownerState:t}){const{container:n,rowSpacing:o}=t;let i={};if(n&&o!==0){const r=Fr({values:o,breakpoints:e.breakpoints.values});let s;typeof r=="object"&&(s=bk({breakpoints:e.breakpoints.values,values:r})),i=Ao({theme:e},r,(I,a)=>{var c;const C=e.spacing(I);return C!=="0px"?{marginTop:`-${dl(C)}`,[`& > .${LI.item}`]:{paddingTop:dl(C)}}:(c=s)!=null&&c.includes(a)?{}:{marginTop:0,[`& > .${LI.item}`]:{paddingTop:0}}})}return i}function lT({theme:e,ownerState:t}){const{container:n,columnSpacing:o}=t;let i={};if(n&&o!==0){const r=Fr({values:o,breakpoints:e.breakpoints.values});let s;typeof r=="object"&&(s=bk({breakpoints:e.breakpoints.values,values:r})),i=Ao({theme:e},r,(I,a)=>{var c;const C=e.spacing(I);return C!=="0px"?{width:`calc(100% + ${dl(C)})`,marginLeft:`-${dl(C)}`,[`& > .${LI.item}`]:{paddingLeft:dl(C)}}:(c=s)!=null&&c.includes(a)?{}:{width:"100%",marginLeft:0,[`& > .${LI.item}`]:{paddingLeft:0}}})}return i}function aT(e,t,n={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[n[`spacing-xs-${String(e)}`]];const o=[];return t.forEach(i=>{const r=e[i];Number(r)>0&&o.push(n[`spacing-${i}-${String(r)}`])}),o}const IT=se("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:o,direction:i,item:r,spacing:s,wrap:I,zeroMinWidth:a,breakpoints:c}=n;let C=[];o&&(C=aT(s,c,t));const A=[];return c.forEach(m=>{const p=n[m];p&&A.push(t[`grid-${m}-${String(p)}`])}),[t.root,o&&t.container,r&&t.item,a&&t.zeroMinWidth,...C,i!=="row"&&t[`direction-xs-${String(i)}`],I!=="wrap"&&t[`wrap-xs-${String(I)}`],...A]}})(({ownerState:e})=>J({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),rT,sT,lT,gT);function cT(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const n=[];return t.forEach(o=>{const i=e[o];if(Number(i)>0){const r=`spacing-${o}-${String(i)}`;n.push(r)}}),n}const CT=e=>{const{classes:t,container:n,direction:o,item:i,spacing:r,wrap:s,zeroMinWidth:I,breakpoints:a}=e;let c=[];n&&(c=cT(r,a));const C=[];a.forEach(m=>{const p=e[m];p&&C.push(`grid-${m}-${String(p)}`)});const A={root:["root",n&&"container",i&&"item",I&&"zeroMinWidth",...c,o!=="row"&&`direction-xs-${String(o)}`,s!=="wrap"&&`wrap-xs-${String(s)}`,...C]};return Je(A,eT,t)},Lo=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiGrid"}),{breakpoints:i}=n0(),r=cc(o),{className:s,columns:I,columnSpacing:a,component:c="div",container:C=!1,direction:A="row",item:m=!1,rowSpacing:p,spacing:b=0,wrap:G="wrap",zeroMinWidth:W=!1}=r,Z=ce(r,iT),y=p||b,f=a||b,v=B.useContext(xB),V=C?I||12:v,X={},w=J({},Z);i.keys.forEach(x=>{Z[x]!=null&&(X[x]=Z[x],delete w[x])});const R=J({},r,{columns:V,container:C,direction:A,item:m,rowSpacing:y,columnSpacing:f,wrap:G,zeroMinWidth:W,spacing:b},X,{breakpoints:i.keys}),F=CT(R);return u.jsx(xB.Provider,{value:V,children:u.jsx(IT,J({ownerState:R,className:fe(F.root,s),as:c,ref:n},w))})}),dT=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Tp(e){return`scale(${e}, ${e**2})`}const uT={entering:{opacity:1,transform:Tp(1)},entered:{opacity:1,transform:"none"}},ah=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),fk=B.forwardRef(function(t,n){const{addEndListener:o,appear:i=!0,children:r,easing:s,in:I,onEnter:a,onEntered:c,onEntering:C,onExit:A,onExited:m,onExiting:p,style:b,timeout:G="auto",TransitionComponent:W=zi}=t,Z=ce(t,dT),y=j2(),f=B.useRef(),v=n0(),V=B.useRef(null),X=Vn(V,r.ref,n),w=ne=>ee=>{if(ne){const te=V.current;ee===void 0?ne(te):ne(te,ee)}},R=w(C),F=w((ne,ee)=>{mk(ne);const{duration:te,delay:N,easing:j}=Hd({style:b,timeout:G,easing:s},{mode:"enter"});let P;G==="auto"?(P=v.transitions.getAutoHeightDuration(ne.clientHeight),f.current=P):P=te,ne.style.transition=[v.transitions.create("opacity",{duration:P,delay:N}),v.transitions.create("transform",{duration:ah?P:P*.666,delay:N,easing:j})].join(","),a&&a(ne,ee)}),x=w(c),M=w(p),Q=w(ne=>{const{duration:ee,delay:te,easing:N}=Hd({style:b,timeout:G,easing:s},{mode:"exit"});let j;G==="auto"?(j=v.transitions.getAutoHeightDuration(ne.clientHeight),f.current=j):j=ee,ne.style.transition=[v.transitions.create("opacity",{duration:j,delay:te}),v.transitions.create("transform",{duration:ah?j:j*.666,delay:ah?te:te||j*.333,easing:N})].join(","),ne.style.opacity=0,ne.style.transform=Tp(.75),A&&A(ne)}),$=w(m),_=ne=>{G==="auto"&&y.start(f.current||0,ne),o&&o(V.current,ne)};return u.jsx(W,J({appear:i,in:I,nodeRef:V,onEnter:F,onEntered:x,onEntering:R,onExit:Q,onExited:$,onExiting:M,addEndListener:_,timeout:G==="auto"?null:G},Z,{children:(ne,ee)=>B.cloneElement(r,J({style:J({opacity:0,transform:Tp(.75),visibility:ne==="exited"&&!I?"hidden":void 0},uT[ne],b,r.props.style),ref:X},ee))}))});fk.muiSupportAuto=!0;const AT=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],mT=e=>{const{classes:t,disableUnderline:n}=e,i=Je({root:["root",!n&&"underline"],input:["input"]},OM,t);return J({},t,i)},hT=se(CA,{shouldForwardProp:e=>Ln(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...IA(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let o=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(o=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),J({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${xa.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${xa.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${o}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${xa.disabled}, .${xa.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${o}`}},[`&.${xa.disabled}:before`]:{borderBottomStyle:"dotted"}})}),pT=se(dA,{name:"MuiInput",slot:"Input",overridesResolver:cA})({}),a0=B.forwardRef(function(t,n){var o,i,r,s;const I=Me({props:t,name:"MuiInput"}),{disableUnderline:a,components:c={},componentsProps:C,fullWidth:A=!1,inputComponent:m="input",multiline:p=!1,slotProps:b,slots:G={},type:W="text"}=I,Z=ce(I,AT),y=mT(I),v={root:{ownerState:{disableUnderline:a}}},V=b??C?_n(b??C,v):v,X=(o=(i=G.root)!=null?i:c.Root)!=null?o:hT,w=(r=(s=G.input)!=null?s:c.Input)!=null?r:pT;return u.jsx(r0,J({slots:{root:X,input:w},slotProps:V,fullWidth:A,inputComponent:m,multiline:p,ref:n,type:W},Z,{classes:y}))});a0.muiName="Input";function bT(e){return Xe("MuiInputAdornment",e)}const NB=we("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var FB;const fT=["children","className","component","disablePointerEvents","disableTypography","position","variant"],ZT=(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${Ae(n.position)}`],n.disablePointerEvents===!0&&t.disablePointerEvents,t[n.variant]]},yT=e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:o,position:i,size:r,variant:s}=e,I={root:["root",n&&"disablePointerEvents",i&&`position${Ae(i)}`,s,o&&"hiddenLabel",r&&`size${Ae(r)}`]};return Je(I,bT,t)},GT=se("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:ZT})(({theme:e,ownerState:t})=>J({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},t.variant==="filled"&&{[`&.${NB.positionStart}&:not(.${NB.hiddenLabel})`]:{marginTop:16}},t.position==="start"&&{marginRight:8},t.position==="end"&&{marginLeft:8},t.disablePointerEvents===!0&&{pointerEvents:"none"})),BT=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiInputAdornment"}),{children:i,className:r,component:s="div",disablePointerEvents:I=!1,disableTypography:a=!1,position:c,variant:C}=o,A=ce(o,fT),m=Ti()||{};let p=C;C&&m.variant,m&&!p&&(p=m.variant);const b=J({},o,{hiddenLabel:m.hiddenLabel,size:m.size,disablePointerEvents:I,position:c,variant:p}),G=yT(b);return u.jsx(aA.Provider,{value:null,children:u.jsx(GT,J({as:s,ownerState:b,className:fe(G.root,r),ref:n},A,{children:typeof i=="string"&&!a?u.jsx(Sn,{color:"text.secondary",children:i}):u.jsxs(B.Fragment,{children:[c==="start"?FB||(FB=u.jsx("span",{className:"notranslate",children:"​"})):null,i]})}))})});function ST(e){return Xe("MuiInputLabel",e)}we("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const vT=["disableAnimation","margin","shrink","variant","className"],WT=e=>{const{classes:t,formControl:n,size:o,shrink:i,disableAnimation:r,variant:s,required:I}=e,a={root:["root",n&&"formControl",!r&&"animated",i&&"shrink",o&&o!=="normal"&&`size${Ae(o)}`,s],asterisk:[I&&"asterisk"]},c=Je(a,ST,t);return J({},t,c)},VT=se(AA,{shouldForwardProp:e=>Ln(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${cI.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(({theme:e,ownerState:t})=>J({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&J({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&J({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&J({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),mA=B.forwardRef(function(t,n){const o=Me({name:"MuiInputLabel",props:t}),{disableAnimation:i=!1,shrink:r,className:s}=o,I=ce(o,vT),a=Ti();let c=r;typeof c>"u"&&a&&(c=a.filled||a.focused||a.adornedStart);const C=gr({props:o,muiFormControl:a,states:["size","variant","required","focused"]}),A=J({},o,{disableAnimation:i,formControl:a,shrink:c,size:C.size,variant:C.variant,required:C.required,focused:C.focused}),m=WT(A);return u.jsx(VT,J({"data-shrink":c,ownerState:A,ref:n,className:fe(m.root,s)},I,{classes:m}))}),Up=B.createContext({});function RT(e){return Xe("MuiList",e)}we("MuiList",["root","padding","dense","subheader"]);const kT=["children","className","component","dense","disablePadding","subheader"],wT=e=>{const{classes:t,disablePadding:n,dense:o,subheader:i}=e;return Je({root:["root",!n&&"padding",o&&"dense",i&&"subheader"]},RT,t)},XT=se("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(({ownerState:e})=>J({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),JT=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiList"}),{children:i,className:r,component:s="ul",dense:I=!1,disablePadding:a=!1,subheader:c}=o,C=ce(o,kT),A=B.useMemo(()=>({dense:I}),[I]),m=J({},o,{component:s,dense:I,disablePadding:a}),p=wT(m);return u.jsx(Up.Provider,{value:A,children:u.jsxs(XT,J({as:s,className:fe(p.root,r),ref:n,ownerState:m},C,{children:[c,i]}))})}),KB=we("MuiListItemIcon",["root","alignItemsFlexStart"]),EB=we("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),YT=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Ih(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function MB(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function Zk(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.indexOf(t.keys.join(""))===0}function Fa(e,t,n,o,i,r){let s=!1,I=i(e,t,t?n:!1);for(;I;){if(I===e.firstChild){if(s)return!1;s=!0}const a=o?!1:I.disabled||I.getAttribute("aria-disabled")==="true";if(!I.hasAttribute("tabindex")||!Zk(I,r)||a)I=i(e,I,n);else return I.focus(),!0}return!1}const HT=B.forwardRef(function(t,n){const{actions:o,autoFocus:i=!1,autoFocusItem:r=!1,children:s,className:I,disabledItemsFocusable:a=!1,disableListWrap:c=!1,onKeyDown:C,variant:A="selectedMenu"}=t,m=ce(t,YT),p=B.useRef(null),b=B.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});mg(()=>{i&&p.current.focus()},[i]),B.useImperativeHandle(o,()=>({adjustStyleForScrollbar:(f,{direction:v})=>{const V=!p.current.style.width;if(f.clientHeight<p.current.clientHeight&&V){const X=`${O2(ao(f))}px`;p.current.style[v==="rtl"?"paddingLeft":"paddingRight"]=X,p.current.style.width=`calc(100% + ${X})`}return p.current}}),[]);const G=f=>{const v=p.current,V=f.key,X=ao(v).activeElement;if(V==="ArrowDown")f.preventDefault(),Fa(v,X,c,a,Ih);else if(V==="ArrowUp")f.preventDefault(),Fa(v,X,c,a,MB);else if(V==="Home")f.preventDefault(),Fa(v,null,c,a,Ih);else if(V==="End")f.preventDefault(),Fa(v,null,c,a,MB);else if(V.length===1){const w=b.current,R=V.toLowerCase(),F=performance.now();w.keys.length>0&&(F-w.lastTime>500?(w.keys=[],w.repeating=!0,w.previousKeyMatched=!0):w.repeating&&R!==w.keys[0]&&(w.repeating=!1)),w.lastTime=F,w.keys.push(R);const x=X&&!w.repeating&&Zk(X,w);w.previousKeyMatched&&(x||Fa(v,X,!1,a,Ih,w))?f.preventDefault():w.previousKeyMatched=!1}C&&C(f)},W=Vn(p,n);let Z=-1;B.Children.forEach(s,(f,v)=>{if(!B.isValidElement(f)){Z===v&&(Z+=1,Z>=s.length&&(Z=-1));return}f.props.disabled||(A==="selectedMenu"&&f.props.selected||Z===-1)&&(Z=v),Z===v&&(f.props.disabled||f.props.muiSkipListHighlight||f.type.muiSkipListHighlight)&&(Z+=1,Z>=s.length&&(Z=-1))});const y=B.Children.map(s,(f,v)=>{if(v===Z){const V={};return r&&(V.autoFocus=!0),f.props.tabIndex===void 0&&A==="selectedMenu"&&(V.tabIndex=0),B.cloneElement(f,V)}return f});return u.jsx(JT,J({role:"menu",ref:W,className:I,onKeyDown:G,tabIndex:i?0:-1},m,{children:y}))});function xT(e){return Xe("MuiPopover",e)}we("MuiPopover",["root","paper"]);const NT=["onEntering"],FT=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],KT=["slotProps"];function LB(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function zB(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function TB(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function ch(e){return typeof e=="function"?e():e}const ET=e=>{const{classes:t}=e;return Je({root:["root"],paper:["paper"]},xT,t)},MT=se(s0,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),yk=se(g0,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),LT=B.forwardRef(function(t,n){var o,i,r;const s=Me({props:t,name:"MuiPopover"}),{action:I,anchorEl:a,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:C,anchorReference:A="anchorEl",children:m,className:p,container:b,elevation:G=8,marginThreshold:W=16,open:Z,PaperProps:y={},slots:f,slotProps:v,transformOrigin:V={vertical:"top",horizontal:"left"},TransitionComponent:X=fk,transitionDuration:w="auto",TransitionProps:{onEntering:R}={},disableScrollLock:F=!1}=s,x=ce(s.TransitionProps,NT),M=ce(s,FT),Q=(o=v==null?void 0:v.paper)!=null?o:y,$=B.useRef(),_=Vn($,Q.ref),ne=J({},s,{anchorOrigin:c,anchorReference:A,elevation:G,marginThreshold:W,externalPaperSlotProps:Q,transformOrigin:V,TransitionComponent:X,transitionDuration:w,TransitionProps:x}),ee=ET(ne),te=B.useCallback(()=>{if(A==="anchorPosition")return C;const He=ch(a),_e=(He&&He.nodeType===1?He:ao($.current).body).getBoundingClientRect();return{top:_e.top+LB(_e,c.vertical),left:_e.left+zB(_e,c.horizontal)}},[a,c.horizontal,c.vertical,C,A]),N=B.useCallback(He=>({vertical:LB(He,V.vertical),horizontal:zB(He,V.horizontal)}),[V.horizontal,V.vertical]),j=B.useCallback(He=>{const Re={width:He.offsetWidth,height:He.offsetHeight},_e=N(Re);if(A==="none")return{top:null,left:null,transformOrigin:TB(_e)};const $n=te();let ln=$n.top-_e.vertical,Bt=$n.left-_e.horizontal;const zn=ln+Re.height,fn=Bt+Re.width,st=Pg(ch(a)),eo=st.innerHeight-W,on=st.innerWidth-W;if(W!==null&&ln<W){const At=ln-W;ln-=At,_e.vertical+=At}else if(W!==null&&zn>eo){const At=zn-eo;ln-=At,_e.vertical+=At}if(W!==null&&Bt<W){const At=Bt-W;Bt-=At,_e.horizontal+=At}else if(fn>on){const At=fn-on;Bt-=At,_e.horizontal+=At}return{top:`${Math.round(ln)}px`,left:`${Math.round(Bt)}px`,transformOrigin:TB(_e)}},[a,A,te,N,W]),[P,ae]=B.useState(Z),Ie=B.useCallback(()=>{const He=$.current;if(!He)return;const Re=j(He);Re.top!==null&&(He.style.top=Re.top),Re.left!==null&&(He.style.left=Re.left),He.style.transformOrigin=Re.transformOrigin,ae(!0)},[j]);B.useEffect(()=>(F&&window.addEventListener("scroll",Ie),()=>window.removeEventListener("scroll",Ie)),[a,F,Ie]);const ye=(He,Re)=>{R&&R(He,Re),Ie()},re=()=>{ae(!1)};B.useEffect(()=>{Z&&Ie()}),B.useImperativeHandle(I,()=>Z?{updatePosition:()=>{Ie()}}:null,[Z,Ie]),B.useEffect(()=>{if(!Z)return;const He=jf(()=>{Ie()}),Re=Pg(a);return Re.addEventListener("resize",He),()=>{He.clear(),Re.removeEventListener("resize",He)}},[a,Z,Ie]);let ue=w;w==="auto"&&!X.muiSupportAuto&&(ue=void 0);const ie=b||(a?ao(ch(a)).body:void 0),Ye=(i=f==null?void 0:f.root)!=null?i:MT,Ue=(r=f==null?void 0:f.paper)!=null?r:yk,je=Wl({elementType:Ue,externalSlotProps:J({},Q,{style:P?Q.style:J({},Q.style,{opacity:0})}),additionalProps:{elevation:G,ref:_},ownerState:ne,className:fe(ee.paper,Q==null?void 0:Q.className)}),ft=Wl({elementType:Ye,externalSlotProps:(v==null?void 0:v.root)||{},externalForwardedProps:M,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:ie,open:Z},ownerState:ne,className:fe(ee.root,p)}),{slotProps:Ke}=ft,Le=ce(ft,KT);return u.jsx(Ye,J({},Le,!Xd(Ye)&&{slotProps:Ke,disableScrollLock:F},{children:u.jsx(X,J({appear:!0,in:Z,onEntering:ye,onExited:re,timeout:ue},x,{children:u.jsx(Ue,J({},je,{children:m}))}))}))});function zT(e){return Xe("MuiMenu",e)}we("MuiMenu",["root","paper","list"]);const TT=["onEntering"],UT=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],DT={vertical:"top",horizontal:"right"},QT={vertical:"top",horizontal:"left"},PT=e=>{const{classes:t}=e;return Je({root:["root"],paper:["paper"],list:["list"]},zT,t)},jT=se(LT,{shouldForwardProp:e=>Ln(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),_T=se(yk,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),OT=se(HT,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),qT=B.forwardRef(function(t,n){var o,i;const r=Me({props:t,name:"MuiMenu"}),{autoFocus:s=!0,children:I,className:a,disableAutoFocusItem:c=!1,MenuListProps:C={},onClose:A,open:m,PaperProps:p={},PopoverClasses:b,transitionDuration:G="auto",TransitionProps:{onEntering:W}={},variant:Z="selectedMenu",slots:y={},slotProps:f={}}=r,v=ce(r.TransitionProps,TT),V=ce(r,UT),X=c3(),w=J({},r,{autoFocus:s,disableAutoFocusItem:c,MenuListProps:C,onEntering:W,PaperProps:p,transitionDuration:G,TransitionProps:v,variant:Z}),R=PT(w),F=s&&!c&&m,x=B.useRef(null),M=(N,j)=>{x.current&&x.current.adjustStyleForScrollbar(N,{direction:X?"rtl":"ltr"}),W&&W(N,j)},Q=N=>{N.key==="Tab"&&(N.preventDefault(),A&&A(N,"tabKeyDown"))};let $=-1;B.Children.map(I,(N,j)=>{B.isValidElement(N)&&(N.props.disabled||(Z==="selectedMenu"&&N.props.selected||$===-1)&&($=j))});const _=(o=y.paper)!=null?o:_T,ne=(i=f.paper)!=null?i:p,ee=Wl({elementType:y.root,externalSlotProps:f.root,ownerState:w,className:[R.root,a]}),te=Wl({elementType:_,externalSlotProps:ne,ownerState:w,className:R.paper});return u.jsx(jT,J({onClose:A,anchorOrigin:{vertical:"bottom",horizontal:X?"right":"left"},transformOrigin:X?DT:QT,slots:{paper:_,root:y.root},slotProps:{root:ee,paper:te},open:m,ref:n,transitionDuration:G,TransitionProps:J({onEntering:M},v),ownerState:w},V,{classes:b,children:u.jsx(OT,J({onKeyDown:Q,actions:x,autoFocus:s&&($===-1||c),autoFocusItem:F,variant:Z},C,{className:fe(R.list,C.className),children:I}))}))});function $T(e){return Xe("MuiMenuItem",e)}const Ka=we("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),eU=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],tU=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},nU=e=>{const{disabled:t,dense:n,divider:o,disableGutters:i,selected:r,classes:s}=e,a=Je({root:["root",n&&"dense",t&&"disabled",!i&&"gutters",o&&"divider",r&&"selected"]},$T,s);return J({},s,a)},oU=se(lA,{shouldForwardProp:e=>Ln(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:tU})(({theme:e,ownerState:t})=>J({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ka.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:An(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Ka.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:An(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Ka.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:An(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:An(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Ka.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Ka.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${JB.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${JB.inset}`]:{marginLeft:52},[`& .${EB.root}`]:{marginTop:0,marginBottom:0},[`& .${EB.inset}`]:{paddingLeft:36},[`& .${KB.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&J({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${KB.root} svg`]:{fontSize:"1.25rem"}}))),Jn=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiMenuItem"}),{autoFocus:i=!1,component:r="li",dense:s=!1,divider:I=!1,disableGutters:a=!1,focusVisibleClassName:c,role:C="menuitem",tabIndex:A,className:m}=o,p=ce(o,eU),b=B.useContext(Up),G=B.useMemo(()=>({dense:s||b.dense||!1,disableGutters:a}),[b.dense,s,a]),W=B.useRef(null);mg(()=>{i&&W.current&&W.current.focus()},[i]);const Z=J({},o,{dense:G.dense,divider:I,disableGutters:a}),y=nU(o),f=Vn(W,n);let v;return o.disabled||(v=A!==void 0?A:-1),u.jsx(Up.Provider,{value:G,children:u.jsx(oU,J({ref:f,role:C,tabIndex:v,component:r,focusVisibleClassName:fe(y.focusVisible,c),className:fe(y.root,m)},p,{ownerState:Z,classes:y}))})});function iU(e){return Xe("MuiNativeSelect",e)}const I0=we("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),gU=["className","disabled","error","IconComponent","inputRef","variant"],rU=e=>{const{classes:t,variant:n,disabled:o,multiple:i,open:r,error:s}=e,I={select:["select",n,o&&"disabled",i&&"multiple",s&&"error"],icon:["icon",`icon${Ae(n)}`,r&&"iconOpen",o&&"disabled"]};return Je(I,iU,t)},Gk=({ownerState:e,theme:t})=>J({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":J({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${I0.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),sU=se("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Ln,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${I0.multiple}`]:t.multiple}]}})(Gk),Bk=({ownerState:e,theme:t})=>J({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${I0.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),lU=se("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Ae(n.variant)}`],n.open&&t.iconOpen]}})(Bk),aU=B.forwardRef(function(t,n){const{className:o,disabled:i,error:r,IconComponent:s,inputRef:I,variant:a="standard"}=t,c=ce(t,gU),C=J({},t,{disabled:i,variant:a,error:r}),A=rU(C);return u.jsxs(B.Fragment,{children:[u.jsx(sU,J({ownerState:C,className:fe(A.select,o),disabled:i,ref:I||n},c)),t.multiple?null:u.jsx(lU,{as:s,ownerState:C,className:A.icon})]})});var UB;const IU=["children","classes","className","label","notched"],cU=se("fieldset",{shouldForwardProp:Ln})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),CU=se("legend",{shouldForwardProp:Ln})(({ownerState:e,theme:t})=>J({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&J({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function dU(e){const{className:t,label:n,notched:o}=e,i=ce(e,IU),r=n!=null&&n!=="",s=J({},e,{notched:o,withLabel:r});return u.jsx(cU,J({"aria-hidden":!0,className:t,ownerState:s},i,{children:u.jsx(CU,{ownerState:s,children:r?u.jsx("span",{children:n}):UB||(UB=u.jsx("span",{className:"notranslate",children:"​"}))})}))}const uU=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],AU=e=>{const{classes:t}=e,o=Je({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},qM,t);return J({},t,o)},mU=se(CA,{shouldForwardProp:e=>Ln(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:IA})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return J({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Gg.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Gg.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${Gg.focused} .${Gg.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${Gg.error} .${Gg.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Gg.disabled} .${Gg.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&J({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),hU=se(dU,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),pU=se(dA,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:cA})(({theme:e,ownerState:t})=>J({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),hA=B.forwardRef(function(t,n){var o,i,r,s,I;const a=Me({props:t,name:"MuiOutlinedInput"}),{components:c={},fullWidth:C=!1,inputComponent:A="input",label:m,multiline:p=!1,notched:b,slots:G={},type:W="text"}=a,Z=ce(a,uU),y=AU(a),f=Ti(),v=gr({props:a,muiFormControl:f,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),V=J({},a,{color:v.color||"primary",disabled:v.disabled,error:v.error,focused:v.focused,formControl:f,fullWidth:C,hiddenLabel:v.hiddenLabel,multiline:p,size:v.size,type:W}),X=(o=(i=G.root)!=null?i:c.Root)!=null?o:mU,w=(r=(s=G.input)!=null?s:c.Input)!=null?r:pU;return u.jsx(r0,J({slots:{root:X,input:w},renderSuffix:R=>u.jsx(hU,{ownerState:V,className:y.notchedOutline,label:m!=null&&m!==""&&v.required?I||(I=u.jsxs(B.Fragment,{children:[m," ","*"]})):m,notched:typeof b<"u"?b:!!(R.startAdornment||R.filled||R.focused)}),fullWidth:C,inputComponent:A,multiline:p,ref:n,type:W},Z,{classes:J({},y,{notchedOutline:null})}))});hA.muiName="Input";const bU=gs(u.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),fU=gs(u.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),ZU=se("span",{shouldForwardProp:Ln})({position:"relative",display:"flex"}),yU=se(bU)({transform:"scale(1)"}),GU=se(fU)(({theme:e,ownerState:t})=>J({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},t.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}));function Sk(e){const{checked:t=!1,classes:n={},fontSize:o}=e,i=J({},e,{checked:t});return u.jsxs(ZU,{className:n.root,ownerState:i,children:[u.jsx(yU,{fontSize:o,className:n.background,ownerState:i}),u.jsx(GU,{fontSize:o,className:n.dot,ownerState:i})]})}const vk=B.createContext(void 0);function BU(){return B.useContext(vk)}function SU(e){return Xe("MuiRadio",e)}const DB=we("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),vU=["checked","checkedIcon","color","icon","name","onChange","size","className"],WU=e=>{const{classes:t,color:n,size:o}=e,i={root:["root",`color${Ae(n)}`,o!=="medium"&&`size${Ae(o)}`]};return J({},t,Je(i,SU,t))},VU=se(pk,{shouldForwardProp:e=>Ln(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size!=="medium"&&t[`size${Ae(n.size)}`],t[`color${Ae(n.color)}`]]}})(({theme:e,ownerState:t})=>J({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:An(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${DB.checked}`]:{color:(e.vars||e).palette[t.color].main}},{[`&.${DB.disabled}`]:{color:(e.vars||e).palette.action.disabled}}));function RU(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}const QB=u.jsx(Sk,{checked:!0}),PB=u.jsx(Sk,{}),Xl=B.forwardRef(function(t,n){var o,i;const r=Me({props:t,name:"MuiRadio"}),{checked:s,checkedIcon:I=QB,color:a="primary",icon:c=PB,name:C,onChange:A,size:m="medium",className:p}=r,b=ce(r,vU),G=J({},r,{color:a,size:m}),W=WU(G),Z=BU();let y=s;const f=kd(A,Z&&Z.onChange);let v=C;return Z&&(typeof y>"u"&&(y=RU(Z.value,r.value)),typeof v>"u"&&(v=Z.name)),u.jsx(VU,J({type:"radio",icon:B.cloneElement(c,{fontSize:(o=PB.props.fontSize)!=null?o:m}),checkedIcon:B.cloneElement(I,{fontSize:(i=QB.props.fontSize)!=null?i:m}),ownerState:G,classes:W,name:v,checked:y,onChange:f,ref:n,className:fe(W.root,p)},b))});function kU(e){return Xe("MuiRadioGroup",e)}we("MuiRadioGroup",["root","row","error"]);const wU=["actions","children","className","defaultValue","name","onChange","value"],XU=e=>{const{classes:t,row:n,error:o}=e;return Je({root:["root",n&&"row",o&&"error"]},kU,t)},c0=B.forwardRef(function(t,n){const{actions:o,children:i,className:r,defaultValue:s,name:I,onChange:a,value:c}=t,C=ce(t,wU),A=B.useRef(null),m=XU(t),[p,b]=KI({controlled:c,default:s,name:"RadioGroup"});B.useImperativeHandle(o,()=>({focus:()=>{let y=A.current.querySelector("input:not(:disabled):checked");y||(y=A.current.querySelector("input:not(:disabled)")),y&&y.focus()}}),[]);const G=Vn(n,A),W=iA(I),Z=B.useMemo(()=>({name:W,onChange(y){b(y.target.value),a&&a(y,y.target.value)},value:p}),[W,a,b,p]);return u.jsx(vk.Provider,{value:Z,children:u.jsx(zz,J({role:"radiogroup",ref:G,className:fe(m.root,r)},C,{children:i}))})});function JU(e){return Xe("MuiSelect",e)}const Ea=we("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var jB;const YU=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],HU=se("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${Ea.select}`]:t.select},{[`&.${Ea.select}`]:t[n.variant]},{[`&.${Ea.error}`]:t.error},{[`&.${Ea.multiple}`]:t.multiple}]}})(Gk,{[`&.${Ea.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),xU=se("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Ae(n.variant)}`],n.open&&t.iconOpen]}})(Bk),NU=se("input",{shouldForwardProp:e=>dk(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function _B(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function FU(e){return e==null||typeof e=="string"&&!e.trim()}const KU=e=>{const{classes:t,variant:n,disabled:o,multiple:i,open:r,error:s}=e,I={select:["select",n,o&&"disabled",i&&"multiple",s&&"error"],icon:["icon",`icon${Ae(n)}`,r&&"iconOpen",o&&"disabled"],nativeInput:["nativeInput"]};return Je(I,JU,t)},EU=B.forwardRef(function(t,n){var o;const{"aria-describedby":i,"aria-label":r,autoFocus:s,autoWidth:I,children:a,className:c,defaultOpen:C,defaultValue:A,disabled:m,displayEmpty:p,error:b=!1,IconComponent:G,inputRef:W,labelId:Z,MenuProps:y={},multiple:f,name:v,onBlur:V,onChange:X,onClose:w,onFocus:R,onOpen:F,open:x,readOnly:M,renderValue:Q,SelectDisplayProps:$={},tabIndex:_,value:ne,variant:ee="standard"}=t,te=ce(t,YU),[N,j]=KI({controlled:ne,default:A,name:"Select"}),[P,ae]=KI({controlled:x,default:C,name:"Select"}),Ie=B.useRef(null),ye=B.useRef(null),[re,ue]=B.useState(null),{current:ie}=B.useRef(x!=null),[Ye,Ue]=B.useState(),je=Vn(n,W),ft=B.useCallback(Ze=>{ye.current=Ze,Ze&&ue(Ze)},[]),Ke=re==null?void 0:re.parentNode;B.useImperativeHandle(je,()=>({focus:()=>{ye.current.focus()},node:Ie.current,value:N}),[N]),B.useEffect(()=>{C&&P&&re&&!ie&&(Ue(I?null:Ke.clientWidth),ye.current.focus())},[re,I]),B.useEffect(()=>{s&&ye.current.focus()},[s]),B.useEffect(()=>{if(!Z)return;const Ze=ao(ye.current).getElementById(Z);if(Ze){const ot=()=>{getSelection().isCollapsed&&ye.current.focus()};return Ze.addEventListener("click",ot),()=>{Ze.removeEventListener("click",ot)}}},[Z]);const Le=(Ze,ot)=>{Ze?F&&F(ot):w&&w(ot),ie||(Ue(I?null:Ke.clientWidth),ae(Ze))},He=Ze=>{Ze.button===0&&(Ze.preventDefault(),ye.current.focus(),Le(!0,Ze))},Re=Ze=>{Le(!1,Ze)},_e=B.Children.toArray(a),$n=Ze=>{const ot=_e.find(at=>at.props.value===Ze.target.value);ot!==void 0&&(j(ot.props.value),X&&X(Ze,ot))},ln=Ze=>ot=>{let at;if(ot.currentTarget.hasAttribute("tabindex")){if(f){at=Array.isArray(N)?N.slice():[];const ii=N.indexOf(Ze.props.value);ii===-1?at.push(Ze.props.value):at.splice(ii,1)}else at=Ze.props.value;if(Ze.props.onClick&&Ze.props.onClick(ot),N!==at&&(j(at),X)){const ii=ot.nativeEvent||ot,gi=new ii.constructor(ii.type,ii);Object.defineProperty(gi,"target",{writable:!0,value:{value:at,name:v}}),X(gi,Ze)}f||Le(!1,ot)}},Bt=Ze=>{M||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Ze.key)!==-1&&(Ze.preventDefault(),Le(!0,Ze))},zn=re!==null&&P,fn=Ze=>{!zn&&V&&(Object.defineProperty(Ze,"target",{writable:!0,value:{value:N,name:v}}),V(Ze))};delete te["aria-invalid"];let st,eo;const on=[];let At=!1;(xd({value:N})||p)&&(Q?st=Q(N):At=!0);const to=_e.map(Ze=>{if(!B.isValidElement(Ze))return null;let ot;if(f){if(!Array.isArray(N))throw new Error(_r(2));ot=N.some(at=>_B(at,Ze.props.value)),ot&&At&&on.push(Ze.props.children)}else ot=_B(N,Ze.props.value),ot&&At&&(eo=Ze.props.children);return B.cloneElement(Ze,{"aria-selected":ot?"true":"false",onClick:ln(Ze),onKeyUp:at=>{at.key===" "&&at.preventDefault(),Ze.props.onKeyUp&&Ze.props.onKeyUp(at)},role:"option",selected:ot,value:void 0,"data-value":Ze.props.value})});At&&(f?on.length===0?st=null:st=on.reduce((Ze,ot,at)=>(Ze.push(ot),at<on.length-1&&Ze.push(", "),Ze),[]):st=eo);let jt=Ye;!I&&ie&&re&&(jt=Ke.clientWidth);let an;typeof _<"u"?an=_:an=m?null:0;const et=$.id||(v?`mui-component-select-${v}`:void 0),Ge=J({},t,{variant:ee,value:N,open:zn,error:b}),Mt=KU(Ge),In=J({},y.PaperProps,(o=y.slotProps)==null?void 0:o.paper),fi=iA();return u.jsxs(B.Fragment,{children:[u.jsx(HU,J({ref:ft,tabIndex:an,role:"combobox","aria-controls":fi,"aria-disabled":m?"true":void 0,"aria-expanded":zn?"true":"false","aria-haspopup":"listbox","aria-label":r,"aria-labelledby":[Z,et].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:Bt,onMouseDown:m||M?null:He,onBlur:fn,onFocus:R},$,{ownerState:Ge,className:fe($.className,Mt.select,c),id:et,children:FU(st)?jB||(jB=u.jsx("span",{className:"notranslate",children:"​"})):st})),u.jsx(NU,J({"aria-invalid":b,value:Array.isArray(N)?N.join(","):N,name:v,ref:Ie,"aria-hidden":!0,onChange:$n,tabIndex:-1,disabled:m,className:Mt.nativeInput,autoFocus:s,ownerState:Ge},te)),u.jsx(xU,{as:G,className:Mt.icon,ownerState:Ge}),u.jsx(qT,J({id:`menu-${v||""}`,anchorEl:Ke,open:zn,onClose:Re,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:J({"aria-labelledby":Z,role:"listbox","aria-multiselectable":f?"true":void 0,disableListWrap:!0,id:fi},y.MenuListProps),slotProps:J({},y.slotProps,{paper:J({},In,{style:J({minWidth:jt},In!=null?In.style:null)})}),children:to}))]})}),MU=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],LU=["root"],zU=e=>{const{classes:t}=e;return t},C0={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Ln(e)&&e!=="variant",slot:"Root"},TU=se(a0,C0)(""),UU=se(hA,C0)(""),DU=se(l0,C0)(""),pA=B.forwardRef(function(t,n){const o=Me({name:"MuiSelect",props:t}),{autoWidth:i=!1,children:r,classes:s={},className:I,defaultOpen:a=!1,displayEmpty:c=!1,IconComponent:C=eL,id:A,input:m,inputProps:p,label:b,labelId:G,MenuProps:W,multiple:Z=!1,native:y=!1,onClose:f,onOpen:v,open:V,renderValue:X,SelectDisplayProps:w,variant:R="outlined"}=o,F=ce(o,MU),x=y?aU:EU,M=Ti(),Q=gr({props:o,muiFormControl:M,states:["variant","error"]}),$=Q.variant||R,_=J({},o,{variant:$,classes:s}),ne=zU(_),ee=ce(ne,LU),te=m||{standard:u.jsx(TU,{ownerState:_}),outlined:u.jsx(UU,{label:b,ownerState:_}),filled:u.jsx(DU,{ownerState:_})}[$],N=Vn(n,te.ref);return u.jsx(B.Fragment,{children:B.cloneElement(te,J({inputComponent:x,inputProps:J({children:r,error:Q.error,IconComponent:C,variant:$,type:void 0,multiple:Z},y?{id:A}:{autoWidth:i,defaultOpen:a,displayEmpty:c,labelId:G,MenuProps:W,onClose:f,onOpen:v,open:V,renderValue:X,SelectDisplayProps:J({id:A},w)},p,{classes:p?_n(ee,p.classes):ee},m?m.props.inputProps:{})},(Z&&y||c)&&$==="outlined"?{notched:!0}:{},{ref:N,className:fe(te.props.className,I,ne.root)},!m&&{variant:$},F))})});pA.muiName="Select";const Wk=B.createContext();function QU(e){return Xe("MuiTable",e)}we("MuiTable",["root","stickyHeader"]);const PU=["className","component","padding","size","stickyHeader"],jU=e=>{const{classes:t,stickyHeader:n}=e;return Je({root:["root",n&&"stickyHeader"]},QU,t)},_U=se("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>J({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":J({},e.typography.body2,{padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})),OB="table",Vk=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiTable"}),{className:i,component:r=OB,padding:s="normal",size:I="medium",stickyHeader:a=!1}=o,c=ce(o,PU),C=J({},o,{component:r,padding:s,size:I,stickyHeader:a}),A=jU(C),m=B.useMemo(()=>({padding:s,size:I,stickyHeader:a}),[s,I,a]);return u.jsx(Wk.Provider,{value:m,children:u.jsx(_U,J({as:r,role:r===OB?null:"table",ref:n,className:fe(A.root,i),ownerState:C},c))})}),bA=B.createContext();function OU(e){return Xe("MuiTableBody",e)}we("MuiTableBody",["root"]);const qU=["className","component"],$U=e=>{const{classes:t}=e;return Je({root:["root"]},OU,t)},eD=se("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),tD={variant:"body"},qB="tbody",Rk=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiTableBody"}),{className:i,component:r=qB}=o,s=ce(o,qU),I=J({},o,{component:r}),a=$U(I);return u.jsx(bA.Provider,{value:tD,children:u.jsx(eD,J({className:fe(a.root,i),as:r,ref:n,role:r===qB?null:"rowgroup",ownerState:I},s))})});function nD(e){return Xe("MuiTableCell",e)}const oD=we("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),iD=["align","className","component","padding","scope","size","sortDirection","variant"],gD=e=>{const{classes:t,variant:n,align:o,padding:i,size:r,stickyHeader:s}=e,I={root:["root",n,s&&"stickyHeader",o!=="inherit"&&`align${Ae(o)}`,i!=="normal"&&`padding${Ae(i)}`,`size${Ae(r)}`]};return Je(I,nD,t)},rD=se("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${Ae(n.size)}`],n.padding!=="normal"&&t[`padding${Ae(n.padding)}`],n.align!=="inherit"&&t[`align${Ae(n.align)}`],n.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>J({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?sk(An(e.palette.divider,1),.88):rk(An(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},t.variant==="head"&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},t.variant==="body"&&{color:(e.vars||e).palette.text.primary},t.variant==="footer"&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},t.size==="small"&&{padding:"6px 16px",[`&.${oD.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},t.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},t.padding==="none"&&{padding:0},t.align==="left"&&{textAlign:"left"},t.align==="center"&&{textAlign:"center"},t.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},t.align==="justify"&&{textAlign:"justify"},t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default})),Hn=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiTableCell"}),{align:i="inherit",className:r,component:s,padding:I,scope:a,size:c,sortDirection:C,variant:A}=o,m=ce(o,iD),p=B.useContext(Wk),b=B.useContext(bA),G=b&&b.variant==="head";let W;s?W=s:W=G?"th":"td";let Z=a;W==="td"?Z=void 0:!Z&&G&&(Z="col");const y=A||b&&b.variant,f=J({},o,{align:i,component:W,padding:I||(p&&p.padding?p.padding:"normal"),size:c||(p&&p.size?p.size:"medium"),sortDirection:C,stickyHeader:y==="head"&&p&&p.stickyHeader,variant:y}),v=gD(f);let V=null;return C&&(V=C==="asc"?"ascending":"descending"),u.jsx(rD,J({as:W,ref:n,className:fe(v.root,r),"aria-sort":V,scope:Z,ownerState:f},m))});function sD(e){return Xe("MuiTableContainer",e)}we("MuiTableContainer",["root"]);const lD=["className","component"],aD=e=>{const{classes:t}=e;return Je({root:["root"]},sD,t)},ID=se("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),kk=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiTableContainer"}),{className:i,component:r="div"}=o,s=ce(o,lD),I=J({},o,{component:r}),a=aD(I);return u.jsx(ID,J({ref:n,as:r,className:fe(a.root,i),ownerState:I},s))});function cD(e){return Xe("MuiTableHead",e)}we("MuiTableHead",["root"]);const CD=["className","component"],dD=e=>{const{classes:t}=e;return Je({root:["root"]},cD,t)},uD=se("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),AD={variant:"head"},$B="thead",wk=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiTableHead"}),{className:i,component:r=$B}=o,s=ce(o,CD),I=J({},o,{component:r}),a=dD(I);return u.jsx(bA.Provider,{value:AD,children:u.jsx(uD,J({as:r,className:fe(a.root,i),ref:n,role:r===$B?null:"rowgroup",ownerState:I},s))})});function mD(e){return Xe("MuiTableRow",e)}const eS=we("MuiTableRow",["root","selected","hover","head","footer"]),hD=["className","component","hover","selected"],pD=e=>{const{classes:t,selected:n,hover:o,head:i,footer:r}=e;return Je({root:["root",n&&"selected",o&&"hover",i&&"head",r&&"footer"]},mD,t)},bD=se("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.head&&t.head,n.footer&&t.footer]}})(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${eS.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${eS.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:An(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:An(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}})),tS="tr",ul=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiTableRow"}),{className:i,component:r=tS,hover:s=!1,selected:I=!1}=o,a=ce(o,hD),c=B.useContext(bA),C=J({},o,{component:r,hover:s,selected:I,head:c&&c.variant==="head",footer:c&&c.variant==="footer"}),A=pD(C);return u.jsx(bD,J({as:r,ref:n,className:fe(A.root,i),role:r===tS?null:"row",ownerState:C},a))});function fD(e){return Xe("MuiTextField",e)}we("MuiTextField",["root"]);const ZD=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],yD={standard:a0,filled:l0,outlined:hA},GD=e=>{const{classes:t}=e;return Je({root:["root"]},fD,t)},BD=se(rs,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),tt=B.forwardRef(function(t,n){const o=Me({props:t,name:"MuiTextField"}),{autoComplete:i,autoFocus:r=!1,children:s,className:I,color:a="primary",defaultValue:c,disabled:C=!1,error:A=!1,FormHelperTextProps:m,fullWidth:p=!1,helperText:b,id:G,InputLabelProps:W,inputProps:Z,InputProps:y,inputRef:f,label:v,maxRows:V,minRows:X,multiline:w=!1,name:R,onBlur:F,onChange:x,onFocus:M,placeholder:Q,required:$=!1,rows:_,select:ne=!1,SelectProps:ee,type:te,value:N,variant:j="outlined"}=o,P=ce(o,ZD),ae=J({},o,{autoFocus:r,color:a,disabled:C,error:A,fullWidth:p,multiline:w,required:$,select:ne,variant:j}),Ie=GD(ae),ye={};j==="outlined"&&(W&&typeof W.shrink<"u"&&(ye.notched=W.shrink),ye.label=v),ne&&((!ee||!ee.native)&&(ye.id=void 0),ye["aria-describedby"]=void 0);const re=iA(G),ue=b&&re?`${re}-helper-text`:void 0,ie=v&&re?`${re}-label`:void 0,Ye=yD[j],Ue=u.jsx(Ye,J({"aria-describedby":ue,autoComplete:i,autoFocus:r,defaultValue:c,fullWidth:p,multiline:w,name:R,rows:_,maxRows:V,minRows:X,type:te,value:N,id:re,inputRef:f,onBlur:F,onChange:x,onFocus:M,placeholder:Q,inputProps:Z},ye,y));return u.jsxs(BD,J({className:fe(Ie.root,I),disabled:C,error:A,fullWidth:p,ref:n,required:$,color:a,variant:j,ownerState:ae},P,{children:[v!=null&&v!==""&&u.jsx(mA,J({htmlFor:re,id:ie},W,{children:v})),ne?u.jsx(pA,J({"aria-describedby":ue,id:re,labelId:ie,value:N,input:Ue},ee,{children:s})):Ue,b&&u.jsx(Pz,J({id:ue},m,{children:b}))]}))});var go=function(){return go=Object.assign||function(t){for(var n,o=1,i=arguments.length;o<i;o++){n=arguments[o];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},go.apply(this,arguments)};function Ed(e,t,n){if(n||arguments.length===2)for(var o=0,i=t.length,r;o<i;o++)(r||!(o in t))&&(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var vt="-ms-",CI="-moz-",lt="-webkit-",Xk="comm",fA="rule",d0="decl",SD="@import",Jk="@keyframes",vD="@layer",Yk=Math.abs,u0=String.fromCharCode,Dp=Object.assign;function WD(e,t){return un(e,0)^45?(((t<<2^un(e,0))<<2^un(e,1))<<2^un(e,2))<<2^un(e,3):0}function Hk(e){return e.trim()}function qi(e,t){return(e=t.exec(e))?e[0]:e}function ze(e,t,n){return e.replace(t,n)}function MC(e,t,n){return e.indexOf(t,n)}function un(e,t){return e.charCodeAt(t)|0}function Jl(e,t,n){return e.slice(t,n)}function wi(e){return e.length}function xk(e){return e.length}function Oa(e,t){return t.push(e),e}function VD(e,t){return e.map(t).join("")}function nS(e,t){return e.filter(function(n){return!qi(n,t)})}var ZA=1,Yl=1,Nk=0,ti=0,en=0,ta="";function yA(e,t,n,o,i,r,s,I){return{value:e,root:t,parent:n,type:o,props:i,children:r,line:ZA,column:Yl,length:s,return:"",siblings:I}}function Wg(e,t){return Dp(yA("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function Js(e){for(;e.root;)e=Wg(e.root,{children:[e]});Oa(e,e.siblings)}function RD(){return en}function kD(){return en=ti>0?un(ta,--ti):0,Yl--,en===10&&(Yl=1,ZA--),en}function mi(){return en=ti<Nk?un(ta,ti++):0,Yl++,en===10&&(Yl=1,ZA++),en}function Kr(){return un(ta,ti)}function LC(){return ti}function GA(e,t){return Jl(ta,e,t)}function Qp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function wD(e){return ZA=Yl=1,Nk=wi(ta=e),ti=0,[]}function XD(e){return ta="",e}function Ch(e){return Hk(GA(ti-1,Pp(e===91?e+2:e===40?e+1:e)))}function JD(e){for(;(en=Kr())&&en<33;)mi();return Qp(e)>2||Qp(en)>3?"":" "}function YD(e,t){for(;--t&&mi()&&!(en<48||en>102||en>57&&en<65||en>70&&en<97););return GA(e,LC()+(t<6&&Kr()==32&&mi()==32))}function Pp(e){for(;mi();)switch(en){case e:return ti;case 34:case 39:e!==34&&e!==39&&Pp(en);break;case 40:e===41&&Pp(e);break;case 92:mi();break}return ti}function HD(e,t){for(;mi()&&e+en!==57;)if(e+en===84&&Kr()===47)break;return"/*"+GA(t,ti-1)+"*"+u0(e===47?e:mi())}function xD(e){for(;!Qp(Kr());)mi();return GA(e,ti)}function ND(e){return XD(zC("",null,null,null,[""],e=wD(e),0,[0],e))}function zC(e,t,n,o,i,r,s,I,a){for(var c=0,C=0,A=s,m=0,p=0,b=0,G=1,W=1,Z=1,y=0,f="",v=i,V=r,X=o,w=f;W;)switch(b=y,y=mi()){case 40:if(b!=108&&un(w,A-1)==58){MC(w+=ze(Ch(y),"&","&\f"),"&\f",Yk(c?I[c-1]:0))!=-1&&(Z=-1);break}case 34:case 39:case 91:w+=Ch(y);break;case 9:case 10:case 13:case 32:w+=JD(b);break;case 92:w+=YD(LC()-1,7);continue;case 47:switch(Kr()){case 42:case 47:Oa(FD(HD(mi(),LC()),t,n,a),a);break;default:w+="/"}break;case 123*G:I[c++]=wi(w)*Z;case 125*G:case 59:case 0:switch(y){case 0:case 125:W=0;case 59+C:Z==-1&&(w=ze(w,/\f/g,"")),p>0&&wi(w)-A&&Oa(p>32?iS(w+";",o,n,A-1,a):iS(ze(w," ","")+";",o,n,A-2,a),a);break;case 59:w+=";";default:if(Oa(X=oS(w,t,n,c,C,i,I,f,v=[],V=[],A,r),r),y===123)if(C===0)zC(w,t,X,X,v,r,A,I,V);else switch(m===99&&un(w,3)===110?100:m){case 100:case 108:case 109:case 115:zC(e,X,X,o&&Oa(oS(e,X,X,0,0,i,I,f,i,v=[],A,V),V),i,V,A,I,o?v:V);break;default:zC(w,X,X,X,[""],V,0,I,V)}}c=C=p=0,G=Z=1,f=w="",A=s;break;case 58:A=1+wi(w),p=b;default:if(G<1){if(y==123)--G;else if(y==125&&G++==0&&kD()==125)continue}switch(w+=u0(y),y*G){case 38:Z=C>0?1:(w+="\f",-1);break;case 44:I[c++]=(wi(w)-1)*Z,Z=1;break;case 64:Kr()===45&&(w+=Ch(mi())),m=Kr(),C=A=wi(f=w+=xD(LC())),y++;break;case 45:b===45&&wi(w)==2&&(G=0)}}return r}function oS(e,t,n,o,i,r,s,I,a,c,C,A){for(var m=i-1,p=i===0?r:[""],b=xk(p),G=0,W=0,Z=0;G<o;++G)for(var y=0,f=Jl(e,m+1,m=Yk(W=s[G])),v=e;y<b;++y)(v=Hk(W>0?p[y]+" "+f:ze(f,/&\f/g,p[y])))&&(a[Z++]=v);return yA(e,t,n,i===0?fA:I,a,c,C,A)}function FD(e,t,n,o){return yA(e,t,n,Xk,u0(RD()),Jl(e,2,-2),0,o)}function iS(e,t,n,o,i){return yA(e,t,n,d0,Jl(e,0,o),Jl(e,o+1,-1),o,i)}function Fk(e,t,n){switch(WD(e,t)){case 5103:return lt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return lt+e+e;case 4789:return CI+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return lt+e+CI+e+vt+e+e;case 5936:switch(un(e,t+11)){case 114:return lt+e+vt+ze(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return lt+e+vt+ze(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return lt+e+vt+ze(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return lt+e+vt+e+e;case 6165:return lt+e+vt+"flex-"+e+e;case 5187:return lt+e+ze(e,/(\w+).+(:[^]+)/,lt+"box-$1$2"+vt+"flex-$1$2")+e;case 5443:return lt+e+vt+"flex-item-"+ze(e,/flex-|-self/g,"")+(qi(e,/flex-|baseline/)?"":vt+"grid-row-"+ze(e,/flex-|-self/g,""))+e;case 4675:return lt+e+vt+"flex-line-pack"+ze(e,/align-content|flex-|-self/g,"")+e;case 5548:return lt+e+vt+ze(e,"shrink","negative")+e;case 5292:return lt+e+vt+ze(e,"basis","preferred-size")+e;case 6060:return lt+"box-"+ze(e,"-grow","")+lt+e+vt+ze(e,"grow","positive")+e;case 4554:return lt+ze(e,/([^-])(transform)/g,"$1"+lt+"$2")+e;case 6187:return ze(ze(ze(e,/(zoom-|grab)/,lt+"$1"),/(image-set)/,lt+"$1"),e,"")+e;case 5495:case 3959:return ze(e,/(image-set\([^]*)/,lt+"$1$`$1");case 4968:return ze(ze(e,/(.+:)(flex-)?(.*)/,lt+"box-pack:$3"+vt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+lt+e+e;case 4200:if(!qi(e,/flex-|baseline/))return vt+"grid-column-align"+Jl(e,t)+e;break;case 2592:case 3360:return vt+ze(e,"template-","")+e;case 4384:case 3616:return n&&n.some(function(o,i){return t=i,qi(o.props,/grid-\w+-end/)})?~MC(e+(n=n[t].value),"span",0)?e:vt+ze(e,"-start","")+e+vt+"grid-row-span:"+(~MC(n,"span",0)?qi(n,/\d+/):+qi(n,/\d+/)-+qi(e,/\d+/))+";":vt+ze(e,"-start","")+e;case 4896:case 4128:return n&&n.some(function(o){return qi(o.props,/grid-\w+-start/)})?e:vt+ze(ze(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return ze(e,/(.+)-inline(.+)/,lt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(wi(e)-1-t>6)switch(un(e,t+1)){case 109:if(un(e,t+4)!==45)break;case 102:return ze(e,/(.+:)(.+)-([^]+)/,"$1"+lt+"$2-$3$1"+CI+(un(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~MC(e,"stretch",0)?Fk(ze(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return ze(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(o,i,r,s,I,a,c){return vt+i+":"+r+c+(s?vt+i+"-span:"+(I?a:+a-+r)+c:"")+e});case 4949:if(un(e,t+6)===121)return ze(e,":",":"+lt)+e;break;case 6444:switch(un(e,un(e,14)===45?18:11)){case 120:return ze(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+lt+(un(e,14)===45?"inline-":"")+"box$3$1"+lt+"$2$3$1"+vt+"$2box$3")+e;case 100:return ze(e,":",":"+vt)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return ze(e,"scroll-","scroll-snap-")+e}return e}function Md(e,t){for(var n="",o=0;o<e.length;o++)n+=t(e[o],o,e,t)||"";return n}function KD(e,t,n,o){switch(e.type){case vD:if(e.children.length)break;case SD:case d0:return e.return=e.return||e.value;case Xk:return"";case Jk:return e.return=e.value+"{"+Md(e.children,o)+"}";case fA:if(!wi(e.value=e.props.join(",")))return""}return wi(n=Md(e.children,o))?e.return=e.value+"{"+n+"}":""}function ED(e){var t=xk(e);return function(n,o,i,r){for(var s="",I=0;I<t;I++)s+=e[I](n,o,i,r)||"";return s}}function MD(e){return function(t){t.root||(t=t.return)&&e(t)}}function LD(e,t,n,o){if(e.length>-1&&!e.return)switch(e.type){case d0:e.return=Fk(e.value,e.length,n);return;case Jk:return Md([Wg(e,{value:ze(e.value,"@","@"+lt)})],o);case fA:if(e.length)return VD(n=e.props,function(i){switch(qi(i,o=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Js(Wg(e,{props:[ze(i,/:(read-\w+)/,":"+CI+"$1")]})),Js(Wg(e,{props:[i]})),Dp(e,{props:nS(n,o)});break;case"::placeholder":Js(Wg(e,{props:[ze(i,/:(plac\w+)/,":"+lt+"input-$1")]})),Js(Wg(e,{props:[ze(i,/:(plac\w+)/,":"+CI+"$1")]})),Js(Wg(e,{props:[ze(i,/:(plac\w+)/,vt+"input-$1")]})),Js(Wg(e,{props:[i]})),Dp(e,{props:nS(n,o)});break}return""})}}var zD={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},po={},Hl=typeof process<"u"&&po!==void 0&&(po.REACT_APP_SC_ATTR||po.SC_ATTR)||"data-styled",Kk="active",Ek="data-styled-version",BA="6.1.13",A0=`/*!sc*/
`,Ld=typeof window<"u"&&"HTMLElement"in window,TD=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&po!==void 0&&po.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&po.REACT_APP_SC_DISABLE_SPEEDY!==""?po.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&po.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&po!==void 0&&po.SC_DISABLE_SPEEDY!==void 0&&po.SC_DISABLE_SPEEDY!==""&&po.SC_DISABLE_SPEEDY!=="false"&&po.SC_DISABLE_SPEEDY),SA=Object.freeze([]),xl=Object.freeze({});function UD(e,t,n){return n===void 0&&(n=xl),e.theme!==n.theme&&e.theme||t||n.theme}var Mk=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),DD=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,QD=/(^-|-$)/g;function gS(e){return e.replace(DD,"-").replace(QD,"")}var PD=/(a)(d)/gi,uC=52,rS=function(e){return String.fromCharCode(e+(e>25?39:97))};function jp(e){var t,n="";for(t=Math.abs(e);t>uC;t=t/uC|0)n=rS(t%uC)+n;return(rS(t%uC)+n).replace(PD,"$1-$2")}var dh,Lk=5381,_s=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},zk=function(e){return _s(Lk,e)};function jD(e){return jp(zk(e)>>>0)}function _D(e){return e.displayName||e.name||"Component"}function uh(e){return typeof e=="string"&&!0}var Tk=typeof Symbol=="function"&&Symbol.for,Uk=Tk?Symbol.for("react.memo"):60115,OD=Tk?Symbol.for("react.forward_ref"):60112,qD={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},$D={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Dk={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},eQ=((dh={})[OD]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},dh[Uk]=Dk,dh);function sS(e){return("type"in(t=e)&&t.type.$$typeof)===Uk?Dk:"$$typeof"in e?eQ[e.$$typeof]:qD;var t}var tQ=Object.defineProperty,nQ=Object.getOwnPropertyNames,lS=Object.getOwnPropertySymbols,oQ=Object.getOwnPropertyDescriptor,iQ=Object.getPrototypeOf,aS=Object.prototype;function Qk(e,t,n){if(typeof t!="string"){if(aS){var o=iQ(t);o&&o!==aS&&Qk(e,o,n)}var i=nQ(t);lS&&(i=i.concat(lS(t)));for(var r=sS(e),s=sS(t),I=0;I<i.length;++I){var a=i[I];if(!(a in $D||n&&n[a]||s&&a in s||r&&a in r)){var c=oQ(t,a);try{tQ(e,a,c)}catch{}}}}return e}function Nl(e){return typeof e=="function"}function m0(e){return typeof e=="object"&&"styledComponentId"in e}function Jr(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function IS(e,t){if(e.length===0)return"";for(var n=e[0],o=1;o<e.length;o++)n+=e[o];return n}function zI(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function _p(e,t,n){if(n===void 0&&(n=!1),!n&&!zI(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var o=0;o<t.length;o++)e[o]=_p(e[o],t[o]);else if(zI(t))for(var o in t)e[o]=_p(e[o],t[o]);return e}function h0(e,t){Object.defineProperty(e,"toString",{value:t})}function dc(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var gQ=function(){function e(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return e.prototype.indexOfGroup=function(t){for(var n=0,o=0;o<t;o++)n+=this.groupSizes[o];return n},e.prototype.insertRules=function(t,n){if(t>=this.groupSizes.length){for(var o=this.groupSizes,i=o.length,r=i;t>=r;)if((r<<=1)<0)throw dc(16,"".concat(t));this.groupSizes=new Uint32Array(r),this.groupSizes.set(o),this.length=r;for(var s=i;s<r;s++)this.groupSizes[s]=0}for(var I=this.indexOfGroup(t+1),a=(s=0,n.length);s<a;s++)this.tag.insertRule(I,n[s])&&(this.groupSizes[t]++,I++)},e.prototype.clearGroup=function(t){if(t<this.length){var n=this.groupSizes[t],o=this.indexOfGroup(t),i=o+n;this.groupSizes[t]=0;for(var r=o;r<i;r++)this.tag.deleteRule(o)}},e.prototype.getGroup=function(t){var n="";if(t>=this.length||this.groupSizes[t]===0)return n;for(var o=this.groupSizes[t],i=this.indexOfGroup(t),r=i+o,s=i;s<r;s++)n+="".concat(this.tag.getRule(s)).concat(A0);return n},e}(),TC=new Map,zd=new Map,UC=1,AC=function(e){if(TC.has(e))return TC.get(e);for(;zd.has(UC);)UC++;var t=UC++;return TC.set(e,t),zd.set(t,e),t},rQ=function(e,t){UC=t+1,TC.set(e,t),zd.set(t,e)},sQ="style[".concat(Hl,"][").concat(Ek,'="').concat(BA,'"]'),lQ=new RegExp("^".concat(Hl,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),aQ=function(e,t,n){for(var o,i=n.split(","),r=0,s=i.length;r<s;r++)(o=i[r])&&e.registerName(t,o)},IQ=function(e,t){for(var n,o=((n=t.textContent)!==null&&n!==void 0?n:"").split(A0),i=[],r=0,s=o.length;r<s;r++){var I=o[r].trim();if(I){var a=I.match(lQ);if(a){var c=0|parseInt(a[1],10),C=a[2];c!==0&&(rQ(C,c),aQ(e,C,a[3]),e.getTag().insertRules(c,i)),i.length=0}else i.push(I)}}},cS=function(e){for(var t=document.querySelectorAll(sQ),n=0,o=t.length;n<o;n++){var i=t[n];i&&i.getAttribute(Hl)!==Kk&&(IQ(e,i),i.parentNode&&i.parentNode.removeChild(i))}};function cQ(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Pk=function(e){var t=document.head,n=e||t,o=document.createElement("style"),i=function(I){var a=Array.from(I.querySelectorAll("style[".concat(Hl,"]")));return a[a.length-1]}(n),r=i!==void 0?i.nextSibling:null;o.setAttribute(Hl,Kk),o.setAttribute(Ek,BA);var s=cQ();return s&&o.setAttribute("nonce",s),n.insertBefore(o,r),o},CQ=function(){function e(t){this.element=Pk(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var o=document.styleSheets,i=0,r=o.length;i<r;i++){var s=o[i];if(s.ownerNode===n)return s}throw dc(17)}(this.element),this.length=0}return e.prototype.insertRule=function(t,n){try{return this.sheet.insertRule(n,t),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.prototype.getRule=function(t){var n=this.sheet.cssRules[t];return n&&n.cssText?n.cssText:""},e}(),dQ=function(){function e(t){this.element=Pk(t),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(t,n){if(t<=this.length&&t>=0){var o=document.createTextNode(n);return this.element.insertBefore(o,this.nodes[t]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},e}(),uQ=function(){function e(t){this.rules=[],this.length=0}return e.prototype.insertRule=function(t,n){return t<=this.length&&(this.rules.splice(t,0,n),this.length++,!0)},e.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},e}(),CS=Ld,AQ={isServer:!Ld,useCSSOMInjection:!TD},jk=function(){function e(t,n,o){t===void 0&&(t=xl),n===void 0&&(n={});var i=this;this.options=go(go({},AQ),t),this.gs=n,this.names=new Map(o),this.server=!!t.isServer,!this.server&&Ld&&CS&&(CS=!1,cS(this)),h0(this,function(){return function(r){for(var s=r.getTag(),I=s.length,a="",c=function(A){var m=function(Z){return zd.get(Z)}(A);if(m===void 0)return"continue";var p=r.names.get(m),b=s.getGroup(A);if(p===void 0||!p.size||b.length===0)return"continue";var G="".concat(Hl,".g").concat(A,'[id="').concat(m,'"]'),W="";p!==void 0&&p.forEach(function(Z){Z.length>0&&(W+="".concat(Z,","))}),a+="".concat(b).concat(G,'{content:"').concat(W,'"}').concat(A0)},C=0;C<I;C++)c(C);return a}(i)})}return e.registerId=function(t){return AC(t)},e.prototype.rehydrate=function(){!this.server&&Ld&&cS(this)},e.prototype.reconstructWithOptions=function(t,n){return n===void 0&&(n=!0),new e(go(go({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(t=function(n){var o=n.useCSSOMInjection,i=n.target;return n.isServer?new uQ(i):o?new CQ(i):new dQ(i)}(this.options),new gQ(t)));var t},e.prototype.hasNameForId=function(t,n){return this.names.has(t)&&this.names.get(t).has(n)},e.prototype.registerName=function(t,n){if(AC(t),this.names.has(t))this.names.get(t).add(n);else{var o=new Set;o.add(n),this.names.set(t,o)}},e.prototype.insertRules=function(t,n,o){this.registerName(t,n),this.getTag().insertRules(AC(t),o)},e.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.prototype.clearRules=function(t){this.getTag().clearGroup(AC(t)),this.clearNames(t)},e.prototype.clearTag=function(){this.tag=void 0},e}(),mQ=/&/g,hQ=/^\s*\/\/.*$/gm;function _k(e,t){return e.map(function(n){return n.type==="rule"&&(n.value="".concat(t," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(t," ")),n.props=n.props.map(function(o){return"".concat(t," ").concat(o)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=_k(n.children,t)),n})}function pQ(e){var t,n,o,i=xl,r=i.options,s=r===void 0?xl:r,I=i.plugins,a=I===void 0?SA:I,c=function(m,p,b){return b.startsWith(n)&&b.endsWith(n)&&b.replaceAll(n,"").length>0?".".concat(t):m},C=a.slice();C.push(function(m){m.type===fA&&m.value.includes("&")&&(m.props[0]=m.props[0].replace(mQ,n).replace(o,c))}),s.prefix&&C.push(LD),C.push(KD);var A=function(m,p,b,G){p===void 0&&(p=""),b===void 0&&(b=""),G===void 0&&(G="&"),t=G,n=p,o=new RegExp("\\".concat(n,"\\b"),"g");var W=m.replace(hQ,""),Z=ND(b||p?"".concat(b," ").concat(p," { ").concat(W," }"):W);s.namespace&&(Z=_k(Z,s.namespace));var y=[];return Md(Z,ED(C.concat(MD(function(f){return y.push(f)})))),y};return A.hash=a.length?a.reduce(function(m,p){return p.name||dc(15),_s(m,p.name)},Lk).toString():"",A}var bQ=new jk,Op=pQ(),Ok=Ee.createContext({shouldForwardProp:void 0,styleSheet:bQ,stylis:Op});Ok.Consumer;Ee.createContext(void 0);function dS(){return B.useContext(Ok)}var fQ=function(){function e(t,n){var o=this;this.inject=function(i,r){r===void 0&&(r=Op);var s=o.name+r.hash;i.hasNameForId(o.id,s)||i.insertRules(o.id,s,r(o.rules,s,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=n,h0(this,function(){throw dc(12,String(o.name))})}return e.prototype.getName=function(t){return t===void 0&&(t=Op),this.name+t.hash},e}(),ZQ=function(e){return e>="A"&&e<="Z"};function uS(e){for(var t="",n=0;n<e.length;n++){var o=e[n];if(n===1&&o==="-"&&e[0]==="-")return e;ZQ(o)?t+="-"+o.toLowerCase():t+=o}return t.startsWith("ms-")?"-"+t:t}var qk=function(e){return e==null||e===!1||e===""},$k=function(e){var t,n,o=[];for(var i in e){var r=e[i];e.hasOwnProperty(i)&&!qk(r)&&(Array.isArray(r)&&r.isCss||Nl(r)?o.push("".concat(uS(i),":"),r,";"):zI(r)?o.push.apply(o,Ed(Ed(["".concat(i," {")],$k(r),!1),["}"],!1)):o.push("".concat(uS(i),": ").concat((t=i,(n=r)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||t in zD||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return o};function Er(e,t,n,o){if(qk(e))return[];if(m0(e))return[".".concat(e.styledComponentId)];if(Nl(e)){if(!Nl(r=e)||r.prototype&&r.prototype.isReactComponent||!t)return[e];var i=e(t);return Er(i,t,n,o)}var r;return e instanceof fQ?n?(e.inject(n,o),[e.getName(o)]):[e]:zI(e)?$k(e):Array.isArray(e)?Array.prototype.concat.apply(SA,e.map(function(s){return Er(s,t,n,o)})):[e.toString()]}function yQ(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Nl(n)&&!m0(n))return!1}return!0}var GQ=zk(BA),BQ=function(){function e(t,n,o){this.rules=t,this.staticRulesId="",this.isStatic=(o===void 0||o.isStatic)&&yQ(t),this.componentId=n,this.baseHash=_s(GQ,n),this.baseStyle=o,jk.registerId(n)}return e.prototype.generateAndInjectStyles=function(t,n,o){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,n,o):"";if(this.isStatic&&!o.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))i=Jr(i,this.staticRulesId);else{var r=IS(Er(this.rules,t,n,o)),s=jp(_s(this.baseHash,r)>>>0);if(!n.hasNameForId(this.componentId,s)){var I=o(r,".".concat(s),void 0,this.componentId);n.insertRules(this.componentId,s,I)}i=Jr(i,s),this.staticRulesId=s}else{for(var a=_s(this.baseHash,o.hash),c="",C=0;C<this.rules.length;C++){var A=this.rules[C];if(typeof A=="string")c+=A;else if(A){var m=IS(Er(A,t,n,o));a=_s(a,m+C),c+=m}}if(c){var p=jp(a>>>0);n.hasNameForId(this.componentId,p)||n.insertRules(this.componentId,p,o(c,".".concat(p),void 0,this.componentId)),i=Jr(i,p)}}return i},e}(),ew=Ee.createContext(void 0);ew.Consumer;var Ah={};function SQ(e,t,n){var o=m0(e),i=e,r=!uh(e),s=t.attrs,I=s===void 0?SA:s,a=t.componentId,c=a===void 0?function(v,V){var X=typeof v!="string"?"sc":gS(v);Ah[X]=(Ah[X]||0)+1;var w="".concat(X,"-").concat(jD(BA+X+Ah[X]));return V?"".concat(V,"-").concat(w):w}(t.displayName,t.parentComponentId):a,C=t.displayName,A=C===void 0?function(v){return uh(v)?"styled.".concat(v):"Styled(".concat(_D(v),")")}(e):C,m=t.displayName&&t.componentId?"".concat(gS(t.displayName),"-").concat(t.componentId):t.componentId||c,p=o&&i.attrs?i.attrs.concat(I).filter(Boolean):I,b=t.shouldForwardProp;if(o&&i.shouldForwardProp){var G=i.shouldForwardProp;if(t.shouldForwardProp){var W=t.shouldForwardProp;b=function(v,V){return G(v,V)&&W(v,V)}}else b=G}var Z=new BQ(n,m,o?i.componentStyle:void 0);function y(v,V){return function(X,w,R){var F=X.attrs,x=X.componentStyle,M=X.defaultProps,Q=X.foldedComponentIds,$=X.styledComponentId,_=X.target,ne=Ee.useContext(ew),ee=dS(),te=X.shouldForwardProp||ee.shouldForwardProp,N=UD(w,ne,M)||xl,j=function(ue,ie,Ye){for(var Ue,je=go(go({},ie),{className:void 0,theme:Ye}),ft=0;ft<ue.length;ft+=1){var Ke=Nl(Ue=ue[ft])?Ue(je):Ue;for(var Le in Ke)je[Le]=Le==="className"?Jr(je[Le],Ke[Le]):Le==="style"?go(go({},je[Le]),Ke[Le]):Ke[Le]}return ie.className&&(je.className=Jr(je.className,ie.className)),je}(F,w,N),P=j.as||_,ae={};for(var Ie in j)j[Ie]===void 0||Ie[0]==="$"||Ie==="as"||Ie==="theme"&&j.theme===N||(Ie==="forwardedAs"?ae.as=j.forwardedAs:te&&!te(Ie,P)||(ae[Ie]=j[Ie]));var ye=function(ue,ie){var Ye=dS(),Ue=ue.generateAndInjectStyles(ie,Ye.styleSheet,Ye.stylis);return Ue}(x,j),re=Jr(Q,$);return ye&&(re+=" "+ye),j.className&&(re+=" "+j.className),ae[uh(P)&&!Mk.has(P)?"class":"className"]=re,ae.ref=R,B.createElement(P,ae)}(f,v,V)}y.displayName=A;var f=Ee.forwardRef(y);return f.attrs=p,f.componentStyle=Z,f.displayName=A,f.shouldForwardProp=b,f.foldedComponentIds=o?Jr(i.foldedComponentIds,i.styledComponentId):"",f.styledComponentId=m,f.target=o?i.target:e,Object.defineProperty(f,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(v){this._foldedDefaultProps=o?function(V){for(var X=[],w=1;w<arguments.length;w++)X[w-1]=arguments[w];for(var R=0,F=X;R<F.length;R++)_p(V,F[R],!0);return V}({},i.defaultProps,v):v}}),h0(f,function(){return".".concat(f.styledComponentId)}),r&&Qk(f,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),f}function AS(e,t){for(var n=[e[0]],o=0,i=t.length;o<i;o+=1)n.push(t[o],e[o+1]);return n}var mS=function(e){return Object.assign(e,{isCss:!0})};function vQ(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Nl(e)||zI(e))return mS(Er(AS(SA,Ed([e],t,!0))));var o=e;return t.length===0&&o.length===1&&typeof o[0]=="string"?Er(o):mS(Er(AS(o,t)))}function qp(e,t,n){if(n===void 0&&(n=xl),!t)throw dc(1,t);var o=function(i){for(var r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];return e(t,n,vQ.apply(void 0,Ed([i],r,!1)))};return o.attrs=function(i){return qp(e,t,go(go({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},o.withConfig=function(i){return qp(e,t,go(go({},n),i))},o}var tw=function(e){return qp(SQ,e)},Vt=tw;Mk.forEach(function(e){Vt[e]=tw(e)});function nw(e){return Mi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m350.54 148.68-26.62-42.06C318.31 100.08 310.62 96 302 96h-92c-8.62 0-16.31 4.08-21.92 10.62l-26.62 42.06C155.85 155.23 148.62 160 140 160H80a32 32 0 0 0-32 32v192a32 32 0 0 0 32 32h352a32 32 0 0 0 32-32V192a32 32 0 0 0-32-32h-59c-8.65 0-16.85-4.77-22.46-11.32z"},child:[]},{tag:"circle",attr:{cx:"256",cy:"272",r:"80",fill:"none",strokeMiterlimit:"10",strokeWidth:"32"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M124 158v-22h-24v22"},child:[]}]})(e)}/*!
* sweetalert2 v11.14.3
* Released under the MIT License.
*/function ow(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function WQ(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function hS(e,t){return e.get(ow(e,t))}function VQ(e,t,n){WQ(e,t),t.set(e,n)}function RQ(e,t,n){return e.set(ow(e,t),n),n}const kQ=100,Se={},wQ=()=>{Se.previousActiveElement instanceof HTMLElement?(Se.previousActiveElement.focus(),Se.previousActiveElement=null):document.body&&document.body.focus()},XQ=e=>new Promise(t=>{if(!e)return t();const n=window.scrollX,o=window.scrollY;Se.restoreFocusTimeout=setTimeout(()=>{wQ(),t()},kQ),window.scrollTo(n,o)}),iw="swal2-",JQ=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],U=JQ.reduce((e,t)=>(e[t]=iw+t,e),{}),YQ=["success","warning","info","question","error"],Td=YQ.reduce((e,t)=>(e[t]=iw+t,e),{}),gw="SweetAlert2:",p0=e=>e.charAt(0).toUpperCase()+e.slice(1),mo=e=>{console.warn(`${gw} ${typeof e=="object"?e.join(" "):e}`)},ss=e=>{console.error(`${gw} ${e}`)},pS=[],HQ=e=>{pS.includes(e)||(pS.push(e),mo(e))},rw=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;HQ(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},vA=e=>typeof e=="function"?e():e,b0=e=>e&&typeof e.toPromise=="function",uc=e=>b0(e)?e.toPromise():Promise.resolve(e),f0=e=>e&&Promise.resolve(e)===e,ho=()=>document.body.querySelector(`.${U.container}`),Ac=e=>{const t=ho();return t?t.querySelector(e):null},Yo=e=>Ac(`.${e}`),Ct=()=>Yo(U.popup),mc=()=>Yo(U.icon),xQ=()=>Yo(U["icon-content"]),sw=()=>Yo(U.title),Z0=()=>Yo(U["html-container"]),lw=()=>Yo(U.image),y0=()=>Yo(U["progress-steps"]),WA=()=>Yo(U["validation-message"]),Fi=()=>Ac(`.${U.actions} .${U.confirm}`),na=()=>Ac(`.${U.actions} .${U.cancel}`),ls=()=>Ac(`.${U.actions} .${U.deny}`),NQ=()=>Yo(U["input-label"]),oa=()=>Ac(`.${U.loader}`),hc=()=>Yo(U.actions),aw=()=>Yo(U.footer),VA=()=>Yo(U["timer-progress-bar"]),G0=()=>Yo(U.close),FQ=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,B0=()=>{const e=Ct();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(t).sort((r,s)=>{const I=parseInt(r.getAttribute("tabindex")||"0"),a=parseInt(s.getAttribute("tabindex")||"0");return I>a?1:I<a?-1:0}),o=e.querySelectorAll(FQ),i=Array.from(o).filter(r=>r.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(i))].filter(r=>Io(r))},S0=()=>rg(document.body,U.shown)&&!rg(document.body,U["toast-shown"])&&!rg(document.body,U["no-backdrop"]),RA=()=>{const e=Ct();return e?rg(e,U.toast):!1},KQ=()=>{const e=Ct();return e?e.hasAttribute("data-loading"):!1},Ho=(e,t)=>{if(e.textContent="",t){const o=new DOMParser().parseFromString(t,"text/html"),i=o.querySelector("head");i&&Array.from(i.childNodes).forEach(s=>{e.appendChild(s)});const r=o.querySelector("body");r&&Array.from(r.childNodes).forEach(s=>{s instanceof HTMLVideoElement||s instanceof HTMLAudioElement?e.appendChild(s.cloneNode(!0)):e.appendChild(s)})}},rg=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let o=0;o<n.length;o++)if(!e.classList.contains(n[o]))return!1;return!0},EQ=(e,t)=>{Array.from(e.classList).forEach(n=>{!Object.values(U).includes(n)&&!Object.values(Td).includes(n)&&!Object.values(t.showClass||{}).includes(n)&&e.classList.remove(n)})},Vo=(e,t,n)=>{if(EQ(e,t),!t.customClass)return;const o=t.customClass[n];if(o){if(typeof o!="string"&&!o.forEach){mo(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof o}"`);return}nt(e,o)}},kA=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${U.popup} > .${U[t]}`);case"checkbox":return e.querySelector(`.${U.popup} > .${U.checkbox} input`);case"radio":return e.querySelector(`.${U.popup} > .${U.radio} input:checked`)||e.querySelector(`.${U.popup} > .${U.radio} input:first-child`);case"range":return e.querySelector(`.${U.popup} > .${U.range} input`);default:return e.querySelector(`.${U.popup} > .${U.input}`)}},Iw=e=>{if(e.focus(),e.type!=="file"){const t=e.value;e.value="",e.value=t}},cw=(e,t,n)=>{!e||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(o=>{Array.isArray(e)?e.forEach(i=>{n?i.classList.add(o):i.classList.remove(o)}):n?e.classList.add(o):e.classList.remove(o)}))},nt=(e,t)=>{cw(e,t,!0)},Ki=(e,t)=>{cw(e,t,!1)},xg=(e,t)=>{const n=Array.from(e.children);for(let o=0;o<n.length;o++){const i=n[o];if(i instanceof HTMLElement&&rg(i,t))return i}},Mr=(e,t,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?e.style.setProperty(t,typeof n=="number"?`${n}px`:n):e.style.removeProperty(t)},hn=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";e&&(e.style.display=t)},En=e=>{e&&(e.style.display="none")},v0=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";e&&new MutationObserver(()=>{pc(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},bS=(e,t,n,o)=>{const i=e.querySelector(t);i&&i.style.setProperty(n,o)},pc=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";t?hn(e,n):En(e)},Io=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),MQ=()=>!Io(Fi())&&!Io(ls())&&!Io(na()),fS=e=>e.scrollHeight>e.clientHeight,Cw=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),o=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||o>0},W0=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=VA();n&&Io(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${e/1e3}s linear`,n.style.width="0%"},10))},LQ=()=>{const e=VA();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=parseInt(window.getComputedStyle(e).width),o=t/n*100;e.style.width=`${o}%`},zQ=()=>typeof window>"u"||typeof document>"u",TQ=`
 <div aria-labelledby="${U.title}" aria-describedby="${U["html-container"]}" class="${U.popup}" tabindex="-1">
   <button type="button" class="${U.close}"></button>
   <ul class="${U["progress-steps"]}"></ul>
   <div class="${U.icon}"></div>
   <img class="${U.image}" />
   <h2 class="${U.title}" id="${U.title}"></h2>
   <div class="${U["html-container"]}" id="${U["html-container"]}"></div>
   <input class="${U.input}" id="${U.input}" />
   <input type="file" class="${U.file}" />
   <div class="${U.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${U.select}" id="${U.select}"></select>
   <div class="${U.radio}"></div>
   <label class="${U.checkbox}">
     <input type="checkbox" id="${U.checkbox}" />
     <span class="${U.label}"></span>
   </label>
   <textarea class="${U.textarea}" id="${U.textarea}"></textarea>
   <div class="${U["validation-message"]}" id="${U["validation-message"]}"></div>
   <div class="${U.actions}">
     <div class="${U.loader}"></div>
     <button type="button" class="${U.confirm}"></button>
     <button type="button" class="${U.deny}"></button>
     <button type="button" class="${U.cancel}"></button>
   </div>
   <div class="${U.footer}"></div>
   <div class="${U["timer-progress-bar-container"]}">
     <div class="${U["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),UQ=()=>{const e=ho();return e?(e.remove(),Ki([document.documentElement,document.body],[U["no-backdrop"],U["toast-shown"],U["has-column"]]),!0):!1},pr=()=>{Se.currentInstance.resetValidationMessage()},DQ=()=>{const e=Ct(),t=xg(e,U.input),n=xg(e,U.file),o=e.querySelector(`.${U.range} input`),i=e.querySelector(`.${U.range} output`),r=xg(e,U.select),s=e.querySelector(`.${U.checkbox} input`),I=xg(e,U.textarea);t.oninput=pr,n.onchange=pr,r.onchange=pr,s.onchange=pr,I.oninput=pr,o.oninput=()=>{pr(),i.value=o.value},o.onchange=()=>{pr(),i.value=o.value}},QQ=e=>typeof e=="string"?document.querySelector(e):e,PQ=e=>{const t=Ct();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},jQ=e=>{window.getComputedStyle(e).direction==="rtl"&&nt(ho(),U.rtl)},_Q=e=>{const t=UQ();if(zQ()){ss("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=U.container,t&&nt(n,U["no-transition"]),Ho(n,TQ);const o=QQ(e.target);o.appendChild(n),PQ(e),jQ(o),DQ()},V0=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):typeof e=="object"?OQ(e,t):e&&Ho(t,e)},OQ=(e,t)=>{e.jquery?qQ(t,e):Ho(t,e.toString())},qQ=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},$Q=(e,t)=>{const n=hc(),o=oa();!n||!o||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?En(n):hn(n),Vo(n,t,"actions"),eP(n,o,t),Ho(o,t.loaderHtml||""),Vo(o,t,"loader"))};function eP(e,t,n){const o=Fi(),i=ls(),r=na();!o||!i||!r||(mh(o,"confirm",n),mh(i,"deny",n),mh(r,"cancel",n),tP(o,i,r,n),n.reverseButtons&&(n.toast?(e.insertBefore(r,o),e.insertBefore(i,o)):(e.insertBefore(r,t),e.insertBefore(i,t),e.insertBefore(o,t))))}function tP(e,t,n,o){if(!o.buttonsStyling){Ki([e,t,n],U.styled);return}nt([e,t,n],U.styled),o.confirmButtonColor&&(e.style.backgroundColor=o.confirmButtonColor,nt(e,U["default-outline"])),o.denyButtonColor&&(t.style.backgroundColor=o.denyButtonColor,nt(t,U["default-outline"])),o.cancelButtonColor&&(n.style.backgroundColor=o.cancelButtonColor,nt(n,U["default-outline"]))}function mh(e,t,n){const o=p0(t);pc(e,n[`show${o}Button`],"inline-block"),Ho(e,n[`${t}ButtonText`]||""),e.setAttribute("aria-label",n[`${t}ButtonAriaLabel`]||""),e.className=U[t],Vo(e,n,`${t}Button`)}const nP=(e,t)=>{const n=G0();n&&(Ho(n,t.closeButtonHtml||""),Vo(n,t,"closeButton"),pc(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel||""))},oP=(e,t)=>{const n=ho();n&&(iP(n,t.backdrop),gP(n,t.position),rP(n,t.grow),Vo(n,t,"container"))};function iP(e,t){typeof t=="string"?e.style.background=t:t||nt([document.documentElement,document.body],U["no-backdrop"])}function gP(e,t){t&&(t in U?nt(e,U[t]):(mo('The "position" parameter is not valid, defaulting to "center"'),nt(e,U.center)))}function rP(e,t){t&&nt(e,U[`grow-${t}`])}var Gt={innerParams:new WeakMap,domCache:new WeakMap};const sP=["input","file","range","select","radio","checkbox","textarea"],lP=(e,t)=>{const n=Ct();if(!n)return;const o=Gt.innerParams.get(e),i=!o||t.input!==o.input;sP.forEach(r=>{const s=xg(n,U[r]);s&&(cP(r,t.inputAttributes),s.className=U[r],i&&En(s))}),t.input&&(i&&aP(t),CP(t))},aP=e=>{if(!e.input)return;if(!Tt[e.input]){ss(`Unexpected type of input! Expected ${Object.keys(Tt).join(" | ")}, got "${e.input}"`);return}const t=dw(e.input);if(!t)return;const n=Tt[e.input](t,e);hn(t),e.inputAutoFocus&&setTimeout(()=>{Iw(n)})},IP=e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["id","type","value","style"].includes(n)||e.removeAttribute(n)}},cP=(e,t)=>{const n=Ct();if(!n)return;const o=kA(n,e);if(o){IP(o);for(const i in t)o.setAttribute(i,t[i])}},CP=e=>{if(!e.input)return;const t=dw(e.input);t&&Vo(t,e,"input")},R0=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},bc=(e,t,n)=>{if(n.inputLabel){const o=document.createElement("label"),i=U["input-label"];o.setAttribute("for",e.id),o.className=i,typeof n.customClass=="object"&&nt(o,n.customClass.inputLabel),o.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",o)}},dw=e=>{const t=Ct();if(t)return xg(t,U[e]||U.input)},Ud=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:f0(t)||mo(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},Tt={};Tt.text=Tt.email=Tt.password=Tt.number=Tt.tel=Tt.url=Tt.search=Tt.date=Tt["datetime-local"]=Tt.time=Tt.week=Tt.month=(e,t)=>(Ud(e,t.inputValue),bc(e,e,t),R0(e,t),e.type=t.input,e);Tt.file=(e,t)=>(bc(e,e,t),R0(e,t),e);Tt.range=(e,t)=>{const n=e.querySelector("input"),o=e.querySelector("output");return Ud(n,t.inputValue),n.type=t.input,Ud(o,t.inputValue),bc(n,e,t),e};Tt.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");Ho(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return bc(e,e,t),e};Tt.radio=e=>(e.textContent="",e);Tt.checkbox=(e,t)=>{const n=kA(Ct(),"checkbox");n.value="1",n.checked=!!t.inputValue;const o=e.querySelector("span");return Ho(o,t.inputPlaceholder||t.inputLabel),n};Tt.textarea=(e,t)=>{Ud(e,t.inputValue),R0(e,t),bc(e,e,t);const n=o=>parseInt(window.getComputedStyle(o).marginLeft)+parseInt(window.getComputedStyle(o).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const o=parseInt(window.getComputedStyle(Ct()).width),i=()=>{if(!document.body.contains(e))return;const r=e.offsetWidth+n(e);r>o?Ct().style.width=`${r}px`:Mr(Ct(),"width",t.width)};new MutationObserver(i).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const dP=(e,t)=>{const n=Z0();n&&(v0(n),Vo(n,t,"htmlContainer"),t.html?(V0(t.html,n),hn(n,"block")):t.text?(n.textContent=t.text,hn(n,"block")):En(n),lP(e,t))},uP=(e,t)=>{const n=aw();n&&(v0(n),pc(n,t.footer,"block"),t.footer&&V0(t.footer,n),Vo(n,t,"footer"))},AP=(e,t)=>{const n=Gt.innerParams.get(e),o=mc();if(o){if(n&&t.icon===n.icon){yS(o,t),ZS(o,t);return}if(!t.icon&&!t.iconHtml){En(o);return}if(t.icon&&Object.keys(Td).indexOf(t.icon)===-1){ss(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),En(o);return}hn(o),yS(o,t),ZS(o,t),nt(o,t.showClass&&t.showClass.icon)}},ZS=(e,t)=>{for(const[n,o]of Object.entries(Td))t.icon!==n&&Ki(e,o);nt(e,t.icon&&Td[t.icon]),bP(e,t),mP(),Vo(e,t,"icon")},mP=()=>{const e=Ct();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let o=0;o<n.length;o++)n[o].style.backgroundColor=t},hP=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,pP=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,yS=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let n=e.innerHTML,o="";t.iconHtml?o=GS(t.iconHtml):t.icon==="success"?(o=hP,n=n.replace(/ style=".*?"/g,"")):t.icon==="error"?o=pP:t.icon&&(o=GS({question:"?",warning:"!",info:"i"}[t.icon])),n.trim()!==o.trim()&&Ho(e,o)},bP=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])bS(e,n,"background-color",t.iconColor);bS(e,".swal2-success-ring","border-color",t.iconColor)}},GS=e=>`<div class="${U["icon-content"]}">${e}</div>`,fP=(e,t)=>{const n=lw();if(n){if(!t.imageUrl){En(n);return}hn(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt||""),Mr(n,"width",t.imageWidth),Mr(n,"height",t.imageHeight),n.className=U.image,Vo(n,t,"image")}},ZP=(e,t)=>{const n=ho(),o=Ct();if(!(!n||!o)){if(t.toast){Mr(n,"width",t.width),o.style.width="100%";const i=oa();i&&o.insertBefore(i,mc())}else Mr(o,"width",t.width);Mr(o,"padding",t.padding),t.color&&(o.style.color=t.color),t.background&&(o.style.background=t.background),En(WA()),yP(o,t)}},yP=(e,t)=>{const n=t.showClass||{};e.className=`${U.popup} ${Io(e)?n.popup:""}`,t.toast?(nt([document.documentElement,document.body],U["toast-shown"]),nt(e,U.toast)):nt(e,U.modal),Vo(e,t,"popup"),typeof t.customClass=="string"&&nt(e,t.customClass),t.icon&&nt(e,U[`icon-${t.icon}`])},GP=(e,t)=>{const n=y0();if(!n)return;const{progressSteps:o,currentProgressStep:i}=t;if(!o||o.length===0||i===void 0){En(n);return}hn(n),n.textContent="",i>=o.length&&mo("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),o.forEach((r,s)=>{const I=BP(r);if(n.appendChild(I),s===i&&nt(I,U["active-progress-step"]),s!==o.length-1){const a=SP(t);n.appendChild(a)}})},BP=e=>{const t=document.createElement("li");return nt(t,U["progress-step"]),Ho(t,e),t},SP=e=>{const t=document.createElement("li");return nt(t,U["progress-step-line"]),e.progressStepsDistance&&Mr(t,"width",e.progressStepsDistance),t},vP=(e,t)=>{const n=sw();n&&(v0(n),pc(n,t.title||t.titleText,"block"),t.title&&V0(t.title,n),t.titleText&&(n.innerText=t.titleText),Vo(n,t,"title"))},uw=(e,t)=>{ZP(e,t),oP(e,t),GP(e,t),AP(e,t),fP(e,t),vP(e,t),nP(e,t),dP(e,t),$Q(e,t),uP(e,t);const n=Ct();typeof t.didRender=="function"&&n&&t.didRender(n),Se.eventEmitter.emit("didRender",n)},WP=()=>Io(Ct()),Aw=()=>{var e;return(e=Fi())===null||e===void 0?void 0:e.click()},VP=()=>{var e;return(e=ls())===null||e===void 0?void 0:e.click()},RP=()=>{var e;return(e=na())===null||e===void 0?void 0:e.click()},ia=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),mw=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},kP=(e,t,n)=>{mw(e),t.toast||(e.keydownHandler=o=>XP(t,o,n),e.keydownTarget=t.keydownListenerCapture?window:Ct(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},$p=(e,t)=>{var n;const o=B0();if(o.length){e=e+t,e===o.length?e=0:e===-1&&(e=o.length-1),o[e].focus();return}(n=Ct())===null||n===void 0||n.focus()},hw=["ArrowRight","ArrowDown"],wP=["ArrowLeft","ArrowUp"],XP=(e,t,n)=>{e&&(t.isComposing||t.keyCode===229||(e.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?JP(t,e):t.key==="Tab"?YP(t):[...hw,...wP].includes(t.key)?HP(t.key):t.key==="Escape"&&xP(t,e,n)))},JP=(e,t)=>{if(!vA(t.allowEnterKey))return;const n=kA(Ct(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;Aw(),e.preventDefault()}},YP=e=>{const t=e.target,n=B0();let o=-1;for(let i=0;i<n.length;i++)if(t===n[i]){o=i;break}e.shiftKey?$p(o,-1):$p(o,1),e.stopPropagation(),e.preventDefault()},HP=e=>{const t=hc(),n=Fi(),o=ls(),i=na();if(!t||!n||!o||!i)return;const r=[n,o,i];if(document.activeElement instanceof HTMLElement&&!r.includes(document.activeElement))return;const s=hw.includes(e)?"nextElementSibling":"previousElementSibling";let I=document.activeElement;if(I){for(let a=0;a<t.children.length;a++){if(I=I[s],!I)return;if(I instanceof HTMLButtonElement&&Io(I))break}I instanceof HTMLButtonElement&&I.focus()}},xP=(e,t,n)=>{vA(t.allowEscapeKey)&&(e.preventDefault(),n(ia.esc))};var Fl={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const NP=()=>{const e=ho();Array.from(document.body.children).forEach(n=>{n.contains(e)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},pw=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},bw=typeof window<"u"&&!!window.GestureEvent,FP=()=>{if(bw&&!rg(document.body,U.iosfix)){const e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,nt(document.body,U.iosfix),KP()}},KP=()=>{const e=ho();if(!e)return;let t;e.ontouchstart=n=>{t=EP(n)},e.ontouchmove=n=>{t&&(n.preventDefault(),n.stopPropagation())}},EP=e=>{const t=e.target,n=ho(),o=Z0();return!n||!o||MP(e)||LP(e)?!1:t===n||!fS(n)&&t instanceof HTMLElement&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(fS(o)&&o.contains(t))},MP=e=>e.touches&&e.touches.length&&e.touches[0].touchType==="stylus",LP=e=>e.touches&&e.touches.length>1,zP=()=>{if(rg(document.body,U.iosfix)){const e=parseInt(document.body.style.top,10);Ki(document.body,U.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},TP=()=>{const e=document.createElement("div");e.className=U["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let Al=null;const UP=e=>{Al===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(Al=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Al+TP()}px`)},DP=()=>{Al!==null&&(document.body.style.paddingRight=`${Al}px`,Al=null)};function fw(e,t,n,o){RA()?BS(e,o):(XQ(n).then(()=>BS(e,o)),mw(Se)),bw?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),S0()&&(DP(),zP(),pw()),QP()}function QP(){Ki([document.documentElement,document.body],[U.shown,U["height-auto"],U["no-backdrop"],U["toast-shown"]])}function Ng(e){e=jP(e);const t=Fl.swalPromiseResolve.get(this),n=PP(this);this.isAwaitingPromise?e.isDismissed||(fc(this),t(e)):n&&t(e)}const PP=e=>{const t=Ct();if(!t)return!1;const n=Gt.innerParams.get(e);if(!n||rg(t,n.hideClass.popup))return!1;Ki(t,n.showClass.popup),nt(t,n.hideClass.popup);const o=ho();return Ki(o,n.showClass.backdrop),nt(o,n.hideClass.backdrop),_P(e,t,n),!0};function Zw(e){const t=Fl.swalPromiseReject.get(this);fc(this),t&&t(e)}const fc=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,Gt.innerParams.get(e)||e._destroy())},jP=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),_P=(e,t,n)=>{const o=ho(),i=Cw(t);typeof n.willClose=="function"&&n.willClose(t),Se.eventEmitter.emit("willClose",t),i?OP(e,t,o,n.returnFocus,n.didClose):fw(e,o,n.returnFocus,n.didClose)},OP=(e,t,n,o,i)=>{Se.swalCloseEventFinishedCallback=fw.bind(null,e,n,o,i);const r=function(s){s.target===t&&(Se.swalCloseEventFinishedCallback(),delete Se.swalCloseEventFinishedCallback,t.removeEventListener("animationend",r),t.removeEventListener("transitionend",r))};t.addEventListener("animationend",r),t.addEventListener("transitionend",r)},BS=(e,t)=>{setTimeout(()=>{typeof t=="function"&&t.bind(e.params)(),Se.eventEmitter.emit("didClose"),e._destroy&&e._destroy()})},Kl=e=>{let t=Ct();if(t||new Pn,t=Ct(),!t)return;const n=oa();RA()?En(mc()):qP(t,e),hn(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},qP=(e,t)=>{const n=hc(),o=oa();!n||!o||(!t&&Io(Fi())&&(t=Fi()),hn(n),t&&(En(t),o.setAttribute("data-button-to-replace",t.className),n.insertBefore(o,t)),nt([e,n],U.loading))},$P=(e,t)=>{t.input==="select"||t.input==="radio"?ij(e,t):["text","email","number","tel","textarea"].some(n=>n===t.input)&&(b0(t.inputValue)||f0(t.inputValue))&&(Kl(Fi()),gj(e,t))},ej=(e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return tj(n);case"radio":return nj(n);case"file":return oj(n);default:return t.inputAutoTrim?n.value.trim():n.value}},tj=e=>e.checked?1:0,nj=e=>e.checked?e.value:null,oj=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,ij=(e,t)=>{const n=Ct();if(!n)return;const o=i=>{t.input==="select"?rj(n,Dd(i),t):t.input==="radio"&&sj(n,Dd(i),t)};b0(t.inputOptions)||f0(t.inputOptions)?(Kl(Fi()),uc(t.inputOptions).then(i=>{e.hideLoading(),o(i)})):typeof t.inputOptions=="object"?o(t.inputOptions):ss(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},gj=(e,t)=>{const n=e.getInput();n&&(En(n),uc(t.inputValue).then(o=>{n.value=t.input==="number"?`${parseFloat(o)||0}`:`${o}`,hn(n),n.focus(),e.hideLoading()}).catch(o=>{ss(`Error in inputValue promise: ${o}`),n.value="",hn(n),n.focus(),e.hideLoading()}))};function rj(e,t,n){const o=xg(e,U.select);if(!o)return;const i=(r,s,I)=>{const a=document.createElement("option");a.value=I,Ho(a,s),a.selected=yw(I,n.inputValue),r.appendChild(a)};t.forEach(r=>{const s=r[0],I=r[1];if(Array.isArray(I)){const a=document.createElement("optgroup");a.label=s,a.disabled=!1,o.appendChild(a),I.forEach(c=>i(a,c[1],c[0]))}else i(o,I,s)}),o.focus()}function sj(e,t,n){const o=xg(e,U.radio);if(!o)return;t.forEach(r=>{const s=r[0],I=r[1],a=document.createElement("input"),c=document.createElement("label");a.type="radio",a.name=U.radio,a.value=s,yw(s,n.inputValue)&&(a.checked=!0);const C=document.createElement("span");Ho(C,I),C.className=U.label,c.appendChild(a),c.appendChild(C),o.appendChild(c)});const i=o.querySelectorAll("input");i.length&&i[0].focus()}const Dd=e=>{const t=[];return e instanceof Map?e.forEach((n,o)=>{let i=n;typeof i=="object"&&(i=Dd(i)),t.push([o,i])}):Object.keys(e).forEach(n=>{let o=e[n];typeof o=="object"&&(o=Dd(o)),t.push([n,o])}),t},yw=(e,t)=>!!t&&t.toString()===e.toString(),lj=e=>{const t=Gt.innerParams.get(e);e.disableButtons(),t.input?Gw(e,"confirm"):w0(e,!0)},aj=e=>{const t=Gt.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?Gw(e,"deny"):k0(e,!1)},Ij=(e,t)=>{e.disableButtons(),t(ia.cancel)},Gw=(e,t)=>{const n=Gt.innerParams.get(e);if(!n.input){ss(`The "input" parameter is needed to be set when using returnInputValueOn${p0(t)}`);return}const o=e.getInput(),i=ej(e,n);n.inputValidator?cj(e,i,t):o&&!o.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||o.validationMessage)):t==="deny"?k0(e,i):w0(e,i)},cj=(e,t,n)=>{const o=Gt.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>uc(o.inputValidator(t,o.validationMessage))).then(r=>{e.enableButtons(),e.enableInput(),r?e.showValidationMessage(r):n==="deny"?k0(e,t):w0(e,t)})},k0=(e,t)=>{const n=Gt.innerParams.get(e||void 0);n.showLoaderOnDeny&&Kl(ls()),n.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>uc(n.preDeny(t,n.validationMessage))).then(i=>{i===!1?(e.hideLoading(),fc(e)):e.close({isDenied:!0,value:typeof i>"u"?t:i})}).catch(i=>Bw(e||void 0,i))):e.close({isDenied:!0,value:t})},SS=(e,t)=>{e.close({isConfirmed:!0,value:t})},Bw=(e,t)=>{e.rejectPromise(t)},w0=(e,t)=>{const n=Gt.innerParams.get(e||void 0);n.showLoaderOnConfirm&&Kl(),n.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>uc(n.preConfirm(t,n.validationMessage))).then(i=>{Io(WA())||i===!1?(e.hideLoading(),fc(e)):SS(e,typeof i>"u"?t:i)}).catch(i=>Bw(e||void 0,i))):SS(e,t)};function Qd(){const e=Gt.innerParams.get(this);if(!e)return;const t=Gt.domCache.get(this);En(t.loader),RA()?e.icon&&hn(mc()):Cj(t),Ki([t.popup,t.actions],U.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const Cj=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?hn(t[0],"inline-block"):MQ()&&En(e.actions)};function Sw(){const e=Gt.innerParams.get(this),t=Gt.domCache.get(this);return t?kA(t.popup,e.input):null}function vw(e,t,n){const o=Gt.domCache.get(e);t.forEach(i=>{o[i].disabled=n})}function Ww(e,t){const n=Ct();if(!(!n||!e))if(e.type==="radio"){const o=n.querySelectorAll(`[name="${U.radio}"]`);for(let i=0;i<o.length;i++)o[i].disabled=t}else e.disabled=t}function Vw(){vw(this,["confirmButton","denyButton","cancelButton"],!1)}function Rw(){vw(this,["confirmButton","denyButton","cancelButton"],!0)}function kw(){Ww(this.getInput(),!1)}function ww(){Ww(this.getInput(),!0)}function Xw(e){const t=Gt.domCache.get(this),n=Gt.innerParams.get(this);Ho(t.validationMessage,e),t.validationMessage.className=U["validation-message"],n.customClass&&n.customClass.validationMessage&&nt(t.validationMessage,n.customClass.validationMessage),hn(t.validationMessage);const o=this.getInput();o&&(o.setAttribute("aria-invalid","true"),o.setAttribute("aria-describedby",U["validation-message"]),Iw(o),nt(o,U.inputerror))}function Jw(){const e=Gt.domCache.get(this);e.validationMessage&&En(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),Ki(t,U.inputerror))}const ml={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},dj=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],uj={allowEnterKey:void 0},Aj=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Yw=e=>Object.prototype.hasOwnProperty.call(ml,e),Hw=e=>dj.indexOf(e)!==-1,xw=e=>uj[e],mj=e=>{Yw(e)||mo(`Unknown parameter "${e}"`)},hj=e=>{Aj.includes(e)&&mo(`The parameter "${e}" is incompatible with toasts`)},pj=e=>{const t=xw(e);t&&rw(e,t)},bj=e=>{e.backdrop===!1&&e.allowOutsideClick&&mo('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in e)mj(t),e.toast&&hj(t),pj(t)};function Nw(e){const t=Ct(),n=Gt.innerParams.get(this);if(!t||rg(t,n.hideClass.popup)){mo("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const o=fj(e),i=Object.assign({},n,o);uw(this,i),Gt.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const fj=e=>{const t={};return Object.keys(e).forEach(n=>{Hw(n)?t[n]=e[n]:mo(`Invalid parameter to update: ${n}`)}),t};function Fw(){const e=Gt.domCache.get(this),t=Gt.innerParams.get(this);if(!t){Kw(this);return}e.popup&&Se.swalCloseEventFinishedCallback&&(Se.swalCloseEventFinishedCallback(),delete Se.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),Se.eventEmitter.emit("didDestroy"),Zj(this)}const Zj=e=>{Kw(e),delete e.params,delete Se.keydownHandler,delete Se.keydownTarget,delete Se.currentInstance},Kw=e=>{e.isAwaitingPromise?(hh(Gt,e),e.isAwaitingPromise=!0):(hh(Fl,e),hh(Gt,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},hh=(e,t)=>{for(const n in e)e[n].delete(t)};var yj=Object.freeze({__proto__:null,_destroy:Fw,close:Ng,closeModal:Ng,closePopup:Ng,closeToast:Ng,disableButtons:Rw,disableInput:ww,disableLoading:Qd,enableButtons:Vw,enableInput:kw,getInput:Sw,handleAwaitingPromise:fc,hideLoading:Qd,rejectPromise:Zw,resetValidationMessage:Jw,showValidationMessage:Xw,update:Nw});const Gj=(e,t,n)=>{e.toast?Bj(e,t,n):(vj(t),Wj(t),Vj(e,t,n))},Bj=(e,t,n)=>{t.popup.onclick=()=>{e&&(Sj(e)||e.timer||e.input)||n(ia.close)}},Sj=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let Pd=!1;const vj=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(Pd=!0)}}},Wj=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(n){e.popup.onmouseup=()=>{},(n.target===e.popup||n.target instanceof HTMLElement&&e.popup.contains(n.target))&&(Pd=!0)}}},Vj=(e,t,n)=>{t.container.onclick=o=>{if(Pd){Pd=!1;return}o.target===t.container&&vA(e.allowOutsideClick)&&n(ia.backdrop)}},Rj=e=>typeof e=="object"&&e.jquery,vS=e=>e instanceof Element||Rj(e),kj=e=>{const t={};return typeof e[0]=="object"&&!vS(e[0])?Object.assign(t,e[0]):["title","html","icon"].forEach((n,o)=>{const i=e[o];typeof i=="string"||vS(i)?t[n]=i:i!==void 0&&ss(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof i}`)}),t};function wj(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new this(...t)}function Xj(e){class t extends this{_main(o,i){return super._main(o,Object.assign({},e,i))}}return t}const Jj=()=>Se.timeout&&Se.timeout.getTimerLeft(),Ew=()=>{if(Se.timeout)return LQ(),Se.timeout.stop()},Mw=()=>{if(Se.timeout){const e=Se.timeout.start();return W0(e),e}},Yj=()=>{const e=Se.timeout;return e&&(e.running?Ew():Mw())},Hj=e=>{if(Se.timeout){const t=Se.timeout.increase(e);return W0(t,!0),t}},xj=()=>!!(Se.timeout&&Se.timeout.isRunning());let WS=!1;const eb={};function Nj(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";eb[e]=this,WS||(document.body.addEventListener("click",Fj),WS=!0)}const Fj=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const n in eb){const o=t.getAttribute(n);if(o){eb[n].fire({template:o});return}}};class Kj{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,n){const o=this._getHandlersByEventName(t);o.includes(n)||o.push(n)}once(t,n){var o=this;const i=function(){o.removeListener(t,i);for(var r=arguments.length,s=new Array(r),I=0;I<r;I++)s[I]=arguments[I];n.apply(o,s)};this.on(t,i)}emit(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];this._getHandlersByEventName(t).forEach(r=>{try{r.apply(this,o)}catch(s){console.error(s)}})}removeListener(t,n){const o=this._getHandlersByEventName(t),i=o.indexOf(n);i>-1&&o.splice(i,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}}Se.eventEmitter=new Kj;const Ej=(e,t)=>{Se.eventEmitter.on(e,t)},Mj=(e,t)=>{Se.eventEmitter.once(e,t)},Lj=(e,t)=>{if(!e){Se.eventEmitter.reset();return}t?Se.eventEmitter.removeListener(e,t):Se.eventEmitter.removeAllListeners(e)};var zj=Object.freeze({__proto__:null,argsToParams:kj,bindClickHandler:Nj,clickCancel:RP,clickConfirm:Aw,clickDeny:VP,enableLoading:Kl,fire:wj,getActions:hc,getCancelButton:na,getCloseButton:G0,getConfirmButton:Fi,getContainer:ho,getDenyButton:ls,getFocusableElements:B0,getFooter:aw,getHtmlContainer:Z0,getIcon:mc,getIconContent:xQ,getImage:lw,getInputLabel:NQ,getLoader:oa,getPopup:Ct,getProgressSteps:y0,getTimerLeft:Jj,getTimerProgressBar:VA,getTitle:sw,getValidationMessage:WA,increaseTimer:Hj,isDeprecatedParameter:xw,isLoading:KQ,isTimerRunning:xj,isUpdatableParameter:Hw,isValidParameter:Yw,isVisible:WP,mixin:Xj,off:Lj,on:Ej,once:Mj,resumeTimer:Mw,showLoading:Kl,stopTimer:Ew,toggleTimer:Yj});class Tj{constructor(t,n){this.callback=t,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const n=this.running;return n&&this.stop(),this.remaining+=t,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Lw=["swal-title","swal-html","swal-footer"],Uj=e=>{const t=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return $j(n),Object.assign(Dj(n),Qj(n),Pj(n),jj(n),_j(n),Oj(n),qj(n,Lw))},Dj=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(o=>{qr(o,["name","value"]);const i=o.getAttribute("name"),r=o.getAttribute("value");!i||!r||(typeof ml[i]=="boolean"?t[i]=r!=="false":typeof ml[i]=="object"?t[i]=JSON.parse(r):t[i]=r)}),t},Qj=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(o=>{const i=o.getAttribute("name"),r=o.getAttribute("value");!i||!r||(t[i]=new Function(`return ${r}`)())}),t},Pj=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(o=>{qr(o,["type","color","aria-label"]);const i=o.getAttribute("type");!i||!["confirm","cancel","deny"].includes(i)||(t[`${i}ButtonText`]=o.innerHTML,t[`show${p0(i)}Button`]=!0,o.hasAttribute("color")&&(t[`${i}ButtonColor`]=o.getAttribute("color")),o.hasAttribute("aria-label")&&(t[`${i}ButtonAriaLabel`]=o.getAttribute("aria-label")))}),t},jj=e=>{const t={},n=e.querySelector("swal-image");return n&&(qr(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt")||void 0)),t},_j=e=>{const t={},n=e.querySelector("swal-icon");return n&&(qr(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},Oj=e=>{const t={},n=e.querySelector("swal-input");n&&(qr(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));const o=Array.from(e.querySelectorAll("swal-input-option"));return o.length&&(t.inputOptions={},o.forEach(i=>{qr(i,["value"]);const r=i.getAttribute("value");if(!r)return;const s=i.innerHTML;t.inputOptions[r]=s})),t},qj=(e,t)=>{const n={};for(const o in t){const i=t[o],r=e.querySelector(i);r&&(qr(r,[]),n[i.replace(/^swal-/,"")]=r.innerHTML.trim())}return n},$j=e=>{const t=Lw.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(n=>{const o=n.tagName.toLowerCase();t.includes(o)||mo(`Unrecognized element <${o}>`)})},qr=(e,t)=>{Array.from(e.attributes).forEach(n=>{t.indexOf(n.name)===-1&&mo([`Unrecognized attribute "${n.name}" on <${e.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},zw=10,e4=e=>{const t=ho(),n=Ct();typeof e.willOpen=="function"&&e.willOpen(n),Se.eventEmitter.emit("willOpen",n);const i=window.getComputedStyle(document.body).overflowY;o4(t,n,e),setTimeout(()=>{t4(t,n)},zw),S0()&&(n4(t,e.scrollbarPadding,i),NP()),!RA()&&!Se.previousActiveElement&&(Se.previousActiveElement=document.activeElement),typeof e.didOpen=="function"&&setTimeout(()=>e.didOpen(n)),Se.eventEmitter.emit("didOpen",n),Ki(t,U["no-transition"])},jd=e=>{const t=Ct();if(e.target!==t)return;const n=ho();t.removeEventListener("animationend",jd),t.removeEventListener("transitionend",jd),n.style.overflowY="auto"},t4=(e,t)=>{Cw(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",jd),t.addEventListener("transitionend",jd)):e.style.overflowY="auto"},n4=(e,t,n)=>{FP(),t&&n!=="hidden"&&UP(n),setTimeout(()=>{e.scrollTop=0})},o4=(e,t,n)=>{nt(e,n.showClass.backdrop),n.animation?(t.style.setProperty("opacity","0","important"),hn(t,"grid"),setTimeout(()=>{nt(t,n.showClass.popup),t.style.removeProperty("opacity")},zw)):hn(t,"grid"),nt([document.documentElement,document.body],U.shown),n.heightAuto&&n.backdrop&&!n.toast&&nt([document.documentElement,document.body],U["height-auto"])};var VS={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function i4(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=VS.email),e.input==="url"&&(e.inputValidator=VS.url))}function g4(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(mo('Target parameter is not valid, defaulting to "body"'),e.target="body")}function r4(e){i4(e),e.showLoaderOnConfirm&&!e.preConfirm&&mo(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),g4(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),_Q(e)}let Vi;var mC=new WeakMap;class Pt{constructor(){if(VQ(this,mC,void 0),typeof window>"u")return;Vi=this;for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];const i=Object.freeze(this.constructor.argsToParams(n));this.params=i,this.isAwaitingPromise=!1,RQ(mC,this,this._main(Vi.params))}_main(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(bj(Object.assign({},n,t)),Se.currentInstance){const r=Fl.swalPromiseResolve.get(Se.currentInstance),{isAwaitingPromise:s}=Se.currentInstance;Se.currentInstance._destroy(),s||r({isDismissed:!0}),S0()&&pw()}Se.currentInstance=Vi;const o=l4(t,n);r4(o),Object.freeze(o),Se.timeout&&(Se.timeout.stop(),delete Se.timeout),clearTimeout(Se.restoreFocusTimeout);const i=a4(Vi);return uw(Vi,o),Gt.innerParams.set(Vi,o),s4(Vi,i,o)}then(t){return hS(mC,this).then(t)}finally(t){return hS(mC,this).finally(t)}}const s4=(e,t,n)=>new Promise((o,i)=>{const r=s=>{e.close({isDismissed:!0,dismiss:s})};Fl.swalPromiseResolve.set(e,o),Fl.swalPromiseReject.set(e,i),t.confirmButton.onclick=()=>{lj(e)},t.denyButton.onclick=()=>{aj(e)},t.cancelButton.onclick=()=>{Ij(e,r)},t.closeButton.onclick=()=>{r(ia.close)},Gj(n,t,r),kP(Se,n,r),$P(e,n),e4(n),I4(Se,n,r),c4(t,n),setTimeout(()=>{t.container.scrollTop=0})}),l4=(e,t)=>{const n=Uj(e),o=Object.assign({},ml,t,n,e);return o.showClass=Object.assign({},ml.showClass,o.showClass),o.hideClass=Object.assign({},ml.hideClass,o.hideClass),o.animation===!1&&(o.showClass={backdrop:"swal2-noanimation"},o.hideClass={}),o},a4=e=>{const t={popup:Ct(),container:ho(),actions:hc(),confirmButton:Fi(),denyButton:ls(),cancelButton:na(),loader:oa(),closeButton:G0(),validationMessage:WA(),progressSteps:y0()};return Gt.domCache.set(e,t),t},I4=(e,t,n)=>{const o=VA();En(o),t.timer&&(e.timeout=new Tj(()=>{n("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(hn(o),Vo(o,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&W0(t.timer)})))},c4=(e,t)=>{if(!t.toast){if(!vA(t.allowEnterKey)){rw("allowEnterKey"),u4();return}C4(e)||d4(e,t)||$p(-1,1)}},C4=e=>{const t=e.popup.querySelectorAll("[autofocus]");for(const n of t)if(n instanceof HTMLElement&&Io(n))return n.focus(),!0;return!1},d4=(e,t)=>t.focusDeny&&Io(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&Io(e.cancelButton)?(e.cancelButton.focus(),!0):t.focusConfirm&&Io(e.confirmButton)?(e.confirmButton.focus(),!0):!1,u4=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem("swal-initiation");t?(e.getTime()-Date.parse(t))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const n=document.createElement("audio");n.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",n.loop=!0,document.body.appendChild(n),setTimeout(()=>{n.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${e}`)}Pt.prototype.disableButtons=Rw;Pt.prototype.enableButtons=Vw;Pt.prototype.getInput=Sw;Pt.prototype.disableInput=ww;Pt.prototype.enableInput=kw;Pt.prototype.hideLoading=Qd;Pt.prototype.disableLoading=Qd;Pt.prototype.showValidationMessage=Xw;Pt.prototype.resetValidationMessage=Jw;Pt.prototype.close=Ng;Pt.prototype.closePopup=Ng;Pt.prototype.closeModal=Ng;Pt.prototype.closeToast=Ng;Pt.prototype.rejectPromise=Zw;Pt.prototype.update=Nw;Pt.prototype._destroy=Fw;Object.assign(Pt,zj);Object.keys(yj).forEach(e=>{Pt[e]=function(){return Vi&&Vi[e]?Vi[e](...arguments):null}});Pt.DismissReason=ia;Pt.version="11.14.3";const Pn=Pt;Pn.default=Pn;typeof document<"u"&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch{n.innerText=t}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}');const A4=Vt.div`
  position: relative;
  width: 100%;
  max-width: 100vw;
  margin: 0 auto;
`;Vt.button`
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background-color: #fff;
  color: #333;
  border: none;
  border-radius: 20px;
  padding: 10px 20px;
  font-size: 20px;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
`;const m4=Vt.canvas`
  display: none; /* Hide canvas by default */
`,h4=Vt.video`
  width: 100%;
  border-radius: 10px;
  @media (max-width: 767px) {
    height: auto;
    object-fit: cover;
    border-radius: 0;
  }
`,p4=Vt.div`
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  border: 2px dashed #ccc;
  border-radius: 10px;
  cursor: pointer;
  position: relative;
`,b4=Vt(nw)`
  font-size: 50px;
  color: #026d44;
`,f4=Vt.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
`,Z4=Vt.div`
  background: white;
  padding: 20px;
  border-radius: 10px;
  text-align: center;
`,y4=Vt.button`
  margin: 10px;
  padding: 10px 20px;
  background-color: #ffb300;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
`,G4=Vt.button`
  margin: 10px;
  padding: 10px 20px;
  background-color: #558b2f;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
`,B4=Vt.button`
  margin: 10px;
  padding: 10px 20px;
  background-color: red;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  &:hover {
    background-color: darkred; /* Change color on hover */
  }
`,S4=Vt.img`
  width: 100%;
  border-radius: 10px;
  @media (max-width: 767px) {
    height: auto;
    object-fit: cover;
    border-radius: 0;
  }
`,ga=({onCapture:e,ModuleName:t})=>{const n=B.useRef(null),o=B.useRef(null),[i,r]=B.useState(null),[s,I]=B.useState(null),[a,c]=B.useState(!1),C=async()=>{try{const W=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}});n.current&&(n.current.srcObject=W),r(W)}catch(W){console.error("Error accessing webcam",W),Pn.fire({icon:"error",title:"ไม่สามารถเข้าถึงเว็บแคมได้ กรุณาตรวจสอบการตั้งค่าและอนุญาตการเข้าถึง",position:"center",showConfirmButton:!0,confirmButtonText:"ตกลง"})}},A=()=>{i&&(i.getTracks().forEach(W=>{W.stop()}),r(null))},m=()=>{if(n.current&&o.current){const W=n.current,Z=o.current,y=Z.getContext("2d");y&&W.videoWidth&&W.videoHeight&&(Z.width=W.videoWidth,Z.height=W.videoHeight,y.drawImage(W,0,0,Z.width,Z.height),Z.toBlob(f=>{if(f){const v=new Date().toLocaleString().replace(/[/,:]/g,"-"),V=`image_${t}_${v}.jpg`,X=new File([f],V,{type:"image/jpeg"});I(URL.createObjectURL(f)),A(),e(X)}},"image/jpeg"))}},p=()=>{Pn.fire({icon:"warning",title:"ฟังก์ชันการอัพโหลดภาพยังไม่ได้เปิดใช้งาน",position:"center",showConfirmButton:!0,confirmButtonText:"ตกลง"})},b=()=>{c(!0),C()},G=()=>{c(!1),A()};return u.jsx(A4,{children:s?u.jsx(S4,{src:s,alt:"Captured"}):u.jsxs(u.Fragment,{children:[u.jsx(p4,{onClick:b,children:u.jsx(b4,{})}),a&&u.jsx(f4,{children:u.jsxs(Z4,{children:[u.jsx(h4,{ref:n,autoPlay:!0,muted:!0}),u.jsx(m4,{ref:o}),u.jsx(y4,{onClick:()=>{m(),G()},children:"ถ่ายรูป"}),u.jsx(G4,{onClick:()=>{p(),G()},children:"อัพโหลดภาพ"}),u.jsx(B4,{onClick:()=>{G()},children:"ปิด"})]})})]})})};function v4(){const e=Li({typography:{fontFamily:"Sarabun"}}),[t,n]=B.useState({username:"",password:"",fullName:"",telNumber:"",gender:"",address:"",cardID:"",photoImage:"",checkedOne:!1}),[o,i]=B.useState(!1),[r,s]=B.useState([]),[I,a]=B.useState(!0),[c,C]=B.useState(null),A=void 0,m="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",p=W=>{const{id:Z,name:y,value:f,type:v,checked:V}=W.target;n(X=>({...X,[Z||y]:v==="checkbox"?V:f}))};B.useEffect(()=>{const{username:W,password:Z,fullName:y,telNumber:f,gender:v,address:V,cardID:X,checkedOne:w}=t;i(W&&Z&&y&&f&&v&&V&&X&&w)},[t]);const b=async W=>{W.preventDefault()};B.useEffect(()=>{(async()=>{try{a(!0);const Z=await vu(A,m);s(Z),a(!1)}catch(Z){console.error("Error fetching user data:",Z),C(Z.message),a(!1)}})()},[A,m]);const G=W=>{n(Z=>({...Z,photoImage:W}))};return I?u.jsx("p",{children:"Loading..."}):c?u.jsxs("p",{children:["Error: ",c]}):u.jsxs(ir,{theme:e,children:[u.jsx(Mn,{}),u.jsx(t0,{}),u.jsxs("h1",{children:[" Hello, ",r.username]}),u.jsxs("form",{onSubmit:b,children:[u.jsx("div",{className:"container mx-auto px-4 py-8",children:u.jsxs("div",{className:"flex flex-wrap -mx-2",children:[u.jsx("div",{className:"w-full md:w-1/2 px-2",children:u.jsx(tt,{id:"username",label:"ชื่อผู้ใช้",variant:"outlined",className:"w-full bg-white",required:!0,value:t.username,onChange:p})}),u.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4 md:mt-0",children:u.jsx(tt,{id:"password",label:"รหัสผ่าน",type:"password",variant:"outlined",className:"w-full bg-white",required:!0,value:t.password,onChange:p})}),u.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:u.jsx(tt,{id:"fullName",label:"ชื่อ-นามสกุล",variant:"outlined",className:"w-full bg-white",required:!0,value:t.fullName,onChange:p})}),u.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:u.jsx(tt,{id:"telNumber",label:"เบอร์โทร",variant:"outlined",className:"w-full bg-white",required:!0,value:t.telNumber,onChange:p})}),u.jsx("div",{className:"w-full px-2 mt-4",children:u.jsxs(rs,{children:[u.jsx(AA,{children:"เพศ"}),u.jsxs(c0,{row:!0,name:"gender",value:t.gender,onChange:p,children:[u.jsx(wl,{value:"ชาย",control:u.jsx(Xl,{}),label:"ชาย"}),u.jsx(wl,{value:"หญิง",control:u.jsx(Xl,{}),label:"หญิง"})]})]})}),u.jsx("div",{className:"w-full px-2 mt-4",children:u.jsx(tt,{id:"address",placeholder:"ที่อยู่",multiline:!0,rows:4,className:"w-full bg-white",required:!0,value:t.address,onChange:p})}),u.jsx("div",{className:"w-full px-2 mt-4",children:u.jsx(tt,{id:"cardID",label:"หมายเลขบัตรประจำตัวประชาชน",variant:"outlined",className:"w-full bg-white",required:!0,value:t.cardID,onChange:p})}),u.jsx("div",{className:"w-full px-2 mt-4",children:u.jsx(ga,{onCapture:G})})]})}),u.jsxs("div",{className:"container mx-auto px-4 mt-10 mb-5",children:[u.jsx(ea,{id:"checkedOne",checked:t.checkedOne,onChange:p,required:!0,sx:{"& .MuiSvgIcon-root":{fontSize:30}}}),u.jsxs("span",{children:[u.jsx("strong",{children:"กุ๊ก"}),"ให้ความสำคัญเกี่ยวกับความปลอดภัยข้อมูลของคุณ"," ",u.jsx("span",{className:"text-left leading-loose",children:"และเพื่อให้คุณมั่นใจว่า กุ๊กมีความมุ่งมั่นที่จะให้ความคุ้มครองและดำเนินการด้วยความรับผิดชอบต่อการเก็บรวบรวม ใช้ เปิดเผย และโอนข้อมูลของคุณ กุ๊กจึงขอความยินยอมจากคุณ"})]})]}),u.jsx("div",{className:"container mx-auto px-4",children:u.jsx("button",{type:"submit",disabled:!o,className:`w-full h-12 mb-10 flex justify-center rounded-xl items-center text-white ${o?"bg-green-500":"bg-slate-300"}`,children:"บันทึกข้อมูล"})})]})]})}var hC={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var RS;function Tw(){return RS||(RS=1,function(e,t){(function(n,o){o(t)})(vW,function(n){var o="1.9.4";function i(g){var l,d,h,S;for(d=1,h=arguments.length;d<h;d++){S=arguments[d];for(l in S)g[l]=S[l]}return g}var r=Object.create||function(){function g(){}return function(l){return g.prototype=l,new g}}();function s(g,l){var d=Array.prototype.slice;if(g.bind)return g.bind.apply(g,d.call(arguments,1));var h=d.call(arguments,2);return function(){return g.apply(l,h.length?h.concat(d.call(arguments)):arguments)}}var I=0;function a(g){return"_leaflet_id"in g||(g._leaflet_id=++I),g._leaflet_id}function c(g,l,d){var h,S,k,H;return H=function(){h=!1,S&&(k.apply(d,S),S=!1)},k=function(){h?S=arguments:(g.apply(d,arguments),setTimeout(H,l),h=!0)},k}function C(g,l,d){var h=l[1],S=l[0],k=h-S;return g===h&&d?g:((g-S)%k+k)%k+S}function A(){return!1}function m(g,l){if(l===!1)return g;var d=Math.pow(10,l===void 0?6:l);return Math.round(g*d)/d}function p(g){return g.trim?g.trim():g.replace(/^\s+|\s+$/g,"")}function b(g){return p(g).split(/\s+/)}function G(g,l){Object.prototype.hasOwnProperty.call(g,"options")||(g.options=g.options?r(g.options):{});for(var d in l)g.options[d]=l[d];return g.options}function W(g,l,d){var h=[];for(var S in g)h.push(encodeURIComponent(d?S.toUpperCase():S)+"="+encodeURIComponent(g[S]));return(!l||l.indexOf("?")===-1?"?":"&")+h.join("&")}var Z=/\{ *([\w_ -]+) *\}/g;function y(g,l){return g.replace(Z,function(d,h){var S=l[h];if(S===void 0)throw new Error("No value provided for variable "+d);return typeof S=="function"&&(S=S(l)),S})}var f=Array.isArray||function(g){return Object.prototype.toString.call(g)==="[object Array]"};function v(g,l){for(var d=0;d<g.length;d++)if(g[d]===l)return d;return-1}var V="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function X(g){return window["webkit"+g]||window["moz"+g]||window["ms"+g]}var w=0;function R(g){var l=+new Date,d=Math.max(0,16-(l-w));return w=l+d,window.setTimeout(g,d)}var F=window.requestAnimationFrame||X("RequestAnimationFrame")||R,x=window.cancelAnimationFrame||X("CancelAnimationFrame")||X("CancelRequestAnimationFrame")||function(g){window.clearTimeout(g)};function M(g,l,d){if(d&&F===R)g.call(l);else return F.call(window,s(g,l))}function Q(g){g&&x.call(window,g)}var $={__proto__:null,extend:i,create:r,bind:s,get lastId(){return I},stamp:a,throttle:c,wrapNum:C,falseFn:A,formatNum:m,trim:p,splitWords:b,setOptions:G,getParamString:W,template:y,isArray:f,indexOf:v,emptyImageUrl:V,requestFn:F,cancelFn:x,requestAnimFrame:M,cancelAnimFrame:Q};function _(){}_.extend=function(g){var l=function(){G(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,h=r(d);h.constructor=l,l.prototype=h;for(var S in this)Object.prototype.hasOwnProperty.call(this,S)&&S!=="prototype"&&S!=="__super__"&&(l[S]=this[S]);return g.statics&&i(l,g.statics),g.includes&&(ne(g.includes),i.apply(null,[h].concat(g.includes))),i(h,g),delete h.statics,delete h.includes,h.options&&(h.options=d.options?r(d.options):{},i(h.options,g.options)),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var k=0,H=h._initHooks.length;k<H;k++)h._initHooks[k].call(this)}},l},_.include=function(g){var l=this.prototype.options;return i(this.prototype,g),g.options&&(this.prototype.options=l,this.mergeOptions(g.options)),this},_.mergeOptions=function(g){return i(this.prototype.options,g),this},_.addInitHook=function(g){var l=Array.prototype.slice.call(arguments,1),d=typeof g=="function"?g:function(){this[g].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function ne(g){if(!(typeof L>"u"||!L||!L.Mixin)){g=f(g)?g:[g];for(var l=0;l<g.length;l++)g[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ee={on:function(g,l,d){if(typeof g=="object")for(var h in g)this._on(h,g[h],l);else{g=b(g);for(var S=0,k=g.length;S<k;S++)this._on(g[S],l,d)}return this},off:function(g,l,d){if(!arguments.length)delete this._events;else if(typeof g=="object")for(var h in g)this._off(h,g[h],l);else{g=b(g);for(var S=arguments.length===1,k=0,H=g.length;k<H;k++)S?this._off(g[k]):this._off(g[k],l,d)}return this},_on:function(g,l,d,h){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(g,l,d)===!1){d===this&&(d=void 0);var S={fn:l,ctx:d};h&&(S.once=!0),this._events=this._events||{},this._events[g]=this._events[g]||[],this._events[g].push(S)}},_off:function(g,l,d){var h,S,k;if(this._events&&(h=this._events[g],!!h)){if(arguments.length===1){if(this._firingCount)for(S=0,k=h.length;S<k;S++)h[S].fn=A;delete this._events[g];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var H=this._listens(g,l,d);if(H!==!1){var E=h[H];this._firingCount&&(E.fn=A,this._events[g]=h=h.slice()),h.splice(H,1)}}},fire:function(g,l,d){if(!this.listens(g,d))return this;var h=i({},l,{type:g,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var S=this._events[g];if(S){this._firingCount=this._firingCount+1||1;for(var k=0,H=S.length;k<H;k++){var E=S[k],T=E.fn;E.once&&this.off(g,T,E.ctx),T.call(E.ctx||this,h)}this._firingCount--}}return d&&this._propagateEvent(h),this},listens:function(g,l,d,h){typeof g!="string"&&console.warn('"string" type argument expected');var S=l;typeof l!="function"&&(h=!!l,S=void 0,d=void 0);var k=this._events&&this._events[g];if(k&&k.length&&this._listens(g,S,d)!==!1)return!0;if(h){for(var H in this._eventParents)if(this._eventParents[H].listens(g,l,d,h))return!0}return!1},_listens:function(g,l,d){if(!this._events)return!1;var h=this._events[g]||[];if(!l)return!!h.length;d===this&&(d=void 0);for(var S=0,k=h.length;S<k;S++)if(h[S].fn===l&&h[S].ctx===d)return S;return!1},once:function(g,l,d){if(typeof g=="object")for(var h in g)this._on(h,g[h],l,!0);else{g=b(g);for(var S=0,k=g.length;S<k;S++)this._on(g[S],l,d,!0)}return this},addEventParent:function(g){return this._eventParents=this._eventParents||{},this._eventParents[a(g)]=g,this},removeEventParent:function(g){return this._eventParents&&delete this._eventParents[a(g)],this},_propagateEvent:function(g){for(var l in this._eventParents)this._eventParents[l].fire(g.type,i({layer:g.target,propagatedFrom:g.target},g),!0)}};ee.addEventListener=ee.on,ee.removeEventListener=ee.clearAllEventListeners=ee.off,ee.addOneTimeEventListener=ee.once,ee.fireEvent=ee.fire,ee.hasEventListeners=ee.listens;var te=_.extend(ee);function N(g,l,d){this.x=d?Math.round(g):g,this.y=d?Math.round(l):l}var j=Math.trunc||function(g){return g>0?Math.floor(g):Math.ceil(g)};N.prototype={clone:function(){return new N(this.x,this.y)},add:function(g){return this.clone()._add(P(g))},_add:function(g){return this.x+=g.x,this.y+=g.y,this},subtract:function(g){return this.clone()._subtract(P(g))},_subtract:function(g){return this.x-=g.x,this.y-=g.y,this},divideBy:function(g){return this.clone()._divideBy(g)},_divideBy:function(g){return this.x/=g,this.y/=g,this},multiplyBy:function(g){return this.clone()._multiplyBy(g)},_multiplyBy:function(g){return this.x*=g,this.y*=g,this},scaleBy:function(g){return new N(this.x*g.x,this.y*g.y)},unscaleBy:function(g){return new N(this.x/g.x,this.y/g.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=j(this.x),this.y=j(this.y),this},distanceTo:function(g){g=P(g);var l=g.x-this.x,d=g.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(g){return g=P(g),g.x===this.x&&g.y===this.y},contains:function(g){return g=P(g),Math.abs(g.x)<=Math.abs(this.x)&&Math.abs(g.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function P(g,l,d){return g instanceof N?g:f(g)?new N(g[0],g[1]):g==null?g:typeof g=="object"&&"x"in g&&"y"in g?new N(g.x,g.y):new N(g,l,d)}function ae(g,l){if(g)for(var d=l?[g,l]:g,h=0,S=d.length;h<S;h++)this.extend(d[h])}ae.prototype={extend:function(g){var l,d;if(!g)return this;if(g instanceof N||typeof g[0]=="number"||"x"in g)l=d=P(g);else if(g=Ie(g),l=g.min,d=g.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(g){return P((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,g)},getBottomLeft:function(){return P(this.min.x,this.max.y)},getTopRight:function(){return P(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(g){var l,d;return typeof g[0]=="number"||g instanceof N?g=P(g):g=Ie(g),g instanceof ae?(l=g.min,d=g.max):l=d=g,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(g){g=Ie(g);var l=this.min,d=this.max,h=g.min,S=g.max,k=S.x>=l.x&&h.x<=d.x,H=S.y>=l.y&&h.y<=d.y;return k&&H},overlaps:function(g){g=Ie(g);var l=this.min,d=this.max,h=g.min,S=g.max,k=S.x>l.x&&h.x<d.x,H=S.y>l.y&&h.y<d.y;return k&&H},isValid:function(){return!!(this.min&&this.max)},pad:function(g){var l=this.min,d=this.max,h=Math.abs(l.x-d.x)*g,S=Math.abs(l.y-d.y)*g;return Ie(P(l.x-h,l.y-S),P(d.x+h,d.y+S))},equals:function(g){return g?(g=Ie(g),this.min.equals(g.getTopLeft())&&this.max.equals(g.getBottomRight())):!1}};function Ie(g,l){return!g||g instanceof ae?g:new ae(g,l)}function ye(g,l){if(g)for(var d=l?[g,l]:g,h=0,S=d.length;h<S;h++)this.extend(d[h])}ye.prototype={extend:function(g){var l=this._southWest,d=this._northEast,h,S;if(g instanceof ue)h=g,S=g;else if(g instanceof ye){if(h=g._southWest,S=g._northEast,!h||!S)return this}else return g?this.extend(ie(g)||re(g)):this;return!l&&!d?(this._southWest=new ue(h.lat,h.lng),this._northEast=new ue(S.lat,S.lng)):(l.lat=Math.min(h.lat,l.lat),l.lng=Math.min(h.lng,l.lng),d.lat=Math.max(S.lat,d.lat),d.lng=Math.max(S.lng,d.lng)),this},pad:function(g){var l=this._southWest,d=this._northEast,h=Math.abs(l.lat-d.lat)*g,S=Math.abs(l.lng-d.lng)*g;return new ye(new ue(l.lat-h,l.lng-S),new ue(d.lat+h,d.lng+S))},getCenter:function(){return new ue((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ue(this.getNorth(),this.getWest())},getSouthEast:function(){return new ue(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(g){typeof g[0]=="number"||g instanceof ue||"lat"in g?g=ie(g):g=re(g);var l=this._southWest,d=this._northEast,h,S;return g instanceof ye?(h=g.getSouthWest(),S=g.getNorthEast()):h=S=g,h.lat>=l.lat&&S.lat<=d.lat&&h.lng>=l.lng&&S.lng<=d.lng},intersects:function(g){g=re(g);var l=this._southWest,d=this._northEast,h=g.getSouthWest(),S=g.getNorthEast(),k=S.lat>=l.lat&&h.lat<=d.lat,H=S.lng>=l.lng&&h.lng<=d.lng;return k&&H},overlaps:function(g){g=re(g);var l=this._southWest,d=this._northEast,h=g.getSouthWest(),S=g.getNorthEast(),k=S.lat>l.lat&&h.lat<d.lat,H=S.lng>l.lng&&h.lng<d.lng;return k&&H},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(g,l){return g?(g=re(g),this._southWest.equals(g.getSouthWest(),l)&&this._northEast.equals(g.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function re(g,l){return g instanceof ye?g:new ye(g,l)}function ue(g,l,d){if(isNaN(g)||isNaN(l))throw new Error("Invalid LatLng object: ("+g+", "+l+")");this.lat=+g,this.lng=+l,d!==void 0&&(this.alt=+d)}ue.prototype={equals:function(g,l){if(!g)return!1;g=ie(g);var d=Math.max(Math.abs(this.lat-g.lat),Math.abs(this.lng-g.lng));return d<=(l===void 0?1e-9:l)},toString:function(g){return"LatLng("+m(this.lat,g)+", "+m(this.lng,g)+")"},distanceTo:function(g){return Ue.distance(this,ie(g))},wrap:function(){return Ue.wrapLatLng(this)},toBounds:function(g){var l=180*g/40075017,d=l/Math.cos(Math.PI/180*this.lat);return re([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new ue(this.lat,this.lng,this.alt)}};function ie(g,l,d){return g instanceof ue?g:f(g)&&typeof g[0]!="object"?g.length===3?new ue(g[0],g[1],g[2]):g.length===2?new ue(g[0],g[1]):null:g==null?g:typeof g=="object"&&"lat"in g?new ue(g.lat,"lng"in g?g.lng:g.lon,g.alt):l===void 0?null:new ue(g,l,d)}var Ye={latLngToPoint:function(g,l){var d=this.projection.project(g),h=this.scale(l);return this.transformation._transform(d,h)},pointToLatLng:function(g,l){var d=this.scale(l),h=this.transformation.untransform(g,d);return this.projection.unproject(h)},project:function(g){return this.projection.project(g)},unproject:function(g){return this.projection.unproject(g)},scale:function(g){return 256*Math.pow(2,g)},zoom:function(g){return Math.log(g/256)/Math.LN2},getProjectedBounds:function(g){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(g),h=this.transformation.transform(l.min,d),S=this.transformation.transform(l.max,d);return new ae(h,S)},infinite:!1,wrapLatLng:function(g){var l=this.wrapLng?C(g.lng,this.wrapLng,!0):g.lng,d=this.wrapLat?C(g.lat,this.wrapLat,!0):g.lat,h=g.alt;return new ue(d,l,h)},wrapLatLngBounds:function(g){var l=g.getCenter(),d=this.wrapLatLng(l),h=l.lat-d.lat,S=l.lng-d.lng;if(h===0&&S===0)return g;var k=g.getSouthWest(),H=g.getNorthEast(),E=new ue(k.lat-h,k.lng-S),T=new ue(H.lat-h,H.lng-S);return new ye(E,T)}},Ue=i({},Ye,{wrapLng:[-180,180],R:6371e3,distance:function(g,l){var d=Math.PI/180,h=g.lat*d,S=l.lat*d,k=Math.sin((l.lat-g.lat)*d/2),H=Math.sin((l.lng-g.lng)*d/2),E=k*k+Math.cos(h)*Math.cos(S)*H*H,T=2*Math.atan2(Math.sqrt(E),Math.sqrt(1-E));return this.R*T}}),je=6378137,ft={R:je,MAX_LATITUDE:85.0511287798,project:function(g){var l=Math.PI/180,d=this.MAX_LATITUDE,h=Math.max(Math.min(d,g.lat),-d),S=Math.sin(h*l);return new N(this.R*g.lng*l,this.R*Math.log((1+S)/(1-S))/2)},unproject:function(g){var l=180/Math.PI;return new ue((2*Math.atan(Math.exp(g.y/this.R))-Math.PI/2)*l,g.x*l/this.R)},bounds:function(){var g=je*Math.PI;return new ae([-g,-g],[g,g])}()};function Ke(g,l,d,h){if(f(g)){this._a=g[0],this._b=g[1],this._c=g[2],this._d=g[3];return}this._a=g,this._b=l,this._c=d,this._d=h}Ke.prototype={transform:function(g,l){return this._transform(g.clone(),l)},_transform:function(g,l){return l=l||1,g.x=l*(this._a*g.x+this._b),g.y=l*(this._c*g.y+this._d),g},untransform:function(g,l){return l=l||1,new N((g.x/l-this._b)/this._a,(g.y/l-this._d)/this._c)}};function Le(g,l,d,h){return new Ke(g,l,d,h)}var He=i({},Ue,{code:"EPSG:3857",projection:ft,transformation:function(){var g=.5/(Math.PI*ft.R);return Le(g,.5,-g,.5)}()}),Re=i({},He,{code:"EPSG:900913"});function _e(g){return document.createElementNS("http://www.w3.org/2000/svg",g)}function $n(g,l){var d="",h,S,k,H,E,T;for(h=0,k=g.length;h<k;h++){for(E=g[h],S=0,H=E.length;S<H;S++)T=E[S],d+=(S?"L":"M")+T.x+" "+T.y;d+=l?Y.svg?"z":"x":""}return d||"M0 0"}var ln=document.documentElement.style,Bt="ActiveXObject"in window,zn=Bt&&!document.addEventListener,fn="msLaunchUri"in navigator&&!("documentMode"in document),st=No("webkit"),eo=No("android"),on=No("android 2")||No("android 3"),At=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),to=eo&&No("Google")&&At<537&&!("AudioNode"in window),jt=!!window.opera,an=!fn&&No("chrome"),et=No("gecko")&&!st&&!jt&&!Bt,Ge=!an&&No("safari"),Mt=No("phantom"),In="OTransition"in ln,fi=navigator.platform.indexOf("Win")===0,Ze=Bt&&"transition"in ln,ot="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!on,at="MozPerspective"in ln,ii=!window.L_DISABLE_3D&&(Ze||ot||at)&&!In&&!Mt,gi=typeof orientation<"u"||No("mobile"),vc=gi&&st,em=gi&&ot,aa=!window.PointerEvent&&window.MSPointerEvent,lr=!!(window.PointerEvent||aa),Ia="ontouchstart"in window||!!window.TouchEvent,ca=!window.L_NO_TOUCH&&(Ia||lr),ds=gi&&jt,Ca=gi&&et,tm=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Wc=function(){var g=!1;try{var l=Object.defineProperty({},"passive",{get:function(){g=!0}});window.addEventListener("testPassiveEventSupport",A,l),window.removeEventListener("testPassiveEventSupport",A,l)}catch{}return g}(),nm=function(){return!!document.createElement("canvas").getContext}(),us=!!(document.createElementNS&&_e("svg").createSVGRect),As=!!us&&function(){var g=document.createElement("div");return g.innerHTML="<svg/>",(g.firstChild&&g.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ms=!us&&function(){try{var g=document.createElement("div");g.innerHTML='<v:shape adj="1"/>';var l=g.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Vc=navigator.platform.indexOf("Mac")===0,om=navigator.platform.indexOf("Linux")===0;function No(g){return navigator.userAgent.toLowerCase().indexOf(g)>=0}var Y={ie:Bt,ielt9:zn,edge:fn,webkit:st,android:eo,android23:on,androidStock:to,opera:jt,chrome:an,gecko:et,safari:Ge,phantom:Mt,opera12:In,win:fi,ie3d:Ze,webkit3d:ot,gecko3d:at,any3d:ii,mobile:gi,mobileWebkit:vc,mobileWebkit3d:em,msPointer:aa,pointer:lr,touch:ca,touchNative:Ia,mobileOpera:ds,mobileGecko:Ca,retina:tm,passiveEvents:Wc,canvas:nm,svg:us,vml:ms,inlineSvg:As,mac:Vc,linux:om},K=Y.msPointer?"MSPointerDown":"pointerdown",z=Y.msPointer?"MSPointerMove":"pointermove",O=Y.msPointer?"MSPointerUp":"pointerup",Ce=Y.msPointer?"MSPointerCancel":"pointercancel",be={touchstart:K,touchmove:z,touchend:O,touchcancel:Ce},Ve={touchstart:Nt,touchmove:wt,touchend:wt,touchcancel:wt},ge={},Be=!1;function he(g,l,d){return l==="touchstart"&&Pe(),Ve[l]?(d=Ve[l].bind(this,d),g.addEventListener(be[l],d,!1),d):(console.warn("wrong event specified:",l),A)}function pe(g,l,d){if(!be[l]){console.warn("wrong event specified:",l);return}g.removeEventListener(be[l],d,!1)}function qe(g){ge[g.pointerId]=g}function it(g){ge[g.pointerId]&&(ge[g.pointerId]=g)}function mt(g){delete ge[g.pointerId]}function Pe(){Be||(document.addEventListener(K,qe,!0),document.addEventListener(z,it,!0),document.addEventListener(O,mt,!0),document.addEventListener(Ce,mt,!0),Be=!0)}function wt(g,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in ge)l.touches.push(ge[d]);l.changedTouches=[l],g(l)}}function Nt(g,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Zn(l),wt(g,l)}function ar(g){var l={},d,h;for(h in g)d=g[h],l[h]=d&&d.bind?d.bind(g):d;return g=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var ri=200;function pg(g,l){g.addEventListener("dblclick",l);var d=0,h;function S(k){if(k.detail!==1){h=k.detail;return}if(!(k.pointerType==="mouse"||k.sourceCapabilities&&!k.sourceCapabilities.firesTouchEvents)){var H=RZ(k);if(!(H.some(function(T){return T instanceof HTMLLabelElement&&T.attributes.for})&&!H.some(function(T){return T instanceof HTMLInputElement||T instanceof HTMLSelectElement}))){var E=Date.now();E-d<=ri?(h++,h===2&&l(ar(k))):h=1,d=E}}}return g.addEventListener("click",S),{dblclick:l,simDblclick:S}}function Zi(g,l){g.removeEventListener("dblclick",l.dblclick),g.removeEventListener("click",l.simDblclick)}var bg=kc(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Tn=kc(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ir=Tn==="webkitTransition"||Tn==="OTransition"?Tn+"End":"transitionend";function cr(g){return typeof g=="string"?document.getElementById(g):g}function yi(g,l){var d=g.style[l]||g.currentStyle&&g.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(g,null);d=h?h[l]:null}return d==="auto"?null:d}function le(g,l,d){var h=document.createElement(g);return h.className=l||"",d&&d.appendChild(h),h}function ke(g){var l=g.parentNode;l&&l.removeChild(g)}function cn(g){for(;g.firstChild;)g.removeChild(g.firstChild)}function It(g){var l=g.parentNode;l&&l.lastChild!==g&&l.appendChild(g)}function Rn(g){var l=g.parentNode;l&&l.firstChild!==g&&l.insertBefore(g,l.firstChild)}function hs(g,l){if(g.classList!==void 0)return g.classList.contains(l);var d=Rc(g);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function xe(g,l){if(g.classList!==void 0)for(var d=b(l),h=0,S=d.length;h<S;h++)g.classList.add(d[h]);else if(!hs(g,l)){var k=Rc(g);im(g,(k?k+" ":"")+l)}}function Lt(g,l){g.classList!==void 0?g.classList.remove(l):im(g,p((" "+Rc(g)+" ").replace(" "+l+" "," ")))}function im(g,l){g.className.baseVal===void 0?g.className=l:g.className.baseVal=l}function Rc(g){return g.correspondingElement&&(g=g.correspondingElement),g.className.baseVal===void 0?g.className:g.className.baseVal}function Fo(g,l){"opacity"in g.style?g.style.opacity=l:"filter"in g.style&&G1(g,l)}function G1(g,l){var d=!1,h="DXImageTransform.Microsoft.Alpha";try{d=g.filters.item(h)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):g.style.filter+=" progid:"+h+"(opacity="+l+")"}function kc(g){for(var l=document.documentElement.style,d=0;d<g.length;d++)if(g[d]in l)return g[d];return!1}function Cr(g,l,d){var h=l||new N(0,0);g.style[bg]=(Y.ie3d?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(d?" scale("+d+")":"")}function _t(g,l){g._leaflet_pos=l,Y.any3d?Cr(g,l):(g.style.left=l.x+"px",g.style.top=l.y+"px")}function dr(g){return g._leaflet_pos||new N(0,0)}var da,ua,gm;if("onselectstart"in document)da=function(){Ne(window,"selectstart",Zn)},ua=function(){Zt(window,"selectstart",Zn)};else{var Aa=kc(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);da=function(){if(Aa){var g=document.documentElement.style;gm=g[Aa],g[Aa]="none"}},ua=function(){Aa&&(document.documentElement.style[Aa]=gm,gm=void 0)}}function rm(){Ne(window,"dragstart",Zn)}function sm(){Zt(window,"dragstart",Zn)}var wc,lm;function am(g){for(;g.tabIndex===-1;)g=g.parentNode;g.style&&(Xc(),wc=g,lm=g.style.outlineStyle,g.style.outlineStyle="none",Ne(window,"keydown",Xc))}function Xc(){wc&&(wc.style.outlineStyle=lm,wc=void 0,lm=void 0,Zt(window,"keydown",Xc))}function WZ(g){do g=g.parentNode;while((!g.offsetWidth||!g.offsetHeight)&&g!==document.body);return g}function Im(g){var l=g.getBoundingClientRect();return{x:l.width/g.offsetWidth||1,y:l.height/g.offsetHeight||1,boundingClientRect:l}}var B1={__proto__:null,TRANSFORM:bg,TRANSITION:Tn,TRANSITION_END:Ir,get:cr,getStyle:yi,create:le,remove:ke,empty:cn,toFront:It,toBack:Rn,hasClass:hs,addClass:xe,removeClass:Lt,setClass:im,getClass:Rc,setOpacity:Fo,testProp:kc,setTransform:Cr,setPosition:_t,getPosition:dr,get disableTextSelection(){return da},get enableTextSelection(){return ua},disableImageDrag:rm,enableImageDrag:sm,preventOutline:am,restoreOutline:Xc,getSizedParentNode:WZ,getScale:Im};function Ne(g,l,d,h){if(l&&typeof l=="object")for(var S in l)Cm(g,S,l[S],d);else{l=b(l);for(var k=0,H=l.length;k<H;k++)Cm(g,l[k],d,h)}return this}var Gi="_leaflet_events";function Zt(g,l,d,h){if(arguments.length===1)VZ(g),delete g[Gi];else if(l&&typeof l=="object")for(var S in l)dm(g,S,l[S],d);else if(l=b(l),arguments.length===2)VZ(g,function(E){return v(l,E)!==-1});else for(var k=0,H=l.length;k<H;k++)dm(g,l[k],d,h);return this}function VZ(g,l){for(var d in g[Gi]){var h=d.split(/\d/)[0];(!l||l(h))&&dm(g,h,null,null,d)}}var cm={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Cm(g,l,d,h){var S=l+a(d)+(h?"_"+a(h):"");if(g[Gi]&&g[Gi][S])return this;var k=function(E){return d.call(h||g,E||window.event)},H=k;!Y.touchNative&&Y.pointer&&l.indexOf("touch")===0?k=he(g,l,k):Y.touch&&l==="dblclick"?k=pg(g,k):"addEventListener"in g?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?g.addEventListener(cm[l]||l,k,Y.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(k=function(E){E=E||window.event,Am(g,E)&&H(E)},g.addEventListener(cm[l],k,!1)):g.addEventListener(l,H,!1):g.attachEvent("on"+l,k),g[Gi]=g[Gi]||{},g[Gi][S]=k}function dm(g,l,d,h,S){S=S||l+a(d)+(h?"_"+a(h):"");var k=g[Gi]&&g[Gi][S];if(!k)return this;!Y.touchNative&&Y.pointer&&l.indexOf("touch")===0?pe(g,l,k):Y.touch&&l==="dblclick"?Zi(g,k):"removeEventListener"in g?g.removeEventListener(cm[l]||l,k,!1):g.detachEvent("on"+l,k),g[Gi][S]=null}function ur(g){return g.stopPropagation?g.stopPropagation():g.originalEvent?g.originalEvent._stopped=!0:g.cancelBubble=!0,this}function um(g){return Cm(g,"wheel",ur),this}function ma(g){return Ne(g,"mousedown touchstart dblclick contextmenu",ur),g._leaflet_disable_click=!0,this}function Zn(g){return g.preventDefault?g.preventDefault():g.returnValue=!1,this}function Ar(g){return Zn(g),ur(g),this}function RZ(g){if(g.composedPath)return g.composedPath();for(var l=[],d=g.target;d;)l.push(d),d=d.parentNode;return l}function kZ(g,l){if(!l)return new N(g.clientX,g.clientY);var d=Im(l),h=d.boundingClientRect;return new N((g.clientX-h.left)/d.x-l.clientLeft,(g.clientY-h.top)/d.y-l.clientTop)}var S1=Y.linux&&Y.chrome?window.devicePixelRatio:Y.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function wZ(g){return Y.edge?g.wheelDeltaY/2:g.deltaY&&g.deltaMode===0?-g.deltaY/S1:g.deltaY&&g.deltaMode===1?-g.deltaY*20:g.deltaY&&g.deltaMode===2?-g.deltaY*60:g.deltaX||g.deltaZ?0:g.wheelDelta?(g.wheelDeltaY||g.wheelDelta)/2:g.detail&&Math.abs(g.detail)<32765?-g.detail*20:g.detail?g.detail/-32765*60:0}function Am(g,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==g;)d=d.parentNode}catch{return!1}return d!==g}var v1={__proto__:null,on:Ne,off:Zt,stopPropagation:ur,disableScrollPropagation:um,disableClickPropagation:ma,preventDefault:Zn,stop:Ar,getPropagationPath:RZ,getMousePosition:kZ,getWheelDelta:wZ,isExternalTarget:Am,addListener:Ne,removeListener:Zt},XZ=te.extend({run:function(g,l,d,h){this.stop(),this._el=g,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=dr(g),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(g){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),g):(this._runFrame(1),this._complete())},_runFrame:function(g,l){var d=this._startPos.add(this._offset.multiplyBy(g));l&&d._round(),_t(this._el,d),this.fire("step")},_complete:function(){Q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(g){return 1-Math.pow(1-g,this._easeOutPower)}}),Oe=te.extend({options:{crs:He,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(g,l){l=G(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(g),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ie(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Tn&&Y.any3d&&!Y.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ne(this._proxy,Ir,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(g,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),g=this._limitCenter(ie(g),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=i({animate:d.animate},d.zoom),d.pan=i({animate:d.animate,duration:d.duration},d.pan));var h=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(g,l,d.zoom):this._tryAnimatedPan(g,d.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(g,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(g,l){return this._loaded?this.setView(this.getCenter(),g,{zoom:l}):(this._zoom=g,this)},zoomIn:function(g,l){return g=g||(Y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+g,l)},zoomOut:function(g,l){return g=g||(Y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-g,l)},setZoomAround:function(g,l,d){var h=this.getZoomScale(l),S=this.getSize().divideBy(2),k=g instanceof N?g:this.latLngToContainerPoint(g),H=k.subtract(S).multiplyBy(1-1/h),E=this.containerPointToLatLng(S.add(H));return this.setView(E,l,{zoom:d})},_getBoundsCenterZoom:function(g,l){l=l||{},g=g.getBounds?g.getBounds():re(g);var d=P(l.paddingTopLeft||l.padding||[0,0]),h=P(l.paddingBottomRight||l.padding||[0,0]),S=this.getBoundsZoom(g,!1,d.add(h));if(S=typeof l.maxZoom=="number"?Math.min(l.maxZoom,S):S,S===1/0)return{center:g.getCenter(),zoom:S};var k=h.subtract(d).divideBy(2),H=this.project(g.getSouthWest(),S),E=this.project(g.getNorthEast(),S),T=this.unproject(H.add(E).divideBy(2).add(k),S);return{center:T,zoom:S}},fitBounds:function(g,l){if(g=re(g),!g.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(g,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(g){return this.fitBounds([[-90,-180],[90,180]],g)},panTo:function(g,l){return this.setView(g,this._zoom,{pan:l})},panBy:function(g,l){if(g=P(g).round(),l=l||{},!g.x&&!g.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(g))return this._resetView(this.unproject(this.project(this.getCenter()).add(g)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new XZ,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){xe(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(g).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(g),this.fire("move").fire("moveend");return this},flyTo:function(g,l,d){if(d=d||{},d.animate===!1||!Y.any3d)return this.setView(g,l,d);this._stop();var h=this.project(this.getCenter()),S=this.project(g),k=this.getSize(),H=this._zoom;g=ie(g),l=l===void 0?H:l;var E=Math.max(k.x,k.y),T=E*this.getZoomScale(H,l),q=S.distanceTo(h)||1,de=1.42,We=de*de;function De(Ot){var Tc=Ot?-1:1,uY=Ot?T:E,AY=T*T-E*E+Tc*We*We*q*q,mY=2*uY*We*q,vm=AY/mY,Cy=Math.sqrt(vm*vm+1)-vm,hY=Cy<1e-9?-18:Math.log(Cy);return hY}function Un(Ot){return(Math.exp(Ot)-Math.exp(-Ot))/2}function Cn(Ot){return(Math.exp(Ot)+Math.exp(-Ot))/2}function Eo(Ot){return Un(Ot)/Cn(Ot)}var no=De(0);function Gs(Ot){return E*(Cn(no)/Cn(no+de*Ot))}function IY(Ot){return E*(Cn(no)*Eo(no+de*Ot)-Un(no))/We}function cY(Ot){return 1-Math.pow(1-Ot,1.5)}var CY=Date.now(),Iy=(De(1)-no)/de,dY=d.duration?1e3*d.duration:1e3*Iy*.8;function cy(){var Ot=(Date.now()-CY)/dY,Tc=cY(Ot)*Iy;Ot<=1?(this._flyToFrame=M(cy,this),this._move(this.unproject(h.add(S.subtract(h).multiplyBy(IY(Tc)/q)),H),this.getScaleZoom(E/Gs(Tc),H),{flyTo:!0})):this._move(g,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),cy.call(this),this},flyToBounds:function(g,l){var d=this._getBoundsCenterZoom(g,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(g){return g=re(g),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),g.isValid()?(this.options.maxBounds=g,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(g){var l=this.options.minZoom;return this.options.minZoom=g,this._loaded&&l!==g&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(g):this},setMaxZoom:function(g){var l=this.options.maxZoom;return this.options.maxZoom=g,this._loaded&&l!==g&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(g):this},panInsideBounds:function(g,l){this._enforcingBounds=!0;var d=this.getCenter(),h=this._limitCenter(d,this._zoom,re(g));return d.equals(h)||this.panTo(h,l),this._enforcingBounds=!1,this},panInside:function(g,l){l=l||{};var d=P(l.paddingTopLeft||l.padding||[0,0]),h=P(l.paddingBottomRight||l.padding||[0,0]),S=this.project(this.getCenter()),k=this.project(g),H=this.getPixelBounds(),E=Ie([H.min.add(d),H.max.subtract(h)]),T=E.getSize();if(!E.contains(k)){this._enforcingBounds=!0;var q=k.subtract(E.getCenter()),de=E.extend(k).getSize().subtract(T);S.x+=q.x<0?-de.x:de.x,S.y+=q.y<0?-de.y:de.y,this.panTo(this.unproject(S),l),this._enforcingBounds=!1}return this},invalidateSize:function(g){if(!this._loaded)return this;g=i({animate:!1,pan:!0},g===!0?{animate:!0}:g);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),h=l.divideBy(2).round(),S=d.divideBy(2).round(),k=h.subtract(S);return!k.x&&!k.y?this:(g.animate&&g.pan?this.panBy(k):(g.pan&&this._rawPanBy(k),this.fire("move"),g.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(g){if(g=this._locateOptions=i({timeout:1e4,watch:!1},g),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=s(this._handleGeolocationResponse,this),d=s(this._handleGeolocationError,this);return g.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,g):navigator.geolocation.getCurrentPosition(l,d,g),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(g){if(this._container._leaflet_id){var l=g.code,d=g.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(g){if(this._container._leaflet_id){var l=g.coords.latitude,d=g.coords.longitude,h=new ue(l,d),S=h.toBounds(g.coords.accuracy*2),k=this._locateOptions;if(k.setView){var H=this.getBoundsZoom(S);this.setView(h,k.maxZoom?Math.min(H,k.maxZoom):H)}var E={latlng:h,bounds:S,timestamp:g.timestamp};for(var T in g.coords)typeof g.coords[T]=="number"&&(E[T]=g.coords[T]);this.fire("locationfound",E)}},addHandler:function(g,l){if(!l)return this;var d=this[g]=new l(this);return this._handlers.push(d),this.options[g]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ke(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var g;for(g in this._layers)this._layers[g].remove();for(g in this._panes)ke(this._panes[g]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(g,l){var d="leaflet-pane"+(g?" leaflet-"+g.replace("Pane","")+"-pane":""),h=le("div",d,l||this._mapPane);return g&&(this._panes[g]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var g=this.getPixelBounds(),l=this.unproject(g.getBottomLeft()),d=this.unproject(g.getTopRight());return new ye(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(g,l,d){g=re(g),d=P(d||[0,0]);var h=this.getZoom()||0,S=this.getMinZoom(),k=this.getMaxZoom(),H=g.getNorthWest(),E=g.getSouthEast(),T=this.getSize().subtract(d),q=Ie(this.project(E,h),this.project(H,h)).getSize(),de=Y.any3d?this.options.zoomSnap:1,We=T.x/q.x,De=T.y/q.y,Un=l?Math.max(We,De):Math.min(We,De);return h=this.getScaleZoom(Un,h),de&&(h=Math.round(h/(de/100))*(de/100),h=l?Math.ceil(h/de)*de:Math.floor(h/de)*de),Math.max(S,Math.min(k,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new N(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(g,l){var d=this._getTopLeftPoint(g,l);return new ae(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(g){return this.options.crs.getProjectedBounds(g===void 0?this.getZoom():g)},getPane:function(g){return typeof g=="string"?this._panes[g]:g},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(g,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(g)/d.scale(l)},getScaleZoom:function(g,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var h=d.zoom(g*d.scale(l));return isNaN(h)?1/0:h},project:function(g,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ie(g),l)},unproject:function(g,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(P(g),l)},layerPointToLatLng:function(g){var l=P(g).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(g){var l=this.project(ie(g))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(g){return this.options.crs.wrapLatLng(ie(g))},wrapLatLngBounds:function(g){return this.options.crs.wrapLatLngBounds(re(g))},distance:function(g,l){return this.options.crs.distance(ie(g),ie(l))},containerPointToLayerPoint:function(g){return P(g).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(g){return P(g).add(this._getMapPanePos())},containerPointToLatLng:function(g){var l=this.containerPointToLayerPoint(P(g));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(g){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ie(g)))},mouseEventToContainerPoint:function(g){return kZ(g,this._container)},mouseEventToLayerPoint:function(g){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(g))},mouseEventToLatLng:function(g){return this.layerPointToLatLng(this.mouseEventToLayerPoint(g))},_initContainer:function(g){var l=this._container=cr(g);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ne(l,"scroll",this._onScroll,this),this._containerId=a(l)},_initLayout:function(){var g=this._container;this._fadeAnimated=this.options.fadeAnimation&&Y.any3d,xe(g,"leaflet-container"+(Y.touch?" leaflet-touch":"")+(Y.retina?" leaflet-retina":"")+(Y.ielt9?" leaflet-oldie":"")+(Y.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=yi(g,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(g.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var g=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_t(this._mapPane,new N(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xe(g.markerPane,"leaflet-zoom-hide"),xe(g.shadowPane,"leaflet-zoom-hide"))},_resetView:function(g,l,d){_t(this._mapPane,new N(0,0));var h=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var S=this._zoom!==l;this._moveStart(S,d)._move(g,l)._moveEnd(S),this.fire("viewreset"),h&&this.fire("load")},_moveStart:function(g,l){return g&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(g,l,d,h){l===void 0&&(l=this._zoom);var S=this._zoom!==l;return this._zoom=l,this._lastCenter=g,this._pixelOrigin=this._getNewPixelOrigin(g),h?d&&d.pinch&&this.fire("zoom",d):((S||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(g){return g&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(g){_t(this._mapPane,this._getMapPanePos().subtract(g))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(g){this._targets={},this._targets[a(this._container)]=this;var l=g?Zt:Ne;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),Y.any3d&&this.options.transform3DLimit&&(g?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Q(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var g=this._getMapPanePos();Math.max(Math.abs(g.x),Math.abs(g.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(g,l){for(var d=[],h,S=l==="mouseout"||l==="mouseover",k=g.target||g.srcElement,H=!1;k;){if(h=this._targets[a(k)],h&&(l==="click"||l==="preclick")&&this._draggableMoved(h)){H=!0;break}if(h&&h.listens(l,!0)&&(S&&!Am(k,g)||(d.push(h),S))||k===this._container)break;k=k.parentNode}return!d.length&&!H&&!S&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(g){for(;g&&g!==this._container;){if(g._leaflet_disable_click)return!0;g=g.parentNode}},_handleDOMEvent:function(g){var l=g.target||g.srcElement;if(!(!this._loaded||l._leaflet_disable_events||g.type==="click"&&this._isClickDisabled(l))){var d=g.type;d==="mousedown"&&am(l),this._fireDOMEvent(g,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(g,l,d){if(g.type==="click"){var h=i({},g);h.type="preclick",this._fireDOMEvent(h,h.type,d)}var S=this._findEventTargets(g,l);if(d){for(var k=[],H=0;H<d.length;H++)d[H].listens(l,!0)&&k.push(d[H]);S=k.concat(S)}if(S.length){l==="contextmenu"&&Zn(g);var E=S[0],T={originalEvent:g};if(g.type!=="keypress"&&g.type!=="keydown"&&g.type!=="keyup"){var q=E.getLatLng&&(!E._radius||E._radius<=10);T.containerPoint=q?this.latLngToContainerPoint(E.getLatLng()):this.mouseEventToContainerPoint(g),T.layerPoint=this.containerPointToLayerPoint(T.containerPoint),T.latlng=q?E.getLatLng():this.layerPointToLatLng(T.layerPoint)}for(H=0;H<S.length;H++)if(S[H].fire(l,T,!0),T.originalEvent._stopped||S[H].options.bubblingMouseEvents===!1&&v(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(g){return g=g.dragging&&g.dragging.enabled()?g:this,g.dragging&&g.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var g=0,l=this._handlers.length;g<l;g++)this._handlers[g].disable()},whenReady:function(g,l){return this._loaded?g.call(l||this,{target:this}):this.on("load",g,l),this},_getMapPanePos:function(){return dr(this._mapPane)||new N(0,0)},_moved:function(){var g=this._getMapPanePos();return g&&!g.equals([0,0])},_getTopLeftPoint:function(g,l){var d=g&&l!==void 0?this._getNewPixelOrigin(g,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(g,l){var d=this.getSize()._divideBy(2);return this.project(g,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(g,l,d){var h=this._getNewPixelOrigin(d,l);return this.project(g,l)._subtract(h)},_latLngBoundsToNewLayerBounds:function(g,l,d){var h=this._getNewPixelOrigin(d,l);return Ie([this.project(g.getSouthWest(),l)._subtract(h),this.project(g.getNorthWest(),l)._subtract(h),this.project(g.getSouthEast(),l)._subtract(h),this.project(g.getNorthEast(),l)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(g){return this.latLngToLayerPoint(g).subtract(this._getCenterLayerPoint())},_limitCenter:function(g,l,d){if(!d)return g;var h=this.project(g,l),S=this.getSize().divideBy(2),k=new ae(h.subtract(S),h.add(S)),H=this._getBoundsOffset(k,d,l);return Math.abs(H.x)<=1&&Math.abs(H.y)<=1?g:this.unproject(h.add(H),l)},_limitOffset:function(g,l){if(!l)return g;var d=this.getPixelBounds(),h=new ae(d.min.add(g),d.max.add(g));return g.add(this._getBoundsOffset(h,l))},_getBoundsOffset:function(g,l,d){var h=Ie(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),S=h.min.subtract(g.min),k=h.max.subtract(g.max),H=this._rebound(S.x,-k.x),E=this._rebound(S.y,-k.y);return new N(H,E)},_rebound:function(g,l){return g+l>0?Math.round(g-l)/2:Math.max(0,Math.ceil(g))-Math.max(0,Math.floor(l))},_limitZoom:function(g){var l=this.getMinZoom(),d=this.getMaxZoom(),h=Y.any3d?this.options.zoomSnap:1;return h&&(g=Math.round(g/h)*h),Math.max(l,Math.min(d,g))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Lt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(g,l){var d=this._getCenterOffset(g)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var g=this._proxy=le("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(g),this.on("zoomanim",function(l){var d=bg,h=this._proxy.style[d];Cr(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),h===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ke(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var g=this.getCenter(),l=this.getZoom();Cr(this._proxy,this.project(g,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(g){this._animatingZoom&&g.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(g,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(l),S=this._getCenterOffset(g)._divideBy(1-1/h);return d.animate!==!0&&!this.getSize().contains(S)?!1:(M(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(g,l,!0)},this),!0)},_animateZoom:function(g,l,d,h){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=g,this._animateToZoom=l,xe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:g,zoom:l,noUpdate:h}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Lt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function W1(g,l){return new Oe(g,l)}var si=_.extend({options:{position:"topright"},initialize:function(g){G(this,g)},getPosition:function(){return this.options.position},setPosition:function(g){var l=this._map;return l&&l.removeControl(this),this.options.position=g,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(g){this.remove(),this._map=g;var l=this._container=this.onAdd(g),d=this.getPosition(),h=g._controlCorners[d];return xe(l,"leaflet-control"),d.indexOf("bottom")!==-1?h.insertBefore(l,h.firstChild):h.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ke(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(g){this._map&&g&&g.screenX>0&&g.screenY>0&&this._map.getContainer().focus()}}),ha=function(g){return new si(g)};Oe.include({addControl:function(g){return g.addTo(this),this},removeControl:function(g){return g.remove(),this},_initControlPos:function(){var g=this._controlCorners={},l="leaflet-",d=this._controlContainer=le("div",l+"control-container",this._container);function h(S,k){var H=l+S+" "+l+k;g[S+k]=le("div",H,d)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var g in this._controlCorners)ke(this._controlCorners[g]);ke(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var JZ=si.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(g,l,d,h){return d<h?-1:h<d?1:0}},initialize:function(g,l,d){G(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var h in g)this._addLayer(g[h],h);for(h in l)this._addLayer(l[h],h,!0)},onAdd:function(g){this._initLayout(),this._update(),this._map=g,g.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(g){return si.prototype.addTo.call(this,g),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var g=0;g<this._layers.length;g++)this._layers[g].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(g,l){return this._addLayer(g,l),this._map?this._update():this},addOverlay:function(g,l){return this._addLayer(g,l,!0),this._map?this._update():this},removeLayer:function(g){g.off("add remove",this._onLayerChange,this);var l=this._getLayer(a(g));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){xe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var g=this._map.getSize().y-(this._container.offsetTop+50);return g<this._section.clientHeight?(xe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=g+"px"):Lt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Lt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var g="leaflet-control-layers",l=this._container=le("div",g),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),ma(l),um(l);var h=this._section=le("section",g+"-list");d&&(this._map.on("click",this.collapse,this),Ne(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var S=this._layersLink=le("a",g+"-toggle",l);S.href="#",S.title="Layers",S.setAttribute("role","button"),Ne(S,{keydown:function(k){k.keyCode===13&&this._expandSafely()},click:function(k){Zn(k),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=le("div",g+"-base",h),this._separator=le("div",g+"-separator",h),this._overlaysList=le("div",g+"-overlays",h),l.appendChild(h)},_getLayer:function(g){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&a(this._layers[l].layer)===g)return this._layers[l]},_addLayer:function(g,l,d){this._map&&g.on("add remove",this._onLayerChange,this),this._layers.push({layer:g,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(s(function(h,S){return this.options.sortFunction(h.layer,S.layer,h.name,S.name)},this)),this.options.autoZIndex&&g.setZIndex&&(this._lastZIndex++,g.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;cn(this._baseLayersList),cn(this._overlaysList),this._layerControlInputs=[];var g,l,d,h,S=0;for(d=0;d<this._layers.length;d++)h=this._layers[d],this._addItem(h),l=l||h.overlay,g=g||!h.overlay,S+=h.overlay?0:1;return this.options.hideSingleBase&&(g=g&&S>1,this._baseLayersList.style.display=g?"":"none"),this._separator.style.display=l&&g?"":"none",this},_onLayerChange:function(g){this._handlingClick||this._update();var l=this._getLayer(a(g.target)),d=l.overlay?g.type==="add"?"overlayadd":"overlayremove":g.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(g,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+g+'"'+(l?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=d,h.firstChild},_addItem:function(g){var l=document.createElement("label"),d=this._map.hasLayer(g.layer),h;g.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=d):h=this._createRadioElement("leaflet-base-layers_"+a(this),d),this._layerControlInputs.push(h),h.layerId=a(g.layer),Ne(h,"click",this._onInputClick,this);var S=document.createElement("span");S.innerHTML=" "+g.name;var k=document.createElement("span");l.appendChild(k),k.appendChild(h),k.appendChild(S);var H=g.overlay?this._overlaysList:this._baseLayersList;return H.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var g=this._layerControlInputs,l,d,h=[],S=[];this._handlingClick=!0;for(var k=g.length-1;k>=0;k--)l=g[k],d=this._getLayer(l.layerId).layer,l.checked?h.push(d):l.checked||S.push(d);for(k=0;k<S.length;k++)this._map.hasLayer(S[k])&&this._map.removeLayer(S[k]);for(k=0;k<h.length;k++)this._map.hasLayer(h[k])||this._map.addLayer(h[k]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var g=this._layerControlInputs,l,d,h=this._map.getZoom(),S=g.length-1;S>=0;S--)l=g[S],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&h<d.options.minZoom||d.options.maxZoom!==void 0&&h>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var g=this._section;this._preventClick=!0,Ne(g,"click",Zn),this.expand();var l=this;setTimeout(function(){Zt(g,"click",Zn),l._preventClick=!1})}}),V1=function(g,l,d){return new JZ(g,l,d)},mm=si.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(g){var l="leaflet-control-zoom",d=le("div",l+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),g.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(g){g.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(g){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(g.shiftKey?3:1))},_zoomOut:function(g){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(g.shiftKey?3:1))},_createButton:function(g,l,d,h,S){var k=le("a",d,h);return k.innerHTML=g,k.href="#",k.title=l,k.setAttribute("role","button"),k.setAttribute("aria-label",l),ma(k),Ne(k,"click",Ar),Ne(k,"click",S,this),Ne(k,"click",this._refocusOnMap,this),k},_updateDisabled:function(){var g=this._map,l="leaflet-disabled";Lt(this._zoomInButton,l),Lt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||g._zoom===g.getMinZoom())&&(xe(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||g._zoom===g.getMaxZoom())&&(xe(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Oe.mergeOptions({zoomControl:!0}),Oe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new mm,this.addControl(this.zoomControl))});var R1=function(g){return new mm(g)},YZ=si.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(g){var l="leaflet-control-scale",d=le("div",l),h=this.options;return this._addScales(h,l+"-line",d),g.on(h.updateWhenIdle?"moveend":"move",this._update,this),g.whenReady(this._update,this),d},onRemove:function(g){g.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(g,l,d){g.metric&&(this._mScale=le("div",l,d)),g.imperial&&(this._iScale=le("div",l,d))},_update:function(){var g=this._map,l=g.getSize().y/2,d=g.distance(g.containerPointToLatLng([0,l]),g.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(g){this.options.metric&&g&&this._updateMetric(g),this.options.imperial&&g&&this._updateImperial(g)},_updateMetric:function(g){var l=this._getRoundNum(g),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/g)},_updateImperial:function(g){var l=g*3.2808399,d,h,S;l>5280?(d=l/5280,h=this._getRoundNum(d),this._updateScale(this._iScale,h+" mi",h/d)):(S=this._getRoundNum(l),this._updateScale(this._iScale,S+" ft",S/l))},_updateScale:function(g,l,d){g.style.width=Math.round(this.options.maxWidth*d)+"px",g.innerHTML=l},_getRoundNum:function(g){var l=Math.pow(10,(Math.floor(g)+"").length-1),d=g/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),k1=function(g){return new YZ(g)},w1='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',hm=si.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Y.inlineSvg?w1+" ":"")+"Leaflet</a>"},initialize:function(g){G(this,g),this._attributions={}},onAdd:function(g){g.attributionControl=this,this._container=le("div","leaflet-control-attribution"),ma(this._container);for(var l in g._layers)g._layers[l].getAttribution&&this.addAttribution(g._layers[l].getAttribution());return this._update(),g.on("layeradd",this._addAttribution,this),this._container},onRemove:function(g){g.off("layeradd",this._addAttribution,this)},_addAttribution:function(g){g.layer.getAttribution&&(this.addAttribution(g.layer.getAttribution()),g.layer.once("remove",function(){this.removeAttribution(g.layer.getAttribution())},this))},setPrefix:function(g){return this.options.prefix=g,this._update(),this},addAttribution:function(g){return g?(this._attributions[g]||(this._attributions[g]=0),this._attributions[g]++,this._update(),this):this},removeAttribution:function(g){return g?(this._attributions[g]&&(this._attributions[g]--,this._update()),this):this},_update:function(){if(this._map){var g=[];for(var l in this._attributions)this._attributions[l]&&g.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),g.length&&d.push(g.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Oe.mergeOptions({attributionControl:!0}),Oe.addInitHook(function(){this.options.attributionControl&&new hm().addTo(this)});var X1=function(g){return new hm(g)};si.Layers=JZ,si.Zoom=mm,si.Scale=YZ,si.Attribution=hm,ha.layers=V1,ha.zoom=R1,ha.scale=k1,ha.attribution=X1;var Bi=_.extend({initialize:function(g){this._map=g},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Bi.addTo=function(g,l){return g.addHandler(l,this),this};var J1={Events:ee},HZ=Y.touch?"touchstart mousedown":"mousedown",fg=te.extend({options:{clickTolerance:3},initialize:function(g,l,d,h){G(this,h),this._element=g,this._dragStartTarget=l||g,this._preventOutline=d},enable:function(){this._enabled||(Ne(this._dragStartTarget,HZ,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(fg._dragging===this&&this.finishDrag(!0),Zt(this._dragStartTarget,HZ,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(g){if(this._enabled&&(this._moved=!1,!hs(this._element,"leaflet-zoom-anim"))){if(g.touches&&g.touches.length!==1){fg._dragging===this&&this.finishDrag();return}if(!(fg._dragging||g.shiftKey||g.which!==1&&g.button!==1&&!g.touches)&&(fg._dragging=this,this._preventOutline&&am(this._element),rm(),da(),!this._moving)){this.fire("down");var l=g.touches?g.touches[0]:g,d=WZ(this._element);this._startPoint=new N(l.clientX,l.clientY),this._startPos=dr(this._element),this._parentScale=Im(d);var h=g.type==="mousedown";Ne(document,h?"mousemove":"touchmove",this._onMove,this),Ne(document,h?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(g){if(this._enabled){if(g.touches&&g.touches.length>1){this._moved=!0;return}var l=g.touches&&g.touches.length===1?g.touches[0]:g,d=new N(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Zn(g),this._moved||(this.fire("dragstart"),this._moved=!0,xe(document.body,"leaflet-dragging"),this._lastTarget=g.target||g.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=g,this._updatePosition())}},_updatePosition:function(){var g={originalEvent:this._lastEvent};this.fire("predrag",g),_t(this._element,this._newPos),this.fire("drag",g)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(g){Lt(document.body,"leaflet-dragging"),this._lastTarget&&(Lt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Zt(document,"mousemove touchmove",this._onMove,this),Zt(document,"mouseup touchend touchcancel",this._onUp,this),sm(),ua();var l=this._moved&&this._moving;this._moving=!1,fg._dragging=!1,l&&this.fire("dragend",{noInertia:g,distance:this._newPos.distanceTo(this._startPos)})}});function xZ(g,l,d){var h,S=[1,4,2,8],k,H,E,T,q,de,We,De;for(k=0,de=g.length;k<de;k++)g[k]._code=mr(g[k],l);for(E=0;E<4;E++){for(We=S[E],h=[],k=0,de=g.length,H=de-1;k<de;H=k++)T=g[k],q=g[H],T._code&We?q._code&We||(De=Jc(q,T,We,l,d),De._code=mr(De,l),h.push(De)):(q._code&We&&(De=Jc(q,T,We,l,d),De._code=mr(De,l),h.push(De)),h.push(T));g=h}return g}function NZ(g,l){var d,h,S,k,H,E,T,q,de;if(!g||g.length===0)throw new Error("latlngs not passed");Ko(g)||(console.warn("latlngs are not flat! Only the first ring will be used"),g=g[0]);var We=ie([0,0]),De=re(g),Un=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());Un<1700&&(We=pm(g));var Cn=g.length,Eo=[];for(d=0;d<Cn;d++){var no=ie(g[d]);Eo.push(l.project(ie([no.lat-We.lat,no.lng-We.lng])))}for(E=T=q=0,d=0,h=Cn-1;d<Cn;h=d++)S=Eo[d],k=Eo[h],H=S.y*k.x-k.y*S.x,T+=(S.x+k.x)*H,q+=(S.y+k.y)*H,E+=H*3;E===0?de=Eo[0]:de=[T/E,q/E];var Gs=l.unproject(P(de));return ie([Gs.lat+We.lat,Gs.lng+We.lng])}function pm(g){for(var l=0,d=0,h=0,S=0;S<g.length;S++){var k=ie(g[S]);l+=k.lat,d+=k.lng,h++}return ie([l/h,d/h])}var Y1={__proto__:null,clipPolygon:xZ,polygonCenter:NZ,centroid:pm};function FZ(g,l){if(!l||!g.length)return g.slice();var d=l*l;return g=N1(g,d),g=x1(g,d),g}function KZ(g,l,d){return Math.sqrt(pa(g,l,d,!0))}function H1(g,l,d){return pa(g,l,d)}function x1(g,l){var d=g.length,h=typeof Uint8Array<"u"?Uint8Array:Array,S=new h(d);S[0]=S[d-1]=1,bm(g,S,l,0,d-1);var k,H=[];for(k=0;k<d;k++)S[k]&&H.push(g[k]);return H}function bm(g,l,d,h,S){var k=0,H,E,T;for(E=h+1;E<=S-1;E++)T=pa(g[E],g[h],g[S],!0),T>k&&(H=E,k=T);k>d&&(l[H]=1,bm(g,l,d,h,H),bm(g,l,d,H,S))}function N1(g,l){for(var d=[g[0]],h=1,S=0,k=g.length;h<k;h++)F1(g[h],g[S])>l&&(d.push(g[h]),S=h);return S<k-1&&d.push(g[k-1]),d}var EZ;function MZ(g,l,d,h,S){var k=h?EZ:mr(g,d),H=mr(l,d),E,T,q;for(EZ=H;;){if(!(k|H))return[g,l];if(k&H)return!1;E=k||H,T=Jc(g,l,E,d,S),q=mr(T,d),E===k?(g=T,k=q):(l=T,H=q)}}function Jc(g,l,d,h,S){var k=l.x-g.x,H=l.y-g.y,E=h.min,T=h.max,q,de;return d&8?(q=g.x+k*(T.y-g.y)/H,de=T.y):d&4?(q=g.x+k*(E.y-g.y)/H,de=E.y):d&2?(q=T.x,de=g.y+H*(T.x-g.x)/k):d&1&&(q=E.x,de=g.y+H*(E.x-g.x)/k),new N(q,de,S)}function mr(g,l){var d=0;return g.x<l.min.x?d|=1:g.x>l.max.x&&(d|=2),g.y<l.min.y?d|=4:g.y>l.max.y&&(d|=8),d}function F1(g,l){var d=l.x-g.x,h=l.y-g.y;return d*d+h*h}function pa(g,l,d,h){var S=l.x,k=l.y,H=d.x-S,E=d.y-k,T=H*H+E*E,q;return T>0&&(q=((g.x-S)*H+(g.y-k)*E)/T,q>1?(S=d.x,k=d.y):q>0&&(S+=H*q,k+=E*q)),H=g.x-S,E=g.y-k,h?H*H+E*E:new N(S,k)}function Ko(g){return!f(g[0])||typeof g[0][0]!="object"&&typeof g[0][0]<"u"}function LZ(g){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ko(g)}function zZ(g,l){var d,h,S,k,H,E,T,q;if(!g||g.length===0)throw new Error("latlngs not passed");Ko(g)||(console.warn("latlngs are not flat! Only the first ring will be used"),g=g[0]);var de=ie([0,0]),We=re(g),De=We.getNorthWest().distanceTo(We.getSouthWest())*We.getNorthEast().distanceTo(We.getNorthWest());De<1700&&(de=pm(g));var Un=g.length,Cn=[];for(d=0;d<Un;d++){var Eo=ie(g[d]);Cn.push(l.project(ie([Eo.lat-de.lat,Eo.lng-de.lng])))}for(d=0,h=0;d<Un-1;d++)h+=Cn[d].distanceTo(Cn[d+1])/2;if(h===0)q=Cn[0];else for(d=0,k=0;d<Un-1;d++)if(H=Cn[d],E=Cn[d+1],S=H.distanceTo(E),k+=S,k>h){T=(k-h)/S,q=[E.x-T*(E.x-H.x),E.y-T*(E.y-H.y)];break}var no=l.unproject(P(q));return ie([no.lat+de.lat,no.lng+de.lng])}var K1={__proto__:null,simplify:FZ,pointToSegmentDistance:KZ,closestPointOnSegment:H1,clipSegment:MZ,_getEdgeIntersection:Jc,_getBitCode:mr,_sqClosestPointOnSegment:pa,isFlat:Ko,_flat:LZ,polylineCenter:zZ},fm={project:function(g){return new N(g.lng,g.lat)},unproject:function(g){return new ue(g.y,g.x)},bounds:new ae([-180,-90],[180,90])},Zm={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ae([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(g){var l=Math.PI/180,d=this.R,h=g.lat*l,S=this.R_MINOR/d,k=Math.sqrt(1-S*S),H=k*Math.sin(h),E=Math.tan(Math.PI/4-h/2)/Math.pow((1-H)/(1+H),k/2);return h=-d*Math.log(Math.max(E,1e-10)),new N(g.lng*l*d,h)},unproject:function(g){for(var l=180/Math.PI,d=this.R,h=this.R_MINOR/d,S=Math.sqrt(1-h*h),k=Math.exp(-g.y/d),H=Math.PI/2-2*Math.atan(k),E=0,T=.1,q;E<15&&Math.abs(T)>1e-7;E++)q=S*Math.sin(H),q=Math.pow((1-q)/(1+q),S/2),T=Math.PI/2-2*Math.atan(k*q)-H,H+=T;return new ue(H*l,g.x*l/d)}},E1={__proto__:null,LonLat:fm,Mercator:Zm,SphericalMercator:ft},M1=i({},Ue,{code:"EPSG:3395",projection:Zm,transformation:function(){var g=.5/(Math.PI*Zm.R);return Le(g,.5,-g,.5)}()}),TZ=i({},Ue,{code:"EPSG:4326",projection:fm,transformation:Le(1/180,1,-1/180,.5)}),L1=i({},Ye,{projection:fm,transformation:Le(1,0,-1,0),scale:function(g){return Math.pow(2,g)},zoom:function(g){return Math.log(g)/Math.LN2},distance:function(g,l){var d=l.lng-g.lng,h=l.lat-g.lat;return Math.sqrt(d*d+h*h)},infinite:!0});Ye.Earth=Ue,Ye.EPSG3395=M1,Ye.EPSG3857=He,Ye.EPSG900913=Re,Ye.EPSG4326=TZ,Ye.Simple=L1;var li=te.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(g){return g.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(g){return g&&g.removeLayer(this),this},getPane:function(g){return this._map.getPane(g?this.options[g]||g:this.options.pane)},addInteractiveTarget:function(g){return this._map._targets[a(g)]=this,this},removeInteractiveTarget:function(g){return delete this._map._targets[a(g)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(g){var l=g.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Oe.include({addLayer:function(g){if(!g._layerAdd)throw new Error("The provided object is not a Layer.");var l=a(g);return this._layers[l]?this:(this._layers[l]=g,g._mapToAdd=this,g.beforeAdd&&g.beforeAdd(this),this.whenReady(g._layerAdd,g),this)},removeLayer:function(g){var l=a(g);return this._layers[l]?(this._loaded&&g.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:g}),g.fire("remove")),g._map=g._mapToAdd=null,this):this},hasLayer:function(g){return a(g)in this._layers},eachLayer:function(g,l){for(var d in this._layers)g.call(l,this._layers[d]);return this},_addLayers:function(g){g=g?f(g)?g:[g]:[];for(var l=0,d=g.length;l<d;l++)this.addLayer(g[l])},_addZoomLimit:function(g){(!isNaN(g.options.maxZoom)||!isNaN(g.options.minZoom))&&(this._zoomBoundLayers[a(g)]=g,this._updateZoomLevels())},_removeZoomLimit:function(g){var l=a(g);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var g=1/0,l=-1/0,d=this._getZoomSpan();for(var h in this._zoomBoundLayers){var S=this._zoomBoundLayers[h].options;g=S.minZoom===void 0?g:Math.min(g,S.minZoom),l=S.maxZoom===void 0?l:Math.max(l,S.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=g===1/0?void 0:g,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ps=li.extend({initialize:function(g,l){G(this,l),this._layers={};var d,h;if(g)for(d=0,h=g.length;d<h;d++)this.addLayer(g[d])},addLayer:function(g){var l=this.getLayerId(g);return this._layers[l]=g,this._map&&this._map.addLayer(g),this},removeLayer:function(g){var l=g in this._layers?g:this.getLayerId(g);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(g){var l=typeof g=="number"?g:this.getLayerId(g);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(g){var l=Array.prototype.slice.call(arguments,1),d,h;for(d in this._layers)h=this._layers[d],h[g]&&h[g].apply(h,l);return this},onAdd:function(g){this.eachLayer(g.addLayer,g)},onRemove:function(g){this.eachLayer(g.removeLayer,g)},eachLayer:function(g,l){for(var d in this._layers)g.call(l,this._layers[d]);return this},getLayer:function(g){return this._layers[g]},getLayers:function(){var g=[];return this.eachLayer(g.push,g),g},setZIndex:function(g){return this.invoke("setZIndex",g)},getLayerId:function(g){return a(g)}}),z1=function(g,l){return new ps(g,l)},Di=ps.extend({addLayer:function(g){return this.hasLayer(g)?this:(g.addEventParent(this),ps.prototype.addLayer.call(this,g),this.fire("layeradd",{layer:g}))},removeLayer:function(g){return this.hasLayer(g)?(g in this._layers&&(g=this._layers[g]),g.removeEventParent(this),ps.prototype.removeLayer.call(this,g),this.fire("layerremove",{layer:g})):this},setStyle:function(g){return this.invoke("setStyle",g)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var g=new ye;for(var l in this._layers){var d=this._layers[l];g.extend(d.getBounds?d.getBounds():d.getLatLng())}return g}}),T1=function(g,l){return new Di(g,l)},bs=_.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(g){G(this,g)},createIcon:function(g){return this._createIcon("icon",g)},createShadow:function(g){return this._createIcon("shadow",g)},_createIcon:function(g,l){var d=this._getIconUrl(g);if(!d){if(g==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(h,g),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),h},_setIconStyles:function(g,l){var d=this.options,h=d[l+"Size"];typeof h=="number"&&(h=[h,h]);var S=P(h),k=P(l==="shadow"&&d.shadowAnchor||d.iconAnchor||S&&S.divideBy(2,!0));g.className="leaflet-marker-"+l+" "+(d.className||""),k&&(g.style.marginLeft=-k.x+"px",g.style.marginTop=-k.y+"px"),S&&(g.style.width=S.x+"px",g.style.height=S.y+"px")},_createImg:function(g,l){return l=l||document.createElement("img"),l.src=g,l},_getIconUrl:function(g){return Y.retina&&this.options[g+"RetinaUrl"]||this.options[g+"Url"]}});function U1(g){return new bs(g)}var ba=bs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(g){return typeof ba.imagePath!="string"&&(ba.imagePath=this._detectIconPath()),(this.options.imagePath||ba.imagePath)+bs.prototype._getIconUrl.call(this,g)},_stripUrl:function(g){var l=function(d,h,S){var k=h.exec(d);return k&&k[S]};return g=l(g,/^url\((['"])?(.+)\1\)$/,2),g&&l(g,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var g=le("div","leaflet-default-icon-path",document.body),l=yi(g,"background-image")||yi(g,"backgroundImage");if(document.body.removeChild(g),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),UZ=Bi.extend({initialize:function(g){this._marker=g},addHooks:function(){var g=this._marker._icon;this._draggable||(this._draggable=new fg(g,g,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xe(g,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Lt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(g){var l=this._marker,d=l._map,h=this._marker.options.autoPanSpeed,S=this._marker.options.autoPanPadding,k=dr(l._icon),H=d.getPixelBounds(),E=d.getPixelOrigin(),T=Ie(H.min._subtract(E).add(S),H.max._subtract(E).subtract(S));if(!T.contains(k)){var q=P((Math.max(T.max.x,k.x)-T.max.x)/(H.max.x-T.max.x)-(Math.min(T.min.x,k.x)-T.min.x)/(H.min.x-T.min.x),(Math.max(T.max.y,k.y)-T.max.y)/(H.max.y-T.max.y)-(Math.min(T.min.y,k.y)-T.min.y)/(H.min.y-T.min.y)).multiplyBy(h);d.panBy(q,{animate:!1}),this._draggable._newPos._add(q),this._draggable._startPos._add(q),_t(l._icon,this._draggable._newPos),this._onDrag(g),this._panRequest=M(this._adjustPan.bind(this,g))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(g){this._marker.options.autoPan&&(Q(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,g)))},_onDrag:function(g){var l=this._marker,d=l._shadow,h=dr(l._icon),S=l._map.layerPointToLatLng(h);d&&_t(d,h),l._latlng=S,g.latlng=S,g.oldLatLng=this._oldLatLng,l.fire("move",g).fire("drag",g)},_onDragEnd:function(g){Q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",g)}}),Yc=li.extend({options:{icon:new ba,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(g,l){G(this,l),this._latlng=ie(g)},onAdd:function(g){this._zoomAnimated=this._zoomAnimated&&g.options.markerZoomAnimation,this._zoomAnimated&&g.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(g){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&g.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(g){var l=this._latlng;return this._latlng=ie(g),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(g){return this.options.zIndexOffset=g,this.update()},getIcon:function(){return this.options.icon},setIcon:function(g){return this.options.icon=g,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var g=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(g)}return this},_initIcon:function(){var g=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=g.icon.createIcon(this._icon),h=!1;d!==this._icon&&(this._icon&&this._removeIcon(),h=!0,g.title&&(d.title=g.title),d.tagName==="IMG"&&(d.alt=g.alt||"")),xe(d,l),g.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,g.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ne(d,"focus",this._panOnFocus,this);var S=g.icon.createShadow(this._shadow),k=!1;S!==this._shadow&&(this._removeShadow(),k=!0),S&&(xe(S,l),S.alt=""),this._shadow=S,g.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),S&&k&&this.getPane(g.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Zt(this._icon,"focus",this._panOnFocus,this),ke(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ke(this._shadow),this._shadow=null},_setPos:function(g){this._icon&&_t(this._icon,g),this._shadow&&_t(this._shadow,g),this._zIndex=g.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(g){this._icon&&(this._icon.style.zIndex=this._zIndex+g)},_animateZoom:function(g){var l=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(xe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),UZ)){var g=this.options.draggable;this.dragging&&(g=this.dragging.enabled(),this.dragging.disable()),this.dragging=new UZ(this),g&&this.dragging.enable()}},setOpacity:function(g){return this.options.opacity=g,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var g=this.options.opacity;this._icon&&Fo(this._icon,g),this._shadow&&Fo(this._shadow,g)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var g=this._map;if(g){var l=this.options.icon.options,d=l.iconSize?P(l.iconSize):P(0,0),h=l.iconAnchor?P(l.iconAnchor):P(0,0);g.panInside(this._latlng,{paddingTopLeft:h,paddingBottomRight:d.subtract(h)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function D1(g,l){return new Yc(g,l)}var Zg=li.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(g){this._renderer=g.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(g){return G(this,g),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&g&&Object.prototype.hasOwnProperty.call(g,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Hc=Zg.extend({options:{fill:!0,radius:10},initialize:function(g,l){G(this,l),this._latlng=ie(g),this._radius=this.options.radius},setLatLng:function(g){var l=this._latlng;return this._latlng=ie(g),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(g){return this.options.radius=this._radius=g,this.redraw()},getRadius:function(){return this._radius},setStyle:function(g){var l=g&&g.radius||this._radius;return Zg.prototype.setStyle.call(this,g),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var g=this._radius,l=this._radiusY||g,d=this._clickTolerance(),h=[g+d,l+d];this._pxBounds=new ae(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(g){return g.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Q1(g,l){return new Hc(g,l)}var ym=Hc.extend({initialize:function(g,l,d){if(typeof l=="number"&&(l=i({},d,{radius:l})),G(this,l),this._latlng=ie(g),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(g){return this._mRadius=g,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var g=[this._radius,this._radiusY||this._radius];return new ye(this._map.layerPointToLatLng(this._point.subtract(g)),this._map.layerPointToLatLng(this._point.add(g)))},setStyle:Zg.prototype.setStyle,_project:function(){var g=this._latlng.lng,l=this._latlng.lat,d=this._map,h=d.options.crs;if(h.distance===Ue.distance){var S=Math.PI/180,k=this._mRadius/Ue.R/S,H=d.project([l+k,g]),E=d.project([l-k,g]),T=H.add(E).divideBy(2),q=d.unproject(T).lat,de=Math.acos((Math.cos(k*S)-Math.sin(l*S)*Math.sin(q*S))/(Math.cos(l*S)*Math.cos(q*S)))/S;(isNaN(de)||de===0)&&(de=k/Math.cos(Math.PI/180*l)),this._point=T.subtract(d.getPixelOrigin()),this._radius=isNaN(de)?0:T.x-d.project([q,g-de]).x,this._radiusY=T.y-H.y}else{var We=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(We).x}this._updateBounds()}});function P1(g,l,d){return new ym(g,l,d)}var Qi=Zg.extend({options:{smoothFactor:1,noClip:!1},initialize:function(g,l){G(this,l),this._setLatLngs(g)},getLatLngs:function(){return this._latlngs},setLatLngs:function(g){return this._setLatLngs(g),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(g){for(var l=1/0,d=null,h=pa,S,k,H=0,E=this._parts.length;H<E;H++)for(var T=this._parts[H],q=1,de=T.length;q<de;q++){S=T[q-1],k=T[q];var We=h(g,S,k,!0);We<l&&(l=We,d=h(g,S,k))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zZ(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(g,l){return l=l||this._defaultShape(),g=ie(g),l.push(g),this._bounds.extend(g),this.redraw()},_setLatLngs:function(g){this._bounds=new ye,this._latlngs=this._convertLatLngs(g)},_defaultShape:function(){return Ko(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(g){for(var l=[],d=Ko(g),h=0,S=g.length;h<S;h++)d?(l[h]=ie(g[h]),this._bounds.extend(l[h])):l[h]=this._convertLatLngs(g[h]);return l},_project:function(){var g=new ae;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,g),this._bounds.isValid()&&g.isValid()&&(this._rawPxBounds=g,this._updateBounds())},_updateBounds:function(){var g=this._clickTolerance(),l=new N(g,g);this._rawPxBounds&&(this._pxBounds=new ae([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(g,l,d){var h=g[0]instanceof ue,S=g.length,k,H;if(h){for(H=[],k=0;k<S;k++)H[k]=this._map.latLngToLayerPoint(g[k]),d.extend(H[k]);l.push(H)}else for(k=0;k<S;k++)this._projectLatlngs(g[k],l,d)},_clipPoints:function(){var g=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(g))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,h,S,k,H,E,T;for(d=0,S=0,k=this._rings.length;d<k;d++)for(T=this._rings[d],h=0,H=T.length;h<H-1;h++)E=MZ(T[h],T[h+1],g,h,!0),E&&(l[S]=l[S]||[],l[S].push(E[0]),(E[1]!==T[h+1]||h===H-2)&&(l[S].push(E[1]),S++))}},_simplifyPoints:function(){for(var g=this._parts,l=this.options.smoothFactor,d=0,h=g.length;d<h;d++)g[d]=FZ(g[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(g,l){var d,h,S,k,H,E,T=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(g))return!1;for(d=0,k=this._parts.length;d<k;d++)for(E=this._parts[d],h=0,H=E.length,S=H-1;h<H;S=h++)if(!(!l&&h===0)&&KZ(g,E[S],E[h])<=T)return!0;return!1}});function j1(g,l){return new Qi(g,l)}Qi._flat=LZ;var fs=Qi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return NZ(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(g){var l=Qi.prototype._convertLatLngs.call(this,g),d=l.length;return d>=2&&l[0]instanceof ue&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(g){Qi.prototype._setLatLngs.call(this,g),Ko(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ko(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var g=this._renderer._bounds,l=this.options.weight,d=new N(l,l);if(g=new ae(g.min.subtract(d),g.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(g))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,S=this._rings.length,k;h<S;h++)k=xZ(this._rings[h],g,!0),k.length&&this._parts.push(k)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(g){var l=!1,d,h,S,k,H,E,T,q;if(!this._pxBounds||!this._pxBounds.contains(g))return!1;for(k=0,T=this._parts.length;k<T;k++)for(d=this._parts[k],H=0,q=d.length,E=q-1;H<q;E=H++)h=d[H],S=d[E],h.y>g.y!=S.y>g.y&&g.x<(S.x-h.x)*(g.y-h.y)/(S.y-h.y)+h.x&&(l=!l);return l||Qi.prototype._containsPoint.call(this,g,!0)}});function _1(g,l){return new fs(g,l)}var Pi=Di.extend({initialize:function(g,l){G(this,l),this._layers={},g&&this.addData(g)},addData:function(g){var l=f(g)?g:g.features,d,h,S;if(l){for(d=0,h=l.length;d<h;d++)S=l[d],(S.geometries||S.geometry||S.features||S.coordinates)&&this.addData(S);return this}var k=this.options;if(k.filter&&!k.filter(g))return this;var H=xc(g,k);return H?(H.feature=Kc(g),H.defaultOptions=H.options,this.resetStyle(H),k.onEachFeature&&k.onEachFeature(g,H),this.addLayer(H)):this},resetStyle:function(g){return g===void 0?this.eachLayer(this.resetStyle,this):(g.options=i({},g.defaultOptions),this._setLayerStyle(g,this.options.style),this)},setStyle:function(g){return this.eachLayer(function(l){this._setLayerStyle(l,g)},this)},_setLayerStyle:function(g,l){g.setStyle&&(typeof l=="function"&&(l=l(g.feature)),g.setStyle(l))}});function xc(g,l){var d=g.type==="Feature"?g.geometry:g,h=d?d.coordinates:null,S=[],k=l&&l.pointToLayer,H=l&&l.coordsToLatLng||Gm,E,T,q,de;if(!h&&!d)return null;switch(d.type){case"Point":return E=H(h),DZ(k,g,E,l);case"MultiPoint":for(q=0,de=h.length;q<de;q++)E=H(h[q]),S.push(DZ(k,g,E,l));return new Di(S);case"LineString":case"MultiLineString":return T=Nc(h,d.type==="LineString"?0:1,H),new Qi(T,l);case"Polygon":case"MultiPolygon":return T=Nc(h,d.type==="Polygon"?1:2,H),new fs(T,l);case"GeometryCollection":for(q=0,de=d.geometries.length;q<de;q++){var We=xc({geometry:d.geometries[q],type:"Feature",properties:g.properties},l);We&&S.push(We)}return new Di(S);case"FeatureCollection":for(q=0,de=d.features.length;q<de;q++){var De=xc(d.features[q],l);De&&S.push(De)}return new Di(S);default:throw new Error("Invalid GeoJSON object.")}}function DZ(g,l,d,h){return g?g(l,d):new Yc(d,h&&h.markersInheritOptions&&h)}function Gm(g){return new ue(g[1],g[0],g[2])}function Nc(g,l,d){for(var h=[],S=0,k=g.length,H;S<k;S++)H=l?Nc(g[S],l-1,d):(d||Gm)(g[S]),h.push(H);return h}function Bm(g,l){return g=ie(g),g.alt!==void 0?[m(g.lng,l),m(g.lat,l),m(g.alt,l)]:[m(g.lng,l),m(g.lat,l)]}function Fc(g,l,d,h){for(var S=[],k=0,H=g.length;k<H;k++)S.push(l?Fc(g[k],Ko(g[k])?0:l-1,d,h):Bm(g[k],h));return!l&&d&&S.length>0&&S.push(S[0].slice()),S}function Zs(g,l){return g.feature?i({},g.feature,{geometry:l}):Kc(l)}function Kc(g){return g.type==="Feature"||g.type==="FeatureCollection"?g:{type:"Feature",properties:{},geometry:g}}var Sm={toGeoJSON:function(g){return Zs(this,{type:"Point",coordinates:Bm(this.getLatLng(),g)})}};Yc.include(Sm),ym.include(Sm),Hc.include(Sm),Qi.include({toGeoJSON:function(g){var l=!Ko(this._latlngs),d=Fc(this._latlngs,l?1:0,!1,g);return Zs(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),fs.include({toGeoJSON:function(g){var l=!Ko(this._latlngs),d=l&&!Ko(this._latlngs[0]),h=Fc(this._latlngs,d?2:l?1:0,!0,g);return l||(h=[h]),Zs(this,{type:(d?"Multi":"")+"Polygon",coordinates:h})}}),ps.include({toMultiPoint:function(g){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(g).geometry.coordinates)}),Zs(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(g){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(g);var d=l==="GeometryCollection",h=[];return this.eachLayer(function(S){if(S.toGeoJSON){var k=S.toGeoJSON(g);if(d)h.push(k.geometry);else{var H=Kc(k);H.type==="FeatureCollection"?h.push.apply(h,H.features):h.push(H)}}}),d?Zs(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function QZ(g,l){return new Pi(g,l)}var O1=QZ,Ec=li.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(g,l,d){this._url=g,this._bounds=re(l),G(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ke(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(g){return this.options.opacity=g,this._image&&this._updateOpacity(),this},setStyle:function(g){return g.opacity&&this.setOpacity(g.opacity),this},bringToFront:function(){return this._map&&It(this._image),this},bringToBack:function(){return this._map&&Rn(this._image),this},setUrl:function(g){return this._url=g,this._image&&(this._image.src=g),this},setBounds:function(g){return this._bounds=re(g),this._map&&this._reset(),this},getEvents:function(){var g={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(g.zoomanim=this._animateZoom),g},setZIndex:function(g){return this.options.zIndex=g,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var g=this._url.tagName==="IMG",l=this._image=g?this._url:le("img");if(xe(l,"leaflet-image-layer"),this._zoomAnimated&&xe(l,"leaflet-zoom-animated"),this.options.className&&xe(l,this.options.className),l.onselectstart=A,l.onmousemove=A,l.onload=s(this.fire,this,"load"),l.onerror=s(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),g){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(g){var l=this._map.getZoomScale(g.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,g.zoom,g.center).min;Cr(this._image,d,l)},_reset:function(){var g=this._image,l=new ae(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();_t(g,l.min),g.style.width=d.x+"px",g.style.height=d.y+"px"},_updateOpacity:function(){Fo(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var g=this.options.errorOverlayUrl;g&&this._url!==g&&(this._url=g,this._image.src=g)},getCenter:function(){return this._bounds.getCenter()}}),q1=function(g,l,d){return new Ec(g,l,d)},PZ=Ec.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var g=this._url.tagName==="VIDEO",l=this._image=g?this._url:le("video");if(xe(l,"leaflet-image-layer"),this._zoomAnimated&&xe(l,"leaflet-zoom-animated"),this.options.className&&xe(l,this.options.className),l.onselectstart=A,l.onmousemove=A,l.onloadeddata=s(this.fire,this,"load"),g){for(var d=l.getElementsByTagName("source"),h=[],S=0;S<d.length;S++)h.push(d[S].src);this._url=d.length>0?h:[l.src];return}f(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var k=0;k<this._url.length;k++){var H=le("source");H.src=this._url[k],l.appendChild(H)}}});function $1(g,l,d){return new PZ(g,l,d)}var jZ=Ec.extend({_initImage:function(){var g=this._image=this._url;xe(g,"leaflet-image-layer"),this._zoomAnimated&&xe(g,"leaflet-zoom-animated"),this.options.className&&xe(g,this.options.className),g.onselectstart=A,g.onmousemove=A}});function eY(g,l,d){return new jZ(g,l,d)}var Si=li.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(g,l){g&&(g instanceof ue||f(g))?(this._latlng=ie(g),G(this,l)):(G(this,g),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(g){return g=arguments.length?g:this._source._map,g.hasLayer(this)||g.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(g){return this._map?this.close():(arguments.length?this._source=g:g=this._source,this._prepareOpen(),this.openOn(g._map)),this},onAdd:function(g){this._zoomAnimated=g._zoomAnimated,this._container||this._initLayout(),g._fadeAnimated&&Fo(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),g._fadeAnimated&&Fo(this._container,1),this.bringToFront(),this.options.interactive&&(xe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(g){g._fadeAnimated?(Fo(this._container,0),this._removeTimeout=setTimeout(s(ke,void 0,this._container),200)):ke(this._container),this.options.interactive&&(Lt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(g){return this._latlng=ie(g),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(g){return this._content=g,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var g={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(g.zoomanim=this._animateZoom),g},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&It(this._container),this},bringToBack:function(){return this._map&&Rn(this._container),this},_prepareOpen:function(g){var l=this._source;if(!l._map)return!1;if(l instanceof Di){l=null;var d=this._source._layers;for(var h in d)if(d[h]._map){l=d[h];break}if(!l)return!1;this._source=l}if(!g)if(l.getCenter)g=l.getCenter();else if(l.getLatLng)g=l.getLatLng();else if(l.getBounds)g=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(g),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var g=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")g.innerHTML=l;else{for(;g.hasChildNodes();)g.removeChild(g.firstChild);g.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var g=this._map.latLngToLayerPoint(this._latlng),l=P(this.options.offset),d=this._getAnchor();this._zoomAnimated?_t(this._container,g.add(d)):l=l.add(g).add(d);var h=this._containerBottom=-l.y,S=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=h+"px",this._container.style.left=S+"px"}},_getAnchor:function(){return[0,0]}});Oe.include({_initOverlay:function(g,l,d,h){var S=l;return S instanceof g||(S=new g(h).setContent(l)),d&&S.setLatLng(d),S}}),li.include({_initOverlay:function(g,l,d,h){var S=d;return S instanceof g?(G(S,h),S._source=this):(S=l&&!h?l:new g(h,this),S.setContent(d)),S}});var Mc=Si.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(g){return g=arguments.length?g:this._source._map,!g.hasLayer(this)&&g._popup&&g._popup.options.autoClose&&g.removeLayer(g._popup),g._popup=this,Si.prototype.openOn.call(this,g)},onAdd:function(g){Si.prototype.onAdd.call(this,g),g.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Zg||this._source.on("preclick",ur))},onRemove:function(g){Si.prototype.onRemove.call(this,g),g.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Zg||this._source.off("preclick",ur))},getEvents:function(){var g=Si.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(g.preclick=this.close),this.options.keepInView&&(g.moveend=this._adjustPan),g},_initLayout:function(){var g="leaflet-popup",l=this._container=le("div",g+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=le("div",g+"-content-wrapper",l);if(this._contentNode=le("div",g+"-content",d),ma(l),um(this._contentNode),Ne(l,"contextmenu",ur),this._tipContainer=le("div",g+"-tip-container",l),this._tip=le("div",g+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=le("a",g+"-close-button",l);h.setAttribute("role","button"),h.setAttribute("aria-label","Close popup"),h.href="#close",h.innerHTML='<span aria-hidden="true">&#215;</span>',Ne(h,"click",function(S){Zn(S),this.close()},this)}},_updateLayout:function(){var g=this._contentNode,l=g.style;l.width="",l.whiteSpace="nowrap";var d=g.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var h=g.offsetHeight,S=this.options.maxHeight,k="leaflet-popup-scrolled";S&&h>S?(l.height=S+"px",xe(g,k)):Lt(g,k),this._containerWidth=this._container.offsetWidth},_animateZoom:function(g){var l=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center),d=this._getAnchor();_t(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var g=this._map,l=parseInt(yi(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,h=this._containerWidth,S=new N(this._containerLeft,-d-this._containerBottom);S._add(dr(this._container));var k=g.layerPointToContainerPoint(S),H=P(this.options.autoPanPadding),E=P(this.options.autoPanPaddingTopLeft||H),T=P(this.options.autoPanPaddingBottomRight||H),q=g.getSize(),de=0,We=0;k.x+h+T.x>q.x&&(de=k.x+h-q.x+T.x),k.x-de-E.x<0&&(de=k.x-E.x),k.y+d+T.y>q.y&&(We=k.y+d-q.y+T.y),k.y-We-E.y<0&&(We=k.y-E.y),(de||We)&&(this.options.keepInView&&(this._autopanning=!0),g.fire("autopanstart").panBy([de,We]))}},_getAnchor:function(){return P(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),tY=function(g,l){return new Mc(g,l)};Oe.mergeOptions({closePopupOnClick:!0}),Oe.include({openPopup:function(g,l,d){return this._initOverlay(Mc,g,l,d).openOn(this),this},closePopup:function(g){return g=arguments.length?g:this._popup,g&&g.close(),this}}),li.include({bindPopup:function(g,l){return this._popup=this._initOverlay(Mc,this._popup,g,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(g){return this._popup&&(this instanceof Di||(this._popup._source=this),this._popup._prepareOpen(g||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(g){return this._popup&&this._popup.setContent(g),this},getPopup:function(){return this._popup},_openPopup:function(g){if(!(!this._popup||!this._map)){Ar(g);var l=g.layer||g.target;if(this._popup._source===l&&!(l instanceof Zg)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(g.latlng);return}this._popup._source=l,this.openPopup(g.latlng)}},_movePopup:function(g){this._popup.setLatLng(g.latlng)},_onKeyPress:function(g){g.originalEvent.keyCode===13&&this._openPopup(g)}});var Lc=Si.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(g){Si.prototype.onAdd.call(this,g),this.setOpacity(this.options.opacity),g.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(g){Si.prototype.onRemove.call(this,g),g.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var g=Si.prototype.getEvents.call(this);return this.options.permanent||(g.preclick=this.close),g},_initLayout:function(){var g="leaflet-tooltip",l=g+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=le("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(g){var l,d,h=this._map,S=this._container,k=h.latLngToContainerPoint(h.getCenter()),H=h.layerPointToContainerPoint(g),E=this.options.direction,T=S.offsetWidth,q=S.offsetHeight,de=P(this.options.offset),We=this._getAnchor();E==="top"?(l=T/2,d=q):E==="bottom"?(l=T/2,d=0):E==="center"?(l=T/2,d=q/2):E==="right"?(l=0,d=q/2):E==="left"?(l=T,d=q/2):H.x<k.x?(E="right",l=0,d=q/2):(E="left",l=T+(de.x+We.x)*2,d=q/2),g=g.subtract(P(l,d,!0)).add(de).add(We),Lt(S,"leaflet-tooltip-right"),Lt(S,"leaflet-tooltip-left"),Lt(S,"leaflet-tooltip-top"),Lt(S,"leaflet-tooltip-bottom"),xe(S,"leaflet-tooltip-"+E),_t(S,g)},_updatePosition:function(){var g=this._map.latLngToLayerPoint(this._latlng);this._setPosition(g)},setOpacity:function(g){this.options.opacity=g,this._container&&Fo(this._container,g)},_animateZoom:function(g){var l=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center);this._setPosition(l)},_getAnchor:function(){return P(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),nY=function(g,l){return new Lc(g,l)};Oe.include({openTooltip:function(g,l,d){return this._initOverlay(Lc,g,l,d).openOn(this),this},closeTooltip:function(g){return g.close(),this}}),li.include({bindTooltip:function(g,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Lc,this._tooltip,g,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(g){if(!(!g&&this._tooltipHandlersAdded)){var l=g?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!g}},openTooltip:function(g){return this._tooltip&&(this instanceof Di||(this._tooltip._source=this),this._tooltip._prepareOpen(g)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(g){return this._tooltip&&this._tooltip.setContent(g),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(g){var l=typeof g.getElement=="function"&&g.getElement();l&&(Ne(l,"focus",function(){this._tooltip._source=g,this.openTooltip()},this),Ne(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(g){var l=typeof g.getElement=="function"&&g.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(g){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(g)});return}this._tooltip._source=g.layer||g.target,this.openTooltip(this._tooltip.options.sticky?g.latlng:void 0)}},_moveTooltip:function(g){var l=g.latlng,d,h;this._tooltip.options.sticky&&g.originalEvent&&(d=this._map.mouseEventToContainerPoint(g.originalEvent),h=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(l)}});var _Z=bs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(g){var l=g&&g.tagName==="DIV"?g:document.createElement("div"),d=this.options;if(d.html instanceof Element?(cn(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var h=P(d.bgPos);l.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function oY(g){return new _Z(g)}bs.Default=ba;var fa=li.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Y.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(g){G(this,g)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(g){g._addZoomLimit(this)},onRemove:function(g){this._removeAllTiles(),ke(this._container),g._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(It(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Rn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(g){return this.options.opacity=g,this._updateOpacity(),this},setZIndex:function(g){return this.options.zIndex=g,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var g=this._clampZoom(this._map.getZoom());g!==this._tileZoom&&(this._tileZoom=g,this._updateLevels()),this._update()}return this},getEvents:function(){var g={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),g.move=this._onMove),this._zoomAnimated&&(g.zoomanim=this._animateZoom),g},createTile:function(){return document.createElement("div")},getTileSize:function(){var g=this.options.tileSize;return g instanceof N?g:new N(g,g)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(g){for(var l=this.getPane().children,d=-g(-1/0,1/0),h=0,S=l.length,k;h<S;h++)k=l[h].style.zIndex,l[h]!==this._container&&k&&(d=g(d,+k));isFinite(d)&&(this.options.zIndex=d+g(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Y.ielt9){Fo(this._container,this.options.opacity);var g=+new Date,l=!1,d=!1;for(var h in this._tiles){var S=this._tiles[h];if(!(!S.current||!S.loaded)){var k=Math.min(1,(g-S.loaded)/200);Fo(S.el,k),k<1?l=!0:(S.active?d=!0:this._onOpaqueTile(S),S.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(Q(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:A,_initContainer:function(){this._container||(this._container=le("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var g=this._tileZoom,l=this.options.maxZoom;if(g!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===g?(this._levels[d].el.style.zIndex=l-Math.abs(g-d),this._onUpdateLevel(d)):(ke(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var h=this._levels[g],S=this._map;return h||(h=this._levels[g]={},h.el=le("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=l,h.origin=S.project(S.unproject(S.getPixelOrigin()),g).round(),h.zoom=g,this._setZoomTransform(h,S.getCenter(),S.getZoom()),A(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:A,_onRemoveLevel:A,_onCreateLevel:A,_pruneTiles:function(){if(this._map){var g,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(g in this._tiles)l=this._tiles[g],l.retain=l.current;for(g in this._tiles)if(l=this._tiles[g],l.current&&!l.active){var h=l.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(g in this._tiles)this._tiles[g].retain||this._removeTile(g)}},_removeTilesAtZoom:function(g){for(var l in this._tiles)this._tiles[l].coords.z===g&&this._removeTile(l)},_removeAllTiles:function(){for(var g in this._tiles)this._removeTile(g)},_invalidateAll:function(){for(var g in this._levels)ke(this._levels[g].el),this._onRemoveLevel(Number(g)),delete this._levels[g];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(g,l,d,h){var S=Math.floor(g/2),k=Math.floor(l/2),H=d-1,E=new N(+S,+k);E.z=+H;var T=this._tileCoordsToKey(E),q=this._tiles[T];return q&&q.active?(q.retain=!0,!0):(q&&q.loaded&&(q.retain=!0),H>h?this._retainParent(S,k,H,h):!1)},_retainChildren:function(g,l,d,h){for(var S=2*g;S<2*g+2;S++)for(var k=2*l;k<2*l+2;k++){var H=new N(S,k);H.z=d+1;var E=this._tileCoordsToKey(H),T=this._tiles[E];if(T&&T.active){T.retain=!0;continue}else T&&T.loaded&&(T.retain=!0);d+1<h&&this._retainChildren(S,k,d+1,h)}},_resetView:function(g){var l=g&&(g.pinch||g.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(g){this._setView(g.center,g.zoom,!0,g.noUpdate)},_clampZoom:function(g){var l=this.options;return l.minNativeZoom!==void 0&&g<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<g?l.maxNativeZoom:g},_setView:function(g,l,d,h){var S=Math.round(l);this.options.maxZoom!==void 0&&S>this.options.maxZoom||this.options.minZoom!==void 0&&S<this.options.minZoom?S=void 0:S=this._clampZoom(S);var k=this.options.updateWhenZooming&&S!==this._tileZoom;(!h||k)&&(this._tileZoom=S,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),S!==void 0&&this._update(g),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(g,l)},_setZoomTransforms:function(g,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],g,l)},_setZoomTransform:function(g,l,d){var h=this._map.getZoomScale(d,g.zoom),S=g.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(l,d)).round();Y.any3d?Cr(g.el,S,h):_t(g.el,S)},_resetGrid:function(){var g=this._map,l=g.options.crs,d=this._tileSize=this.getTileSize(),h=this._tileZoom,S=this._map.getPixelWorldBounds(this._tileZoom);S&&(this._globalTileRange=this._pxBoundsToTileRange(S)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(g.project([0,l.wrapLng[0]],h).x/d.x),Math.ceil(g.project([0,l.wrapLng[1]],h).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(g.project([l.wrapLat[0],0],h).y/d.x),Math.ceil(g.project([l.wrapLat[1],0],h).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(g){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),h=l.getZoomScale(d,this._tileZoom),S=l.project(g,this._tileZoom).floor(),k=l.getSize().divideBy(h*2);return new ae(S.subtract(k),S.add(k))},_update:function(g){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(g===void 0&&(g=l.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(g),S=this._pxBoundsToTileRange(h),k=S.getCenter(),H=[],E=this.options.keepBuffer,T=new ae(S.getBottomLeft().subtract([E,-E]),S.getTopRight().add([E,-E]));if(!(isFinite(S.min.x)&&isFinite(S.min.y)&&isFinite(S.max.x)&&isFinite(S.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var q in this._tiles){var de=this._tiles[q].coords;(de.z!==this._tileZoom||!T.contains(new N(de.x,de.y)))&&(this._tiles[q].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(g,d);return}for(var We=S.min.y;We<=S.max.y;We++)for(var De=S.min.x;De<=S.max.x;De++){var Un=new N(De,We);if(Un.z=this._tileZoom,!!this._isValidTile(Un)){var Cn=this._tiles[this._tileCoordsToKey(Un)];Cn?Cn.current=!0:H.push(Un)}}if(H.sort(function(no,Gs){return no.distanceTo(k)-Gs.distanceTo(k)}),H.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Eo=document.createDocumentFragment();for(De=0;De<H.length;De++)this._addTile(H[De],Eo);this._level.el.appendChild(Eo)}}}},_isValidTile:function(g){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(g.x<d.min.x||g.x>d.max.x)||!l.wrapLat&&(g.y<d.min.y||g.y>d.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(g);return re(this.options.bounds).overlaps(h)},_keyToBounds:function(g){return this._tileCoordsToBounds(this._keyToTileCoords(g))},_tileCoordsToNwSe:function(g){var l=this._map,d=this.getTileSize(),h=g.scaleBy(d),S=h.add(d),k=l.unproject(h,g.z),H=l.unproject(S,g.z);return[k,H]},_tileCoordsToBounds:function(g){var l=this._tileCoordsToNwSe(g),d=new ye(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(g){return g.x+":"+g.y+":"+g.z},_keyToTileCoords:function(g){var l=g.split(":"),d=new N(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(g){var l=this._tiles[g];l&&(ke(l.el),delete this._tiles[g],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(g)}))},_initTile:function(g){xe(g,"leaflet-tile");var l=this.getTileSize();g.style.width=l.x+"px",g.style.height=l.y+"px",g.onselectstart=A,g.onmousemove=A,Y.ielt9&&this.options.opacity<1&&Fo(g,this.options.opacity)},_addTile:function(g,l){var d=this._getTilePos(g),h=this._tileCoordsToKey(g),S=this.createTile(this._wrapCoords(g),s(this._tileReady,this,g));this._initTile(S),this.createTile.length<2&&M(s(this._tileReady,this,g,null,S)),_t(S,d),this._tiles[h]={el:S,coords:g,current:!0},l.appendChild(S),this.fire("tileloadstart",{tile:S,coords:g})},_tileReady:function(g,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:g});var h=this._tileCoordsToKey(g);d=this._tiles[h],d&&(d.loaded=+new Date,this._map._fadeAnimated?(Fo(d.el,0),Q(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(xe(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:g})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Y.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(g){return g.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(g){var l=new N(this._wrapX?C(g.x,this._wrapX):g.x,this._wrapY?C(g.y,this._wrapY):g.y);return l.z=g.z,l},_pxBoundsToTileRange:function(g){var l=this.getTileSize();return new ae(g.min.unscaleBy(l).floor(),g.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var g in this._tiles)if(!this._tiles[g].loaded)return!1;return!0}});function iY(g){return new fa(g)}var ys=fa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(g,l){this._url=g,l=G(this,l),l.detectRetina&&Y.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(g,l){return this._url===g&&l===void 0&&(l=!0),this._url=g,l||this.redraw(),this},createTile:function(g,l){var d=document.createElement("img");return Ne(d,"load",s(this._tileOnLoad,this,l,d)),Ne(d,"error",s(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(g),d},getTileUrl:function(g){var l={r:Y.retina?"@2x":"",s:this._getSubdomain(g),x:g.x,y:g.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-g.y;this.options.tms&&(l.y=d),l["-y"]=d}return y(this._url,i(l,this.options))},_tileOnLoad:function(g,l){Y.ielt9?setTimeout(s(g,this,null,l),0):g(null,l)},_tileOnError:function(g,l,d){var h=this.options.errorTileUrl;h&&l.getAttribute("src")!==h&&(l.src=h),g(d,l)},_onTileRemove:function(g){g.tile.onload=null},_getZoomForUrl:function(){var g=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,h=this.options.zoomOffset;return d&&(g=l-g),g+h},_getSubdomain:function(g){var l=Math.abs(g.x+g.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var g,l;for(g in this._tiles)if(this._tiles[g].coords.z!==this._tileZoom&&(l=this._tiles[g].el,l.onload=A,l.onerror=A,!l.complete)){l.src=V;var d=this._tiles[g].coords;ke(l),delete this._tiles[g],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(g){var l=this._tiles[g];if(l)return l.el.setAttribute("src",V),fa.prototype._removeTile.call(this,g)},_tileReady:function(g,l,d){if(!(!this._map||d&&d.getAttribute("src")===V))return fa.prototype._tileReady.call(this,g,l,d)}});function OZ(g,l){return new ys(g,l)}var qZ=ys.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(g,l){this._url=g;var d=i({},this.defaultWmsParams);for(var h in l)h in this.options||(d[h]=l[h]);l=G(this,l);var S=l.detectRetina&&Y.retina?2:1,k=this.getTileSize();d.width=k.x*S,d.height=k.y*S,this.wmsParams=d},onAdd:function(g){this._crs=this.options.crs||g.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,ys.prototype.onAdd.call(this,g)},getTileUrl:function(g){var l=this._tileCoordsToNwSe(g),d=this._crs,h=Ie(d.project(l[0]),d.project(l[1])),S=h.min,k=h.max,H=(this._wmsVersion>=1.3&&this._crs===TZ?[S.y,S.x,k.y,k.x]:[S.x,S.y,k.x,k.y]).join(","),E=ys.prototype.getTileUrl.call(this,g);return E+W(this.wmsParams,E,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+H},setParams:function(g,l){return i(this.wmsParams,g),l||this.redraw(),this}});function gY(g,l){return new qZ(g,l)}ys.WMS=qZ,OZ.wms=gY;var ji=li.extend({options:{padding:.1},initialize:function(g){G(this,g),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var g={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(g.zoomanim=this._onAnimZoom),g},_onAnimZoom:function(g){this._updateTransform(g.center,g.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(g,l){var d=this._map.getZoomScale(l,this._zoom),h=this._map.getSize().multiplyBy(.5+this.options.padding),S=this._map.project(this._center,l),k=h.multiplyBy(-d).add(S).subtract(this._map._getNewPixelOrigin(g,l));Y.any3d?Cr(this._container,k,d):_t(this._container,k)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var g in this._layers)this._layers[g]._reset()},_onZoomEnd:function(){for(var g in this._layers)this._layers[g]._project()},_updatePaths:function(){for(var g in this._layers)this._layers[g]._update()},_update:function(){var g=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-g)).round();this._bounds=new ae(d,d.add(l.multiplyBy(1+g*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),$Z=ji.extend({options:{tolerance:0},getEvents:function(){var g=ji.prototype.getEvents.call(this);return g.viewprereset=this._onViewPreReset,g},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ji.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var g=this._container=document.createElement("canvas");Ne(g,"mousemove",this._onMouseMove,this),Ne(g,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ne(g,"mouseout",this._handleMouseOut,this),g._leaflet_disable_events=!0,this._ctx=g.getContext("2d")},_destroyContainer:function(){Q(this._redrawRequest),delete this._ctx,ke(this._container),Zt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var g;this._redrawBounds=null;for(var l in this._layers)g=this._layers[l],g._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ji.prototype._update.call(this);var g=this._bounds,l=this._container,d=g.getSize(),h=Y.retina?2:1;_t(l,g.min),l.width=h*d.x,l.height=h*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",Y.retina&&this._ctx.scale(2,2),this._ctx.translate(-g.min.x,-g.min.y),this.fire("update")}},_reset:function(){ji.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(g){this._updateDashArray(g),this._layers[a(g)]=g;var l=g._order={layer:g,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(g){this._requestRedraw(g)},_removePath:function(g){var l=g._order,d=l.next,h=l.prev;d?d.prev=h:this._drawLast=h,h?h.next=d:this._drawFirst=d,delete g._order,delete this._layers[a(g)],this._requestRedraw(g)},_updatePath:function(g){this._extendRedrawBounds(g),g._project(),g._update(),this._requestRedraw(g)},_updateStyle:function(g){this._updateDashArray(g),this._requestRedraw(g)},_updateDashArray:function(g){if(typeof g.options.dashArray=="string"){var l=g.options.dashArray.split(/[, ]+/),d=[],h,S;for(S=0;S<l.length;S++){if(h=Number(l[S]),isNaN(h))return;d.push(h)}g.options._dashArray=d}else g.options._dashArray=g.options.dashArray},_requestRedraw:function(g){this._map&&(this._extendRedrawBounds(g),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(g){if(g._pxBounds){var l=(g.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ae,this._redrawBounds.extend(g._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(g._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var g=this._redrawBounds;if(g){var l=g.getSize();this._ctx.clearRect(g.min.x,g.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var g,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)g=h.layer,(!l||g._pxBounds&&g._pxBounds.intersects(l))&&g._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(g,l){if(this._drawing){var d,h,S,k,H=g._parts,E=H.length,T=this._ctx;if(E){for(T.beginPath(),d=0;d<E;d++){for(h=0,S=H[d].length;h<S;h++)k=H[d][h],T[h?"lineTo":"moveTo"](k.x,k.y);l&&T.closePath()}this._fillStroke(T,g)}}},_updateCircle:function(g){if(!(!this._drawing||g._empty())){var l=g._point,d=this._ctx,h=Math.max(Math.round(g._radius),1),S=(Math.max(Math.round(g._radiusY),1)||h)/h;S!==1&&(d.save(),d.scale(1,S)),d.beginPath(),d.arc(l.x,l.y/S,h,0,Math.PI*2,!1),S!==1&&d.restore(),this._fillStroke(d,g)}},_fillStroke:function(g,l){var d=l.options;d.fill&&(g.globalAlpha=d.fillOpacity,g.fillStyle=d.fillColor||d.color,g.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(g.setLineDash&&g.setLineDash(l.options&&l.options._dashArray||[]),g.globalAlpha=d.opacity,g.lineWidth=d.weight,g.strokeStyle=d.color,g.lineCap=d.lineCap,g.lineJoin=d.lineJoin,g.stroke())},_onClick:function(g){for(var l=this._map.mouseEventToLayerPoint(g),d,h,S=this._drawFirst;S;S=S.next)d=S.layer,d.options.interactive&&d._containsPoint(l)&&(!(g.type==="click"||g.type==="preclick")||!this._map._draggableMoved(d))&&(h=d);this._fireEvent(h?[h]:!1,g)},_onMouseMove:function(g){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(g);this._handleMouseHover(g,l)}},_handleMouseOut:function(g){var l=this._hoveredLayer;l&&(Lt(this._container,"leaflet-interactive"),this._fireEvent([l],g,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(g,l){if(!this._mouseHoverThrottled){for(var d,h,S=this._drawFirst;S;S=S.next)d=S.layer,d.options.interactive&&d._containsPoint(l)&&(h=d);h!==this._hoveredLayer&&(this._handleMouseOut(g),h&&(xe(this._container,"leaflet-interactive"),this._fireEvent([h],g,"mouseover"),this._hoveredLayer=h)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,g),this._mouseHoverThrottled=!0,setTimeout(s(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(g,l,d){this._map._fireDOMEvent(l,d||l.type,g)},_bringToFront:function(g){var l=g._order;if(l){var d=l.next,h=l.prev;if(d)d.prev=h;else return;h?h.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(g)}},_bringToBack:function(g){var l=g._order;if(l){var d=l.next,h=l.prev;if(h)h.next=d;else return;d?d.prev=h:h&&(this._drawLast=h),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(g)}}});function ey(g){return Y.canvas?new $Z(g):null}var Za=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(g){return document.createElement("<lvml:"+g+' class="lvml">')}}catch{}return function(g){return document.createElement("<"+g+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),rY={_initContainer:function(){this._container=le("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ji.prototype._update.call(this),this.fire("update"))},_initPath:function(g){var l=g._container=Za("shape");xe(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",g._path=Za("path"),l.appendChild(g._path),this._updateStyle(g),this._layers[a(g)]=g},_addPath:function(g){var l=g._container;this._container.appendChild(l),g.options.interactive&&g.addInteractiveTarget(l)},_removePath:function(g){var l=g._container;ke(l),g.removeInteractiveTarget(l),delete this._layers[a(g)]},_updateStyle:function(g){var l=g._stroke,d=g._fill,h=g.options,S=g._container;S.stroked=!!h.stroke,S.filled=!!h.fill,h.stroke?(l||(l=g._stroke=Za("stroke")),S.appendChild(l),l.weight=h.weight+"px",l.color=h.color,l.opacity=h.opacity,h.dashArray?l.dashStyle=f(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=h.lineCap.replace("butt","flat"),l.joinstyle=h.lineJoin):l&&(S.removeChild(l),g._stroke=null),h.fill?(d||(d=g._fill=Za("fill")),S.appendChild(d),d.color=h.fillColor||h.color,d.opacity=h.fillOpacity):d&&(S.removeChild(d),g._fill=null)},_updateCircle:function(g){var l=g._point.round(),d=Math.round(g._radius),h=Math.round(g._radiusY||d);this._setPath(g,g._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+h+" 0,"+65535*360)},_setPath:function(g,l){g._path.v=l},_bringToFront:function(g){It(g._container)},_bringToBack:function(g){Rn(g._container)}},zc=Y.vml?Za:_e,ya=ji.extend({_initContainer:function(){this._container=zc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=zc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ke(this._container),Zt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ji.prototype._update.call(this);var g=this._bounds,l=g.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),_t(d,g.min),d.setAttribute("viewBox",[g.min.x,g.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(g){var l=g._path=zc("path");g.options.className&&xe(l,g.options.className),g.options.interactive&&xe(l,"leaflet-interactive"),this._updateStyle(g),this._layers[a(g)]=g},_addPath:function(g){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(g._path),g.addInteractiveTarget(g._path)},_removePath:function(g){ke(g._path),g.removeInteractiveTarget(g._path),delete this._layers[a(g)]},_updatePath:function(g){g._project(),g._update()},_updateStyle:function(g){var l=g._path,d=g.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(g,l){this._setPath(g,$n(g._parts,l))},_updateCircle:function(g){var l=g._point,d=Math.max(Math.round(g._radius),1),h=Math.max(Math.round(g._radiusY),1)||d,S="a"+d+","+h+" 0 1,0 ",k=g._empty()?"M0 0":"M"+(l.x-d)+","+l.y+S+d*2+",0 "+S+-d*2+",0 ";this._setPath(g,k)},_setPath:function(g,l){g._path.setAttribute("d",l)},_bringToFront:function(g){It(g._path)},_bringToBack:function(g){Rn(g._path)}});Y.vml&&ya.include(rY);function ty(g){return Y.svg||Y.vml?new ya(g):null}Oe.include({getRenderer:function(g){var l=g.options.renderer||this._getPaneRenderer(g.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(g){if(g==="overlayPane"||g===void 0)return!1;var l=this._paneRenderers[g];return l===void 0&&(l=this._createRenderer({pane:g}),this._paneRenderers[g]=l),l},_createRenderer:function(g){return this.options.preferCanvas&&ey(g)||ty(g)}});var ny=fs.extend({initialize:function(g,l){fs.prototype.initialize.call(this,this._boundsToLatLngs(g),l)},setBounds:function(g){return this.setLatLngs(this._boundsToLatLngs(g))},_boundsToLatLngs:function(g){return g=re(g),[g.getSouthWest(),g.getNorthWest(),g.getNorthEast(),g.getSouthEast()]}});function sY(g,l){return new ny(g,l)}ya.create=zc,ya.pointsToPath=$n,Pi.geometryToLayer=xc,Pi.coordsToLatLng=Gm,Pi.coordsToLatLngs=Nc,Pi.latLngToCoords=Bm,Pi.latLngsToCoords=Fc,Pi.getFeature=Zs,Pi.asFeature=Kc,Oe.mergeOptions({boxZoom:!0});var oy=Bi.extend({initialize:function(g){this._map=g,this._container=g._container,this._pane=g._panes.overlayPane,this._resetStateTimeout=0,g.on("unload",this._destroy,this)},addHooks:function(){Ne(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Zt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ke(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(g){if(!g.shiftKey||g.which!==1&&g.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),da(),rm(),this._startPoint=this._map.mouseEventToContainerPoint(g),Ne(document,{contextmenu:Ar,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(g){this._moved||(this._moved=!0,this._box=le("div","leaflet-zoom-box",this._container),xe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(g);var l=new ae(this._point,this._startPoint),d=l.getSize();_t(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(ke(this._box),Lt(this._container,"leaflet-crosshair")),ua(),sm(),Zt(document,{contextmenu:Ar,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(g){if(!(g.which!==1&&g.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var l=new ye(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(g){g.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Oe.addInitHook("addHandler","boxZoom",oy),Oe.mergeOptions({doubleClickZoom:!0});var iy=Bi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(g){var l=this._map,d=l.getZoom(),h=l.options.zoomDelta,S=g.originalEvent.shiftKey?d-h:d+h;l.options.doubleClickZoom==="center"?l.setZoom(S):l.setZoomAround(g.containerPoint,S)}});Oe.addInitHook("addHandler","doubleClickZoom",iy),Oe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gy=Bi.extend({addHooks:function(){if(!this._draggable){var g=this._map;this._draggable=new fg(g._mapPane,g._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),g.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),g.on("zoomend",this._onZoomEnd,this),g.whenReady(this._onZoomEnd,this))}xe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Lt(this._map._container,"leaflet-grab"),Lt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var g=this._map;if(g._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=re(this._map.options.maxBounds);this._offsetLimit=Ie(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;g.fire("movestart").fire("dragstart"),g.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(g){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",g).fire("drag",g)},_prunePositions:function(g){for(;this._positions.length>1&&g-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var g=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(g).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(g,l){return g-(g-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var g=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;g.x<l.min.x&&(g.x=this._viscousLimit(g.x,l.min.x)),g.y<l.min.y&&(g.y=this._viscousLimit(g.y,l.min.y)),g.x>l.max.x&&(g.x=this._viscousLimit(g.x,l.max.x)),g.y>l.max.y&&(g.y=this._viscousLimit(g.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(g)}},_onPreDragWrap:function(){var g=this._worldWidth,l=Math.round(g/2),d=this._initialWorldOffset,h=this._draggable._newPos.x,S=(h-l+d)%g+l-d,k=(h+l+d)%g-l-d,H=Math.abs(S+d)<Math.abs(k+d)?S:k;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=H},_onDragEnd:function(g){var l=this._map,d=l.options,h=!d.inertia||g.noInertia||this._times.length<2;if(l.fire("dragend",g),h)l.fire("moveend");else{this._prunePositions(+new Date);var S=this._lastPos.subtract(this._positions[0]),k=(this._lastTime-this._times[0])/1e3,H=d.easeLinearity,E=S.multiplyBy(H/k),T=E.distanceTo([0,0]),q=Math.min(d.inertiaMaxSpeed,T),de=E.multiplyBy(q/T),We=q/(d.inertiaDeceleration*H),De=de.multiplyBy(-We/2).round();!De.x&&!De.y?l.fire("moveend"):(De=l._limitOffset(De,l.options.maxBounds),M(function(){l.panBy(De,{duration:We,easeLinearity:H,noMoveStart:!0,animate:!0})}))}}});Oe.addInitHook("addHandler","dragging",gy),Oe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ry=Bi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(g){this._map=g,this._setPanDelta(g.options.keyboardPanDelta),this._setZoomDelta(g.options.zoomDelta)},addHooks:function(){var g=this._map._container;g.tabIndex<=0&&(g.tabIndex="0"),Ne(g,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Zt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var g=document.body,l=document.documentElement,d=g.scrollTop||l.scrollTop,h=g.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(h,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(g){var l=this._panKeys={},d=this.keyCodes,h,S;for(h=0,S=d.left.length;h<S;h++)l[d.left[h]]=[-1*g,0];for(h=0,S=d.right.length;h<S;h++)l[d.right[h]]=[g,0];for(h=0,S=d.down.length;h<S;h++)l[d.down[h]]=[0,g];for(h=0,S=d.up.length;h<S;h++)l[d.up[h]]=[0,-1*g]},_setZoomDelta:function(g){var l=this._zoomKeys={},d=this.keyCodes,h,S;for(h=0,S=d.zoomIn.length;h<S;h++)l[d.zoomIn[h]]=g;for(h=0,S=d.zoomOut.length;h<S;h++)l[d.zoomOut[h]]=-g},_addHooks:function(){Ne(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Zt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(g){if(!(g.altKey||g.ctrlKey||g.metaKey)){var l=g.keyCode,d=this._map,h;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(h=this._panKeys[l],g.shiftKey&&(h=P(h).multiplyBy(3)),d.options.maxBounds&&(h=d._limitOffset(P(h),d.options.maxBounds)),d.options.worldCopyJump){var S=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(h)));d.panTo(S)}else d.panBy(h)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(g.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Ar(g)}}});Oe.addInitHook("addHandler","keyboard",ry),Oe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var sy=Bi.extend({addHooks:function(){Ne(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Zt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(g){var l=wZ(g),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(g),this._startTime||(this._startTime=+new Date);var h=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),h),Ar(g)},_performZoom:function(){var g=this._map,l=g.getZoom(),d=this._map.options.zoomSnap||0;g._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),S=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,k=d?Math.ceil(S/d)*d:S,H=g._limitZoom(l+(this._delta>0?k:-k))-l;this._delta=0,this._startTime=null,H&&(g.options.scrollWheelZoom==="center"?g.setZoom(l+H):g.setZoomAround(this._lastMousePos,l+H))}});Oe.addInitHook("addHandler","scrollWheelZoom",sy);var lY=600;Oe.mergeOptions({tapHold:Y.touchNative&&Y.safari&&Y.mobile,tapTolerance:15});var ly=Bi.extend({addHooks:function(){Ne(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Zt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(g){if(clearTimeout(this._holdTimeout),g.touches.length===1){var l=g.touches[0];this._startPos=this._newPos=new N(l.clientX,l.clientY),this._holdTimeout=setTimeout(s(function(){this._cancel(),this._isTapValid()&&(Ne(document,"touchend",Zn),Ne(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),lY),Ne(document,"touchend touchcancel contextmenu",this._cancel,this),Ne(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function g(){Zt(document,"touchend",Zn),Zt(document,"touchend touchcancel",g)},_cancel:function(){clearTimeout(this._holdTimeout),Zt(document,"touchend touchcancel contextmenu",this._cancel,this),Zt(document,"touchmove",this._onMove,this)},_onMove:function(g){var l=g.touches[0];this._newPos=new N(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(g,l){var d=new MouseEvent(g,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Oe.addInitHook("addHandler","tapHold",ly),Oe.mergeOptions({touchZoom:Y.touch,bounceAtZoomLimits:!0});var ay=Bi.extend({addHooks:function(){xe(this._map._container,"leaflet-touch-zoom"),Ne(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Lt(this._map._container,"leaflet-touch-zoom"),Zt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(g){var l=this._map;if(!(!g.touches||g.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(g.touches[0]),h=l.mouseEventToContainerPoint(g.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(h)._divideBy(2))),this._startDist=d.distanceTo(h),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Ne(document,"touchmove",this._onTouchMove,this),Ne(document,"touchend touchcancel",this._onTouchEnd,this),Zn(g)}},_onTouchMove:function(g){if(!(!g.touches||g.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(g.touches[0]),h=l.mouseEventToContainerPoint(g.touches[1]),S=d.distanceTo(h)/this._startDist;if(this._zoom=l.getScaleZoom(S,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&S<1||this._zoom>l.getMaxZoom()&&S>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,S===1)return}else{var k=d._add(h)._divideBy(2)._subtract(this._centerPoint);if(S===1&&k.x===0&&k.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(k),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),Q(this._animRequest);var H=s(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(H,this,!0),Zn(g)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Q(this._animRequest),Zt(document,"touchmove",this._onTouchMove,this),Zt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Oe.addInitHook("addHandler","touchZoom",ay),Oe.BoxZoom=oy,Oe.DoubleClickZoom=iy,Oe.Drag=gy,Oe.Keyboard=ry,Oe.ScrollWheelZoom=sy,Oe.TapHold=ly,Oe.TouchZoom=ay,n.Bounds=ae,n.Browser=Y,n.CRS=Ye,n.Canvas=$Z,n.Circle=ym,n.CircleMarker=Hc,n.Class=_,n.Control=si,n.DivIcon=_Z,n.DivOverlay=Si,n.DomEvent=v1,n.DomUtil=B1,n.Draggable=fg,n.Evented=te,n.FeatureGroup=Di,n.GeoJSON=Pi,n.GridLayer=fa,n.Handler=Bi,n.Icon=bs,n.ImageOverlay=Ec,n.LatLng=ue,n.LatLngBounds=ye,n.Layer=li,n.LayerGroup=ps,n.LineUtil=K1,n.Map=Oe,n.Marker=Yc,n.Mixin=J1,n.Path=Zg,n.Point=N,n.PolyUtil=Y1,n.Polygon=fs,n.Polyline=Qi,n.Popup=Mc,n.PosAnimation=XZ,n.Projection=E1,n.Rectangle=ny,n.Renderer=ji,n.SVG=ya,n.SVGOverlay=jZ,n.TileLayer=ys,n.Tooltip=Lc,n.Transformation=Ke,n.Util=$,n.VideoOverlay=PZ,n.bind=s,n.bounds=Ie,n.canvas=ey,n.circle=P1,n.circleMarker=Q1,n.control=ha,n.divIcon=oY,n.extend=i,n.featureGroup=T1,n.geoJSON=QZ,n.geoJson=O1,n.gridLayer=iY,n.icon=U1,n.imageOverlay=q1,n.latLng=ie,n.latLngBounds=re,n.layerGroup=z1,n.map=W1,n.marker=D1,n.point=P,n.polygon=_1,n.polyline=j1,n.popup=tY,n.rectangle=sY,n.setOptions=G,n.stamp=a,n.svg=ty,n.svgOverlay=eY,n.tileLayer=OZ,n.tooltip=nY,n.transformation=Le,n.version=o,n.videoOverlay=$1;var aY=window.L;n.noConflict=function(){return window.L=aY,this},window.L=n})}(hC,hC.exports)),hC.exports}(function(e,t){(function(n,o){o(Tw())})(vW,function(n){n.Icon.Default.mergeOptions({iconUrl:null,iconRetinaUrl:null,shadowUrl:null,iconSize:null,iconAnchor:null,popupAnchor:null,tooltipAnchor:null,shadowSize:null,classNamePrefix:"leaflet-default-icon-"}),n.Icon.Default.include({_needsInit:!0,_getIconUrl:function(A){var m=this.options.imagePath||n.Icon.Default.imagePath||"";return this._needsInit&&this._initializeOptions(m),m+n.Icon.prototype._getIconUrl.call(this,A)},_initializeOptions:function(A){this._setOptions("icon",o,A),this._setOptions("shadow",o,A),this._setOptions("popup",i),this._setOptions("tooltip",i),this._needsInit=!1},_setOptions:function(A,m,p){var b=this.options,G=b.classNamePrefix,W=m(G+A,p);for(var Z in W)b[A+Z]=b[A+Z]||W[Z]}});function o(A,m){var p=n.DomUtil.create("div",A,document.body),b=c(p),G=r(b,m),W=I(p,"width"),Z=I(p,"height"),y=I(p,"margin-left"),f=I(p,"margin-top");return p.parentNode.removeChild(p),{Url:G[0],RetinaUrl:G[1],Size:[W,Z],Anchor:[-y,-f]}}function i(A){var m=n.DomUtil.create("div",A,document.body),p=I(m,"margin-left"),b=I(m,"margin-top");return m.parentNode.removeChild(m),{Anchor:[p,b]}}function r(A,m){for(var p=/url\(['"]?([^"']*?)['"]?\)/gi,b=[],G=p.exec(A);G;)b.push(m?s(G[1]):G[1]),G=p.exec(A);return b}function s(A){return A.substr(A.lastIndexOf("/")+1)}function I(A,m){return parseInt(a(A,m),10)}function a(A,m){return n.DomUtil.getStyle(A,m)||n.DomUtil.getStyle(A,C(m))}function c(A){var m=a(A,"background-image");return m&&m!=="none"?m:a(A,"cursor")}function C(A){return A.replace(/-(\w)/g,function(m,p){return p.toUpperCase()})}})})();var sn=Tw();sn.Icon.Default.mergeOptions({iconUrl:null,iconRetinaUrl:null,shadowUrl:null,iconSize:null,iconAnchor:null,popupAnchor:null,tooltipAnchor:null,shadowSize:null,classNamePrefix:"leaflet-default-icon-"});sn.Icon.Default.include({_needsInit:!0,_getIconUrl:function(e){var t=this.options.imagePath||sn.Icon.Default.imagePath||"";return this._needsInit&&this._initializeOptions(t),t+sn.Icon.prototype._getIconUrl.call(this,e)},_initializeOptions:function(e){this._setOptions("icon",kS,e),this._setOptions("shadow",kS,e),this._setOptions("popup",wS),this._setOptions("tooltip",wS),this._needsInit=!1},_setOptions:function(e,t,n){var o=this.options,i=o.classNamePrefix,r=t(i+e,n);for(var s in r)o[e+s]=o[e+s]||r[s]}});function kS(e,t){var n=sn.DomUtil.create("div",e,document.body),o=R4(n),i=W4(o,t),r=Os(n,"width"),s=Os(n,"height"),I=Os(n,"margin-left"),a=Os(n,"margin-top");return n.parentNode.removeChild(n),{Url:i[0],RetinaUrl:i[1],Size:[r,s],Anchor:[-I,-a]}}function wS(e){var t=sn.DomUtil.create("div",e,document.body),n=Os(t,"margin-left"),o=Os(t,"margin-top");return t.parentNode.removeChild(t),{Anchor:[n,o]}}function W4(e,t){for(var n=/url\(['"]?([^"']*?)['"]?\)/gi,o=[],i=n.exec(e);i;)o.push(t?V4(i[1]):i[1]),i=n.exec(e);return o}function V4(e){return e.substr(e.lastIndexOf("/")+1)}function Os(e,t){return parseInt(tb(e,t),10)}function tb(e,t){return sn.DomUtil.getStyle(e,t)||sn.DomUtil.getStyle(e,k4(t))}function R4(e){var t=tb(e,"background-image");return t&&t!=="none"?t:tb(e,"cursor")}function k4(e){return e.replace(/-(\w)/g,function(t,n){return n.toUpperCase()})}function Uw(e,t){const n=B.useRef(t);B.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}const w4=1;function X4(e){return Object.freeze({__version:w4,map:e})}function J4(e,t){return Object.freeze({...e,...t})}const Dw=B.createContext(null),Qw=Dw.Provider;function Pw(){const e=B.useContext(Dw);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function Y4(e){function t(n,o){const{instance:i,context:r}=e(n).current;return B.useImperativeHandle(o,()=>i),n.children==null?null:Ee.createElement(Qw,{value:r},n.children)}return B.forwardRef(t)}function H4(e){function t(n,o){const[i,r]=B.useState(!1),{instance:s}=e(n,r).current;B.useImperativeHandle(o,()=>s),B.useEffect(function(){i&&s.update()},[s,i,n.children]);const I=s._contentNode;return I?ic.createPortal(n.children,I):null}return B.forwardRef(t)}function x4(e){function t(n,o){const{instance:i}=e(n).current;return B.useImperativeHandle(o,()=>i),null}return B.forwardRef(t)}function jw(e,t){const n=B.useRef();B.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function X0(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function N4(e,t){return function(o,i){const r=Pw(),s=e(X0(o,r),r);return Uw(r.map,o.attribution),jw(s.current,o.eventHandlers),t(s.current,r,o,i),s}}function J0(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function Y0(e,t){return t==null?function(o,i){const r=B.useRef();return r.current||(r.current=e(o,i)),r}:function(o,i){const r=B.useRef();r.current||(r.current=e(o,i));const s=B.useRef(o),{instance:I}=r.current;return B.useEffect(function(){s.current!==o&&(t(I,o,s.current),s.current=o)},[I,o,i]),r}}function F4(e,t){B.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var r;(r=t.layerContainer)==null||r.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function _w(e){return function(n){const o=Pw(),i=e(X0(n,o),o);return Uw(o.map,n.attribution),jw(i.current,n.eventHandlers),F4(i.current,o),i}}function K4(e,t){const n=Y0(e,t),o=_w(n);return Y4(o)}function E4(e,t){const n=Y0(e),o=N4(n,t);return H4(o)}function M4(e,t){const n=Y0(e,t),o=_w(n);return x4(o)}function L4(e,t,n){const{opacity:o,zIndex:i}=t;o!=null&&o!==n.opacity&&e.setOpacity(o),i!=null&&i!==n.zIndex&&e.setZIndex(i)}function nb(){return nb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},nb.apply(this,arguments)}function z4({bounds:e,boundsOptions:t,center:n,children:o,className:i,id:r,placeholder:s,style:I,whenReady:a,zoom:c,...C},A){const[m]=B.useState({className:i,id:r,style:I}),[p,b]=B.useState(null);B.useImperativeHandle(A,()=>(p==null?void 0:p.map)??null,[p]);const G=B.useCallback(Z=>{if(Z!==null&&p===null){const y=new sn.Map(Z,C);n!=null&&c!=null?y.setView(n,c):e!=null&&y.fitBounds(e,t),a!=null&&y.whenReady(a),b(X4(y))}},[]);B.useEffect(()=>()=>{p==null||p.map.remove()},[p]);const W=p?Ee.createElement(Qw,{value:p},o):s??null;return Ee.createElement("div",nb({},m,{ref:G}),W)}const as=B.forwardRef(z4),Is=K4(function({position:t,...n},o){const i=new sn.Marker(t,n);return J0(i,J4(o,{overlayContainer:i}))},function(t,n,o){n.position!==o.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==o.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==o.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==o.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==o.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),cs=E4(function(t,n){const o=new sn.Popup(t,n.overlayContainer);return J0(o,n)},function(t,n,{position:o},i){B.useEffect(function(){const{instance:s}=t;function I(c){c.popup===s&&(s.update(),i(!0))}function a(c){c.popup===s&&i(!1)}return n.map.on({popupopen:I,popupclose:a}),n.overlayContainer==null?(o!=null&&s.setLatLng(o),s.openOn(n.map)):n.overlayContainer.bindPopup(s),function(){var C;n.map.off({popupopen:I,popupclose:a}),(C=n.overlayContainer)==null||C.unbindPopup(),n.map.removeLayer(s)}},[t,n,i,o])}),Cs=M4(function({url:t,...n},o){const i=new sn.TileLayer(t,X0(n,o));return J0(i,o)},function(t,n,o){L4(t,n,o);const{url:i}=n;i!=null&&i!==o.url&&t.setUrl(i)});function T4(){const e=new sn.Icon({iconUrl:"https://cdn.pixabay.com/photo/2014/04/03/10/03/google-309740_1280.png",iconSize:[35,35]}),t=[13.90661863070067,100.52568870594502];return u.jsxs("div",{style:{width:"100%",height:"100%",aspectRatio:.5},children:[u.jsx(Mn,{}),u.jsxs(as,{style:{width:"100%",height:"100%"},center:t,zoom:13,scrollWheelZoom:!1,children:[u.jsx(Cs,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),u.jsx(Is,{position:[13.90661863070067,100.52568870594502],icon:e,children:u.jsx(cs,{children:"ร้านผักคุณนายวิมล"})})]}),","]})}function U4(){const e=new sn.Icon({iconUrl:"https://cdn.pixabay.com/photo/2014/04/03/10/03/google-309740_1280.png",iconSize:[35,35]}),t=[13.745972896168352,100.53439096546253];return u.jsxs("div",{style:{width:"100%",height:"100%",aspectRatio:.5},children:[u.jsx(Mn,{}),u.jsxs(as,{style:{width:"100%",height:"100%"},center:t,zoom:13,scrollWheelZoom:!1,children:[u.jsx(Cs,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),u.jsx(Is,{position:[13.745972896168352,100.53439096546253],icon:e,children:u.jsx(cs,{children:"ร้านผลไม้นายต้นไม้"})})]}),","]})}function D4(){const e=new sn.Icon({iconUrl:"https://cdn.pixabay.com/photo/2014/04/03/10/03/google-309740_1280.png",iconSize:[35,35]}),t=[13.769107994163104,100.64155345474909];return u.jsxs("div",{style:{width:"100%",height:"100%",aspectRatio:.5},children:[u.jsx(Mn,{}),u.jsxs(as,{style:{width:"100%",height:"100%"},center:t,zoom:13,scrollWheelZoom:!1,children:[u.jsx(Cs,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),u.jsx(Is,{position:[13.769107994163104,100.64155345474909],icon:e,children:u.jsx(cs,{children:"ร้านไข่ไก่ปารณีย์"})})]}),","]})}function Q4(){const e=new sn.Icon({iconUrl:"https://cdn.pixabay.com/photo/2014/04/03/10/03/google-309740_1280.png",iconSize:[35,35]}),t=[13.768441080022008,100.63468699994466];return u.jsxs("div",{style:{width:"100%",height:"100%",aspectRatio:.5},children:[u.jsx(Mn,{}),u.jsxs(as,{style:{width:"100%",height:"100%"},center:t,zoom:13,scrollWheelZoom:!1,children:[u.jsx(Cs,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),u.jsx(Is,{position:[13.768441080022008,100.63468699994466],icon:e,children:u.jsx(cs,{children:"ร้านไข่เป็ดนายกรุง"})})]}),","]})}function P4(){const e=new sn.Icon({iconUrl:"https://cdn.pixabay.com/photo/2014/04/03/10/03/google-309740_1280.png",iconSize:[35,35]}),t=[13.751238283332075,100.66766414555302];return u.jsxs("div",{style:{width:"100%",height:"100%",aspectRatio:.5},children:[u.jsx(Mn,{}),u.jsxs(as,{style:{width:"100%",height:"100%"},center:t,zoom:13,scrollWheelZoom:!1,children:[u.jsx(Cs,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),u.jsx(Is,{position:[13.751238283332075,100.66766414555302],icon:e,children:u.jsx(cs,{children:"ร้านผลไม้นางกมลาสน์"})})]}),","]})}var j4=Object.defineProperty,_d=Object.getOwnPropertySymbols,Ow=Object.prototype.hasOwnProperty,qw=Object.prototype.propertyIsEnumerable,XS=(e,t,n)=>t in e?j4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,TI=(e,t)=>{for(var n in t||(t={}))Ow.call(t,n)&&XS(e,n,t[n]);if(_d)for(var n of _d(t))qw.call(t,n)&&XS(e,n,t[n]);return e},H0=(e,t)=>{var n={};for(var o in e)Ow.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&_d)for(var o of _d(e))t.indexOf(o)<0&&qw.call(e,o)&&(n[o]=e[o]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var $r;(e=>{const t=class{constructor(a,c,C,A){if(this.version=a,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],a<t.MIN_VERSION||a>t.MAX_VERSION)throw new RangeError("Version value out of range");if(A<-1||A>7)throw new RangeError("Mask value out of range");this.size=a*4+17;let m=[];for(let b=0;b<this.size;b++)m.push(!1);for(let b=0;b<this.size;b++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const p=this.addEccAndInterleave(C);if(this.drawCodewords(p),A==-1){let b=1e9;for(let G=0;G<8;G++){this.applyMask(G),this.drawFormatBits(G);const W=this.getPenaltyScore();W<b&&(A=G,b=W),this.applyMask(G)}}r(0<=A&&A<=7),this.mask=A,this.applyMask(A),this.drawFormatBits(A),this.isFunction=[]}static encodeText(a,c){const C=e.QrSegment.makeSegments(a);return t.encodeSegments(C,c)}static encodeBinary(a,c){const C=e.QrSegment.makeBytes(a);return t.encodeSegments([C],c)}static encodeSegments(a,c,C=1,A=40,m=-1,p=!0){if(!(t.MIN_VERSION<=C&&C<=A&&A<=t.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let b,G;for(b=C;;b++){const f=t.getNumDataCodewords(b,c)*8,v=I.getTotalBits(a,b);if(v<=f){G=v;break}if(b>=A)throw new RangeError("Data too long")}for(const f of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])p&&G<=t.getNumDataCodewords(b,f)*8&&(c=f);let W=[];for(const f of a){o(f.mode.modeBits,4,W),o(f.numChars,f.mode.numCharCountBits(b),W);for(const v of f.getData())W.push(v)}r(W.length==G);const Z=t.getNumDataCodewords(b,c)*8;r(W.length<=Z),o(0,Math.min(4,Z-W.length),W),o(0,(8-W.length%8)%8,W),r(W.length%8==0);for(let f=236;W.length<Z;f^=253)o(f,8,W);let y=[];for(;y.length*8<W.length;)y.push(0);return W.forEach((f,v)=>y[v>>>3]|=f<<7-(v&7)),new t(b,c,y,m)}getModule(a,c){return 0<=a&&a<this.size&&0<=c&&c<this.size&&this.modules[c][a]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const a=this.getAlignmentPatternPositions(),c=a.length;for(let C=0;C<c;C++)for(let A=0;A<c;A++)C==0&&A==0||C==0&&A==c-1||C==c-1&&A==0||this.drawAlignmentPattern(a[C],a[A]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(a){const c=this.errorCorrectionLevel.formatBits<<3|a;let C=c;for(let m=0;m<10;m++)C=C<<1^(C>>>9)*1335;const A=(c<<10|C)^21522;r(A>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,i(A,m));this.setFunctionModule(8,7,i(A,6)),this.setFunctionModule(8,8,i(A,7)),this.setFunctionModule(7,8,i(A,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,i(A,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,i(A,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,i(A,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let a=this.version;for(let C=0;C<12;C++)a=a<<1^(a>>>11)*7973;const c=this.version<<12|a;r(c>>>18==0);for(let C=0;C<18;C++){const A=i(c,C),m=this.size-11+C%3,p=Math.floor(C/3);this.setFunctionModule(m,p,A),this.setFunctionModule(p,m,A)}}drawFinderPattern(a,c){for(let C=-4;C<=4;C++)for(let A=-4;A<=4;A++){const m=Math.max(Math.abs(A),Math.abs(C)),p=a+A,b=c+C;0<=p&&p<this.size&&0<=b&&b<this.size&&this.setFunctionModule(p,b,m!=2&&m!=4)}}drawAlignmentPattern(a,c){for(let C=-2;C<=2;C++)for(let A=-2;A<=2;A++)this.setFunctionModule(a+A,c+C,Math.max(Math.abs(A),Math.abs(C))!=1)}setFunctionModule(a,c,C){this.modules[c][a]=C,this.isFunction[c][a]=!0}addEccAndInterleave(a){const c=this.version,C=this.errorCorrectionLevel;if(a.length!=t.getNumDataCodewords(c,C))throw new RangeError("Invalid argument");const A=t.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][c],m=t.ECC_CODEWORDS_PER_BLOCK[C.ordinal][c],p=Math.floor(t.getNumRawDataModules(c)/8),b=A-p%A,G=Math.floor(p/A);let W=[];const Z=t.reedSolomonComputeDivisor(m);for(let f=0,v=0;f<A;f++){let V=a.slice(v,v+G-m+(f<b?0:1));v+=V.length;const X=t.reedSolomonComputeRemainder(V,Z);f<b&&V.push(0),W.push(V.concat(X))}let y=[];for(let f=0;f<W[0].length;f++)W.forEach((v,V)=>{(f!=G-m||V>=b)&&y.push(v[f])});return r(y.length==p),y}drawCodewords(a){if(a.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let A=0;A<this.size;A++)for(let m=0;m<2;m++){const p=C-m,G=(C+1&2)==0?this.size-1-A:A;!this.isFunction[G][p]&&c<a.length*8&&(this.modules[G][p]=i(a[c>>>3],7-(c&7)),c++)}}r(c==a.length*8)}applyMask(a){if(a<0||a>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let C=0;C<this.size;C++){let A;switch(a){case 0:A=(C+c)%2==0;break;case 1:A=c%2==0;break;case 2:A=C%3==0;break;case 3:A=(C+c)%3==0;break;case 4:A=(Math.floor(C/3)+Math.floor(c/2))%2==0;break;case 5:A=C*c%2+C*c%3==0;break;case 6:A=(C*c%2+C*c%3)%2==0;break;case 7:A=((C+c)%2+C*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][C]&&A&&(this.modules[c][C]=!this.modules[c][C])}}getPenaltyScore(){let a=0;for(let m=0;m<this.size;m++){let p=!1,b=0,G=[0,0,0,0,0,0,0];for(let W=0;W<this.size;W++)this.modules[m][W]==p?(b++,b==5?a+=t.PENALTY_N1:b>5&&a++):(this.finderPenaltyAddHistory(b,G),p||(a+=this.finderPenaltyCountPatterns(G)*t.PENALTY_N3),p=this.modules[m][W],b=1);a+=this.finderPenaltyTerminateAndCount(p,b,G)*t.PENALTY_N3}for(let m=0;m<this.size;m++){let p=!1,b=0,G=[0,0,0,0,0,0,0];for(let W=0;W<this.size;W++)this.modules[W][m]==p?(b++,b==5?a+=t.PENALTY_N1:b>5&&a++):(this.finderPenaltyAddHistory(b,G),p||(a+=this.finderPenaltyCountPatterns(G)*t.PENALTY_N3),p=this.modules[W][m],b=1);a+=this.finderPenaltyTerminateAndCount(p,b,G)*t.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let p=0;p<this.size-1;p++){const b=this.modules[m][p];b==this.modules[m][p+1]&&b==this.modules[m+1][p]&&b==this.modules[m+1][p+1]&&(a+=t.PENALTY_N2)}let c=0;for(const m of this.modules)c=m.reduce((p,b)=>p+(b?1:0),c);const C=this.size*this.size,A=Math.ceil(Math.abs(c*20-C*10)/C)-1;return r(0<=A&&A<=9),a+=A*t.PENALTY_N4,r(0<=a&&a<=2568888),a}getAlignmentPatternPositions(){if(this.version==1)return[];{const a=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(a*2-2))*2;let C=[6];for(let A=this.size-7;C.length<a;A-=c)C.splice(1,0,A);return C}}static getNumRawDataModules(a){if(a<t.MIN_VERSION||a>t.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*a+128)*a+64;if(a>=2){const C=Math.floor(a/7)+2;c-=(25*C-10)*C-55,a>=7&&(c-=36)}return r(208<=c&&c<=29648),c}static getNumDataCodewords(a,c){return Math.floor(t.getNumRawDataModules(a)/8)-t.ECC_CODEWORDS_PER_BLOCK[c.ordinal][a]*t.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][a]}static reedSolomonComputeDivisor(a){if(a<1||a>255)throw new RangeError("Degree out of range");let c=[];for(let A=0;A<a-1;A++)c.push(0);c.push(1);let C=1;for(let A=0;A<a;A++){for(let m=0;m<c.length;m++)c[m]=t.reedSolomonMultiply(c[m],C),m+1<c.length&&(c[m]^=c[m+1]);C=t.reedSolomonMultiply(C,2)}return c}static reedSolomonComputeRemainder(a,c){let C=c.map(A=>0);for(const A of a){const m=A^C.shift();C.push(0),c.forEach((p,b)=>C[b]^=t.reedSolomonMultiply(p,m))}return C}static reedSolomonMultiply(a,c){if(a>>>8||c>>>8)throw new RangeError("Byte out of range");let C=0;for(let A=7;A>=0;A--)C=C<<1^(C>>>7)*285,C^=(c>>>A&1)*a;return r(C>>>8==0),C}finderPenaltyCountPatterns(a){const c=a[1];r(c<=this.size*3);const C=c>0&&a[2]==c&&a[3]==c*3&&a[4]==c&&a[5]==c;return(C&&a[0]>=c*4&&a[6]>=c?1:0)+(C&&a[6]>=c*4&&a[0]>=c?1:0)}finderPenaltyTerminateAndCount(a,c,C){return a&&(this.finderPenaltyAddHistory(c,C),c=0),c+=this.size,this.finderPenaltyAddHistory(c,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(a,c){c[0]==0&&(a+=this.size),c.pop(),c.unshift(a)}};let n=t;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=n;function o(a,c,C){if(c<0||c>31||a>>>c)throw new RangeError("Value out of range");for(let A=c-1;A>=0;A--)C.push(a>>>A&1)}function i(a,c){return(a>>>c&1)!=0}function r(a){if(!a)throw new Error("Assertion error")}const s=class{constructor(a,c,C){if(this.mode=a,this.numChars=c,this.bitData=C,c<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(a){let c=[];for(const C of a)o(C,8,c);return new s(s.Mode.BYTE,a.length,c)}static makeNumeric(a){if(!s.isNumeric(a))throw new RangeError("String contains non-numeric characters");let c=[];for(let C=0;C<a.length;){const A=Math.min(a.length-C,3);o(parseInt(a.substr(C,A),10),A*3+1,c),C+=A}return new s(s.Mode.NUMERIC,a.length,c)}static makeAlphanumeric(a){if(!s.isAlphanumeric(a))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],C;for(C=0;C+2<=a.length;C+=2){let A=s.ALPHANUMERIC_CHARSET.indexOf(a.charAt(C))*45;A+=s.ALPHANUMERIC_CHARSET.indexOf(a.charAt(C+1)),o(A,11,c)}return C<a.length&&o(s.ALPHANUMERIC_CHARSET.indexOf(a.charAt(C)),6,c),new s(s.Mode.ALPHANUMERIC,a.length,c)}static makeSegments(a){return a==""?[]:s.isNumeric(a)?[s.makeNumeric(a)]:s.isAlphanumeric(a)?[s.makeAlphanumeric(a)]:[s.makeBytes(s.toUtf8ByteArray(a))]}static makeEci(a){let c=[];if(a<0)throw new RangeError("ECI assignment value out of range");if(a<128)o(a,8,c);else if(a<16384)o(2,2,c),o(a,14,c);else if(a<1e6)o(6,3,c),o(a,21,c);else throw new RangeError("ECI assignment value out of range");return new s(s.Mode.ECI,0,c)}static isNumeric(a){return s.NUMERIC_REGEX.test(a)}static isAlphanumeric(a){return s.ALPHANUMERIC_REGEX.test(a)}getData(){return this.bitData.slice()}static getTotalBits(a,c){let C=0;for(const A of a){const m=A.mode.numCharCountBits(c);if(A.numChars>=1<<m)return 1/0;C+=4+m+A.bitData.length}return C}static toUtf8ByteArray(a){a=encodeURI(a);let c=[];for(let C=0;C<a.length;C++)a.charAt(C)!="%"?c.push(a.charCodeAt(C)):(c.push(parseInt(a.substr(C+1,2),16)),C+=2);return c}};let I=s;I.NUMERIC_REGEX=/^[0-9]*$/,I.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,I.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=I})($r||($r={}));(e=>{(t=>{const n=class{constructor(i,r){this.ordinal=i,this.formatBits=r}};let o=n;o.LOW=new n(0,1),o.MEDIUM=new n(1,0),o.QUARTILE=new n(2,3),o.HIGH=new n(3,2),t.Ecc=o})(e.QrCode||(e.QrCode={}))})($r||($r={}));(e=>{(t=>{const n=class{constructor(i,r){this.modeBits=i,this.numBitsCharCount=r}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};let o=n;o.NUMERIC=new n(1,[10,12,14]),o.ALPHANUMERIC=new n(2,[9,11,13]),o.BYTE=new n(4,[8,16,16]),o.KANJI=new n(8,[8,10,12]),o.ECI=new n(7,[0,0,0]),t.Mode=o})(e.QrSegment||(e.QrSegment={}))})($r||($r={}));var qs=$r;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var $w={L:qs.QrCode.Ecc.LOW,M:qs.QrCode.Ecc.MEDIUM,Q:qs.QrCode.Ecc.QUARTILE,H:qs.QrCode.Ecc.HIGH},eX=128,tX="L",nX="#FFFFFF",oX="#000000",iX=!1,x0=4,_4=.1;function gX(e,t=0){const n=[];return e.forEach(function(o,i){let r=null;o.forEach(function(s,I){if(!s&&r!==null){n.push(`M${r+t} ${i+t}h${I-r}v1H${r+t}z`),r=null;return}if(I===o.length-1){if(!s)return;r===null?n.push(`M${I+t},${i+t} h1v1H${I+t}z`):n.push(`M${r+t},${i+t} h${I+1-r}v1H${r+t}z`);return}s&&r===null&&(r=I)})}),n.join("")}function rX(e,t){return e.slice().map((n,o)=>o<t.y||o>=t.y+t.h?n:n.map((i,r)=>r<t.x||r>=t.x+t.w?i:!1))}function sX(e,t,n,o){if(o==null)return null;const i=n?x0:0,r=e.length+i*2,s=Math.floor(t*_4),I=r/t,a=(o.width||s)*I,c=(o.height||s)*I,C=o.x==null?e.length/2-a/2:o.x*I,A=o.y==null?e.length/2-c/2:o.y*I;let m=null;if(o.excavate){let p=Math.floor(C),b=Math.floor(A),G=Math.ceil(a+C-p),W=Math.ceil(c+A-b);m={x:p,y:b,w:G,h:W}}return{x:C,y:A,h:c,w:a,excavation:m}}var O4=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function q4(e){const t=e,{value:n,size:o=eX,level:i=tX,bgColor:r=nX,fgColor:s=oX,includeMargin:I=iX,style:a,imageSettings:c}=t,C=H0(t,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),A=c==null?void 0:c.src,m=Ee.useRef(null),p=Ee.useRef(null),[b,G]=Ee.useState(!1);Ee.useEffect(()=>{if(m.current!=null){const y=m.current,f=y.getContext("2d");if(!f)return;let v=qs.QrCode.encodeText(n,$w[i]).getModules();const V=I?x0:0,X=v.length+V*2,w=sX(v,o,I,c),R=p.current,F=w!=null&&R!==null&&R.complete&&R.naturalHeight!==0&&R.naturalWidth!==0;F&&w.excavation!=null&&(v=rX(v,w.excavation));const x=window.devicePixelRatio||1;y.height=y.width=o*x;const M=o/X*x;f.scale(M,M),f.fillStyle=r,f.fillRect(0,0,X,X),f.fillStyle=s,O4?f.fill(new Path2D(gX(v,V))):v.forEach(function(Q,$){Q.forEach(function(_,ne){_&&f.fillRect(ne+V,$+V,1,1)})}),F&&f.drawImage(R,w.x+V,w.y+V,w.w,w.h)}}),Ee.useEffect(()=>{G(!1)},[A]);const W=TI({height:o,width:o},a);let Z=null;return A!=null&&(Z=Ee.createElement("img",{src:A,key:A,style:{display:"none"},onLoad:()=>{G(!0)},ref:p})),Ee.createElement(Ee.Fragment,null,Ee.createElement("canvas",TI({style:W,height:o,width:o,ref:m},C)),Z)}function $4(e){const t=e,{value:n,size:o=eX,level:i=tX,bgColor:r=nX,fgColor:s=oX,includeMargin:I=iX,imageSettings:a}=t,c=H0(t,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let C=qs.QrCode.encodeText(n,$w[i]).getModules();const A=I?x0:0,m=C.length+A*2,p=sX(C,o,I,a);let b=null;a!=null&&p!=null&&(p.excavation!=null&&(C=rX(C,p.excavation)),b=Ee.createElement("image",{xlinkHref:a.src,height:p.h,width:p.w,x:p.x+A,y:p.y+A,preserveAspectRatio:"none"}));const G=gX(C,A);return Ee.createElement("svg",TI({height:o,width:o,viewBox:`0 0 ${m} ${m}`},c),Ee.createElement("path",{fill:r,d:`M0,0 h${m}v${m}H0z`,shapeRendering:"crispEdges"}),Ee.createElement("path",{fill:s,d:G,shapeRendering:"crispEdges"}),b)}var lX=e=>{const t=e,{renderAs:n}=t,o=H0(t,["renderAs"]);return n==="svg"?Ee.createElement($4,TI({},o)):Ee.createElement(q4,TI({},o))};function e_(){const[e,t]=B.useState(!1),n=()=>{t(!e)};return u.jsxs(u.Fragment,{children:[u.jsx(Mn,{}),u.jsxs(pi,{maxWidth:"sm",children:[u.jsxs("div",{className:"w-full height-bg bg-grey-bg mt-10 rounded-s-md",children:[u.jsx("p",{className:"text-center pt-10 text-2xl",children:"รายการที่เลือก"}),u.jsxs("div",{className:"grid grid-cols-4 mt-10",children:[u.jsx("p",{className:"relative left-14",children:"1"}),u.jsx("p",{children:"บรอคโคลี"}),u.jsx("p",{className:"relative left-14",children:"1"}),u.jsx("p",{children:"รายการ"})]}),u.jsxs("div",{className:"grid grid-cols-4 mt-10",children:[u.jsx("p",{className:"relative left-14"}),u.jsx("p",{children:"ใช้แต้มไป"}),u.jsx("p",{className:"relative left-14",children:"70"}),u.jsx("p",{children:"แต้ม"})]}),u.jsxs("div",{className:"grid grid-cols-4 mt-10",children:[u.jsx("p",{className:"relative left-14",children:"2"}),u.jsx("p",{children:"แตงกวา"}),u.jsx("p",{className:"relative left-14",children:"2"}),u.jsx("p",{children:"รายการ"})]}),u.jsxs("div",{className:"grid grid-cols-4 mt-10",children:[u.jsx("p",{className:"relative left-14"}),u.jsx("p",{children:"ใช้แต้มไป"}),u.jsx("p",{className:"relative left-14",children:"160"}),u.jsx("p",{children:"แต้ม"})]}),u.jsxs("div",{className:"grid grid-cols-4 mt-10",children:[u.jsx("p",{className:"relative left-14",children:"รวมทั้งหมด"}),u.jsx("p",{}),u.jsx("p",{className:"relative left-14",children:"230"}),u.jsx("p",{children:"แต้ม"})]}),u.jsx("div",{className:"h-10"})]}),u.jsx("p",{className:"text-center pt-10 text-2xl",children:"สร้าง QR Code"}),u.jsx("div",{className:"mt-10 flex justify-center",children:u.jsx("div",{className:`slider-container ${e?"on":""}`,onClick:n,children:u.jsx("div",{className:"slider",children:u.jsx("div",{className:"slider-button"})})})}),e&&u.jsx("div",{className:"mt-10 flex justify-center",children:u.jsx(lX,{value:"https://google.com"})})]})]})}const t_="http://209.58.160.245:1337",n_=async()=>{try{const e=`${t_}/api/recycle-machines`,t=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok){const i=await t.json();throw console.error("Error fetching recycle machines:",i),new Error(`Request failed with status ${t.status}`)}return(await t.json()).data.filter(i=>i.attributes.status==="active").map(i=>({id:i.id,location:i.attributes.location,latitude:i.attributes.latitude,longitude:i.attributes.longitude,status:i.attributes.status,createdAt:i.attributes.createdAt,updatedAt:i.attributes.updatedAt,publishedAt:i.attributes.publishedAt}))}catch(e){throw console.error("Error fetching recycle machines:",e.message),e}},o_={width:"100%",height:"400px"},i_={lat:13.7563,lng:100.5018},g_=new sn.Icon({iconUrl:"https://cdn.pixabay.com/photo/2014/04/03/10/03/google-309740_1280.png",iconSize:[35,35]}),aX=()=>{const[e,t]=B.useState([]),[n,o]=B.useState(!0),[i,r]=B.useState(null),s="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=";return B.useEffect(()=>{(async()=>{try{o(!0);const a=await n_(s);t(a),o(!1)}catch(a){console.error("Error fetching Recycle Machines:",a),r(a.message),o(!1)}})()},[s]),n?u.jsx("p",{children:"Loading..."}):i?u.jsxs("p",{children:["Error: ",i]}):u.jsx(u.Fragment,{children:u.jsxs(as,{style:o_,center:i_,zoom:12,children:[u.jsx(Cs,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),e.map(I=>u.jsx(u.Fragment,{children:u.jsx(Is,{position:[I.latitude,I.longitude],icon:g_,children:u.jsxs(cs,{children:[I.location,u.jsx("br",{}),u.jsx("a",{href:`https://www.google.com/maps?q=${I.latitude},${I.longitude}`,target:"_blank",rel:"noopener noreferrer",children:"เปิดใน Google Maps"})]})},I.id)}))]})})},r_="http://209.58.160.245:1337",s_=async()=>{try{const e=`${r_}/api/oil-machines`,t=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok){const i=await t.json();throw console.error("Error fetching oil machines:",i),new Error(`Request failed with status ${t.status}`)}return(await t.json()).data.filter(i=>i.attributes.status==="active").map(i=>({id:i.id,location:i.attributes.location,latitude:i.attributes.latitude,longitude:i.attributes.longitude,status:i.attributes.status,createdAt:i.attributes.createdAt,updatedAt:i.attributes.updatedAt,publishedAt:i.attributes.publishedAt}))}catch(e){throw console.error("Error fetching oil machines:",e.message),e}},l_={width:"100%",height:"400px"},a_={lat:13.7563,lng:100.5018},I_=new sn.Icon({iconUrl:"https://cdn.pixabay.com/photo/2014/04/03/10/03/google-309740_1280.png",iconSize:[35,35]}),IX=()=>{const[e,t]=B.useState([]),[n,o]=B.useState(!0),[i,r]=B.useState(null),s="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=";return B.useEffect(()=>{(async()=>{try{o(!0);const a=await s_(s);t(a),o(!1)}catch(a){console.error("Error fetching Oil Machines:",a),r(a.message),o(!1)}})()},[s]),n?u.jsx("p",{children:"Loading..."}):i?u.jsxs("p",{children:["Error: ",i]}):u.jsx(u.Fragment,{children:u.jsxs(as,{style:l_,center:a_,zoom:12,children:[u.jsx(Cs,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),e.map(I=>u.jsx(u.Fragment,{children:u.jsx(Is,{position:[I.latitude,I.longitude],icon:I_,children:u.jsxs(cs,{children:[I.location,u.jsx("br",{}),u.jsx("a",{href:`https://www.google.com/maps?q=${I.latitude},${I.longitude}`,target:"_blank",rel:"noopener noreferrer",children:"เปิดใน Google Maps"})]})},I.id)}))]})})};function c_(){const[e,t]=B.useState("ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม"),n=o=>{t(o)};return u.jsxs(u.Fragment,{children:[u.jsx(Mn,{}),u.jsxs(pi,{maxWidth:"sm",children:[u.jsx("div",{className:"text-2xl text-center mt-10",children:"ตำแหน่งตู้"}),u.jsxs("div",{className:"bg-grey-bg mt-10 grid grid-cols-2 rounded-t-lg",children:[u.jsxs("button",{className:` tablink h-40 pt-5 text-xs  rounded-t-lg ${e==="ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม"?"w3-green":""}`,onClick:()=>n("ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม"),children:["ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม",u.jsxs("div",{className:"mt-5 grid grid-cols-2 ",children:[u.jsx("img",{src:Fp,alt:"can",width:"70",className:"ml-5"}),u.jsx("img",{src:Kp,alt:"bottle",width:"40",className:"ml-5"})]})]}),u.jsxs("button",{className:`tablink text-xs  rounded-t-lg ${e==="ตู้รับน้ำมันพืชใช้แล้ว"?"w3-green":""}`,onClick:()=>n("ตู้รับน้ำมันพืชใช้แล้ว"),children:[u.jsx("p",{className:"text-center",children:"ตู้รับน้ำมันพืชใช้แล้ว"}),u.jsx("div",{className:"flex justify-center",children:u.jsx("img",{src:e0,alt:"logo",width:"70",className:"mt-5"})})]})]}),u.jsx("div",{className:"w-full h-full bg-white shadow-md shadow-inner rounded-b-lg",children:u.jsx("div",{style:{width:"100%",height:"100%",aspectRatio:.5},children:e==="ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม"?u.jsx(aX,{}):u.jsx(IX,{})})})]})]})}const cX="/assets/building-DgCujXOt.png",CX="/assets/mail-C8f8mahp.png",dX="/assets/smartphone-BNSZHNAZ.png";function C_(){return u.jsxs(u.Fragment,{children:[u.jsx(Mn,{}),u.jsxs(pi,{maxWidth:"sm",children:[u.jsx("p",{className:"text-center mt-16 text-2xl",children:"ติดต่อเรา"}),u.jsxs("div",{className:"w-full h-96 bg-white rounded-md inner-shadow mt-10 p-5",children:[u.jsxs("div",{className:"grid grid-cols-2",children:[u.jsx("div",{children:u.jsx("img",{src:cX,alt:"building",width:"50",className:"ml-8"})}),u.jsx("div",{children:u.jsx("p",{className:"contact-text mt-10",children:"บริษัท ไมโครกรีนเทค จำกัด"})})]}),u.jsxs("div",{className:"grid grid-cols-2",children:[u.jsx("div",{children:u.jsx("img",{src:CX,alt:"mail",width:"80",className:"mt-8 ml-3"})}),u.jsx("div",{children:u.jsxs("p",{className:"contact-text mt-10",children:["support@microgreen ",u.jsx("br",{})," tech.net"]})})]}),u.jsxs("div",{className:"grid grid-cols-2",children:[u.jsx("div",{children:u.jsx("img",{src:dX,alt:"smartphone",width:"100",className:"mt-5"})}),u.jsx("div",{children:u.jsx("p",{className:"contact-text mt-12",children:"0875585454"})})]})]})]})]})}var N0={},ph={};const d_=Ei(nM);var JS;function wA(){return JS||(JS=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=d_}(ph)),ph}var u_=Ol;Object.defineProperty(N0,"__esModule",{value:!0});var uX=N0.default=void 0,A_=u_(wA()),m_=u;uX=N0.default=(0,A_.default)((0,m_.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu");var F0={},h_=Ol;Object.defineProperty(F0,"__esModule",{value:!0});var AX=F0.default=void 0,p_=h_(wA()),b_=u;AX=F0.default=(0,p_.default)((0,b_.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos");var K0={},f_=Ol;Object.defineProperty(K0,"__esModule",{value:!0});var mX=K0.default=void 0,Z_=f_(wA()),y_=u;mX=K0.default=(0,Z_.default)((0,y_.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout");const Ui=()=>{const[e,t]=B.useState([]),[n,o]=B.useState(!0),[i,r]=B.useState(null),s=localStorage.getItem("accessToken")||"XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",a=JSON.parse(localStorage.getItem("user")||"{}").id,[c,C]=B.useState(!1),[A,m]=B.useState(""),p=Xo(),{isLoggedIn:b,liff:G}=Gf();B.useEffect(()=>{(async()=>{if(G&&G.isLoggedIn()){const f=await G.getProfile();m(f.displayName)}})()},[G]),B.useEffect(()=>{(async()=>{try{o(!0);const f=await Dl(s,a);console.log("Fetched shop data:",f),f&&typeof f=="object"&&f.shop&&t([f.shop])}catch{r("Error: Shop data is undefined or missing.")}finally{o(!1)}})()},[s,a]);const W=()=>{C(!c)},Z=()=>{G&&G.logout(),localStorage.removeItem("accessToken"),localStorage.removeItem("user"),Pn.fire({icon:"success",title:"ออกจากระบบสำเร็จ!",showConfirmButton:!0}).then(()=>{p("/")})};return u.jsxs(u.Fragment,{children:[u.jsxs("nav",{className:"flex items-center justify-between p-2 pr-5 bg-white",children:[u.jsx(Zo,{to:"/partner/shopHome",style:{color:"#000000",textDecoration:"none"},children:u.jsx("img",{src:e0,alt:"Logo",width:50})}),u.jsxs("div",{className:"flex items-center",children:[b&&u.jsx("div",{className:"flex items-center"}),u.jsxs(Rl,{onClick:W,children:[u.jsx(uX,{className:"hover:text-yellow-hard"})," "]})]})]}),c&&u.jsx(Oo,{sx:{position:"fixed",top:0,right:0,height:"100%",width:"60%",bgcolor:"white",boxShadow:3,zIndex:1e3,transition:"transform 0.3s ease",transform:c?"translateX(0)":"translateX(100%)"},children:u.jsxs(Oo,{p:2,children:[u.jsx(Rl,{onClick:W,sx:{color:"#000000"},children:u.jsx(AX,{})}),u.jsx(Zo,{to:"/partner/ProfileStoreEdit",style:{color:"#000000",textDecoration:"none"},children:"ข้อมูลร้านค้า"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 mt-5",children:e.map(y=>{var f,v,V;return u.jsx(Su,{to:"/partner/ProfileStoreEdit",children:u.jsxs("div",{className:"shop-3",children:[u.jsx("span",{className:"circle",style:{backgroundImage:(V=(v=(f=y.image)==null?void 0:f.data)==null?void 0:v.attributes)!=null&&V.url?`url(${y.image.data.attributes.url})`:"url(https://cdn.britannica.com/70/234870-050-D4D024BB/Orange-colored-cat-yawns-displaying-teeth.jpg)",backgroundSize:"cover"}}),u.jsx("span",{className:"pl-2",children:y.name})]})},y.id)})}),b&&u.jsx(Oo,{sx:{position:"absolute",bottom:2,left:0,right:0,margin:"auto",p:1,bgcolor:"white",display:"flex",justifyContent:"center"},children:u.jsx(Cl,{variant:"contained",color:"error",startIcon:u.jsx(mX,{}),onClick:Z,fullWidth:!0,sx:{maxWidth:"300px"},children:"Logout"})})]})})]})},G_=Vt.div`
  position: relative;
  width: 100%;
  max-width: 100vw;
  margin: 0 auto;
`;Vt.button`
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background-color: #fff;
  color: #333;
  border: none;
  border-radius: 20px;
  padding: 10px 20px;
  font-size: 20px;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
`;const B_=Vt.canvas`
  display: none; /* Hide canvas by default */
`,S_=Vt.video`
  width: 100%;
  border-radius: 10px;
  @media (max-width: 767px) {
    height: auto;
    object-fit: cover;
    border-radius: 0;
  }
`,v_=Vt.div`
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  border: 2px dashed #ccc;
  border-radius: 10px;
  cursor: pointer;
  position: relative;
`,W_=Vt(nw)`
  font-size: 50px;
  color: #026d44;
`,V_=Vt.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
`,R_=Vt.div`
  background: white;
  padding: 20px;
  border-radius: 10px;
  text-align: center;
`,k_=Vt.button`
  margin: 10px;
  padding: 10px 20px;
  background-color: #ffb300;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
`,w_=Vt.button`
  margin: 10px;
  padding: 10px 20px;
  background-color: #558b2f;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
`,X_=Vt.button`
  margin: 10px;
  padding: 10px 20px;
  background-color: red;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  &:hover {
    background-color: darkred; /* Change color on hover */
  }
`,J_=Vt.img`
  width: 100%;
  border-radius: 10px;
  @media (max-width: 767px) {
    height: auto;
    object-fit: cover;
    border-radius: 0;
  }
`,hX=({onCapture:e,ModuleName:t})=>{const n=B.useRef(null),o=B.useRef(null),[i,r]=B.useState(null),[s,I]=B.useState(null),[a,c]=B.useState(!1),C=async()=>{try{const W=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}});n.current&&(n.current.srcObject=W),r(W)}catch(W){console.error("Error accessing webcam",W),Pn.fire({icon:"error",title:"ไม่สามารถเข้าถึงเว็บแคมได้ กรุณาตรวจสอบการตั้งค่าและอนุญาตการเข้าถึง",position:"center",showConfirmButton:!0,confirmButtonText:"ตกลง"})}},A=()=>{i&&(i.getTracks().forEach(W=>{W.stop()}),r(null))},m=()=>{if(n.current&&o.current){const W=n.current,Z=o.current,y=Z.getContext("2d");y&&W.videoWidth&&W.videoHeight&&(Z.width=W.videoWidth,Z.height=W.videoHeight,y.drawImage(W,0,0,Z.width,Z.height),Z.toBlob(f=>{if(f){const v=new Date().toLocaleString().replace(/[/,:]/g,"-"),V=`image_${t}_${v}.jpg`,X=new File([f],V,{type:"image/jpeg"});I(URL.createObjectURL(f)),A(),e(X)}},"image/jpeg"))}},p=()=>{Pn.fire({icon:"warning",title:"ฟังก์ชันการอัพโหลดภาพยังไม่ได้เปิดใช้งาน",position:"center",showConfirmButton:!0,confirmButtonText:"ตกลง"})},b=()=>{c(!0),C()},G=()=>{c(!1),A()};return u.jsx(G_,{children:s?u.jsx(J_,{src:s,alt:"Captured"}):u.jsxs(u.Fragment,{children:[u.jsx(v_,{onClick:b,children:u.jsx(W_,{})}),a&&u.jsx(V_,{children:u.jsxs(R_,{children:[u.jsx(S_,{ref:n,autoPlay:!0,muted:!0}),u.jsx(B_,{ref:o}),u.jsx(k_,{onClick:()=>{m(),G()},children:"ถ่ายรูป"}),u.jsx(w_,{onClick:()=>{p(),G()},children:"อัพโหลดภาพ"}),u.jsx(X_,{onClick:()=>{G()},children:"ปิด"})]})})]})})},Y_="http://209.58.160.245:1337",UI=async e=>new Promise((t,n)=>{const o=`${Y_}/api/upload`,i=new FormData;i.append("files",e),fetch(o,{method:"POST",body:i}).then(r=>r.ok?r.json():r.json().then(s=>{n(s)})).then(r=>{t(r[0])}).catch(r=>{n(r)})});function YS(){const e=Li({typography:{fontFamily:"Sarabun !important"}}),[t,n]=B.useState({name:"",fullName:"",location:"",cardID:"",bookBankNumber:"",bank:"",image:"",bookBankImage:"",checkedOne:!1}),[o,i]=B.useState(!1),r=Xo(),s=localStorage.getItem("accessToken"),I=JSON.parse(localStorage.getItem("user")||"{}"),a=I.id;I.fullName;const[c,C]=B.useState([]),[A,m]=B.useState(!0);console.log("Front : ",I);const p=y=>{const{id:f,name:v,value:V,type:X,checked:w}=y.target;n(R=>({...R,[f||v]:X==="checkbox"?w:V}))},b=y=>{y&&n(f=>({...f,image:y}))};B.useEffect(()=>{(async()=>{try{const f=await $F(s);C(f)}catch(f){console.error("Error fetching banks:",f)}finally{m(!1)}})()},[]),B.useEffect(()=>{},[c]),console.log("Bank",c);const G=y=>{y&&n(f=>({...f,bookBankImage:y}))},W=y=>{n(f=>({...f,bank:y.target.value}))};B.useEffect(()=>{const{name:y,fullName:f,location:v,cardID:V,bookBankNumber:X,bank:w,image:R,bookBankImage:F,checkedOne:x}=t;i(y&&f&&v&&V&&X&&w&&R&&F&&x)},[t]);const Z=async y=>{y.preventDefault();let f=null,v=null;try{t.image&&(f=(await UI(t.image)).id),t.bookBankImage&&(v=(await UI(t.bookBankImage)).id);const V={fullName:t.fullName,cardID:t.cardID,address:t.location};console.log("Sending user data:",V);const X=await qF(s,a,V);console.log("Response from updateUserFromShop:",X),(!X||X.error)&&console.error("Error updating user:",X);const w={name:t.name,location:t.location,latitude:t.latitude,longitude:t.longitude,image:f,bookBankNumber:t.bookBankNumber,bookBankImage:v,bank:t.bank,user:a,checkedOne:t.checkedOne};if(await OF(s,w))Pn.fire({position:"center",icon:"success",title:"ลงทะเบียนร้านค้าเรียบร้อย",showConfirmButton:!0,confirmButtonText:"ตกลง"}).then(F=>{F.isConfirmed&&r("/shopHome")});else throw new Error("Shop registration failed.")}catch(V){console.error("Error during submission:",V),Pn.fire({icon:"error",title:"พบข้อผิดพลาดระหว่างลงทะเบียน",position:"center",text:V.message||"เกิดข้อผิดพลาด กรุณาลองใหม่อีกครั้ง",confirmButtonText:"ตกลง"})}};return u.jsxs(ir,{theme:e,children:[u.jsx(Ui,{}),u.jsxs("form",{onSubmit:Z,children:[u.jsx("div",{className:"container mx-auto px-4 py-8",children:u.jsxs("div",{className:"flex flex-wrap -mx-2",children:[u.jsx("div",{className:"w-full md:w-1/2 px-2",children:u.jsx(tt,{id:"name",label:"ชื่อร้านค้า",variant:"outlined",className:"w-full bg-white",required:!0,value:t.name,onChange:p})}),u.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4 md:mt-0",children:u.jsx(tt,{id:"fullName",label:"ชื่อ-นามสกุล",type:"text",variant:"outlined",className:"w-full bg-white",required:!0,value:t.fullName,onChange:p})}),u.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:u.jsx(tt,{id:"cardID",label:"หมายเลขบัตรประจำตัวประชาชน",variant:"outlined",className:"w-full bg-white",required:!0,value:t.cardID,onChange:p,inputProps:{maxLength:13,pattern:"[0-9]*",inputMode:"numeric"},error:t.cardID.length!==13,helperText:t.cardID.length!==13?"หมายเลขบัตรประจำตัวต้องมี 13 หลัก":""})}),u.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:u.jsx(tt,{id:"bookBankNumber",label:"หมายเลขบัญชีธนาคาร",variant:"outlined",className:"w-full bg-white",required:!0,value:t.bookBankNumber,onChange:p,inputProps:{maxLength:15,pattern:"[0-9]*",inputMode:"numeric"},error:t.bookBankNumber.length>15||t.bookBankNumber.length<10,helperText:t.bookBankNumber.length>15?"หมายเลขบัญชีธนาคารต้องไม่เกิน 15 หลัก":t.bookBankNumber.length<10?"หมายเลขบัญชีธนาคารต้องมีอย่างน้อย 10 หลัก":""})}),u.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:u.jsxs(rs,{fullWidth:!0,children:[u.jsx(mA,{id:"bank-select-label",children:"ธนาคาร"}),u.jsxs(pA,{className:"bg-white",labelId:"bank-select-label",id:"bankChoose",value:t.bank,label:"ธนาคาร",onChange:W,children:[u.jsx(Jn,{value:"3",children:"ธนาคารกรุงเทพ จำกัด (มหาชน) (Bangkok Bank Public Company Limited)"}),u.jsx(Jn,{value:"4",children:"ธนาคารกรุงไทย จำกัด (มหาชน) (Krungthai Bank Public Company Limited)"}),u.jsx(Jn,{value:"5",children:"ธนาคารกรุงศรีอยุธยา จำกัด (มหาชน) (Bank of Ayudhya Public Company Limited - Krungsri)"}),u.jsx(Jn,{value:"6",children:"ธนาคารกสิกรไทย จำกัด (มหาชน) (Kasikornbank Public Company Limited)"}),u.jsx(Jn,{value:"7",children:"ธนาคารซีไอเอ็มบี ไทย จำกัด (มหาชน) (CIMB Thai Bank Public Company Limited)"}),u.jsx(Jn,{value:"8",children:"ธนาคารทหารไทยธนชาต จำกัด (มหาชน) (TMBThanachart Bank Public Company Limited - TTB Bank)"}),u.jsx(Jn,{value:"9",children:"ธนาคารทิสโก้ จำกัด (มหาชน) (TISCO Bank Public Company Limited)"}),u.jsx(Jn,{value:"10",children:"ธนาคารไทยเครดิต จำกัด (มหาชน) (Thai Credit Retail Bank Public Company Limited)"}),u.jsx(Jn,{value:"11",children:"ธนาคารไทยพาณิชย์ จำกัด (มหาชน) (Siam Commercial Bank Public Company Limited - SCB)"}),u.jsx(Jn,{value:"12",children:"ธนาคารยูโอบี จำกัด (มหาชน) (United Overseas Bank - Thai - Public Company Limited - UOB)"}),u.jsx(Jn,{value:"13",children:"ธนาคารแลนด์ แอนด์ เฮ้าส์ จำกัด (มหาชน) (Land and Houses Bank Public Company Limited)"}),u.jsx(Jn,{value:"14",children:"ธนาคารสแตนดาร์ดชาร์เตอร์ด (ไทย) จำกัด (มหาชน) (Standard Chartered Bank - Thai - Public Company Limited)"}),u.jsx(Jn,{value:"15",children:"ธนาคารไอซีบีซี (ไทย) จำกัด (มหาชน) (Industrial and Commercial Bank of China - Thai - Public Company Limited - ICBC)"}),u.jsx(Jn,{value:"16",children:"ธนาคารแห่งประเทศจีน (ไทย) จำกัด (มหาชน) (Bank of China - Thai - Public Company Limited)"})]})]})}),u.jsxs("div",{className:"w-full px-2 mt-4",children:[u.jsx("div",{children:u.jsx("label",{children:"ถ่ายรูปตนเองพร้อมถือบัตรประจำตัวประชาชน"})}),u.jsx(ga,{className:"bg-white",id:"image",onCapture:b,ModuleName:"IDCard"})]}),u.jsxs("div",{className:"w-full px-2 mt-4",children:[u.jsx("label",{children:"ถ่ายหน้าบุ๊คแบงก์"}),u.jsx(hX,{className:"bg-white",id:"bookBankImage",onCapture:G,ModuleName:"BookBank"})]}),u.jsx("div",{className:"w-full px-2 mt-4",children:u.jsx(tt,{label:"ที่อยู่",placeholder:"ที่อยู่",id:"location",multiline:!0,minRows:3,maxRows:10,fullWidth:!0,className:"w-full bg-white",required:!0,value:t.location,onChange:p})})]})}),u.jsxs("div",{className:"container mx-auto px-4 mt-10 mb-5",children:[u.jsx(ea,{id:"checkedOne",checked:t.checkedOne,onChange:p,required:!0,sx:{"& .MuiSvgIcon-root":{fontSize:30}}}),u.jsxs("span",{children:[u.jsx("strong",{children:"ยอมรับเงื่อนไข"})," "]})]}),u.jsx("div",{className:"container mx-auto px-4",children:u.jsx("button",{type:"submit",disabled:!o,className:`w-full h-12 mb-10 flex justify-center rounded-xl items-center text-white ${o?"bg-green-500":"bg-slate-300"}`,children:"บันทึกข้อมูล"})})]})]})}function H_(){return u.jsxs(u.Fragment,{children:[u.jsx(Ui,{}),u.jsxs(pi,{maxWidth:"sm",children:[u.jsx("p",{className:"text-center mt-16 text-2xl",children:"ติดต่อเรา"}),u.jsxs("div",{className:"w-full h-96 bg-white rounded-md inner-shadow mt-10 p-5",children:[u.jsxs("div",{className:"grid grid-cols-2",children:[u.jsx("div",{children:u.jsx("img",{src:cX,alt:"building",width:"50",className:"ml-8"})}),u.jsx("div",{children:u.jsx("p",{className:"contact-text mt-10",children:"บริษัท ไมโครกรีนเทค จำกัด"})})]}),u.jsxs("div",{className:"grid grid-cols-2",children:[u.jsx("div",{children:u.jsx("img",{src:CX,alt:"mail",width:"80",className:"mt-8 ml-3"})}),u.jsx("div",{children:u.jsxs("p",{className:"contact-text mt-10",children:["support@microgreen ",u.jsx("br",{})," tech.net"]})})]}),u.jsxs("div",{className:"grid grid-cols-2",children:[u.jsx("div",{children:u.jsx("img",{src:dX,alt:"smartphone",width:"100",className:"mt-5"})}),u.jsx("div",{children:u.jsx("p",{className:"contact-text mt-12",children:"0875585454"})})]})]})]})]})}function HS(){const[e,t]=B.useState(!1),n=o=>{t(o.target.checked)};return u.jsxs(u.Fragment,{children:[u.jsx(Ui,{}),u.jsxs(pi,{maxWidth:"sm",children:[u.jsx("div",{className:"w-full h-auto bg-white rounded-md p-5 mt-10 text-justify leading-loose",children:u.jsx("p",{children:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting , remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lor em Ipsum.Why do we use it?It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like)."})}),u.jsxs("div",{className:"mt-4",children:[u.jsx(ea,{id:"checkedOne",value:"check",required:!0,sx:{"& .MuiSvgIcon-root":{fontSize:30}},checked:e,onChange:n}),u.jsxs("span",{className:"pb-14",children:[u.jsx("strong",{children:"กุ๊ก"}),"ให้ความสำคัญเกี่ยวกับความปลอดภัยข้อมูลของคุณ"," ",u.jsx("span",{className:"text-justify leading-loose",children:"และเพื่อให้คุณมั่นใจว่า กุ๊กมีความมุ่งมั่นที่จะให้ความคุ้มครองและดำเนินการด้วยความรับผิดชอบต่อการเก็บรวบรวม ใช้ เปิดเผย และโอนข้อมูลของคุณ กุ๊กจึงขอความยินยอมจากคุณ"})]})]}),u.jsx(Zo,{to:"/partner/Profilestore",children:u.jsx("button",{className:`w-full h-10 mt-4 mb-4 rounded-md ${e?"bg-yellow-hard-bg":"bg-zinc-400"}`,disabled:!e,children:"ต่อไป"})})]})]})}function x_(e){return Mi({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}const N_={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,height:600,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function F_(){const[e,t]=Ee.useState(!1),n=()=>t(!0),o=()=>t(!1),i=Li({typography:{fontFamily:"Sarabun !important"}});return u.jsx(u.Fragment,{children:u.jsxs(ir,{theme:i,children:[u.jsx(Ui,{}),u.jsxs(pi,{maxWidth:"sm",children:[u.jsxs(rs,{fullWidth:!0,className:"bg-white",children:[u.jsx(mA,{htmlFor:"outlined-adornment-amount",children:"ค้นหาตามวันที่..."}),u.jsx(hA,{id:"outlined-adornment-amount",endAdornment:u.jsx(BT,{position:"end",children:u.jsx(UE,{})}),label:"Amount"})]}),u.jsxs("div",{className:"w-full h-42 bg-white mt-10 rounded-lg shadow-md p-5 leading-loose",children:[u.jsx("p",{children:"เลขที่ใบรายการรับเงิน : P0001"}),u.jsx("p",{children:"ชื่อ: Christian นามสกุล: Walton"}),u.jsx("div",{children:u.jsx("p",{children:"วันที่ 7 สิงหาคม 2567 เวลา 18:35 น."})}),u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-none w-14"}),u.jsx("div",{className:"flex-auto w-64"}),u.jsxs("div",{className:"flex-auto",children:[u.jsx("button",{onClick:n,className:"bg-yellow-hard-bg rouded-md px-4 py-2 rounded-md mt-2 w-32",children:"ดูใบเสร็จ"}),u.jsx(s0,{open:e,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:u.jsxs(Oo,{sx:N_,children:[u.jsx("div",{className:"w-full h-20 bg-red-600 border-none flex items-center justify-end px-3",children:u.jsx(x_,{className:"text-5xl text-white cursor-pointer",onClick:o})}),u.jsx(kk,{component:g0,className:"mt-10 px-6",children:u.jsxs(Vk,{sx:{minWidth:300},"aria-label":"simple table",children:[u.jsx(wk,{children:u.jsxs(ul,{children:[u.jsx(Hn,{children:"รายการสินค้า"}),u.jsx(Hn,{align:"right",children:"จำนวน"}),u.jsx(Hn,{align:"right",children:"มูลค่า (บาท)"})]})}),u.jsxs(Rk,{children:[u.jsxs(ul,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[u.jsx(Hn,{align:"center",children:"หัวไชเท้า"}),u.jsx(Hn,{align:"right",children:"1"}),u.jsx(Hn,{align:"right",children:"10"})]}),u.jsxs(ul,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[u.jsx(Hn,{align:"center",children:"หอมหัวใหญ่"}),u.jsx(Hn,{align:"right",children:"2"}),u.jsx(Hn,{align:"right",children:"10"})]})]})]})}),u.jsx("div",{className:"px-7",children:u.jsx("div",{className:" border-t-2 border-slate-200"})}),u.jsxs("div",{className:"flex mt-3  px-11",children:[u.jsx("div",{className:"flex-none w-40",children:"รวมเป็นมูลค่า"}),u.jsx("div",{className:"flex-none w-20 text-center",children:"20"}),u.jsx("div",{className:"flex-none w-40 text-center",children:"บาท"})]})]})})]})]})]})]})]})})}const K_="/assets/onion-hun9la0h.png";function pX(e,t){return function(){return e.apply(t,arguments)}}const{toString:E_}=Object.prototype,{getPrototypeOf:E0}=Object,XA=(e=>t=>{const n=E_.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),bi=e=>(e=e.toLowerCase(),t=>XA(t)===e),JA=e=>t=>typeof t===e,{isArray:ra}=Array,DI=JA("undefined");function M_(e){return e!==null&&!DI(e)&&e.constructor!==null&&!DI(e.constructor)&&vo(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const bX=bi("ArrayBuffer");function L_(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&bX(e.buffer),t}const z_=JA("string"),vo=JA("function"),fX=JA("number"),YA=e=>e!==null&&typeof e=="object",T_=e=>e===!0||e===!1,DC=e=>{if(XA(e)!=="object")return!1;const t=E0(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},U_=bi("Date"),D_=bi("File"),Q_=bi("Blob"),P_=bi("FileList"),j_=e=>YA(e)&&vo(e.pipe),__=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||vo(e.append)&&((t=XA(e))==="formdata"||t==="object"&&vo(e.toString)&&e.toString()==="[object FormData]"))},O_=bi("URLSearchParams"),[q_,$_,eO,tO]=["ReadableStream","Request","Response","Headers"].map(bi),nO=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Zc(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let o,i;if(typeof e!="object"&&(e=[e]),ra(e))for(o=0,i=e.length;o<i;o++)t.call(null,e[o],o,e);else{const r=n?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let I;for(o=0;o<s;o++)I=r[o],t.call(null,e[I],I,e)}}function ZX(e,t){t=t.toLowerCase();const n=Object.keys(e);let o=n.length,i;for(;o-- >0;)if(i=n[o],t===i.toLowerCase())return i;return null}const Yr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,yX=e=>!DI(e)&&e!==Yr;function ob(){const{caseless:e}=yX(this)&&this||{},t={},n=(o,i)=>{const r=e&&ZX(t,i)||i;DC(t[r])&&DC(o)?t[r]=ob(t[r],o):DC(o)?t[r]=ob({},o):ra(o)?t[r]=o.slice():t[r]=o};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&Zc(arguments[o],n);return t}const oO=(e,t,n,{allOwnKeys:o}={})=>(Zc(t,(i,r)=>{n&&vo(i)?e[r]=pX(i,n):e[r]=i},{allOwnKeys:o}),e),iO=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),gO=(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},rO=(e,t,n,o)=>{let i,r,s;const I={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),r=i.length;r-- >0;)s=i[r],(!o||o(s,e,t))&&!I[s]&&(t[s]=e[s],I[s]=!0);e=n!==!1&&E0(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},sO=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return o!==-1&&o===n},lO=e=>{if(!e)return null;if(ra(e))return e;let t=e.length;if(!fX(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},aO=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&E0(Uint8Array)),IO=(e,t)=>{const o=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=o.next())&&!i.done;){const r=i.value;t.call(e,r[0],r[1])}},cO=(e,t)=>{let n;const o=[];for(;(n=e.exec(t))!==null;)o.push(n);return o},CO=bi("HTMLFormElement"),dO=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,i){return o.toUpperCase()+i}),xS=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),uO=bi("RegExp"),GX=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};Zc(n,(i,r)=>{let s;(s=t(i,r,e))!==!1&&(o[r]=s||i)}),Object.defineProperties(e,o)},AO=e=>{GX(e,(t,n)=>{if(vo(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=e[n];if(vo(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},mO=(e,t)=>{const n={},o=i=>{i.forEach(r=>{n[r]=!0})};return ra(e)?o(e):o(String(e).split(t)),n},hO=()=>{},pO=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,bh="abcdefghijklmnopqrstuvwxyz",NS="0123456789",BX={DIGIT:NS,ALPHA:bh,ALPHA_DIGIT:bh+bh.toUpperCase()+NS},bO=(e=16,t=BX.ALPHA_DIGIT)=>{let n="";const{length:o}=t;for(;e--;)n+=t[Math.random()*o|0];return n};function fO(e){return!!(e&&vo(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const ZO=e=>{const t=new Array(10),n=(o,i)=>{if(YA(o)){if(t.indexOf(o)>=0)return;if(!("toJSON"in o)){t[i]=o;const r=ra(o)?[]:{};return Zc(o,(s,I)=>{const a=n(s,i+1);!DI(a)&&(r[I]=a)}),t[i]=void 0,r}}return o};return n(e,0)},yO=bi("AsyncFunction"),GO=e=>e&&(YA(e)||vo(e))&&vo(e.then)&&vo(e.catch),SX=((e,t)=>e?setImmediate:t?((n,o)=>(Yr.addEventListener("message",({source:i,data:r})=>{i===Yr&&r===n&&o.length&&o.shift()()},!1),i=>{o.push(i),Yr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",vo(Yr.postMessage)),BO=typeof queueMicrotask<"u"?queueMicrotask.bind(Yr):typeof process<"u"&&process.nextTick||SX,D={isArray:ra,isArrayBuffer:bX,isBuffer:M_,isFormData:__,isArrayBufferView:L_,isString:z_,isNumber:fX,isBoolean:T_,isObject:YA,isPlainObject:DC,isReadableStream:q_,isRequest:$_,isResponse:eO,isHeaders:tO,isUndefined:DI,isDate:U_,isFile:D_,isBlob:Q_,isRegExp:uO,isFunction:vo,isStream:j_,isURLSearchParams:O_,isTypedArray:aO,isFileList:P_,forEach:Zc,merge:ob,extend:oO,trim:nO,stripBOM:iO,inherits:gO,toFlatObject:rO,kindOf:XA,kindOfTest:bi,endsWith:sO,toArray:lO,forEachEntry:IO,matchAll:cO,isHTMLForm:CO,hasOwnProperty:xS,hasOwnProp:xS,reduceDescriptors:GX,freezeMethods:AO,toObjectSet:mO,toCamelCase:dO,noop:hO,toFiniteNumber:pO,findKey:ZX,global:Yr,isContextDefined:yX,ALPHABET:BX,generateString:bO,isSpecCompliantForm:fO,toJSONObject:ZO,isAsyncFn:yO,isThenable:GO,setImmediate:SX,asap:BO};function Fe(e,t,n,o,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),i&&(this.response=i,this.status=i.status?i.status:null)}D.inherits(Fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.status}}});const vX=Fe.prototype,WX={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{WX[e]={value:e}});Object.defineProperties(Fe,WX);Object.defineProperty(vX,"isAxiosError",{value:!0});Fe.from=(e,t,n,o,i,r)=>{const s=Object.create(vX);return D.toFlatObject(e,s,function(a){return a!==Error.prototype},I=>I!=="isAxiosError"),Fe.call(s,e.message,t,n,o,i),s.cause=e,s.name=e.name,r&&Object.assign(s,r),s};const SO=null;function ib(e){return D.isPlainObject(e)||D.isArray(e)}function VX(e){return D.endsWith(e,"[]")?e.slice(0,-2):e}function FS(e,t,n){return e?e.concat(t).map(function(i,r){return i=VX(i),!n&&r?"["+i+"]":i}).join(n?".":""):t}function vO(e){return D.isArray(e)&&!e.some(ib)}const WO=D.toFlatObject(D,{},null,function(t){return/^is[A-Z]/.test(t)});function HA(e,t,n){if(!D.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=D.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(G,W){return!D.isUndefined(W[G])});const o=n.metaTokens,i=n.visitor||C,r=n.dots,s=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&D.isSpecCompliantForm(t);if(!D.isFunction(i))throw new TypeError("visitor must be a function");function c(b){if(b===null)return"";if(D.isDate(b))return b.toISOString();if(!a&&D.isBlob(b))throw new Fe("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(b)||D.isTypedArray(b)?a&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function C(b,G,W){let Z=b;if(b&&!W&&typeof b=="object"){if(D.endsWith(G,"{}"))G=o?G:G.slice(0,-2),b=JSON.stringify(b);else if(D.isArray(b)&&vO(b)||(D.isFileList(b)||D.endsWith(G,"[]"))&&(Z=D.toArray(b)))return G=VX(G),Z.forEach(function(f,v){!(D.isUndefined(f)||f===null)&&t.append(s===!0?FS([G],v,r):s===null?G:G+"[]",c(f))}),!1}return ib(b)?!0:(t.append(FS(W,G,r),c(b)),!1)}const A=[],m=Object.assign(WO,{defaultVisitor:C,convertValue:c,isVisitable:ib});function p(b,G){if(!D.isUndefined(b)){if(A.indexOf(b)!==-1)throw Error("Circular reference detected in "+G.join("."));A.push(b),D.forEach(b,function(Z,y){(!(D.isUndefined(Z)||Z===null)&&i.call(t,Z,D.isString(y)?y.trim():y,G,m))===!0&&p(Z,G?G.concat(y):[y])}),A.pop()}}if(!D.isObject(e))throw new TypeError("data must be an object");return p(e),t}function KS(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function M0(e,t){this._pairs=[],e&&HA(e,this,t)}const RX=M0.prototype;RX.append=function(t,n){this._pairs.push([t,n])};RX.toString=function(t){const n=t?function(o){return t.call(this,o,KS)}:KS;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function VO(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function kX(e,t,n){if(!t)return e;const o=n&&n.encode||VO,i=n&&n.serialize;let r;if(i?r=i(t,n):r=D.isURLSearchParams(t)?t.toString():new M0(t,n).toString(o),r){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class ES{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){D.forEach(this.handlers,function(o){o!==null&&t(o)})}}const wX={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},RO=typeof URLSearchParams<"u"?URLSearchParams:M0,kO=typeof FormData<"u"?FormData:null,wO=typeof Blob<"u"?Blob:null,XO={isBrowser:!0,classes:{URLSearchParams:RO,FormData:kO,Blob:wO},protocols:["http","https","file","blob","url","data"]},L0=typeof window<"u"&&typeof document<"u",gb=typeof navigator=="object"&&navigator||void 0,JO=L0&&(!gb||["ReactNative","NativeScript","NS"].indexOf(gb.product)<0),YO=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",HO=L0&&window.location.href||"http://localhost",xO=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:L0,hasStandardBrowserEnv:JO,hasStandardBrowserWebWorkerEnv:YO,navigator:gb,origin:HO},Symbol.toStringTag,{value:"Module"})),co={...xO,...XO};function NO(e,t){return HA(e,new co.classes.URLSearchParams,Object.assign({visitor:function(n,o,i,r){return co.isNode&&D.isBuffer(n)?(this.append(o,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function FO(e){return D.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function KO(e){const t={},n=Object.keys(e);let o;const i=n.length;let r;for(o=0;o<i;o++)r=n[o],t[r]=e[r];return t}function XX(e){function t(n,o,i,r){let s=n[r++];if(s==="__proto__")return!0;const I=Number.isFinite(+s),a=r>=n.length;return s=!s&&D.isArray(i)?i.length:s,a?(D.hasOwnProp(i,s)?i[s]=[i[s],o]:i[s]=o,!I):((!i[s]||!D.isObject(i[s]))&&(i[s]=[]),t(n,o,i[s],r)&&D.isArray(i[s])&&(i[s]=KO(i[s])),!I)}if(D.isFormData(e)&&D.isFunction(e.entries)){const n={};return D.forEachEntry(e,(o,i)=>{t(FO(o),i,n,0)}),n}return null}function EO(e,t,n){if(D.isString(e))try{return(t||JSON.parse)(e),D.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(0,JSON.stringify)(e)}const yc={transitional:wX,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const o=n.getContentType()||"",i=o.indexOf("application/json")>-1,r=D.isObject(t);if(r&&D.isHTMLForm(t)&&(t=new FormData(t)),D.isFormData(t))return i?JSON.stringify(XX(t)):t;if(D.isArrayBuffer(t)||D.isBuffer(t)||D.isStream(t)||D.isFile(t)||D.isBlob(t)||D.isReadableStream(t))return t;if(D.isArrayBufferView(t))return t.buffer;if(D.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let I;if(r){if(o.indexOf("application/x-www-form-urlencoded")>-1)return NO(t,this.formSerializer).toString();if((I=D.isFileList(t))||o.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return HA(I?{"files[]":t}:t,a&&new a,this.formSerializer)}}return r||i?(n.setContentType("application/json",!1),EO(t)):t}],transformResponse:[function(t){const n=this.transitional||yc.transitional,o=n&&n.forcedJSONParsing,i=this.responseType==="json";if(D.isResponse(t)||D.isReadableStream(t))return t;if(t&&D.isString(t)&&(o&&!this.responseType||i)){const s=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(I){if(s)throw I.name==="SyntaxError"?Fe.from(I,Fe.ERR_BAD_RESPONSE,this,null,this.response):I}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:co.classes.FormData,Blob:co.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],e=>{yc.headers[e]={}});const MO=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),LO=e=>{const t={};let n,o,i;return e&&e.split(`
`).forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),o=s.substring(i+1).trim(),!(!n||t[n]&&MO[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},MS=Symbol("internals");function Ma(e){return e&&String(e).trim().toLowerCase()}function QC(e){return e===!1||e==null?e:D.isArray(e)?e.map(QC):String(e)}function zO(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}const TO=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function fh(e,t,n,o,i){if(D.isFunction(o))return o.call(this,t,n);if(i&&(t=n),!!D.isString(t)){if(D.isString(o))return t.indexOf(o)!==-1;if(D.isRegExp(o))return o.test(t)}}function UO(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function DO(e,t){const n=D.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(i,r,s){return this[o].call(this,t,i,r,s)},configurable:!0})})}class Co{constructor(t){t&&this.set(t)}set(t,n,o){const i=this;function r(I,a,c){const C=Ma(a);if(!C)throw new Error("header name must be a non-empty string");const A=D.findKey(i,C);(!A||i[A]===void 0||c===!0||c===void 0&&i[A]!==!1)&&(i[A||a]=QC(I))}const s=(I,a)=>D.forEach(I,(c,C)=>r(c,C,a));if(D.isPlainObject(t)||t instanceof this.constructor)s(t,n);else if(D.isString(t)&&(t=t.trim())&&!TO(t))s(LO(t),n);else if(D.isHeaders(t))for(const[I,a]of t.entries())r(a,I,o);else t!=null&&r(n,t,o);return this}get(t,n){if(t=Ma(t),t){const o=D.findKey(this,t);if(o){const i=this[o];if(!n)return i;if(n===!0)return zO(i);if(D.isFunction(n))return n.call(this,i,o);if(D.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ma(t),t){const o=D.findKey(this,t);return!!(o&&this[o]!==void 0&&(!n||fh(this,this[o],o,n)))}return!1}delete(t,n){const o=this;let i=!1;function r(s){if(s=Ma(s),s){const I=D.findKey(o,s);I&&(!n||fh(o,o[I],I,n))&&(delete o[I],i=!0)}}return D.isArray(t)?t.forEach(r):r(t),i}clear(t){const n=Object.keys(this);let o=n.length,i=!1;for(;o--;){const r=n[o];(!t||fh(this,this[r],r,t,!0))&&(delete this[r],i=!0)}return i}normalize(t){const n=this,o={};return D.forEach(this,(i,r)=>{const s=D.findKey(o,r);if(s){n[s]=QC(i),delete n[r];return}const I=t?UO(r):String(r).trim();I!==r&&delete n[r],n[I]=QC(i),o[I]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return D.forEach(this,(o,i)=>{o!=null&&o!==!1&&(n[i]=t&&D.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const o=new this(t);return n.forEach(i=>o.set(i)),o}static accessor(t){const o=(this[MS]=this[MS]={accessors:{}}).accessors,i=this.prototype;function r(s){const I=Ma(s);o[I]||(DO(i,s),o[I]=!0)}return D.isArray(t)?t.forEach(r):r(t),this}}Co.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);D.reduceDescriptors(Co.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[n]=o}}});D.freezeMethods(Co);function Zh(e,t){const n=this||yc,o=t||n,i=Co.from(o.headers);let r=o.data;return D.forEach(e,function(I){r=I.call(n,r,i.normalize(),t?t.status:void 0)}),i.normalize(),r}function JX(e){return!!(e&&e.__CANCEL__)}function sa(e,t,n){Fe.call(this,e??"canceled",Fe.ERR_CANCELED,t,n),this.name="CanceledError"}D.inherits(sa,Fe,{__CANCEL__:!0});function YX(e,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(new Fe("Request failed with status code "+n.status,[Fe.ERR_BAD_REQUEST,Fe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function QO(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function PO(e,t){e=e||10;const n=new Array(e),o=new Array(e);let i=0,r=0,s;return t=t!==void 0?t:1e3,function(a){const c=Date.now(),C=o[r];s||(s=c),n[i]=a,o[i]=c;let A=r,m=0;for(;A!==i;)m+=n[A++],A=A%e;if(i=(i+1)%e,i===r&&(r=(r+1)%e),c-s<t)return;const p=C&&c-C;return p?Math.round(m*1e3/p):void 0}}function jO(e,t){let n=0,o=1e3/t,i,r;const s=(c,C=Date.now())=>{n=C,i=null,r&&(clearTimeout(r),r=null),e.apply(null,c)};return[(...c)=>{const C=Date.now(),A=C-n;A>=o?s(c,C):(i=c,r||(r=setTimeout(()=>{r=null,s(i)},o-A)))},()=>i&&s(i)]}const Od=(e,t,n=3)=>{let o=0;const i=PO(50,250);return jO(r=>{const s=r.loaded,I=r.lengthComputable?r.total:void 0,a=s-o,c=i(a),C=s<=I;o=s;const A={loaded:s,total:I,progress:I?s/I:void 0,bytes:a,rate:c||void 0,estimated:c&&I&&C?(I-s)/c:void 0,event:r,lengthComputable:I!=null,[t?"download":"upload"]:!0};e(A)},n)},LS=(e,t)=>{const n=e!=null;return[o=>t[0]({lengthComputable:n,total:e,loaded:o}),t[1]]},zS=e=>(...t)=>D.asap(()=>e(...t)),_O=co.hasStandardBrowserEnv?function(){const t=co.navigator&&/(msie|trident)/i.test(co.navigator.userAgent),n=document.createElement("a");let o;function i(r){let s=r;return t&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return o=i(window.location.href),function(s){const I=D.isString(s)?i(s):s;return I.protocol===o.protocol&&I.host===o.host}}():function(){return function(){return!0}}(),OO=co.hasStandardBrowserEnv?{write(e,t,n,o,i,r){const s=[e+"="+encodeURIComponent(t)];D.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),D.isString(o)&&s.push("path="+o),D.isString(i)&&s.push("domain="+i),r===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function qO(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function $O(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function HX(e,t){return e&&!qO(t)?$O(e,t):t}const TS=e=>e instanceof Co?{...e}:e;function es(e,t){t=t||{};const n={};function o(c,C,A){return D.isPlainObject(c)&&D.isPlainObject(C)?D.merge.call({caseless:A},c,C):D.isPlainObject(C)?D.merge({},C):D.isArray(C)?C.slice():C}function i(c,C,A){if(D.isUndefined(C)){if(!D.isUndefined(c))return o(void 0,c,A)}else return o(c,C,A)}function r(c,C){if(!D.isUndefined(C))return o(void 0,C)}function s(c,C){if(D.isUndefined(C)){if(!D.isUndefined(c))return o(void 0,c)}else return o(void 0,C)}function I(c,C,A){if(A in t)return o(c,C);if(A in e)return o(void 0,c)}const a={url:r,method:r,data:r,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:I,headers:(c,C)=>i(TS(c),TS(C),!0)};return D.forEach(Object.keys(Object.assign({},e,t)),function(C){const A=a[C]||i,m=A(e[C],t[C],C);D.isUndefined(m)&&A!==I||(n[C]=m)}),n}const xX=e=>{const t=es({},e);let{data:n,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:r,headers:s,auth:I}=t;t.headers=s=Co.from(s),t.url=kX(HX(t.baseURL,t.url),e.params,e.paramsSerializer),I&&s.set("Authorization","Basic "+btoa((I.username||"")+":"+(I.password?unescape(encodeURIComponent(I.password)):"")));let a;if(D.isFormData(n)){if(co.hasStandardBrowserEnv||co.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((a=s.getContentType())!==!1){const[c,...C]=a?a.split(";").map(A=>A.trim()).filter(Boolean):[];s.setContentType([c||"multipart/form-data",...C].join("; "))}}if(co.hasStandardBrowserEnv&&(o&&D.isFunction(o)&&(o=o(t)),o||o!==!1&&_O(t.url))){const c=i&&r&&OO.read(r);c&&s.set(i,c)}return t},e8=typeof XMLHttpRequest<"u",t8=e8&&function(e){return new Promise(function(n,o){const i=xX(e);let r=i.data;const s=Co.from(i.headers).normalize();let{responseType:I,onUploadProgress:a,onDownloadProgress:c}=i,C,A,m,p,b;function G(){p&&p(),b&&b(),i.cancelToken&&i.cancelToken.unsubscribe(C),i.signal&&i.signal.removeEventListener("abort",C)}let W=new XMLHttpRequest;W.open(i.method.toUpperCase(),i.url,!0),W.timeout=i.timeout;function Z(){if(!W)return;const f=Co.from("getAllResponseHeaders"in W&&W.getAllResponseHeaders()),V={data:!I||I==="text"||I==="json"?W.responseText:W.response,status:W.status,statusText:W.statusText,headers:f,config:e,request:W};YX(function(w){n(w),G()},function(w){o(w),G()},V),W=null}"onloadend"in W?W.onloadend=Z:W.onreadystatechange=function(){!W||W.readyState!==4||W.status===0&&!(W.responseURL&&W.responseURL.indexOf("file:")===0)||setTimeout(Z)},W.onabort=function(){W&&(o(new Fe("Request aborted",Fe.ECONNABORTED,e,W)),W=null)},W.onerror=function(){o(new Fe("Network Error",Fe.ERR_NETWORK,e,W)),W=null},W.ontimeout=function(){let v=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const V=i.transitional||wX;i.timeoutErrorMessage&&(v=i.timeoutErrorMessage),o(new Fe(v,V.clarifyTimeoutError?Fe.ETIMEDOUT:Fe.ECONNABORTED,e,W)),W=null},r===void 0&&s.setContentType(null),"setRequestHeader"in W&&D.forEach(s.toJSON(),function(v,V){W.setRequestHeader(V,v)}),D.isUndefined(i.withCredentials)||(W.withCredentials=!!i.withCredentials),I&&I!=="json"&&(W.responseType=i.responseType),c&&([m,b]=Od(c,!0),W.addEventListener("progress",m)),a&&W.upload&&([A,p]=Od(a),W.upload.addEventListener("progress",A),W.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(C=f=>{W&&(o(!f||f.type?new sa(null,e,W):f),W.abort(),W=null)},i.cancelToken&&i.cancelToken.subscribe(C),i.signal&&(i.signal.aborted?C():i.signal.addEventListener("abort",C)));const y=QO(i.url);if(y&&co.protocols.indexOf(y)===-1){o(new Fe("Unsupported protocol "+y+":",Fe.ERR_BAD_REQUEST,e));return}W.send(r||null)})},n8=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let o=new AbortController,i;const r=function(c){if(!i){i=!0,I();const C=c instanceof Error?c:this.reason;o.abort(C instanceof Fe?C:new sa(C instanceof Error?C.message:C))}};let s=t&&setTimeout(()=>{s=null,r(new Fe(`timeout ${t} of ms exceeded`,Fe.ETIMEDOUT))},t);const I=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),e=null)};e.forEach(c=>c.addEventListener("abort",r));const{signal:a}=o;return a.unsubscribe=()=>D.asap(I),a}},o8=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let o=0,i;for(;o<n;)i=o+t,yield e.slice(o,i),o=i},i8=async function*(e,t){for await(const n of g8(e))yield*o8(n,t)},g8=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:o}=await t.read();if(n)break;yield o}}finally{await t.cancel()}},US=(e,t,n,o)=>{const i=i8(e,t);let r=0,s,I=a=>{s||(s=!0,o&&o(a))};return new ReadableStream({async pull(a){try{const{done:c,value:C}=await i.next();if(c){I(),a.close();return}let A=C.byteLength;if(n){let m=r+=A;n(m)}a.enqueue(new Uint8Array(C))}catch(c){throw I(c),c}},cancel(a){return I(a),i.return()}},{highWaterMark:2})},xA=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",NX=xA&&typeof ReadableStream=="function",r8=xA&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),FX=(e,...t)=>{try{return!!e(...t)}catch{return!1}},s8=NX&&FX(()=>{let e=!1;const t=new Request(co.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),DS=64*1024,rb=NX&&FX(()=>D.isReadableStream(new Response("").body)),qd={stream:rb&&(e=>e.body)};xA&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!qd[t]&&(qd[t]=D.isFunction(e[t])?n=>n[t]():(n,o)=>{throw new Fe(`Response type '${t}' is not supported`,Fe.ERR_NOT_SUPPORT,o)})})})(new Response);const l8=async e=>{if(e==null)return 0;if(D.isBlob(e))return e.size;if(D.isSpecCompliantForm(e))return(await new Request(co.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(D.isArrayBufferView(e)||D.isArrayBuffer(e))return e.byteLength;if(D.isURLSearchParams(e)&&(e=e+""),D.isString(e))return(await r8(e)).byteLength},a8=async(e,t)=>{const n=D.toFiniteNumber(e.getContentLength());return n??l8(t)},I8=xA&&(async e=>{let{url:t,method:n,data:o,signal:i,cancelToken:r,timeout:s,onDownloadProgress:I,onUploadProgress:a,responseType:c,headers:C,withCredentials:A="same-origin",fetchOptions:m}=xX(e);c=c?(c+"").toLowerCase():"text";let p=n8([i,r&&r.toAbortSignal()],s),b;const G=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let W;try{if(a&&s8&&n!=="get"&&n!=="head"&&(W=await a8(C,o))!==0){let V=new Request(t,{method:"POST",body:o,duplex:"half"}),X;if(D.isFormData(o)&&(X=V.headers.get("content-type"))&&C.setContentType(X),V.body){const[w,R]=LS(W,Od(zS(a)));o=US(V.body,DS,w,R)}}D.isString(A)||(A=A?"include":"omit");const Z="credentials"in Request.prototype;b=new Request(t,{...m,signal:p,method:n.toUpperCase(),headers:C.normalize().toJSON(),body:o,duplex:"half",credentials:Z?A:void 0});let y=await fetch(b);const f=rb&&(c==="stream"||c==="response");if(rb&&(I||f&&G)){const V={};["status","statusText","headers"].forEach(F=>{V[F]=y[F]});const X=D.toFiniteNumber(y.headers.get("content-length")),[w,R]=I&&LS(X,Od(zS(I),!0))||[];y=new Response(US(y.body,DS,w,()=>{R&&R(),G&&G()}),V)}c=c||"text";let v=await qd[D.findKey(qd,c)||"text"](y,e);return!f&&G&&G(),await new Promise((V,X)=>{YX(V,X,{data:v,headers:Co.from(y.headers),status:y.status,statusText:y.statusText,config:e,request:b})})}catch(Z){throw G&&G(),Z&&Z.name==="TypeError"&&/fetch/i.test(Z.message)?Object.assign(new Fe("Network Error",Fe.ERR_NETWORK,e,b),{cause:Z.cause||Z}):Fe.from(Z,Z&&Z.code,e,b)}}),sb={http:SO,xhr:t8,fetch:I8};D.forEach(sb,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const QS=e=>`- ${e}`,c8=e=>D.isFunction(e)||e===null||e===!1,KX={getAdapter:e=>{e=D.isArray(e)?e:[e];const{length:t}=e;let n,o;const i={};for(let r=0;r<t;r++){n=e[r];let s;if(o=n,!c8(n)&&(o=sb[(s=String(n)).toLowerCase()],o===void 0))throw new Fe(`Unknown adapter '${s}'`);if(o)break;i[s||"#"+r]=o}if(!o){const r=Object.entries(i).map(([I,a])=>`adapter ${I} `+(a===!1?"is not supported by the environment":"is not available in the build"));let s=t?r.length>1?`since :
`+r.map(QS).join(`
`):" "+QS(r[0]):"as no adapter specified";throw new Fe("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return o},adapters:sb};function yh(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new sa(null,e)}function PS(e){return yh(e),e.headers=Co.from(e.headers),e.data=Zh.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),KX.getAdapter(e.adapter||yc.adapter)(e).then(function(o){return yh(e),o.data=Zh.call(e,e.transformResponse,o),o.headers=Co.from(o.headers),o},function(o){return JX(o)||(yh(e),o&&o.response&&(o.response.data=Zh.call(e,e.transformResponse,o.response),o.response.headers=Co.from(o.response.headers))),Promise.reject(o)})}const EX="1.7.7",z0={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{z0[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const jS={};z0.transitional=function(t,n,o){function i(r,s){return"[Axios v"+EX+"] Transitional option '"+r+"'"+s+(o?". "+o:"")}return(r,s,I)=>{if(t===!1)throw new Fe(i(s," has been removed"+(n?" in "+n:"")),Fe.ERR_DEPRECATED);return n&&!jS[s]&&(jS[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(r,s,I):!0}};function C8(e,t,n){if(typeof e!="object")throw new Fe("options must be an object",Fe.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let i=o.length;for(;i-- >0;){const r=o[i],s=t[r];if(s){const I=e[r],a=I===void 0||s(I,r,e);if(a!==!0)throw new Fe("option "+r+" must be "+a,Fe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Fe("Unknown option "+r,Fe.ERR_BAD_OPTION)}}const lb={assertOptions:C8,validators:z0},Sg=lb.validators;class Lr{constructor(t){this.defaults=t,this.interceptors={request:new ES,response:new ES}}async request(t,n){try{return await this._request(t,n)}catch(o){if(o instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{o.stack?r&&!String(o.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+r):o.stack=r}catch{}}throw o}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=es(this.defaults,n);const{transitional:o,paramsSerializer:i,headers:r}=n;o!==void 0&&lb.assertOptions(o,{silentJSONParsing:Sg.transitional(Sg.boolean),forcedJSONParsing:Sg.transitional(Sg.boolean),clarifyTimeoutError:Sg.transitional(Sg.boolean)},!1),i!=null&&(D.isFunction(i)?n.paramsSerializer={serialize:i}:lb.assertOptions(i,{encode:Sg.function,serialize:Sg.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=r&&D.merge(r.common,r[n.method]);r&&D.forEach(["delete","get","head","post","put","patch","common"],b=>{delete r[b]}),n.headers=Co.concat(s,r);const I=[];let a=!0;this.interceptors.request.forEach(function(G){typeof G.runWhen=="function"&&G.runWhen(n)===!1||(a=a&&G.synchronous,I.unshift(G.fulfilled,G.rejected))});const c=[];this.interceptors.response.forEach(function(G){c.push(G.fulfilled,G.rejected)});let C,A=0,m;if(!a){const b=[PS.bind(this),void 0];for(b.unshift.apply(b,I),b.push.apply(b,c),m=b.length,C=Promise.resolve(n);A<m;)C=C.then(b[A++],b[A++]);return C}m=I.length;let p=n;for(A=0;A<m;){const b=I[A++],G=I[A++];try{p=b(p)}catch(W){G.call(this,W);break}}try{C=PS.call(this,p)}catch(b){return Promise.reject(b)}for(A=0,m=c.length;A<m;)C=C.then(c[A++],c[A++]);return C}getUri(t){t=es(this.defaults,t);const n=HX(t.baseURL,t.url);return kX(n,t.params,t.paramsSerializer)}}D.forEach(["delete","get","head","options"],function(t){Lr.prototype[t]=function(n,o){return this.request(es(o||{},{method:t,url:n,data:(o||{}).data}))}});D.forEach(["post","put","patch"],function(t){function n(o){return function(r,s,I){return this.request(es(I||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:r,data:s}))}}Lr.prototype[t]=n(),Lr.prototype[t+"Form"]=n(!0)});class T0{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const o=this;this.promise.then(i=>{if(!o._listeners)return;let r=o._listeners.length;for(;r-- >0;)o._listeners[r](i);o._listeners=null}),this.promise.then=i=>{let r;const s=new Promise(I=>{o.subscribe(I),r=I}).then(i);return s.cancel=function(){o.unsubscribe(r)},s},t(function(r,s,I){o.reason||(o.reason=new sa(r,s,I),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=o=>{t.abort(o)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new T0(function(i){t=i}),cancel:t}}}function d8(e){return function(n){return e.apply(null,n)}}function u8(e){return D.isObject(e)&&e.isAxiosError===!0}const ab={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ab).forEach(([e,t])=>{ab[t]=e});function MX(e){const t=new Lr(e),n=pX(Lr.prototype.request,t);return D.extend(n,Lr.prototype,t,{allOwnKeys:!0}),D.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return MX(es(e,i))},n}const nn=MX(yc);nn.Axios=Lr;nn.CanceledError=sa;nn.CancelToken=T0;nn.isCancel=JX;nn.VERSION=EX;nn.toFormData=HA;nn.AxiosError=Fe;nn.Cancel=nn.CanceledError;nn.all=function(t){return Promise.all(t)};nn.spread=d8;nn.isAxiosError=u8;nn.mergeConfig=es;nn.AxiosHeaders=Co;nn.formToJSON=e=>XX(D.isHTMLForm(e)?new FormData(e):e);nn.getAdapter=KX.getAdapter;nn.HttpStatusCode=ab;nn.default=nn;const A8="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",LX=async e=>{var t;try{const n=await nn.post("/api",{to:e,messages:[{type:"text",text:"ส่งสินค้าเพื่อรออนุมัติ"}]},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${A8}`}});console.log("Success:",n.data)}catch(n){console.error("Error:",((t=n.response)==null?void 0:t.data)||n.message),n.response&&n.response.data&&n.response.data.message.includes("Authentication failed")&&console.error("Token is invalid or expired. Please refresh your token.")}},NA="http://209.58.160.245:1337",zX=async(e,t)=>{try{console.log("Fetching products for shop ID:",t);const n=`${NA}/api/products?populate[image]=true&populate[shop]=true&filters[shop][$eq]=${t}`;console.log("GET Request URL:",n);const o=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok){const s=await o.json();throw console.error("Error fetching products:",s),new Error(`Request failed with status ${o.status}: ${s.message||"Unauthorized"}`)}const i=await o.json();if(console.log("Fetched Products Data:",i),!i.data||!Array.isArray(i.data))throw console.error("Fetched data is not an array:",i),new Error("Invalid data format");const r=i.data.map((s,I)=>{if(console.log(`Processing product ${I}:`,s),!s||typeof s!="object"||!s.attributes)throw console.error(`Invalid product at index ${I}:`,s),new Error(`Invalid product data at index ${I}`);const a=s.attributes.shop||{};return{id:s.id,name:s.attributes.name||"ไม่ระบุชื่อสินค้า",description:s.attributes.description||"ไม่มีรายละเอียด",price:s.attributes.price||0,point:s.attributes.point||null,approved:s.attributes.approved||!1,createdAt:s.attributes.createdAt||null,updatedAt:s.attributes.updatedAt||null,publishedAt:s.attributes.publishedAt||null,image:s.attributes.image||null,shop:{id:a.id||null,name:a.name||"ไม่ระบุชื่อร้านค้า",location:a.location||null,latitude:a.latitude||null,longitude:a.longitude||null,createdAt:a.createdAt||null,updatedAt:a.updatedAt||null,publishedAt:a.publishedAt||null},numStock:s.attributes.numStock||0}});return console.log("Parsed Products:",r),r}catch(n){throw console.error("Error fetching products:",n.message),n}},m8=async(e,t,n)=>{try{const o=`${NA}/api/products`,i=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:n})});if(!i.ok){const s=await i.json();throw console.error("Error adding product:",s),new Error(`Request failed with status ${i.status}`)}const r=await i.json();return LX(t),r}catch(o){throw console.error("Error in addProduct function:",o),o}},h8=async(e,t,n,o)=>{try{const i=`${NA}/api/products/${n}`,r=await fetch(i,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{name:o.name,description:o.description||"",price:parseFloat(o.price),point:o.point||0,approved:o.approved||!1,numStock:parseInt(o.numStock,10),type:o.type,shop:{id:o.shopId},image:o.image?[{id:o.image}]:[]}})});if(!r.ok){const I=await r.json();throw console.error("Error updating Product:",I),new Error(`Request failed with status ${r.status}`)}const s=await r.json();return console.log("Updated Product Data:",s),LX(t),s}catch(i){throw console.error("Error updating Product:",i.message),i}},p8=async(e,t,n,o)=>{try{console.log("getProductByID",n);const i=`${NA}/api/products/${n}`,r=await fetch(i,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok){const I=await r.json();throw console.error("Error fetching ProductByID ID:",I),new Error(`Request failed with status ${r.status}: ${I.message||"Unauthorized"}`)}const s=await r.json();if(console.log("Response:",s),s.data){const I=s.data,a=I.attributes||{},c=I.id||"ID ไม่ระบุ",C=a.name||"ชื่อไม่ระบุ",A=a.description||"ไม่มีคำอธิบาย",m=a.price!==void 0?a.price:"ไม่มีราคา",p=a.numStock!==void 0?a.numStock:"ไม่มีข้อมูลจำนวนในสต็อก",b=a.approved!==void 0?a.approved:"สถานะไม่ระบุ";return console.log(`Product ID: ${c}`),console.log(`Product Name: ${C}`),console.log(`Description: ${A}`),console.log(`Price: ${m}`),console.log(`Number in Stock: ${p}`),console.log(`Approved: ${b}`),{id:c,name:C,description:A,price:m,numStock:p,approved:b}}else return console.warn("No ProductByID found with the provided ID."),null}catch(i){throw console.error("Error fetching ProductByID:",i.message),i}},b8={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",p:4},f8="http://209.58.160.245:1337",Ys="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",U0=JSON.parse(localStorage.getItem("user")||"{}");console.log(U0);const _S=U0.id,OS=U0.lineId;function Z8(){const[e,t]=B.useState(!1),[n,o]=B.useState(!1),[i,r]=B.useState(null),[s,I]=B.useState([]),[a,c]=B.useState(!0),[C,A]=B.useState(null),[m,p]=B.useState({name:"",numStock:"",type:"",price:"",description:"",image:null}),b=async()=>{try{const w=await Dl(Ys,_S);w&&typeof w=="object"&&A(w.shop.id)}catch(w){console.error("เกิดข้อผิดพลาดในการดึงข้อมูลร้านค้า:",w)}finally{c(!1)}};B.useEffect(()=>{b()},[Ys,_S]);const G=async()=>{try{const w=await zX(Ys,C);console.log("Front :: "+w),I(w)}catch(w){console.error("เกิดข้อผิดพลาดในการดึงข้อมูลสินค้า:",w)}};B.useEffect(()=>{C&&G()},[C,Ys]);const W=w=>{const{id:R,value:F}=w.target;p({...m,[R]:F})},Z=w=>{w?p(R=>({...R,image:w})):Pn.fire({icon:"warning",title:"กรุณาเลือกภาพ",text:"กรุณาเพิ่มรูปสินค้าก่อนทำการบันทึก"})},y=async()=>{try{if(!m.name||!m.numStock||!m.price||!m.type){Pn.fire({icon:"warning",title:"กรุณาตรวจสอบข้อมูลอีกครั้ง",text:"กรุณาตรวจสอบข้อมูลอีกครั้ง",position:"center",showConfirmButton:!0,confirmButtonText:"ตกลง"});return}if(m.numStock<0||m.price<0){Pn.fire({icon:"warning",title:"ค่าติดลบไม่ถูกต้อง",text:"จำนวนและมูลค่าต้องเป็นค่าบวก",position:"center",showConfirmButton:!0,confirmButtonText:"ตกลง"});return}let w=null;if(m.image){const x=await UI(m.image);console.log("Uploaded Image:",x),w=x.id}const R={name:m.name,description:m.description,price:parseFloat(m.price),numStock:parseFloat(m.numStock),type:m.type,shop:C,image:w,approved:!1};let F;n?(F=await h8(Ys,OS,i,R),I(x=>x.map(M=>M.id===i?F.data.data:M))):(F=await m8(Ys,OS,R),I(x=>[...x,F.data.data]),V()),Pn.fire({icon:"success",title:n?"สินค้าถูกแก้ไขเรียบร้อยแล้ว":"สินค้าถูกเพิ่มเรียบร้อยแล้ว",position:"center",showConfirmButton:!0,confirmButtonText:"ตกลง"}).then(()=>{V(),G()})}catch(w){console.error("เกิดข้อผิดพลาดในการเพิ่ม/แก้ไขสินค้า:",w),await Pn.fire({icon:"error",title:"Oops...",text:"เกิดข้อผิดพลาดในการเพิ่ม/แก้ไขสินค้า!",position:"center",showConfirmButton:!0,confirmButtonText:"ตกลง"}),V()}},f=w=>{o(!0),r(w.id),p({name:w.name,numStock:w.numStock,type:w.type,price:w.price,description:w.description,image:null}),t(!0)},v=()=>t(!0),V=()=>{t(!1),o(!1),p({name:"",numStock:"",type:"",price:"",description:"",image:null})},X=Li({typography:{fontFamily:"Sarabun !important"}});return a?u.jsx("div",{children:"Loading..."}):u.jsxs(ir,{theme:X,children:[u.jsx(Ui,{}),u.jsxs(pi,{maxWidth:"md",children:[u.jsx(Lo,{container:!0,justifyContent:"flex-end",style:{marginTop:"16px"},children:u.jsx(Lo,{item:!0,children:u.jsx(Cl,{variant:"contained",color:"success",startIcon:u.jsx(TE,{}),onClick:v,children:"เพิ่มสินค้า"})})}),u.jsx(s0,{open:e,onClose:V,children:u.jsx(Oo,{sx:{...b8,borderRadius:"8px",boxShadow:2},children:u.jsxs(Lo,{container:!0,spacing:2,children:[u.jsx(Lo,{item:!0,xs:12,children:u.jsx(tt,{fullWidth:!0,id:"name",label:"ชื่อสินค้า",variant:"outlined",value:m.name||"",onChange:W})}),u.jsx(Lo,{item:!0,xs:12,sm:6,children:u.jsx(tt,{fullWidth:!0,id:"numStock",label:"จำนวน",variant:"outlined",value:m.numStock||"",onChange:W,type:"number",inputProps:{min:1},error:m.numStock<1&&m.numStock!=="",helperText:m.numStock<1&&m.numStock!==""?"จำนวนต้องไม่น้อยกว่า 1":""})}),u.jsx(Lo,{item:!0,xs:12,sm:6,children:u.jsx(tt,{fullWidth:!0,id:"type",label:"ประเภทสินค้า",variant:"outlined",value:m.type||"",onChange:W})}),u.jsx(Lo,{item:!0,xs:12,sm:6,children:u.jsx(tt,{fullWidth:!0,id:"price",label:"มูลค่าต่อชิ้น",variant:"outlined",value:m.price||"",onChange:W,type:"number",step:"0.01",inputProps:{min:1},error:m.price<1&&m.price!=="",helperText:m.price<1&&m.price!==""?"มูลค่าต่อชิ้นต้องไม่น้อยกว่า 1":""})}),u.jsx(Lo,{item:!0,xs:12,children:u.jsx(tt,{fullWidth:!0,id:"description",label:"รายละเอียดสินค้า",variant:"outlined",value:m.description||"",onChange:W,multiline:!0,rows:4})}),u.jsx(Lo,{item:!0,xs:12,children:u.jsx(ga,{id:"image",onCapture:Z,ModuleName:"Product"})}),u.jsx(Lo,{item:!0,xs:14,display:"flex",justifyContent:"flex-end",children:u.jsx(Cl,{variant:"contained",color:"primary",startIcon:u.jsx(DE,{}),onClick:y,children:"บันทึก"})})]})})}),s.map(w=>{var R,F,x;return!w||typeof w.approved>"u"?null:u.jsxs("div",{className:"relative w-full h-auto bg-white rounded-md inner-shadow p-5 mt-10",children:[u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsx("div",{className:`absolute top-2 right-2 px-3 py-1 text-white font-bold rounded-md ${w.approved?"bg-green-500":"bg-yellow-500"} ml-2`,title:w.approved?"อนุมัติแล้ว":"รออนุมัติ",children:w.approved?"อนุมัติแล้ว":"รออนุมัติ"}),u.jsxs("button",{className:"absolute top-2 right-24 px-3 py-1 text-white bg-blue-500 rounded-md hover:bg-blue-700 flex items-center mr-2",onClick:()=>f(w),title:"แก้ไขสินค้า",children:[u.jsx(LE,{className:"mr-1"})," ","แก้ไข"]}),u.jsx("div",{children:(x=(F=(R=w.image)==null?void 0:R.data)==null?void 0:F.attributes)!=null&&x.url?u.jsx("img",{src:`${f8}${w.image.data.attributes.url}`,alt:w.name||"No Name",className:"w-full h-auto cursor-pointer",onClick:()=>{}}):u.jsx("img",{src:K_,alt:"default",className:"w-full h-auto"})}),u.jsx("p",{className:"col-span-2 text-2xl mt-8",children:w.name||"No Name"})]}),u.jsxs("div",{className:"grid grid-cols-4 gap-4 py-5",children:[u.jsx("p",{className:"col-span-2 text-lg",children:"จำนวนสินค้าในสต็อก"}),u.jsx("p",{className:"text-center text-lg",children:w.numStock??0}),u.jsx("p",{className:"text-right text-lg",children:"ชิ้น"})]}),u.jsxs("div",{className:"grid grid-cols-4 gap-4 py-5",children:[u.jsx("p",{className:"col-span-2 text-lg",children:"ราคาต่อชิ้น"}),u.jsx("p",{className:"text-center text-lg",children:w.price??0}),u.jsx("p",{className:"text-right text-lg",children:"บาท"})]}),u.jsxs("div",{className:"grid grid-cols-4 gap-4 py-5",children:[u.jsx("p",{className:"col-span-2 text-lg",children:"จำนวนเงินทั้งหมด"}),u.jsx("p",{className:"text-right text-lg",children:"บาท"}),u.jsx("p",{className:"text-center text-lg",children:w.price*w.numStock})]})]},w.id)}),u.jsx("footer",{className:" text-white py-5 mt-10"})]})]})}function y8(){var Z,y;const[e,t]=B.useState([]),[n,o]=B.useState(!0),[i,r]=B.useState(null),{id:s}=Gu(),[I,a]=B.useState(()=>(localStorage.removeItem("cart"),{})),c="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",C="http://209.58.160.245:1337",A=Xo(),{addToCart:m,removeFromCart:p}=B.useContext(Bf);B.useEffect(()=>{(async()=>{try{o(!0);const v=await zX(c,s);t(v),o(!1),v.length===0&&(alert("No product for this shop"),A("/home"))}catch(v){console.error("Error fetching products:",v),r(v.message),o(!1)}})()},[s,c,A]);const b=(f,v)=>{console.log("productId: ",f,"quantity: ",v),console.log("counts in update: ",I);const V={...I,[f]:(I[f]||0)+v};a(V),localStorage.setItem("cart",JSON.stringify(V)),console.log("updatedCounts in update: ",V)},G=f=>{console.log("In CountsById[",f.id,"] : ",f),m(f),b(f.id,1)},W=f=>{console.log("De CountsById[",f,"] : ",I[f]),I[f]>0&&(p(f),b(f,-1))};return console.log("products: ",e),n?u.jsx("p",{children:"Loading..."}):i?u.jsxs("p",{children:["Error: ",i]}):u.jsxs(u.Fragment,{children:[u.jsx(Mn,{}),u.jsxs(pi,{maxWidth:"sm",children:[e.length>0&&u.jsx("p",{className:"text-3xl text-center pt-10",children:(y=(Z=e[0])==null?void 0:Z.shop)==null?void 0:y.name}),e.map(f=>{var v,V,X;return u.jsxs("div",{children:[u.jsxs("div",{className:"w-full h-60 bg-white mt-10 rounded-s-md",children:[u.jsx("div",{className:"flex justify-center",children:u.jsx("span",{className:"circle",style:{backgroundImage:(X=(V=(v=f.image)==null?void 0:v.data)==null?void 0:V.attributes)!=null&&X.url?`url(${C}${f.image.data.attributes.url})`:"url(https://cdn.britannica.com/70/234870-050-D4D024BB/Orange-colored-cat-yawns-displaying-teeth.jpg)",backgroundSize:"cover",backgroundPosition:"center",width:"100%",maxWidth:"150px",height:"150px",borderRadius:"50%"}})}),u.jsxs("div",{className:"flex flex-row",children:[u.jsx("button",{className:"basis-1/4 rounded-bl-md bg-red-hard-bg text-white font-bold text-3xl pb-3 width-button-inandde",style:{height:"2.9rem"},onClick:()=>W(f.id),children:"-"}),u.jsx("button",{className:"basis-1/2 col-start-2 col-span-4 bg-yellow-hard-bg font-bold width-button-count",style:{height:"2.9rem"},children:I[f.id]||0}),u.jsx("button",{className:"basis-1/4 bg-green-hard-bg text-white font-bold text-3xl pb-3 rounded-br-md width-button-inandde",style:{height:"2.9rem"},onClick:()=>G(f),children:"+"})]})]}),u.jsx("p",{className:"text-center text-2xl mt-10",children:f.name}),u.jsxs("p",{className:"text-center text-2xl mt-3 pb-10",children:[f.point||0," แต้ม"]})]},f.id)})]})]})}function G8(){const[e,t]=B.useState(0),n=()=>{t(e+1)},o=()=>{e>0&&t(e-1)},[i,r]=B.useState(!1),s=()=>{r(I=>!I)};return u.jsxs(u.Fragment,{children:[u.jsxs("nav",{className:"flex items-center justify-between p-5 pr-20 bg-white",children:[u.jsx(Zo,{to:"/",children:u.jsx("img",{src:s2,alt:"Logo",width:50})}),u.jsxs(Zo,{to:"/conclusion",children:[u.jsx(I2,{className:"w-10 h-10 text-green-700 ml-10 relative top-4"}),e>=0&&u.jsx("span",{className:"relative number-basket  inline-flex items-center justify-center w-6 h-6 text-xs font-bold text-white bg-red-500 rounded-full",children:e})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx(c2,{className:"w-7 h-7 text-yellow-hard ml-8 "}),u.jsx("p",{className:"ml-6 mt-2",children:u.jsx("strong",{children:"32000"})})]}),u.jsx("div",{children:u.jsxs("ul",{id:"navbar",className:i?"#navbar open":"#navbar",children:[u.jsx("li",{children:u.jsx(Zo,{className:"font-semibold hover:text-yellow-hard",to:"/UserProfile",style:({isActive:I})=>({color:I?"yellow-hard":""}),children:"ข้อมูลส่วนตัว/ลงทะเบียน"})}),u.jsx("li",{children:u.jsx(Zo,{className:"font-semibold hover:text-yellow-hard",to:"/history-point",style:({isActive:I})=>({color:I?"yellow-hard":""}),children:"คะแนนสะสมและประวัติการแลกแต้ม"})}),u.jsx("li",{children:u.jsx(Zo,{className:"font-semibold hover:text-yellow-hard",to:"/history-service-machine",style:({isActive:I})=>({color:I?"yellow-hard":""}),children:"ประวัติการใช้บริการตู้"})})]})}),u.jsx("div",{id:"mobile",onClick:s,children:u.jsx("i",{id:"bar",className:i?"fas fa-times":"fas fa-bars"})})]}),u.jsxs(pi,{maxWidth:"sm",children:[u.jsxs("div",{className:"w-full h-60 bg-grey-bg mt-10 rounded-md",children:[u.jsx("div",{className:"flex justify-center ",children:u.jsx("div",{className:"background w-40 h-40 "})}),u.jsxs("div",{className:"flex flex-row mt-10",children:[u.jsx("button",{className:"basis-1/4 rounded-bl-md bg-red-hard-bg text-white font-bold text-3xl pb-3 width-button-inandde",style:{height:"2.9rem"},onClick:o,children:"-"}),u.jsx("button",{className:"basis-1/2 col-start-2 col-span-4 bg-yellow-hard-bg  font-bold width-button-count",style:{height:"2.9rem"},children:e}),u.jsx("button",{className:"basis-1/4 bg-green-hard-bg text-white font-bold text-3xl pb-3 rounded-br-md width-button-inandde",style:{height:"2.9rem"},onClick:n,children:"+"})]})]}),u.jsx("p",{className:"text-center text-2xl mt-3",children:"บร็อคโคลี"}),u.jsx("p",{className:"text-center text-2xl mt-3 pb-10",children:"35 แต้ม"}),u.jsxs("div",{className:"w-full h-60 bg-grey-bg mt-10 rounded-s-md",children:[u.jsx("div",{className:"flex justify-center ",children:u.jsx("div",{className:"background-2 w-40 h-40 relative top-10 left-5"})}),u.jsxs("div",{className:"flex flex-row mt-10",children:[u.jsx("button",{className:"basis-1/4 rounded-bl-md bg-red-hard-bg text-white font-bold text-3xl pb-3 width-button-inandde",style:{height:"2.9rem"},onClick:o,children:"-"}),u.jsx("button",{className:"basis-1/2 col-start-2 col-span-4 bg-yellow-hard-bg  font-bold width-button-count",style:{height:"2.9rem"},children:e}),u.jsx("button",{className:"basis-1/4 bg-green-hard-bg text-white font-bold text-3xl pb-3 rounded-br-md width-button-inandde",style:{height:"2.9rem"},onClick:n,children:"+"})]})]}),u.jsx("p",{className:"text-center text-2xl mt-3",children:"แตงกวา"}),u.jsx("p",{className:"text-center text-2xl mt-3 pb-10",children:"50 แต้ม"}),u.jsxs("div",{className:"w-full h-60 bg-grey-bg mt-10 rounded-s-md",children:[u.jsx("div",{className:"flex justify-center ",children:u.jsx("div",{className:"background-3 w-40 h-40 relative top-10 left-5"})}),u.jsxs("div",{className:"flex flex-row mt-10",children:[u.jsx("button",{className:"basis-1/4 rounded-bl-md bg-red-hard-bg text-white font-bold text-3xl pb-3 width-button-inandde",style:{height:"2.9rem"},onClick:o,children:"-"}),u.jsx("button",{className:"basis-1/2 col-start-2 col-span-4 bg-yellow-hard-bg  font-bold width-button-count",style:{height:"2.9rem"},children:e}),u.jsx("button",{className:"basis-1/4 bg-green-hard-bg text-white font-bold text-3xl pb-3 rounded-br-md width-button-inandde",style:{height:"2.9rem"},onClick:n,children:"+"})]})]}),u.jsx("p",{className:"text-center text-2xl mt-3",children:"พริกหยวก"}),u.jsx("p",{className:"text-center text-2xl mt-3 pb-10",children:"50 แต้ม"})]})]})}function qS(){const e="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",{userId:t}=Gu(),n=Li({typography:{fontFamily:"Sarabun"}}),[o,i]=B.useState({username:"",password:"",fullName:"",telNumber:"",gender:"",address:"",cardID:"",photoImage:"",checkedOne:!1}),r=Xo(),[s,I]=B.useState(!1),[a,c]=B.useState(!1),[C,A]=B.useState(null),m=Z=>{i(y=>({...y,photoImage:Z}))},p=Z=>{const{id:y,name:f,value:v,type:V,checked:X}=Z.target;i(w=>({...w,[y||f]:V==="checkbox"?X:v}))};B.useEffect(()=>{const{username:Z,fullName:y,telNumber:f,gender:v,address:V,cardID:X,checkedOne:w}=o;I(Z&&y&&f&&v&&V&&X&&w)},[o]);const b=Z=>({id:Z.id,name:Z.name,alternativeText:Z.alternativeText||null,caption:Z.caption||null,width:Z.width,height:Z.height,formats:Z.formats,hash:Z.hash,ext:Z.ext,mime:Z.mime,size:Z.size,url:Z.url,provider:Z.provider,createdAt:Z.createdAt,updatedAt:Z.updatedAt}),G=async Z=>{Z.preventDefault();let y=null;if(o.photoImage){const V=await UI(o.photoImage);y=b(V)}const f={username:o.username||"cook"+t,email:"cook"+t+"@cook.com",password:"cookcook",lineId:t,userType:"customer",photoImage:y||null,fullName:o.fullName,telNumber:o.telNumber,gender:"Null",address:o.address,cardID:o.cardID};console.log("userData before: ",f),console.log("token before: ",e);const v=await C2(f);if(console.log("response: ",v),v)alert("User registered successfully!"),r("/home");else throw new Error("User registration failed.")},W=Z=>{i(y=>({...y,photoImage:Z}))};return a?u.jsx("p",{children:"Loading..."}):C?u.jsxs("p",{children:["Error: ",C]}):u.jsxs(ir,{theme:n,children:[u.jsx(Mn,{}),u.jsx(t0,{photoImage:o.photoImage,onFileChange:m}),u.jsxs("form",{onSubmit:G,children:[u.jsx("div",{className:"container mx-auto px-4 py-8",children:u.jsxs("div",{className:"flex flex-wrap -mx-2",children:[u.jsx("div",{className:"w-full md:w-1/2 px-2",children:u.jsx(tt,{id:"username",label:"ชื่อผู้ใช้",variant:"outlined",className:"w-full bg-white",required:!0,value:o.username,onChange:p})}),u.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:u.jsx(tt,{id:"fullName",label:"ชื่อ-นามสกุล",variant:"outlined",className:"w-full bg-white",required:!0,value:o.fullName,onChange:p})}),u.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:u.jsx(tt,{id:"telNumber",label:"เบอร์โทร",variant:"outlined",className:"w-full bg-white",required:!0,value:o.telNumber,onChange:p})}),u.jsx("div",{className:"w-full px-2 mt-4",children:u.jsxs(rs,{children:[u.jsx(AA,{children:"เพศ"}),u.jsxs(c0,{row:!0,name:"gender",value:"Null",onChange:p,children:[u.jsx(wl,{value:"Male",control:u.jsx(Xl,{}),label:"ชาย"}),u.jsx(wl,{value:"Female",control:u.jsx(Xl,{}),label:"หญิง"})]})]})}),u.jsx("div",{className:"w-full px-2 mt-4",children:u.jsx(tt,{id:"address",label:"ที่อยู่",placeholder:"ที่อยู่",multiline:!0,rows:4,className:"w-full bg-white",required:!0,value:o.address,onChange:p})}),u.jsx("div",{className:"w-full px-2 mt-4",children:u.jsx(tt,{id:"cardID",label:"หมายเลขบัตรประจำตัวประชาชน",variant:"outlined",className:"w-full bg-white",required:!0,value:o.cardID,onChange:p})}),u.jsx("div",{className:"w-full px-2 mt-4",children:u.jsx(ga,{onCapture:W})})]})}),u.jsxs("div",{className:"container mx-auto px-4 mt-10 mb-5",children:[u.jsx(ea,{id:"checkedOne",checked:o.checkedOne,onChange:p,required:!0,sx:{"& .MuiSvgIcon-root":{fontSize:30}}}),u.jsxs("span",{children:[u.jsx("strong",{children:"กุ๊ก"}),"ให้ความสำคัญเกี่ยวกับความปลอดภัยข้อมูลของคุณ"," ",u.jsx("span",{className:"text-left leading-loose",children:"และเพื่อให้คุณมั่นใจว่า กุ๊กมีความมุ่งมั่นที่จะให้ความคุ้มครองและดำเนินการด้วยความรับผิดชอบต่อการเก็บรวบรวม ใช้ เปิดเผย และโอนข้อมูลของคุณ กุ๊กจึงขอความยินยอมจากคุณ"})]})]}),u.jsx("div",{className:"container mx-auto px-4",children:u.jsx("button",{type:"submit",disabled:!s,className:`w-full h-12 mb-10 flex justify-center rounded-xl items-center text-white ${s?"bg-green-500":"bg-slate-300"}`,children:"ลงทะเบียน"})})]})]})}const B8=()=>{const e=Xo(),t=()=>{e("/register")},n=()=>{e("/Login")};return u.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4",children:[u.jsx("h1",{className:"text-4xl font-semibold text-gray-800 mb-6 text-center",children:"Welcome to Cook Project"}),u.jsxs("p",{className:"text-lg text-gray-600 mb-10 text-center max-w-2xl leading-relaxed",children:["Here’s a platform where you can bring your bottles or cans, collect points, and exchange them for exciting rewards from our partner stores. ",u.jsx("br",{}),"It’s not just recycling—it’s rewarding sustainability with endless possibilities!"]}),u.jsxs("div",{className:"flex space-x-6",children:[u.jsx("button",{className:"bg-[#FBB615] text-white font-medium py-2 px-6 rounded-lg shadow-lg hover:bg-yellow-600 transition duration-200 ease-in-out",onClick:t,children:"Register"}),u.jsx("button",{className:"bg-[#15803d] text-white font-medium py-2 px-6 rounded-lg shadow-lg hover:bg-green-600 transition duration-200 ease-in-out",onClick:n,children:"Login with Line"})]})]})},S8=()=>{const e=Xo(),{isReady:t,liff:n,error:o}=Gf(),[i,r]=B.useState(null),[s,I]=B.useState(""),[a,c]=B.useState(null),[C,A]=B.useState("");B.useEffect(()=>{t&&(async()=>{try{if(await n.init({liffId:"2006448899-kaB4QBVr"}),console.log("LIFF initialized successfully."),n.isLoggedIn()){const b=n.getAccessToken();I(b);const G=await n.getProfile();r(G);const W=await fetchLineProfile(b);c(W);const Z=await m(W);e(Z?"/partner/shopHome":"/partner/PDPA")}else n.login()}catch(b){console.error("Initialization or login error:",b),A("Initialization or login error. Please try again.")}})()},[t,n,e]);const m=async p=>{try{const b=await vu(p.userId,s);return b||await C2(p)}catch{return console.log("User not found, proceeding to register."),null}};return u.jsxs("div",{children:[C&&u.jsx("p",{style:{color:"red"},children:C}),i&&u.jsxs("p",{children:["Welcome, ",i.displayName,"!"]})]})},v8=()=>{const[e,t]=B.useState([]),[n,o]=B.useState(null),i="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=";return B.useEffect(()=>{(async()=>{try{const s=await r2(i);t(s)}catch(s){o(s.message)}})()},[i]),n?u.jsxs("div",{children:["Error: ",n]}):u.jsxs("div",{className:"p-4",children:[u.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Shop List"}),u.jsx("ul",{className:"space-y-4",children:e.map(r=>u.jsxs("li",{className:"border p-4 rounded shadow",children:[u.jsx("h2",{className:"text-xl font-semibold",children:r.name}),u.jsxs("p",{children:["Location: ",r.location]}),u.jsxs("p",{children:["Latitude: ",r.latitude]}),u.jsxs("p",{children:["Longitude: ",r.longitude]}),u.jsxs("p",{children:["Book Bank Number: ",r.bookBankNumber]}),u.jsxs("p",{children:["Created At: ",new Date(r.createdAt).toLocaleString()]}),u.jsxs("p",{children:["Updated At: ",new Date(r.updatedAt).toLocaleString()]}),u.jsxs("p",{children:["Published At: ",new Date(r.publishedAt).toLocaleString()]})]},r.id))})]})};function W8(){return u.jsxs("div",{className:"App",children:[u.jsx("h1",{children:"Reclcle Locations"}),u.jsx(aX,{}),u.jsx("h1",{children:"Oil Locations"}),u.jsx(IX,{})]})}function V8(){var f;const t="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",n="http://209.58.160.245:1337",o=Li({typography:{fontFamily:"Sarabun"}}),[i,r]=B.useState({username:"",password:"",fullName:"",telNumber:"",gender:"",address:"",cardID:"",photoImage:"",checkedOne:!1});Xo();const[s,I]=B.useState(!1),[a,c]=B.useState(null),[C,A]=B.useState(!0),[m,p]=B.useState(null),b=v=>{r(V=>({...V,photoImage:v}))},G=v=>{const{id:V,name:X,value:w,type:R,checked:F}=v.target;r(x=>({...x,[V||X]:R==="checkbox"?F:w}))};B.useEffect(()=>{const{username:v,fullName:V,telNumber:X,gender:w,address:R,cardID:F,checkedOne:x}=i;I(v&&V&&X&&w&&R&&F&&x)},[i]),B.useEffect(()=>{(async()=>{try{A(!0);const V=await vu(void 0,t);c(V),r({username:V.username||"",fullName:V.fullName||"",telNumber:V.telNumber||"",gender:V.gender||"",address:V.address||"",cardID:V.cardID||"",checkedOne:!1}),A(!1)}catch(V){console.error("Error fetching users:",V),p(V.message),A(!1)}})()},[void 0,t]);const W=v=>({id:v.id,name:v.name,alternativeText:v.alternativeText||null,caption:v.caption||null,width:v.width,height:v.height,formats:v.formats,hash:v.hash,ext:v.ext,mime:v.mime,size:v.size,url:v.url,provider:v.provider,createdAt:v.createdAt,updatedAt:v.updatedAt}),Z=async v=>{v.preventDefault();try{let V=null;if(i.photoImage){const w=await UI(i.photoImage);V=W(w)}const X={username:i.username,email:i.email,password:i.password,photoImage:V,fullName:i.fullName,telNumber:i.telNumber,gender:i.gender,address:i.address,cardID:i.cardID};await l5(a.id,X,t),alert("User data updated successfully!")}catch(V){console.error("Error updating user data:",V),alert("Error updating user data")}},y=v=>{r(V=>({...V,photoImage:v}))};return C?u.jsx("p",{children:"Loading..."}):m?u.jsxs("p",{children:["Error: ",m]}):u.jsxs(ir,{theme:o,children:[u.jsx(Mn,{}),u.jsx(t0,{photoImage:(f=a==null?void 0:a.photoImage)!=null&&f.url?`${n}${a.photoImage.url}`:"",onFileChange:b}),u.jsxs("form",{onSubmit:Z,children:[u.jsx("div",{className:"container mx-auto px-4 py-8",children:u.jsxs("div",{className:"flex flex-wrap -mx-2",children:[u.jsx("div",{className:"w-full md:w-1/2 px-2",children:u.jsx(tt,{id:"username",label:"ชื่อผู้ใช้",variant:"outlined",className:"w-full bg-white",required:!0,value:i.username,onChange:G})}),u.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:u.jsx(tt,{id:"fullName",label:"ชื่อ-นามสกุล",variant:"outlined",className:"w-full bg-white",required:!0,value:i.fullName,onChange:G})}),u.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:u.jsx(tt,{id:"telNumber",label:"เบอร์โทร",variant:"outlined",className:"w-full bg-white",required:!0,value:i.telNumber,onChange:G})}),u.jsx("div",{className:"w-full px-2 mt-4",children:u.jsxs(rs,{children:[u.jsx(AA,{children:"เพศ"}),u.jsxs(c0,{row:!0,name:"gender",value:"Null",onChange:G,children:[u.jsx(wl,{value:"Male",control:u.jsx(Xl,{}),label:"ชาย"}),u.jsx(wl,{value:"Female",control:u.jsx(Xl,{}),label:"หญิง"})]})]})}),u.jsx("div",{className:"w-full px-2 mt-4",children:u.jsx(tt,{id:"address",label:"ที่อยู่",placeholder:"ที่อยู่",multiline:!0,rows:4,className:"w-full bg-white",required:!0,value:i.address,onChange:G})}),u.jsx("div",{className:"w-full px-2 mt-4",children:u.jsx(tt,{id:"cardID",label:"หมายเลขบัตรประจำตัวประชาชน",variant:"outlined",className:"w-full bg-white",required:!0,value:i.cardID,onChange:G})}),u.jsx("div",{className:"w-full px-2 mt-4",children:u.jsx(ga,{onCapture:y})})]})}),u.jsxs("div",{className:"container mx-auto px-4 mt-10 mb-5",children:[u.jsx(ea,{id:"checkedOne",checked:i.checkedOne,onChange:G,required:!0,sx:{"& .MuiSvgIcon-root":{fontSize:30}}}),u.jsxs("span",{children:[u.jsx("strong",{children:"กุ๊ก"}),"ให้ความสำคัญเกี่ยวกับความปลอดภัยข้อมูลของคุณ"," ",u.jsx("span",{className:"text-left leading-loose",children:"และเพื่อให้คุณมั่นใจว่า กุ๊กมีความมุ่งมั่นที่จะให้ความคุ้มครองและดำเนินการด้วยความรับผิดชอบต่อการเก็บรวบรวม ใช้ เปิดเผย และโอนข้อมูลของคุณ กุ๊กจึงขอความยินยอมจากคุณ"})]})]}),u.jsx("div",{className:"container mx-auto px-4",children:u.jsx("button",{type:"submit",disabled:!s,className:`w-full h-12 mb-10 flex justify-center rounded-xl items-center text-white ${s?"bg-green-500":"bg-slate-300"}`,children:"บันทึกข้อมูล"})})]})]})}const R8=()=>{const e=os(),{storedCounts:t,cartItems:n}=e.state||{},o=typeof t=="string"?JSON.parse(t):t,[i,r]=B.useState(!1),s=()=>{r(!i)};let I=0,a=0;return u.jsxs(u.Fragment,{children:[u.jsx(Mn,{}),u.jsx("div",{className:"flex justify-center mt-6 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"bg-white shadow-md rounded-lg p-4 sm:p-6 w-full max-w-md border-2 border-gray-300",children:[u.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-center mb-4",children:"Cart Summary"}),u.jsx("h2",{className:"text-md sm:text-lg font-semibold text-gray-700 mb-4 text-center",children:"รายการที่เลือก"}),u.jsx("div",{className:"border-b-2 border-gray-300 mb-4"}),n&&n.length>0?u.jsx("ul",{className:"space-y-3 sm:space-y-4",children:n.map((c,C)=>{const A=o[c.id];if(A>0){const m=c.point*A;return I+=m,a+=A,u.jsxs("li",{className:"flex flex-row justify-between items-start sm:items-center py-4 border-b border-gray-200",children:[u.jsxs("div",{className:"sm:w-full",children:[u.jsxs("span",{className:"font-semibold text-lg sm:text-xl",children:["รายการที่ ",C+1,":"]}),u.jsx("span",{className:"text-md sm:text-lg ml-2",children:c.name}),u.jsx("br",{}),u.jsxs("span",{className:"text-sm sm:text-md text-gray-600",children:["จำนวน ",A," รายการ"]})]}),c.point?u.jsxs("div",{className:"mt-2 text-md sm:text-lg text-gray-700",children:[u.jsx("p",{children:"ใช้แต้มไป"}),u.jsxs("p",{children:[" ",m," แต้ม"]})]}):u.jsx("span",{className:"text-md sm:text-lg text-gray-500",children:"ไม่มีแต้มสำหรับสินค้านี้"})]},c.id)}return null})}):u.jsx("p",{className:"text-center text-gray-500",children:"ไม่มีสินค้าในตะกร้า"}),u.jsxs("div",{className:"border-t-2 border-gray-300 mt-4 pt-4",children:[u.jsxs("p",{className:"text-center text-sm font-light",children:["จำนวนทั้งหมด: ",a," รายการ"]}),u.jsxs("p",{className:"text-center text-lg font-semibold",children:["แต้มรวมทั้งหมด: ",I," แต้ม"]}),u.jsx("br",{}),u.jsx("p",{className:"text-center text-sm sm:text-lg text-gray-500 mt-2",children:"ขอบคุณที่ใช้บริการ"})]}),u.jsx("p",{className:"text-center pt-10 text-xl",children:"สร้าง QR Code"}),u.jsx("div",{className:"mt-10 flex justify-center",children:u.jsx("div",{className:`slider-container ${i?"on":""}`,onClick:s,children:u.jsx("div",{className:"slider",children:u.jsx("div",{className:"slider-button"})})})}),i&&u.jsx("div",{className:"mt-10 flex justify-center",children:u.jsx(lX,{value:"https://google.com"})})]})})]})};function $S(){const[e,t]=B.useState([]),[n,o]=B.useState(!0),[i,r]=B.useState(null),s=localStorage.getItem("accessToken")||"XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",a=JSON.parse(localStorage.getItem("user")||"{}").id;return B.useEffect(()=>{(async()=>{try{o(!0);const C=await Dl(s,a);console.log("Fetched shop data:",C),C&&typeof C=="object"&&C.shop&&t([C.shop])}catch{r("Error: Shop data is undefined or missing.")}finally{o(!1)}})()},[s,a]),n?u.jsx("p",{children:"Loading..."}):i?u.jsx("p",{children:i}):u.jsxs(u.Fragment,{children:[u.jsx(Ui,{}),u.jsx("div",{className:"mx-auto px-2",children:u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 mt-5",children:e.map(c=>{var C,A,m;return u.jsx(Su,{to:"/partner/add-product",children:u.jsxs("div",{className:"shop-2",children:[u.jsx("span",{className:"circle",style:{backgroundImage:(m=(A=(C=c.image)==null?void 0:C.data)==null?void 0:A.attributes)!=null&&m.url?`url(${c.image.data.attributes.url})`:"url(https://cdn.britannica.com/70/234870-050-D4D024BB/Orange-colored-cat-yawns-displaying-teeth.jpg)",backgroundSize:"cover"}}),u.jsx("span",{className:"pl-2",children:c.name})]})},c.id)})})})]})}var D0={},k8=Ol;Object.defineProperty(D0,"__esModule",{value:!0});var QI=D0.default=void 0,w8=k8(wA()),X8=u;QI=D0.default=(0,w8.default)((0,X8.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function J8(e,t,n){return(t=h3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y8(e){if(Array.isArray(e))return e}function H8(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o,i,r,s,I=[],a=!0,c=!1;try{if(r=(n=n.call(e)).next,t!==0)for(;!(a=(o=r.call(n)).done)&&(I.push(o.value),I.length!==t);a=!0);}catch(C){c=!0,i=C}finally{try{if(!a&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return I}}function ev(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function x8(e,t){if(e){if(typeof e=="string")return ev(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ev(e,t):void 0}}function N8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F8(e,t){return Y8(e)||H8(e,t)||x8(e,t)||N8()}function K8(e,t){if(e==null)return{};var n,o,i=ce(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var TX={exports:{}},bt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bn=typeof Symbol=="function"&&Symbol.for,Q0=bn?Symbol.for("react.element"):60103,P0=bn?Symbol.for("react.portal"):60106,FA=bn?Symbol.for("react.fragment"):60107,KA=bn?Symbol.for("react.strict_mode"):60108,EA=bn?Symbol.for("react.profiler"):60114,MA=bn?Symbol.for("react.provider"):60109,LA=bn?Symbol.for("react.context"):60110,j0=bn?Symbol.for("react.async_mode"):60111,zA=bn?Symbol.for("react.concurrent_mode"):60111,TA=bn?Symbol.for("react.forward_ref"):60112,UA=bn?Symbol.for("react.suspense"):60113,E8=bn?Symbol.for("react.suspense_list"):60120,DA=bn?Symbol.for("react.memo"):60115,QA=bn?Symbol.for("react.lazy"):60116,M8=bn?Symbol.for("react.block"):60121,L8=bn?Symbol.for("react.fundamental"):60117,z8=bn?Symbol.for("react.responder"):60118,T8=bn?Symbol.for("react.scope"):60119;function xo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Q0:switch(e=e.type,e){case j0:case zA:case FA:case EA:case KA:case UA:return e;default:switch(e=e&&e.$$typeof,e){case LA:case TA:case QA:case DA:case MA:return e;default:return t}}case P0:return t}}}function UX(e){return xo(e)===zA}bt.AsyncMode=j0;bt.ConcurrentMode=zA;bt.ContextConsumer=LA;bt.ContextProvider=MA;bt.Element=Q0;bt.ForwardRef=TA;bt.Fragment=FA;bt.Lazy=QA;bt.Memo=DA;bt.Portal=P0;bt.Profiler=EA;bt.StrictMode=KA;bt.Suspense=UA;bt.isAsyncMode=function(e){return UX(e)||xo(e)===j0};bt.isConcurrentMode=UX;bt.isContextConsumer=function(e){return xo(e)===LA};bt.isContextProvider=function(e){return xo(e)===MA};bt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Q0};bt.isForwardRef=function(e){return xo(e)===TA};bt.isFragment=function(e){return xo(e)===FA};bt.isLazy=function(e){return xo(e)===QA};bt.isMemo=function(e){return xo(e)===DA};bt.isPortal=function(e){return xo(e)===P0};bt.isProfiler=function(e){return xo(e)===EA};bt.isStrictMode=function(e){return xo(e)===KA};bt.isSuspense=function(e){return xo(e)===UA};bt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===FA||e===zA||e===EA||e===KA||e===UA||e===E8||typeof e=="object"&&e!==null&&(e.$$typeof===QA||e.$$typeof===DA||e.$$typeof===MA||e.$$typeof===LA||e.$$typeof===TA||e.$$typeof===L8||e.$$typeof===z8||e.$$typeof===T8||e.$$typeof===M8)};bt.typeOf=xo;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var tv=Object.getOwnPropertySymbols,U8=Object.prototype.hasOwnProperty,D8=Object.prototype.propertyIsEnumerable;function Q8(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function P8(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(t).map(function(r){return t[r]});if(o.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(r){i[r]=r}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}P8();var j8="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",_8=j8;Function.call.bind(Object.prototype.hasOwnProperty);var O8=_8;function DX(){}function QX(){}QX.resetWarningCache=DX;var q8=function(){function e(o,i,r,s,I,a){if(a!==O8){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:QX,resetWarningCache:DX};return n.PropTypes=n,n};TX.exports=q8();var Hs=TX.exports;function $8(e,t){var n=atob(e);return n}function e7(e,t,n){var o=$8(e),i=o.indexOf(`
`,10)+1,r=o.substring(i)+"",s=new Blob([r],{type:"application/javascript"});return URL.createObjectURL(s)}function t7(e,t,n){var o;return function(r){return o=o||e7(e),new Worker(o,r)}}var n7=t7("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg=="),o7=["constraints","onError","onLoad","onScan","resolution","qrArea"];function nv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,o)}return n}function ov(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nv(Object(n),!0).forEach(function(o){J8(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nv(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var i7=function(){return new n7},iv=function(t){t&&(t.getVideoTracks&&t.getAudioTracks?(t.getVideoTracks().forEach(function(n){t.removeTrack(n),n.stop()}),t.getAudioTracks().forEach(function(n){t.removeTrack(n),n.stop()})):t.stop())},_0=function(t){var n=t.constraints,o=t.onError,i=t.onLoad,r=t.onScan,s=t.resolution,I=t.qrArea,a=K8(t,o7),c=B.useRef(null),C=B.useRef(null),A=B.useRef(document.createElement("canvas")),m=B.useRef(null),p=B.useRef(),b=B.useState(null),G=F8(b,2),W=G[0],Z=G[1],y=B.useRef(!1),f=B.useRef();B.useEffect(function(){f.current=i7();var w=f.current;return w.onmessage=function(R){r&&r(R.data?ov(ov({},R.data),{},{canvas:A.current}):null),y.current=!1},function(){w.terminate()}},[r]);var v=JSON.stringify(I),V=B.useCallback(function(){var w=JSON.parse(v),R=f.current,F=C.current&&C.current.readyState===C.current.HAVE_ENOUGH_DATA;if(!y.current&&F){y.current=!0;var x=C.current.videoWidth,M=C.current.videoHeight,Q=x>M?x:M,$=Math.floor(s/Q*100)/100;M=Math.floor($*M),x=Math.floor($*x),A.current.width=x,A.current.height=M,m.current=A.current.getContext("2d"),m.current.drawImage(C.current,0,0,x,M);var _;w&&w.length===2&&w[0]>0&&w[1]>0?_=m.current.getImageData(Math.floor((x-w[0])/2),Math.floor((M-w[1])/2),w[0],w[1]):_=m.current.getImageData(0,0,x,M),R.postMessage(_)}p.current=requestAnimationFrame(V)},[s,v]),X=JSON.stringify(n);return B.useEffect(function(){var w=JSON.parse(X),R=!0;return navigator.mediaDevices.getUserMedia(w).then(function(F){if(!R)iv(F);else{c.current=F;try{C.current&&(C.current.srcObject=F,C.current.setAttribute("playsinline",!0))}catch{Z(window.URL.createObjectURL(F))}i&&i(),p.current=requestAnimationFrame(V)}}).catch(function(F){return R?o(F):null}),function(){cancelAnimationFrame(p.current),R=!1,iv(c.current),W&&window.URL.revokeObjectURL(W)}},[V,X,o,i,W]),B.createElement("video",J({autoPlay:!0,playsInline:!0,src:W,ref:C},a))};_0.propTypes={constraints:Hs.object,onError:Hs.func.isRequired,onLoad:Hs.func,onScan:Hs.func.isRequired,resolution:Hs.number,qrArea:Hs.array};_0.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]};function gv(){const e=Li({typography:{fontFamily:"Sarabun"}}),t=Xo(),[n,o]=B.useState("No result"),[i,r]=B.useState(!1),s=C=>{if(C){r(!1),console.log("QR Code data:",C);try{let A=C.text;typeof A=="string"?(A=A.replace(/\\"/g,'"').replace(/^"|"$/g,"").replace(/\\+/g,""),console.log("Formatted Data after cleaning:",A),t("/partner/ShopHomeDetailResive",{state:{rawData:A}})):o("QR Code ไม่ใช่ JSON format")}catch(A){console.error("Error parsing QR code data:",A),o("ไม่สามารถอ่านข้อมูล QR Code ได้")}}},I=C=>{console.error(C)},a=()=>{console.log("Card closed")},c={height:240,width:320};return u.jsx(ir,{theme:e,children:u.jsxs(u.Fragment,{children:[u.jsx(Ui,{}),u.jsx(Oo,{display:"flex",justifyContent:"center",alignItems:"center",sx:{padding:"5px",marginTop:"10px",marginBottom:"10px",height:"100vh"},children:u.jsxs(Nd,{sx:{width:{xs:"90%",sm:"80%",md:"70%",lg:"60%"},maxWidth:"550px",position:"relative"},children:[u.jsx(Kd,{sx:{backgroundColor:"#800020",color:"white"},action:u.jsx(Rl,{onClick:a,sx:{color:"white"},children:u.jsx(QI,{})})}),u.jsxs(Fd,{children:[u.jsx(_0,{delay:300,onError:I,onScan:s,style:c}),i&&u.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(128, 0, 32, 0.8)",color:"white",padding:"15px",borderRadius:"8px",textAlign:"center",zIndex:1},children:[u.jsx(Sn,{variant:"h6",children:"กำลัง Scan QR Code..."}),u.jsx(Sn,{variant:"body2",children:"กรุณาอยู่ในพื้นที่ที่มีแสงสว่าง"})]}),u.jsx("div",{className:"qr-result",style:{marginTop:"10px"},children:u.jsx(Sn,{variant:"body1",sx:{fontSize:"1.5rem",lineHeight:1.5},children:n})})]})]})})]})})}function g7(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...o)=>e(...o);return new Proxy(n,{get:(o,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}function PI(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Ib=e=>Array.isArray(e);function PX(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let o=0;o<n;o++)if(t[o]!==e[o])return!1;return!0}function jI(e){return typeof e=="string"||Array.isArray(e)}function rv(e){const t=[{},{}];return e==null||e.values.forEach((n,o)=>{t[0][o]=n.get(),t[1][o]=n.getVelocity()}),t}function O0(e,t,n,o){if(typeof t=="function"){const[i,r]=rv(o);t=t(n!==void 0?n:e.custom,i,r)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,r]=rv(o);t=t(n!==void 0?n:e.custom,i,r)}return t}function PA(e,t,n){const o=e.getProps();return O0(o,t,n!==void 0?n:o.custom,e)}const q0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$0=["initial",...q0],Gc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],rr=new Set(Gc),sg=e=>e*1e3,lg=e=>e/1e3,r7={type:"spring",stiffness:500,damping:25,restSpeed:10},s7=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),l7={type:"keyframes",duration:.8},a7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},I7=(e,{keyframes:t})=>t.length>2?l7:rr.has(e)?e.startsWith("scale")?s7(t[1]):r7:a7;function eZ(e,t){return e?e[t]||e.default||e:void 0}const c7={skipAnimations:!1,useManualTiming:!1},C7=e=>e!==null;function jA(e,{repeat:t,repeatType:n="loop"},o){const i=e.filter(C7),r=t&&n!=="loop"&&t%2===1?0:i.length-1;return!r||o===void 0?i[r]:o}const Fn=e=>e;function d7(e){let t=new Set,n=new Set,o=!1,i=!1;const r=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function I(c){r.has(c)&&(a.schedule(c),e()),c(s)}const a={schedule:(c,C=!1,A=!1)=>{const p=A&&o?t:n;return C&&r.add(c),p.has(c)||p.add(c),c},cancel:c=>{n.delete(c),r.delete(c)},process:c=>{if(s=c,o){i=!0;return}o=!0,[t,n]=[n,t],n.clear(),t.forEach(I),o=!1,i&&(i=!1,a.process(c))}};return a}const pC=["read","resolveKeyframes","update","preRender","render","postRender"],u7=40;function jX(e,t){let n=!1,o=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,s=pC.reduce((Z,y)=>(Z[y]=d7(r),Z),{}),{read:I,resolveKeyframes:a,update:c,preRender:C,render:A,postRender:m}=s,p=()=>{const Z=performance.now();n=!1,i.delta=o?1e3/60:Math.max(Math.min(Z-i.timestamp,u7),1),i.timestamp=Z,i.isProcessing=!0,I.process(i),a.process(i),c.process(i),C.process(i),A.process(i),m.process(i),i.isProcessing=!1,n&&t&&(o=!1,e(p))},b=()=>{n=!0,o=!0,i.isProcessing||e(p)};return{schedule:pC.reduce((Z,y)=>{const f=s[y];return Z[y]=(v,V=!1,X=!1)=>(n||b(),f.schedule(v,V,X)),Z},{}),cancel:Z=>{for(let y=0;y<pC.length;y++)s[pC[y]].cancel(Z)},state:i,steps:s}}const{schedule:pt,cancel:jg,state:Gn,steps:Gh}=jX(typeof requestAnimationFrame<"u"?requestAnimationFrame:Fn,!0),_X=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,A7=1e-7,m7=12;function h7(e,t,n,o,i){let r,s,I=0;do s=t+(n-t)/2,r=_X(s,o,i)-e,r>0?n=s:t=s;while(Math.abs(r)>A7&&++I<m7);return s}function Bc(e,t,n,o){if(e===t&&n===o)return Fn;const i=r=>h7(r,0,1,e,n);return r=>r===0||r===1?r:_X(i(r),t,o)}const OX=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,qX=e=>t=>1-e(1-t),$X=Bc(.33,1.53,.69,.99),tZ=qX($X),eJ=OX(tZ),tJ=e=>(e*=2)<1?.5*tZ(e):.5*(2-Math.pow(2,-10*(e-1))),nZ=e=>1-Math.sin(Math.acos(e)),nJ=qX(nZ),oJ=OX(nZ),iJ=e=>/^0[^.\s]+$/u.test(e);function p7(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||iJ(e):!0}let cb=Fn;const gJ=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),rJ=e=>t=>typeof t=="string"&&t.startsWith(e),sJ=rJ("--"),b7=rJ("var(--"),oZ=e=>b7(e)?f7.test(e.split("/*")[0].trim()):!1,f7=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Z7=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function y7(e){const t=Z7.exec(e);if(!t)return[,];const[,n,o,i]=t;return[`--${n??o}`,i]}function lJ(e,t,n=1){const[o,i]=y7(e);if(!o)return;const r=window.getComputedStyle(t).getPropertyValue(o);if(r){const s=r.trim();return gJ(s)?parseFloat(s):s}return oZ(i)?lJ(i,t,n+1):i}const _g=(e,t,n)=>n>t?t:n<e?e:n,la={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},_I={...la,transform:e=>_g(0,1,e)},bC={...la,default:1},Sc=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Vg=Sc("deg"),xi=Sc("%"),ve=Sc("px"),G7=Sc("vh"),B7=Sc("vw"),sv={...xi,parse:e=>xi.parse(e)/100,transform:e=>xi.transform(e*100)},S7=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),lv=e=>e===la||e===ve,av=(e,t)=>parseFloat(e.split(", ")[t]),Iv=(e,t)=>(n,{transform:o})=>{if(o==="none"||!o)return 0;const i=o.match(/^matrix3d\((.+)\)$/u);if(i)return av(i[1],t);{const r=o.match(/^matrix\((.+)\)$/u);return r?av(r[1],e):0}},v7=new Set(["x","y","z"]),W7=Gc.filter(e=>!v7.has(e));function V7(e){const t=[];return W7.forEach(n=>{const o=e.getValue(n);o!==void 0&&(t.push([n,o.get()]),o.set(n.startsWith("scale")?1:0))}),t}const El={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Iv(4,13),y:Iv(5,14)};El.translateX=El.x;El.translateY=El.y;const aJ=e=>t=>t.test(e),R7={test:e=>e==="auto",parse:e=>e},IJ=[la,ve,xi,Vg,B7,G7,R7],cv=e=>IJ.find(aJ(e)),zr=new Set;let Cb=!1,db=!1;function cJ(){if(db){const e=Array.from(zr).filter(o=>o.needsMeasurement),t=new Set(e.map(o=>o.element)),n=new Map;t.forEach(o=>{const i=V7(o);i.length&&(n.set(o,i),o.render())}),e.forEach(o=>o.measureInitialState()),t.forEach(o=>{o.render();const i=n.get(o);i&&i.forEach(([r,s])=>{var I;(I=o.getValue(r))===null||I===void 0||I.set(s)})}),e.forEach(o=>o.measureEndState()),e.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}db=!1,Cb=!1,zr.forEach(e=>e.complete()),zr.clear()}function CJ(){zr.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(db=!0)})}function k7(){CJ(),cJ()}class iZ{constructor(t,n,o,i,r,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=o,this.motionValue=i,this.element=r,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(zr.add(this),Cb||(Cb=!0,pt.read(CJ),pt.resolveKeyframes(cJ))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:o,motionValue:i}=this;for(let r=0;r<t.length;r++)if(t[r]===null)if(r===0){const s=i==null?void 0:i.get(),I=t[t.length-1];if(s!==void 0)t[0]=s;else if(o&&n){const a=o.readValue(n,I);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=I),i&&s===void 0&&i.set(t[0])}else t[r]=t[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),zr.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,zr.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const dI=e=>Math.round(e*1e5)/1e5,gZ=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function w7(e){return e==null}const X7=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,rZ=(e,t)=>n=>!!(typeof n=="string"&&X7.test(n)&&n.startsWith(e)||t&&!w7(n)&&Object.prototype.hasOwnProperty.call(n,t)),dJ=(e,t,n)=>o=>{if(typeof o!="string")return o;const[i,r,s,I]=o.match(gZ);return{[e]:parseFloat(i),[t]:parseFloat(r),[n]:parseFloat(s),alpha:I!==void 0?parseFloat(I):1}},J7=e=>_g(0,255,e),Bh={...la,transform:e=>Math.round(J7(e))},Hr={test:rZ("rgb","red"),parse:dJ("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:o=1})=>"rgba("+Bh.transform(e)+", "+Bh.transform(t)+", "+Bh.transform(n)+", "+dI(_I.transform(o))+")"};function Y7(e){let t="",n="",o="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),o=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),o=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,o+=o,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(o,16),alpha:i?parseInt(i,16)/255:1}}const ub={test:rZ("#"),parse:Y7,transform:Hr.transform},$s={test:rZ("hsl","hue"),parse:dJ("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:o=1})=>"hsla("+Math.round(e)+", "+xi.transform(dI(t))+", "+xi.transform(dI(n))+", "+dI(_I.transform(o))+")"},Yn={test:e=>Hr.test(e)||ub.test(e)||$s.test(e),parse:e=>Hr.test(e)?Hr.parse(e):$s.test(e)?$s.parse(e):ub.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Hr.transform(e):$s.transform(e)},H7=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function x7(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(gZ))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(H7))===null||n===void 0?void 0:n.length)||0)>0}const uJ="number",AJ="color",N7="var",F7="var(",Cv="${}",K7=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function OI(e){const t=e.toString(),n=[],o={color:[],number:[],var:[]},i=[];let r=0;const I=t.replace(K7,a=>(Yn.test(a)?(o.color.push(r),i.push(AJ),n.push(Yn.parse(a))):a.startsWith(F7)?(o.var.push(r),i.push(N7),n.push(a)):(o.number.push(r),i.push(uJ),n.push(parseFloat(a))),++r,Cv)).split(Cv);return{values:n,split:I,indexes:o,types:i}}function mJ(e){return OI(e).values}function hJ(e){const{split:t,types:n}=OI(e),o=t.length;return i=>{let r="";for(let s=0;s<o;s++)if(r+=t[s],i[s]!==void 0){const I=n[s];I===uJ?r+=dI(i[s]):I===AJ?r+=Yn.transform(i[s]):r+=i[s]}return r}}const E7=e=>typeof e=="number"?0:e;function M7(e){const t=mJ(e);return hJ(e)(t.map(E7))}const Og={test:x7,parse:mJ,createTransformer:hJ,getAnimatableNone:M7},L7=new Set(["brightness","contrast","saturate","opacity"]);function z7(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[o]=n.match(gZ)||[];if(!o)return e;const i=n.replace(o,"");let r=L7.has(t)?1:0;return o!==n&&(r*=100),t+"("+r+i+")"}const T7=/\b([a-z-]*)\(.*?\)/gu,Ab={...Og,getAnimatableNone:e=>{const t=e.match(T7);return t?t.map(z7).join(" "):e}},U7={borderWidth:ve,borderTopWidth:ve,borderRightWidth:ve,borderBottomWidth:ve,borderLeftWidth:ve,borderRadius:ve,radius:ve,borderTopLeftRadius:ve,borderTopRightRadius:ve,borderBottomRightRadius:ve,borderBottomLeftRadius:ve,width:ve,maxWidth:ve,height:ve,maxHeight:ve,top:ve,right:ve,bottom:ve,left:ve,padding:ve,paddingTop:ve,paddingRight:ve,paddingBottom:ve,paddingLeft:ve,margin:ve,marginTop:ve,marginRight:ve,marginBottom:ve,marginLeft:ve,backgroundPositionX:ve,backgroundPositionY:ve},D7={rotate:Vg,rotateX:Vg,rotateY:Vg,rotateZ:Vg,scale:bC,scaleX:bC,scaleY:bC,scaleZ:bC,skew:Vg,skewX:Vg,skewY:Vg,distance:ve,translateX:ve,translateY:ve,translateZ:ve,x:ve,y:ve,z:ve,perspective:ve,transformPerspective:ve,opacity:_I,originX:sv,originY:sv,originZ:ve},dv={...la,transform:Math.round},sZ={...U7,...D7,zIndex:dv,size:ve,fillOpacity:_I,strokeOpacity:_I,numOctaves:dv},Q7={...sZ,color:Yn,backgroundColor:Yn,outlineColor:Yn,fill:Yn,stroke:Yn,borderColor:Yn,borderTopColor:Yn,borderRightColor:Yn,borderBottomColor:Yn,borderLeftColor:Yn,filter:Ab,WebkitFilter:Ab},lZ=e=>Q7[e];function pJ(e,t){let n=lZ(e);return n!==Ab&&(n=Og),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const P7=new Set(["auto","none","0"]);function j7(e,t,n){let o=0,i;for(;o<e.length&&!i;){const r=e[o];typeof r=="string"&&!P7.has(r)&&OI(r).values.length&&(i=e[o]),o++}if(i&&n)for(const r of t)e[r]=pJ(n,i)}class bJ extends iZ{constructor(t,n,o,i,r){super(t,n,o,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:o}=this;if(!n||!n.current)return;super.readKeyframes();for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="string"&&(c=c.trim(),oZ(c))){const C=lJ(c,n.current);C!==void 0&&(t[a]=C),a===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!S7.has(o)||t.length!==2)return;const[i,r]=t,s=cv(i),I=cv(r);if(s!==I)if(lv(s)&&lv(I))for(let a=0;a<t.length;a++){const c=t[a];typeof c=="string"&&(t[a]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,o=[];for(let i=0;i<t.length;i++)p7(t[i])&&o.push(i);o.length&&j7(t,o,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:o}=this;if(!t||!t.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=El[o](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(o,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:o,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const r=n.getValue(o);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,I=i[s];i[s]=El[o](n.measureViewportBox(),window.getComputedStyle(n.current)),I!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=I),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([a,c])=>{n.getValue(a).set(c)}),this.resolveNoneKeyframes()}}function aZ(e){return typeof e=="function"}let PC;function _7(){PC=void 0}const Ni={now:()=>(PC===void 0&&Ni.set(Gn.isProcessing||c7.useManualTiming?Gn.timestamp:performance.now()),PC),set:e=>{PC=e,queueMicrotask(_7)}},uv=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Og.test(e)||e==="0")&&!e.startsWith("url("));function O7(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function q7(e,t,n,o){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const r=e[e.length-1],s=uv(i,t),I=uv(r,t);return!s||!I?!1:O7(e)||(n==="spring"||aZ(n))&&o}const $7=40;class fJ{constructor({autoplay:t=!0,delay:n=0,type:o="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s="loop",...I}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ni.now(),this.options={autoplay:t,delay:n,type:o,repeat:i,repeatDelay:r,repeatType:s,...I},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>$7?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&k7(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=Ni.now(),this.hasAttemptedResolve=!0;const{name:o,type:i,velocity:r,delay:s,onComplete:I,onUpdate:a,isGenerator:c}=this.options;if(!c&&!q7(t,o,i,r))if(s)this.options.duration=0;else{a==null||a(jA(t,this.options,n)),I==null||I(),this.resolveFinishedPromise();return}const C=this.initPlayback(t,n);C!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...C},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}function ZJ(e,t){return t?e*(1e3/t):0}const eq=5;function yJ(e,t,n){const o=Math.max(t-eq,0);return ZJ(n-e(o),t-o)}const Sh=.001,tq=.01,nq=10,oq=.05,iq=1;function gq({duration:e=800,bounce:t=.25,velocity:n=0,mass:o=1}){let i,r,s=1-t;s=_g(oq,iq,s),e=_g(tq,nq,lg(e)),s<1?(i=c=>{const C=c*s,A=C*e,m=C-n,p=mb(c,s),b=Math.exp(-A);return Sh-m/p*b},r=c=>{const A=c*s*e,m=A*n+n,p=Math.pow(s,2)*Math.pow(c,2)*e,b=Math.exp(-A),G=mb(Math.pow(c,2),s);return(-i(c)+Sh>0?-1:1)*((m-p)*b)/G}):(i=c=>{const C=Math.exp(-c*e),A=(c-n)*e+1;return-Sh+C*A},r=c=>{const C=Math.exp(-c*e),A=(n-c)*(e*e);return C*A});const I=5/e,a=sq(i,r,I);if(e=sg(e),isNaN(a))return{stiffness:100,damping:10,duration:e};{const c=Math.pow(a,2)*o;return{stiffness:c,damping:s*2*Math.sqrt(o*c),duration:e}}}const rq=12;function sq(e,t,n){let o=n;for(let i=1;i<rq;i++)o=o-e(o)/t(o);return o}function mb(e,t){return e*Math.sqrt(1-t*t)}const lq=["duration","bounce"],aq=["stiffness","damping","mass"];function Av(e,t){return t.some(n=>e[n]!==void 0)}function Iq(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Av(e,aq)&&Av(e,lq)){const n=gq(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function GJ({keyframes:e,restDelta:t,restSpeed:n,...o}){const i=e[0],r=e[e.length-1],s={done:!1,value:i},{stiffness:I,damping:a,mass:c,duration:C,velocity:A,isResolvedFromDuration:m}=Iq({...o,velocity:-lg(o.velocity||0)}),p=A||0,b=a/(2*Math.sqrt(I*c)),G=r-i,W=lg(Math.sqrt(I/c)),Z=Math.abs(G)<5;n||(n=Z?.01:2),t||(t=Z?.005:.5);let y;if(b<1){const f=mb(W,b);y=v=>{const V=Math.exp(-b*W*v);return r-V*((p+b*W*G)/f*Math.sin(f*v)+G*Math.cos(f*v))}}else if(b===1)y=f=>r-Math.exp(-W*f)*(G+(p+W*G)*f);else{const f=W*Math.sqrt(b*b-1);y=v=>{const V=Math.exp(-b*W*v),X=Math.min(f*v,300);return r-V*((p+b*W*G)*Math.sinh(X)+f*G*Math.cosh(X))/f}}return{calculatedDuration:m&&C||null,next:f=>{const v=y(f);if(m)s.done=f>=C;else{let V=0;b<1&&(V=f===0?sg(p):yJ(y,f,v));const X=Math.abs(V)<=n,w=Math.abs(r-v)<=t;s.done=X&&w}return s.value=s.done?r:v,s}}}function mv({keyframes:e,velocity:t=0,power:n=.8,timeConstant:o=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:s,min:I,max:a,restDelta:c=.5,restSpeed:C}){const A=e[0],m={done:!1,value:A},p=R=>I!==void 0&&R<I||a!==void 0&&R>a,b=R=>I===void 0?a:a===void 0||Math.abs(I-R)<Math.abs(a-R)?I:a;let G=n*t;const W=A+G,Z=s===void 0?W:s(W);Z!==W&&(G=Z-A);const y=R=>-G*Math.exp(-R/o),f=R=>Z+y(R),v=R=>{const F=y(R),x=f(R);m.done=Math.abs(F)<=c,m.value=m.done?Z:x};let V,X;const w=R=>{p(m.value)&&(V=R,X=GJ({keyframes:[m.value,b(m.value)],velocity:yJ(f,R,m.value),damping:i,stiffness:r,restDelta:c,restSpeed:C}))};return w(0),{calculatedDuration:null,next:R=>{let F=!1;return!X&&V===void 0&&(F=!0,v(R),w(R)),V!==void 0&&R>=V?X.next(R-V):(!F&&v(R),m)}}}const cq=Bc(.42,0,1,1),Cq=Bc(0,0,.58,1),BJ=Bc(.42,0,.58,1),dq=e=>Array.isArray(e)&&typeof e[0]!="number",IZ=e=>Array.isArray(e)&&typeof e[0]=="number",hv={linear:Fn,easeIn:cq,easeInOut:BJ,easeOut:Cq,circIn:nZ,circInOut:oJ,circOut:nJ,backIn:tZ,backInOut:eJ,backOut:$X,anticipate:tJ},pv=e=>{if(IZ(e)){cb(e.length===4);const[t,n,o,i]=e;return Bc(t,n,o,i)}else if(typeof e=="string")return cb(hv[e]!==void 0),hv[e];return e},uq=(e,t)=>n=>t(e(n)),ag=(...e)=>e.reduce(uq),Ml=(e,t,n)=>{const o=t-e;return o===0?1:(n-e)/o},Yt=(e,t,n)=>e+(t-e)*n;function vh(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Aq({hue:e,saturation:t,lightness:n,alpha:o}){e/=360,t/=100,n/=100;let i=0,r=0,s=0;if(!t)i=r=s=n;else{const I=n<.5?n*(1+t):n+t-n*t,a=2*n-I;i=vh(a,I,e+1/3),r=vh(a,I,e),s=vh(a,I,e-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(s*255),alpha:o}}function $d(e,t){return n=>n>0?t:e}const Wh=(e,t,n)=>{const o=e*e,i=n*(t*t-o)+o;return i<0?0:Math.sqrt(i)},mq=[ub,Hr,$s],hq=e=>mq.find(t=>t.test(e));function bv(e){const t=hq(e);if(!t)return!1;let n=t.parse(e);return t===$s&&(n=Aq(n)),n}const fv=(e,t)=>{const n=bv(e),o=bv(t);if(!n||!o)return $d(e,t);const i={...n};return r=>(i.red=Wh(n.red,o.red,r),i.green=Wh(n.green,o.green,r),i.blue=Wh(n.blue,o.blue,r),i.alpha=Yt(n.alpha,o.alpha,r),Hr.transform(i))},hb=new Set(["none","hidden"]);function pq(e,t){return hb.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function bq(e,t){return n=>Yt(e,t,n)}function cZ(e){return typeof e=="number"?bq:typeof e=="string"?oZ(e)?$d:Yn.test(e)?fv:yq:Array.isArray(e)?SJ:typeof e=="object"?Yn.test(e)?fv:fq:$d}function SJ(e,t){const n=[...e],o=n.length,i=e.map((r,s)=>cZ(r)(r,t[s]));return r=>{for(let s=0;s<o;s++)n[s]=i[s](r);return n}}function fq(e,t){const n={...e,...t},o={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(o[i]=cZ(e[i])(e[i],t[i]));return i=>{for(const r in o)n[r]=o[r](i);return n}}function Zq(e,t){var n;const o=[],i={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const s=t.types[r],I=e.indexes[s][i[s]],a=(n=e.values[I])!==null&&n!==void 0?n:0;o[r]=a,i[s]++}return o}const yq=(e,t)=>{const n=Og.createTransformer(t),o=OI(e),i=OI(t);return o.indexes.var.length===i.indexes.var.length&&o.indexes.color.length===i.indexes.color.length&&o.indexes.number.length>=i.indexes.number.length?hb.has(e)&&!i.values.length||hb.has(t)&&!o.values.length?pq(e,t):ag(SJ(Zq(o,i),i.values),n):$d(e,t)};function vJ(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Yt(e,t,n):cZ(e)(e,t)}function Gq(e,t,n){const o=[],i=n||vJ,r=e.length-1;for(let s=0;s<r;s++){let I=i(e[s],e[s+1]);if(t){const a=Array.isArray(t)?t[s]||Fn:t;I=ag(a,I)}o.push(I)}return o}function Bq(e,t,{clamp:n=!0,ease:o,mixer:i}={}){const r=e.length;if(cb(r===t.length),r===1)return()=>t[0];if(r===2&&e[0]===e[1])return()=>t[1];e[0]>e[r-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=Gq(t,o,i),I=s.length,a=c=>{let C=0;if(I>1)for(;C<e.length-2&&!(c<e[C+1]);C++);const A=Ml(e[C],e[C+1],c);return s[C](A)};return n?c=>a(_g(e[0],e[r-1],c)):a}function Sq(e,t){const n=e[e.length-1];for(let o=1;o<=t;o++){const i=Ml(0,t,o);e.push(Yt(n,1,i))}}function vq(e){const t=[0];return Sq(t,e.length-1),t}function Wq(e,t){return e.map(n=>n*t)}function Vq(e,t){return e.map(()=>t||BJ).splice(0,e.length-1)}function eu({duration:e=300,keyframes:t,times:n,ease:o="easeInOut"}){const i=dq(o)?o.map(pv):pv(o),r={done:!1,value:t[0]},s=Wq(n&&n.length===t.length?n:vq(t),e),I=Bq(s,t,{ease:Array.isArray(i)?i:Vq(t,i)});return{calculatedDuration:e,next:a=>(r.value=I(a),r.done=a>=e,r)}}const Zv=2e4;function Rq(e){let t=0;const n=50;let o=e.next(t);for(;!o.done&&t<Zv;)t+=n,o=e.next(t);return t>=Zv?1/0:t}const kq=e=>{const t=({timestamp:n})=>e(n);return{start:()=>pt.update(t,!0),stop:()=>jg(t),now:()=>Gn.isProcessing?Gn.timestamp:Ni.now()}},wq={decay:mv,inertia:mv,tween:eu,keyframes:eu,spring:GJ},Xq=e=>e/100;class CZ extends fJ{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:a}=this.options;a&&a()};const{name:n,motionValue:o,element:i,keyframes:r}=this.options,s=(i==null?void 0:i.KeyframeResolver)||iZ,I=(a,c)=>this.onKeyframesResolved(a,c);this.resolver=new s(r,I,n,o,i),this.resolver.scheduleResolve()}initPlayback(t){const{type:n="keyframes",repeat:o=0,repeatDelay:i=0,repeatType:r,velocity:s=0}=this.options,I=aZ(n)?n:wq[n]||eu;let a,c;I!==eu&&typeof t[0]!="number"&&(a=ag(Xq,vJ(t[0],t[1])),t=[0,100]);const C=I({...this.options,keyframes:t});r==="mirror"&&(c=I({...this.options,keyframes:[...t].reverse(),velocity:-s})),C.calculatedDuration===null&&(C.calculatedDuration=Rq(C));const{calculatedDuration:A}=C,m=A+i,p=m*(o+1)-i;return{generator:C,mirroredGenerator:c,mapPercentToKeyframes:a,calculatedDuration:A,resolvedDuration:m,totalDuration:p}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:o}=this;if(!o){const{keyframes:R}=this.options;return{done:!0,value:R[R.length-1]}}const{finalKeyframe:i,generator:r,mirroredGenerator:s,mapPercentToKeyframes:I,keyframes:a,calculatedDuration:c,totalDuration:C,resolvedDuration:A}=o;if(this.startTime===null)return r.next(0);const{delay:m,repeat:p,repeatType:b,repeatDelay:G,onUpdate:W}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-C/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const Z=this.currentTime-m*(this.speed>=0?1:-1),y=this.speed>=0?Z<0:Z>C;this.currentTime=Math.max(Z,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=C);let f=this.currentTime,v=r;if(p){const R=Math.min(this.currentTime,C)/A;let F=Math.floor(R),x=R%1;!x&&R>=1&&(x=1),x===1&&F--,F=Math.min(F,p+1),!!(F%2)&&(b==="reverse"?(x=1-x,G&&(x-=G/A)):b==="mirror"&&(v=s)),f=_g(0,1,x)*A}const V=y?{done:!1,value:a[0]}:v.next(f);I&&(V.value=I(V.value));let{done:X}=V;!y&&c!==null&&(X=this.speed>=0?this.currentTime>=C:this.currentTime<=0);const w=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&X);return w&&i!==void 0&&(V.value=jA(a,this.options,i)),W&&W(V.value),w&&this.finish(),V}get duration(){const{resolved:t}=this;return t?lg(t.calculatedDuration):0}get time(){return lg(this.currentTime)}set time(t){t=sg(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=lg(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=kq,onPlay:n,startTime:o}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=o??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const WJ=new Set(["opacity","clipPath","filter","transform"]),Jq=10,Yq=(e,t)=>{let n="";const o=Math.max(Math.round(t/Jq),2);for(let i=0;i<o;i++)n+=e(Ml(0,o-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function dZ(e){let t;return()=>(t===void 0&&(t=e()),t)}const Hq={linearEasing:void 0};function xq(e,t){const n=dZ(e);return()=>{var o;return(o=Hq[t])!==null&&o!==void 0?o:n()}}const tu=xq(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function VJ(e){return!!(typeof e=="function"&&tu()||!e||typeof e=="string"&&(e in pb||tu())||IZ(e)||Array.isArray(e)&&e.every(VJ))}const qa=([e,t,n,o])=>`cubic-bezier(${e}, ${t}, ${n}, ${o})`,pb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qa([0,.65,.55,1]),circOut:qa([.55,0,1,.45]),backIn:qa([.31,.01,.66,-.59]),backOut:qa([.33,1.53,.69,.99])};function RJ(e,t){if(e)return typeof e=="function"&&tu()?Yq(e,t):IZ(e)?qa(e):Array.isArray(e)?e.map(n=>RJ(n,t)||pb.easeOut):pb[e]}function Nq(e,t,n,{delay:o=0,duration:i=300,repeat:r=0,repeatType:s="loop",ease:I,times:a}={}){const c={[t]:n};a&&(c.offset=a);const C=RJ(I,i);return Array.isArray(C)&&(c.easing=C),e.animate(c,{delay:o,duration:i,easing:Array.isArray(C)?"linear":C,fill:"both",iterations:r+1,direction:s==="reverse"?"alternate":"normal"})}function yv(e,t){e.timeline=t,e.onfinish=null}const Fq=dZ(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),nu=10,Kq=2e4;function Eq(e){return aZ(e.type)||e.type==="spring"||!VJ(e.ease)}function Mq(e,t){const n=new CZ({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let o={done:!1,value:e[0]};const i=[];let r=0;for(;!o.done&&r<Kq;)o=n.sample(r),i.push(o.value),r+=nu;return{times:void 0,keyframes:i,duration:r-nu,ease:"linear"}}const kJ={anticipate:tJ,backInOut:eJ,circInOut:oJ};function Lq(e){return e in kJ}class Gv extends fJ{constructor(t){super(t);const{name:n,motionValue:o,element:i,keyframes:r}=this.options;this.resolver=new bJ(r,(s,I)=>this.onKeyframesResolved(s,I),n,o,i),this.resolver.scheduleResolve()}initPlayback(t,n){var o;let{duration:i=300,times:r,ease:s,type:I,motionValue:a,name:c,startTime:C}=this.options;if(!(!((o=a.owner)===null||o===void 0)&&o.current))return!1;if(typeof s=="string"&&tu()&&Lq(s)&&(s=kJ[s]),Eq(this.options)){const{onComplete:m,onUpdate:p,motionValue:b,element:G,...W}=this.options,Z=Mq(t,W);t=Z.keyframes,t.length===1&&(t[1]=t[0]),i=Z.duration,r=Z.times,s=Z.ease,I="keyframes"}const A=Nq(a.owner.current,c,t,{...this.options,duration:i,times:r,ease:s});return A.startTime=C??this.calcStartTime(),this.pendingTimeline?(yv(A,this.pendingTimeline),this.pendingTimeline=void 0):A.onfinish=()=>{const{onComplete:m}=this.options;a.set(jA(t,this.options,n)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:A,duration:i,times:r,type:I,ease:s,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return lg(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return lg(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:o}=n;o.currentTime=sg(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:o}=n;o.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Fn;const{animation:o}=n;yv(o,t)}return Fn}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:o,duration:i,type:r,ease:s,times:I}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:C,onComplete:A,element:m,...p}=this.options,b=new CZ({...p,keyframes:o,duration:i,type:r,ease:s,times:I,isGenerator:!0}),G=sg(this.time);c.setWithVelocity(b.sample(G-nu).value,b.sample(G).value,nu)}const{onStop:a}=this.options;a&&a(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:o,repeatDelay:i,repeatType:r,damping:s,type:I}=t;return Fq()&&o&&WJ.has(o)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&r!=="mirror"&&s!==0&&I!=="inertia"}}const zq=dZ(()=>window.ScrollTimeline!==void 0);class Tq{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let o=0;o<this.animations.length;o++)this.animations[o][t]=n}attachTimeline(t,n){const o=this.animations.map(i=>zq()&&i.attachTimeline?i.attachTimeline(t):n(i));return()=>{o.forEach((i,r)=>{i&&i(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function Uq({when:e,delay:t,delayChildren:n,staggerChildren:o,staggerDirection:i,repeat:r,repeatType:s,repeatDelay:I,from:a,elapsed:c,...C}){return!!Object.keys(C).length}const uZ=(e,t,n,o={},i,r)=>s=>{const I=eZ(o,e)||{},a=I.delay||o.delay||0;let{elapsed:c=0}=o;c=c-sg(a);let C={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...I,delay:-c,onUpdate:m=>{t.set(m),I.onUpdate&&I.onUpdate(m)},onComplete:()=>{s(),I.onComplete&&I.onComplete()},name:e,motionValue:t,element:r?void 0:i};Uq(I)||(C={...C,...I7(e,C)}),C.duration&&(C.duration=sg(C.duration)),C.repeatDelay&&(C.repeatDelay=sg(C.repeatDelay)),C.from!==void 0&&(C.keyframes[0]=C.from);let A=!1;if((C.type===!1||C.duration===0&&!C.repeatDelay)&&(C.duration=0,C.delay===0&&(A=!0)),A&&!r&&t.get()!==void 0){const m=jA(C.keyframes,I);if(m!==void 0)return pt.update(()=>{C.onUpdate(m),C.onComplete()}),new Tq([])}return!r&&Gv.supports(C)?new Gv(C):new CZ(C)},Dq=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Qq=e=>Ib(e)?e[e.length-1]||0:e;function AZ(e,t){e.indexOf(t)===-1&&e.push(t)}function mZ(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class hZ{constructor(){this.subscriptions=[]}add(t){return AZ(this.subscriptions,t),()=>mZ(this.subscriptions,t)}notify(t,n,o){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,o);else for(let r=0;r<i;r++){const s=this.subscriptions[r];s&&s(t,n,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Bv=30,Pq=e=>!isNaN(parseFloat(e));class jq{constructor(t,n={}){this.version="11.11.9",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(o,i=!0)=>{const r=Ni.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Ni.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Pq(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new hZ);const o=this.events[t].add(n);return t==="change"?()=>{o(),pt.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,o){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-o}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ni.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Bv)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Bv);return ZJ(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qI(e,t){return new jq(e,t)}function _q(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,qI(n))}function Oq(e,t){const n=PA(e,t);let{transitionEnd:o={},transition:i={},...r}=n||{};r={...r,...o};for(const s in r){const I=Qq(r[s]);_q(e,s,I)}}const _A=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),qq="framerAppearId",wJ="data-"+_A(qq);function XJ(e){return e.props[wJ]}const Nn=e=>!!(e&&e.getVelocity);function $q(e){return!!(Nn(e)&&e.add)}function bb(e,t){if(!e.applyWillChange)return;const n=e.getValue("willChange");if($q(n))return n.add(t)}function e$({protectedKeys:e,needsAnimating:t},n){const o=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,o}function JJ(e,t,{delay:n=0,transitionOverride:o,type:i}={}){var r;let{transition:s=e.getDefaultTransition(),transitionEnd:I,...a}=t;o&&(s=o);const c=[],C=i&&e.animationState&&e.animationState.getState()[i];for(const A in a){const m=e.getValue(A,(r=e.latestValues[A])!==null&&r!==void 0?r:null),p=a[A];if(p===void 0||C&&e$(C,A))continue;const b={delay:n,...eZ(s||{},A)};let G=!1;if(window.MotionHandoffAnimation){const Z=XJ(e);if(Z){const y=window.MotionHandoffAnimation(Z,A,pt);y!==null&&(b.startTime=y,G=!0)}}bb(e,A),m.start(uZ(A,m,p,e.shouldReduceMotion&&rr.has(A)?{type:!1}:b,e,G));const W=m.animation;W&&c.push(W)}return I&&Promise.all(c).then(()=>{pt.update(()=>{I&&Oq(e,I)})}),c}function fb(e,t,n={}){var o;const i=PA(e,t,n.type==="exit"?(o=e.presenceContext)===null||o===void 0?void 0:o.custom:void 0);let{transition:r=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const s=i?()=>Promise.all(JJ(e,i,n)):()=>Promise.resolve(),I=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:C=0,staggerChildren:A,staggerDirection:m}=r;return t$(e,t,C+c,A,m,n)}:()=>Promise.resolve(),{when:a}=r;if(a){const[c,C]=a==="beforeChildren"?[s,I]:[I,s];return c().then(()=>C())}else return Promise.all([s(),I(n.delay)])}function t$(e,t,n=0,o=0,i=1,r){const s=[],I=(e.variantChildren.size-1)*o,a=i===1?(c=0)=>c*o:(c=0)=>I-c*o;return Array.from(e.variantChildren).sort(n$).forEach((c,C)=>{c.notify("AnimationStart",t),s.push(fb(c,t,{...r,delay:n+a(C)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(s)}function n$(e,t){return e.sortNodePosition(t)}function o$(e,t,n={}){e.notify("AnimationStart",t);let o;if(Array.isArray(t)){const i=t.map(r=>fb(e,r,n));o=Promise.all(i)}else if(typeof t=="string")o=fb(e,t,n);else{const i=typeof t=="function"?PA(e,t,n.custom):t;o=Promise.all(JJ(e,i,n))}return o.then(()=>{e.notify("AnimationComplete",t)})}const i$=$0.length;function YJ(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?YJ(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<i$;n++){const o=$0[n],i=e.props[o];(jI(i)||i===!1)&&(t[o]=i)}return t}const g$=[...q0].reverse(),r$=q0.length;function s$(e){return t=>Promise.all(t.map(({animation:n,options:o})=>o$(e,n,o)))}function l$(e){let t=s$(e),n=Sv(),o=!0;const i=a=>(c,C)=>{var A;const m=PA(e,C,a==="exit"?(A=e.presenceContext)===null||A===void 0?void 0:A.custom:void 0);if(m){const{transition:p,transitionEnd:b,...G}=m;c={...c,...G,...b}}return c};function r(a){t=a(e)}function s(a){const{props:c}=e,C=YJ(e.parent)||{},A=[],m=new Set;let p={},b=1/0;for(let W=0;W<r$;W++){const Z=g$[W],y=n[Z],f=c[Z]!==void 0?c[Z]:C[Z],v=jI(f),V=Z===a?y.isActive:null;V===!1&&(b=W);let X=f===C[Z]&&f!==c[Z]&&v;if(X&&o&&e.manuallyAnimateOnMount&&(X=!1),y.protectedKeys={...p},!y.isActive&&V===null||!f&&!y.prevProp||PI(f)||typeof f=="boolean")continue;const w=a$(y.prevProp,f);let R=w||Z===a&&y.isActive&&!X&&v||W>b&&v,F=!1;const x=Array.isArray(f)?f:[f];let M=x.reduce(i(Z),{});V===!1&&(M={});const{prevResolvedValues:Q={}}=y,$={...Q,...M},_=te=>{R=!0,m.has(te)&&(F=!0,m.delete(te)),y.needsAnimating[te]=!0;const N=e.getValue(te);N&&(N.liveStyle=!1)};for(const te in $){const N=M[te],j=Q[te];if(p.hasOwnProperty(te))continue;let P=!1;Ib(N)&&Ib(j)?P=!PX(N,j):P=N!==j,P?N!=null?_(te):m.add(te):N!==void 0&&m.has(te)?_(te):y.protectedKeys[te]=!0}y.prevProp=f,y.prevResolvedValues=M,y.isActive&&(p={...p,...M}),o&&e.blockInitialAnimation&&(R=!1),R&&(!(X&&w)||F)&&A.push(...x.map(te=>({animation:te,options:{type:Z}})))}if(m.size){const W={};m.forEach(Z=>{const y=e.getBaseTarget(Z),f=e.getValue(Z);f&&(f.liveStyle=!0),W[Z]=y??null}),A.push({animation:W})}let G=!!A.length;return o&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(G=!1),o=!1,G?t(A):Promise.resolve()}function I(a,c){var C;if(n[a].isActive===c)return Promise.resolve();(C=e.variantChildren)===null||C===void 0||C.forEach(m=>{var p;return(p=m.animationState)===null||p===void 0?void 0:p.setActive(a,c)}),n[a].isActive=c;const A=s(a);for(const m in n)n[m].protectedKeys={};return A}return{animateChanges:s,setActive:I,setAnimateFunction:r,getState:()=>n,reset:()=>{n=Sv(),o=!0}}}function a$(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!PX(t,e):!1}function br(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Sv(){return{animate:br(!0),whileInView:br(),whileHover:br(),whileTap:br(),whileDrag:br(),whileFocus:br(),exit:br()}}class sr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class I$ extends sr{constructor(t){super(t),t.animationState||(t.animationState=l$(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();PI(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let c$=0;class C$ extends sr{constructor(){super(...arguments),this.id=c$++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===o)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const d$={animation:{Feature:I$},exit:{Feature:C$}},HJ=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function OA(e,t="page"){return{point:{x:e[`${t}X`],y:e[`${t}Y`]}}}const u$=e=>t=>HJ(t)&&e(t,OA(t));function og(e,t,n,o={passive:!0}){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n)}function Ig(e,t,n,o){return og(e,t,u$(n),o)}const vv=(e,t)=>Math.abs(e-t);function A$(e,t){const n=vv(e.x,t.x),o=vv(e.y,t.y);return Math.sqrt(n**2+o**2)}class xJ{constructor(t,n,{transformPagePoint:o,contextWindow:i,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=Rh(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,p=A$(A.offset,{x:0,y:0})>=3;if(!m&&!p)return;const{point:b}=A,{timestamp:G}=Gn;this.history.push({...b,timestamp:G});const{onStart:W,onMove:Z}=this.handlers;m||(W&&W(this.lastMoveEvent,A),this.startEvent=this.lastMoveEvent),Z&&Z(this.lastMoveEvent,A)},this.handlePointerMove=(A,m)=>{this.lastMoveEvent=A,this.lastMoveEventInfo=Vh(m,this.transformPagePoint),pt.update(this.updatePoint,!0)},this.handlePointerUp=(A,m)=>{this.end();const{onEnd:p,onSessionEnd:b,resumeAnimation:G}=this.handlers;if(this.dragSnapToOrigin&&G&&G(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const W=Rh(A.type==="pointercancel"?this.lastMoveEventInfo:Vh(m,this.transformPagePoint),this.history);this.startEvent&&p&&p(A,W),b&&b(A,W)},!HJ(t))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=o,this.contextWindow=i||window;const s=OA(t),I=Vh(s,this.transformPagePoint),{point:a}=I,{timestamp:c}=Gn;this.history=[{...a,timestamp:c}];const{onSessionStart:C}=n;C&&C(t,Rh(I,this.history)),this.removeListeners=ag(Ig(this.contextWindow,"pointermove",this.handlePointerMove),Ig(this.contextWindow,"pointerup",this.handlePointerUp),Ig(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),jg(this.updatePoint)}}function Vh(e,t){return t?{point:t(e.point)}:e}function Wv(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Rh({point:e},t){return{point:e,delta:Wv(e,NJ(t)),offset:Wv(e,m$(t)),velocity:h$(t,.1)}}function m$(e){return e[0]}function NJ(e){return e[e.length-1]}function h$(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,o=null;const i=NJ(e);for(;n>=0&&(o=e[n],!(i.timestamp-o.timestamp>sg(t)));)n--;if(!o)return{x:0,y:0};const r=lg(i.timestamp-o.timestamp);if(r===0)return{x:0,y:0};const s={x:(i.x-o.x)/r,y:(i.y-o.y)/r};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function FJ(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const Vv=FJ("dragHorizontal"),Rv=FJ("dragVertical");function KJ(e){let t=!1;if(e==="y")t=Rv();else if(e==="x")t=Vv();else{const n=Vv(),o=Rv();n&&o?t=()=>{n(),o()}:(n&&n(),o&&o())}return t}function EJ(){const e=KJ(!0);return e?(e(),!1):!0}function el(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const MJ=1e-4,p$=1-MJ,b$=1+MJ,LJ=.01,f$=0-LJ,Z$=0+LJ;function Ro(e){return e.max-e.min}function y$(e,t,n){return Math.abs(e-t)<=n}function kv(e,t,n,o=.5){e.origin=o,e.originPoint=Yt(t.min,t.max,e.origin),e.scale=Ro(n)/Ro(t),e.translate=Yt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=p$&&e.scale<=b$||isNaN(e.scale))&&(e.scale=1),(e.translate>=f$&&e.translate<=Z$||isNaN(e.translate))&&(e.translate=0)}function uI(e,t,n,o){kv(e.x,t.x,n.x,o?o.originX:void 0),kv(e.y,t.y,n.y,o?o.originY:void 0)}function wv(e,t,n){e.min=n.min+t.min,e.max=e.min+Ro(t)}function G$(e,t,n){wv(e.x,t.x,n.x),wv(e.y,t.y,n.y)}function Xv(e,t,n){e.min=t.min-n.min,e.max=e.min+Ro(t)}function AI(e,t,n){Xv(e.x,t.x,n.x),Xv(e.y,t.y,n.y)}function B$(e,{min:t,max:n},o){return t!==void 0&&e<t?e=o?Yt(t,e,o.min):Math.max(e,t):n!==void 0&&e>n&&(e=o?Yt(n,e,o.max):Math.min(e,n)),e}function Jv(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function S$(e,{top:t,left:n,bottom:o,right:i}){return{x:Jv(e.x,n,i),y:Jv(e.y,t,o)}}function Yv(e,t){let n=t.min-e.min,o=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,o]=[o,n]),{min:n,max:o}}function v$(e,t){return{x:Yv(e.x,t.x),y:Yv(e.y,t.y)}}function W$(e,t){let n=.5;const o=Ro(e),i=Ro(t);return i>o?n=Ml(t.min,t.max-o,e.min):o>i&&(n=Ml(e.min,e.max-i,t.min)),_g(0,1,n)}function V$(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Zb=.35;function R$(e=Zb){return e===!1?e=0:e===!0&&(e=Zb),{x:Hv(e,"left","right"),y:Hv(e,"top","bottom")}}function Hv(e,t,n){return{min:xv(e,t),max:xv(e,n)}}function xv(e,t){return typeof e=="number"?e:e[t]||0}const Nv=()=>({translate:0,scale:1,origin:0,originPoint:0}),tl=()=>({x:Nv(),y:Nv()}),Fv=()=>({min:0,max:0}),zt=()=>({x:Fv(),y:Fv()});function zo(e){return[e("x"),e("y")]}function zJ({top:e,left:t,right:n,bottom:o}){return{x:{min:t,max:n},y:{min:e,max:o}}}function k$({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function w$(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),o=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:o.y,right:o.x}}function kh(e){return e===void 0||e===1}function yb({scale:e,scaleX:t,scaleY:n}){return!kh(e)||!kh(t)||!kh(n)}function Br(e){return yb(e)||TJ(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function TJ(e){return Kv(e.x)||Kv(e.y)}function Kv(e){return e&&e!=="0%"}function ou(e,t,n){const o=e-n,i=t*o;return n+i}function Ev(e,t,n,o,i){return i!==void 0&&(e=ou(e,i,o)),ou(e,n,o)+t}function Gb(e,t=0,n=1,o,i){e.min=Ev(e.min,t,n,o,i),e.max=Ev(e.max,t,n,o,i)}function UJ(e,{x:t,y:n}){Gb(e.x,t.translate,t.scale,t.originPoint),Gb(e.y,n.translate,n.scale,n.originPoint)}const Mv=.999999999999,Lv=1.0000000000001;function X$(e,t,n,o=!1){const i=n.length;if(!i)return;t.x=t.y=1;let r,s;for(let I=0;I<i;I++){r=n[I],s=r.projectionDelta;const{visualElement:a}=r.options;a&&a.props.style&&a.props.style.display==="contents"||(o&&r.options.layoutScroll&&r.scroll&&r!==r.root&&ol(e,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,UJ(e,s)),o&&Br(r.latestValues)&&ol(e,r.latestValues))}t.x<Lv&&t.x>Mv&&(t.x=1),t.y<Lv&&t.y>Mv&&(t.y=1)}function nl(e,t){e.min=e.min+t,e.max=e.max+t}function zv(e,t,n,o,i=.5){const r=Yt(e.min,e.max,i);Gb(e,t,n,r,o)}function ol(e,t){zv(e.x,t.x,t.scaleX,t.scale,t.originX),zv(e.y,t.y,t.scaleY,t.scale,t.originY)}function DJ(e,t){return zJ(w$(e.getBoundingClientRect(),t))}function J$(e,t,n){const o=DJ(e,n),{scroll:i}=t;return i&&(nl(o.x,i.offset.x),nl(o.y,i.offset.y)),o}const QJ=({current:e})=>e?e.ownerDocument.defaultView:null,Y$=new WeakMap;class H${constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=zt(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const i=C=>{const{dragSnapToOrigin:A}=this.getProps();A?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(OA(C,"page").point)},r=(C,A)=>{const{drag:m,dragPropagation:p,onDragStart:b}=this.getProps();if(m&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=KJ(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zo(W=>{let Z=this.getAxisMotionValue(W).get()||0;if(xi.test(Z)){const{projection:y}=this.visualElement;if(y&&y.layout){const f=y.layout.layoutBox[W];f&&(Z=Ro(f)*(parseFloat(Z)/100))}}this.originPoint[W]=Z}),b&&pt.postRender(()=>b(C,A)),bb(this.visualElement,"transform");const{animationState:G}=this.visualElement;G&&G.setActive("whileDrag",!0)},s=(C,A)=>{const{dragPropagation:m,dragDirectionLock:p,onDirectionLock:b,onDrag:G}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:W}=A;if(p&&this.currentDirection===null){this.currentDirection=x$(W),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",A.point,W),this.updateAxis("y",A.point,W),this.visualElement.render(),G&&G(C,A)},I=(C,A)=>this.stop(C,A),a=()=>zo(C=>{var A;return this.getAnimationState(C)==="paused"&&((A=this.getAxisMotionValue(C).animation)===null||A===void 0?void 0:A.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new xJ(t,{onSessionStart:i,onStart:r,onMove:s,onSessionEnd:I,resumeAnimation:a},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:QJ(this.visualElement)})}stop(t,n){const o=this.isDragging;if(this.cancel(),!o)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:r}=this.getProps();r&&pt.postRender(()=>r(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,o){const{drag:i}=this.getProps();if(!o||!fC(t,i,this.currentDirection))return;const r=this.getAxisMotionValue(t);let s=this.originPoint[t]+o[t];this.constraints&&this.constraints[t]&&(s=B$(s,this.constraints[t],this.elastic[t])),r.set(s)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:o}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,r=this.constraints;n&&el(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=S$(i.layoutBox,n):this.constraints=!1,this.elastic=R$(o),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&zo(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=V$(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!el(t))return!1;const o=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=J$(o,i.root,this.visualElement.getTransformPagePoint());let s=v$(i.layout.layoutBox,r);if(n){const I=n(k$(s));this.hasMutatedConstraints=!!I,I&&(s=zJ(I))}return s}startAnimation(t){const{drag:n,dragMomentum:o,dragElastic:i,dragTransition:r,dragSnapToOrigin:s,onDragTransitionEnd:I}=this.getProps(),a=this.constraints||{},c=zo(C=>{if(!fC(C,n,this.currentDirection))return;let A=a&&a[C]||{};s&&(A={min:0,max:0});const m=i?200:1e6,p=i?40:1e7,b={type:"inertia",velocity:o?t[C]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...r,...A};return this.startAxisValueAnimation(C,b)});return Promise.all(c).then(I)}startAxisValueAnimation(t,n){const o=this.getAxisMotionValue(t);return bb(this.visualElement,t),o.start(uZ(t,o,0,n,this.visualElement,!1))}stopAnimation(){zo(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){zo(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,o=this.visualElement.getProps(),i=o[n];return i||this.visualElement.getValue(t,(o.initial?o.initial[t]:void 0)||0)}snapToCursor(t){zo(n=>{const{drag:o}=this.getProps();if(!fC(n,o,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:I}=i.layout.layoutBox[n];r.set(t[n]-Yt(s,I,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:o}=this.visualElement;if(!el(n)||!o||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};zo(s=>{const I=this.getAxisMotionValue(s);if(I&&this.constraints!==!1){const a=I.get();i[s]=W$({min:a,max:a},this.constraints[s])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),zo(s=>{if(!fC(s,t,null))return;const I=this.getAxisMotionValue(s),{min:a,max:c}=this.constraints[s];I.set(Yt(a,c,i[s]))})}addListeners(){if(!this.visualElement.current)return;Y$.set(this.visualElement,this);const t=this.visualElement.current,n=Ig(t,"pointerdown",a=>{const{drag:c,dragListener:C=!0}=this.getProps();c&&C&&this.start(a)}),o=()=>{const{dragConstraints:a}=this.getProps();el(a)&&a.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",o);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),pt.read(o);const s=og(window,"resize",()=>this.scalePositionWithinConstraints()),I=i.addEventListener("didUpdate",({delta:a,hasLayoutChanged:c})=>{this.isDragging&&c&&(zo(C=>{const A=this.getAxisMotionValue(C);A&&(this.originPoint[C]+=a[C].translate,A.set(A.get()+a[C].translate))}),this.visualElement.render())});return()=>{s(),n(),r(),I&&I()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:o=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:s=Zb,dragMomentum:I=!0}=t;return{...t,drag:n,dragDirectionLock:o,dragPropagation:i,dragConstraints:r,dragElastic:s,dragMomentum:I}}}function fC(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function x$(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class N$ extends sr{constructor(t){super(t),this.removeGroupControls=Fn,this.removeListeners=Fn,this.controls=new H$(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Fn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Tv=e=>(t,n)=>{e&&pt.postRender(()=>e(t,n))};class F$ extends sr{constructor(){super(...arguments),this.removePointerDownListener=Fn}onPointerDown(t){this.session=new xJ(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:QJ(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:o,onPanEnd:i}=this.node.getProps();return{onSessionStart:Tv(t),onStart:Tv(n),onMove:o,onEnd:(r,s)=>{delete this.session,i&&pt.postRender(()=>i(r,s))}}}mount(){this.removePointerDownListener=Ig(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const pZ=B.createContext(null);function K$(){const e=B.useContext(pZ);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:o}=e,i=B.useId();B.useEffect(()=>o(i),[]);const r=B.useCallback(()=>n&&n(i),[i,n]);return!t&&n?[!1,r]:[!0]}const PJ=B.createContext({}),jJ=B.createContext({}),jC={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Uv(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const La={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ve.test(e))e=parseFloat(e);else return e;const n=Uv(e,t.target.x),o=Uv(e,t.target.y);return`${n}% ${o}%`}},E$={correct:(e,{treeScale:t,projectionDelta:n})=>{const o=e,i=Og.parse(e);if(i.length>5)return o;const r=Og.createTransformer(e),s=typeof i[0]!="number"?1:0,I=n.x.scale*t.x,a=n.y.scale*t.y;i[0+s]/=I,i[1+s]/=a;const c=Yt(I,a,.5);return typeof i[2+s]=="number"&&(i[2+s]/=c),typeof i[3+s]=="number"&&(i[3+s]/=c),r(i)}},iu={};function M$(e){Object.assign(iu,e)}const{schedule:bZ,cancel:Jee}=jX(queueMicrotask,!1);class L$ extends B.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:o,layoutId:i}=this.props,{projection:r}=t;M$(z$),r&&(n.group&&n.group.add(r),o&&o.register&&i&&o.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),jC.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:o,drag:i,isPresent:r}=this.props,s=o.projection;return s&&(s.isPresent=r,i||t.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?s.promote():s.relegate()||pt.postRender(()=>{const I=s.getStack();(!I||!I.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),bZ.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:o}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),o&&o.deregister&&o.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function _J(e){const[t,n]=K$(),o=B.useContext(PJ);return u.jsx(L$,{...e,layoutGroup:o,switchLayoutGroup:B.useContext(jJ),isPresent:t,safeToRemove:n})}const z$={borderRadius:{...La,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:La,borderTopRightRadius:La,borderBottomLeftRadius:La,borderBottomRightRadius:La,boxShadow:E$},OJ=["TopLeft","TopRight","BottomLeft","BottomRight"],T$=OJ.length,Dv=e=>typeof e=="string"?parseFloat(e):e,Qv=e=>typeof e=="number"||ve.test(e);function U$(e,t,n,o,i,r){i?(e.opacity=Yt(0,n.opacity!==void 0?n.opacity:1,D$(o)),e.opacityExit=Yt(t.opacity!==void 0?t.opacity:1,0,Q$(o))):r&&(e.opacity=Yt(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,o));for(let s=0;s<T$;s++){const I=`border${OJ[s]}Radius`;let a=Pv(t,I),c=Pv(n,I);if(a===void 0&&c===void 0)continue;a||(a=0),c||(c=0),a===0||c===0||Qv(a)===Qv(c)?(e[I]=Math.max(Yt(Dv(a),Dv(c),o),0),(xi.test(c)||xi.test(a))&&(e[I]+="%")):e[I]=c}(t.rotate||n.rotate)&&(e.rotate=Yt(t.rotate||0,n.rotate||0,o))}function Pv(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const D$=qJ(0,.5,nJ),Q$=qJ(.5,.95,Fn);function qJ(e,t,n){return o=>o<e?0:o>t?1:n(Ml(e,t,o))}function jv(e,t){e.min=t.min,e.max=t.max}function Mo(e,t){jv(e.x,t.x),jv(e.y,t.y)}function _v(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Ov(e,t,n,o,i){return e-=t,e=ou(e,1/n,o),i!==void 0&&(e=ou(e,1/i,o)),e}function P$(e,t=0,n=1,o=.5,i,r=e,s=e){if(xi.test(t)&&(t=parseFloat(t),t=Yt(s.min,s.max,t/100)-s.min),typeof t!="number")return;let I=Yt(r.min,r.max,o);e===r&&(I-=t),e.min=Ov(e.min,t,n,I,i),e.max=Ov(e.max,t,n,I,i)}function qv(e,t,[n,o,i],r,s){P$(e,t[n],t[o],t[i],t.scale,r,s)}const j$=["x","scaleX","originX"],_$=["y","scaleY","originY"];function $v(e,t,n,o){qv(e.x,t,j$,n?n.x:void 0,o?o.x:void 0),qv(e.y,t,_$,n?n.y:void 0,o?o.y:void 0)}function eW(e){return e.translate===0&&e.scale===1}function $J(e){return eW(e.x)&&eW(e.y)}function tW(e,t){return e.min===t.min&&e.max===t.max}function O$(e,t){return tW(e.x,t.x)&&tW(e.y,t.y)}function nW(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function e1(e,t){return nW(e.x,t.x)&&nW(e.y,t.y)}function oW(e){return Ro(e.x)/Ro(e.y)}function iW(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class q${constructor(){this.members=[]}add(t){AZ(this.members,t),t.scheduleRender()}remove(t){if(mZ(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let o;for(let i=n;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){o=r;break}}return o?(this.promote(o),!0):!1}promote(t,n){const o=this.lead;if(t!==o&&(this.prevLead=o,this.lead=t,t.show(),o)){o.instance&&o.scheduleRender(),t.scheduleRender(),t.resumeFrom=o,n&&(t.resumeFrom.preserveOpacity=!0),o.snapshot&&(t.snapshot=o.snapshot,t.snapshot.latestValues=o.animationValues||o.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:o}=t;n.onExitComplete&&n.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $$(e,t,n){let o="";const i=e.x.translate/t.x,r=e.y.translate/t.y,s=(n==null?void 0:n.z)||0;if((i||r||s)&&(o=`translate3d(${i}px, ${r}px, ${s}px) `),(t.x!==1||t.y!==1)&&(o+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:c,rotate:C,rotateX:A,rotateY:m,skewX:p,skewY:b}=n;c&&(o=`perspective(${c}px) ${o}`),C&&(o+=`rotate(${C}deg) `),A&&(o+=`rotateX(${A}deg) `),m&&(o+=`rotateY(${m}deg) `),p&&(o+=`skewX(${p}deg) `),b&&(o+=`skewY(${b}deg) `)}const I=e.x.scale*t.x,a=e.y.scale*t.y;return(I!==1||a!==1)&&(o+=`scale(${I}, ${a})`),o||"none"}const e6=(e,t)=>e.depth-t.depth;class t6{constructor(){this.children=[],this.isDirty=!1}add(t){AZ(this.children,t),this.isDirty=!0}remove(t){mZ(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(e6),this.isDirty=!1,this.children.forEach(t)}}function _C(e){const t=Nn(e)?e.get():e;return Dq(t)?t.toValue():t}function n6(e,t){const n=Ni.now(),o=({timestamp:i})=>{const r=i-n;r>=t&&(jg(o),e(r-t))};return pt.read(o,!0),()=>jg(o)}function o6(e){return e instanceof SVGElement&&e.tagName!=="svg"}function i6(e,t,n){const o=Nn(e)?e:qI(e);return o.start(uZ("",o,t,n)),o.animation}const Sr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},$a=typeof window<"u"&&window.MotionDebug!==void 0,wh=["","X","Y","Z"],g6={visibility:"hidden"},gW=1e3;let r6=0;function Xh(e,t,n,o){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),o&&(o[e]=0))}function t1(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=XJ(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",pt,!(i||r))}const{parent:o}=e;o&&!o.hasCheckedOptimisedAppear&&t1(o)}function n1({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:o,resetTransform:i}){return class{constructor(s={},I=t==null?void 0:t()){this.id=r6++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,$a&&(Sr.totalNodes=Sr.resolvedTargetDeltas=Sr.recalculatedProjection=0),this.nodes.forEach(a6),this.nodes.forEach(u6),this.nodes.forEach(A6),this.nodes.forEach(I6),$a&&window.MotionDebug.record(Sr)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=I?I.root||I:this,this.path=I?[...I.path,I]:[],this.parent=I,this.depth=I?I.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new t6)}addEventListener(s,I){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new hZ),this.eventHandlers.get(s).add(I)}notifyListeners(s,...I){const a=this.eventHandlers.get(s);a&&a.notify(...I)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,I=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=o6(s),this.instance=s;const{layoutId:a,layout:c,visualElement:C}=this.options;if(C&&!C.current&&C.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),I&&(c||a)&&(this.isLayoutDirty=!0),e){let A;const m=()=>this.root.updateBlockedByResize=!1;e(s,()=>{this.root.updateBlockedByResize=!0,A&&A(),A=n6(m,250),jC.hasAnimatedSinceResize&&(jC.hasAnimatedSinceResize=!1,this.nodes.forEach(sW))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&C&&(a||c)&&this.addEventListener("didUpdate",({delta:A,hasLayoutChanged:m,hasRelativeTargetChanged:p,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const G=this.options.transition||C.getDefaultTransition()||f6,{onLayoutAnimationStart:W,onLayoutAnimationComplete:Z}=C.getProps(),y=!this.targetLayout||!e1(this.targetLayout,b)||p,f=!m&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||f||m&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(A,f);const v={...eZ(G,"layout"),onPlay:W,onComplete:Z};(C.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v)}else m||sW(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,jg(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(m6),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&t1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let C=0;C<this.path.length;C++){const A=this.path[C];A.shouldResetTransform=!0,A.updateScroll("snapshot"),A.options.layoutRoot&&A.willUpdate(!1)}const{layoutId:I,layout:a}=this.options;if(I===void 0&&!a)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rW);return}this.isUpdating||this.nodes.forEach(C6),this.isUpdating=!1,this.nodes.forEach(d6),this.nodes.forEach(s6),this.nodes.forEach(l6),this.clearAllSnapshots();const I=Ni.now();Gn.delta=_g(0,1e3/60,I-Gn.timestamp),Gn.timestamp=I,Gn.isProcessing=!0,Gh.update.process(Gn),Gh.preRender.process(Gn),Gh.render.process(Gn),Gn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,bZ.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(c6),this.sharedNodes.forEach(h6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,pt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){pt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=zt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:I}=this.options;I&&I.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let I=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(I=!1),I){const a=o(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:a,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:a}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,I=this.projectionDelta&&!$J(this.projectionDelta),a=this.getTransformTemplate(),c=a?a(this.latestValues,""):void 0,C=c!==this.prevTransformTemplateValue;s&&(I||Br(this.latestValues)||C)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const I=this.measurePageBox();let a=this.removeElementScroll(I);return s&&(a=this.removeTransform(a)),Z6(a),{animationId:this.root.animationId,measuredBox:I,layoutBox:a,latestValues:{},source:this.id}}measurePageBox(){var s;const{visualElement:I}=this.options;if(!I)return zt();const a=I.measureViewportBox();if(!(((s=this.scroll)===null||s===void 0?void 0:s.wasRoot)||this.path.some(y6))){const{scroll:C}=this.root;C&&(nl(a.x,C.offset.x),nl(a.y,C.offset.y))}return a}removeElementScroll(s){var I;const a=zt();if(Mo(a,s),!((I=this.scroll)===null||I===void 0)&&I.wasRoot)return a;for(let c=0;c<this.path.length;c++){const C=this.path[c],{scroll:A,options:m}=C;C!==this.root&&A&&m.layoutScroll&&(A.wasRoot&&Mo(a,s),nl(a.x,A.offset.x),nl(a.y,A.offset.y))}return a}applyTransform(s,I=!1){const a=zt();Mo(a,s);for(let c=0;c<this.path.length;c++){const C=this.path[c];!I&&C.options.layoutScroll&&C.scroll&&C!==C.root&&ol(a,{x:-C.scroll.offset.x,y:-C.scroll.offset.y}),Br(C.latestValues)&&ol(a,C.latestValues)}return Br(this.latestValues)&&ol(a,this.latestValues),a}removeTransform(s){const I=zt();Mo(I,s);for(let a=0;a<this.path.length;a++){const c=this.path[a];if(!c.instance||!Br(c.latestValues))continue;yb(c.latestValues)&&c.updateSnapshot();const C=zt(),A=c.measurePageBox();Mo(C,A),$v(I,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,C)}return Br(this.latestValues)&&$v(I,this.latestValues),I}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var I;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((I=this.parent)===null||I===void 0)&&I.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:A,layoutId:m}=this.options;if(!(!this.layout||!(A||m))){if(this.resolvedRelativeTargetAt=Gn.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zt(),this.relativeTargetOrigin=zt(),AI(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Mo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=zt(),this.targetWithTransforms=zt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),G$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Mo(this.target,this.layout.layoutBox),UJ(this.target,this.targetDelta)):Mo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zt(),this.relativeTargetOrigin=zt(),AI(this.relativeTargetOrigin,this.target,p.target),Mo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}$a&&Sr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||yb(this.parent.latestValues)||TJ(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const I=this.getLead(),a=!!this.resumingFrom||this!==I;let c=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Gn.timestamp&&(c=!1),c)return;const{layout:C,layoutId:A}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(C||A))return;Mo(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;X$(this.layoutCorrected,this.treeScale,this.path,a),I.layout&&!I.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(I.target=I.layout.layoutBox,I.targetWithTransforms=zt());const{target:b}=I;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(_v(this.prevProjectionDelta.x,this.projectionDelta.x),_v(this.prevProjectionDelta.y,this.projectionDelta.y)),uI(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==p||!iW(this.projectionDelta.x,this.prevProjectionDelta.x)||!iW(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),$a&&Sr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var I;if((I=this.options.visualElement)===null||I===void 0||I.scheduleRender(),s){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=tl(),this.projectionDelta=tl(),this.projectionDeltaWithTransform=tl()}setAnimationOrigin(s,I=!1){const a=this.snapshot,c=a?a.latestValues:{},C={...this.latestValues},A=tl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!I;const m=zt(),p=a?a.source:void 0,b=this.layout?this.layout.source:void 0,G=p!==b,W=this.getStack(),Z=!W||W.members.length<=1,y=!!(G&&!Z&&this.options.crossfade===!0&&!this.path.some(b6));this.animationProgress=0;let f;this.mixTargetDelta=v=>{const V=v/1e3;lW(A.x,s.x,V),lW(A.y,s.y,V),this.setTargetDelta(A),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(AI(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p6(this.relativeTarget,this.relativeTargetOrigin,m,V),f&&O$(this.relativeTarget,f)&&(this.isProjectionDirty=!1),f||(f=zt()),Mo(f,this.relativeTarget)),G&&(this.animationValues=C,U$(C,c,this.latestValues,V,y,Z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(jg(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=pt.update(()=>{jC.hasAnimatedSinceResize=!0,this.currentAnimation=i6(0,gW,{...s,onUpdate:I=>{this.mixTargetDelta(I),s.onUpdate&&s.onUpdate(I)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(gW),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:I,target:a,layout:c,latestValues:C}=s;if(!(!I||!a||!c)){if(this!==s&&this.layout&&c&&o1(this.options.animationType,this.layout.layoutBox,c.layoutBox)){a=this.target||zt();const A=Ro(this.layout.layoutBox.x);a.x.min=s.target.x.min,a.x.max=a.x.min+A;const m=Ro(this.layout.layoutBox.y);a.y.min=s.target.y.min,a.y.max=a.y.min+m}Mo(I,a),ol(I,C),uI(this.projectionDeltaWithTransform,this.layoutCorrected,I,C)}}registerSharedNode(s,I){this.sharedNodes.has(s)||this.sharedNodes.set(s,new q$),this.sharedNodes.get(s).add(I);const c=I.options.initialPromotionConfig;I.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(I):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:I}=this.options;return I?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:I}=this.options;return I?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:I,preserveFollowOpacity:a}={}){const c=this.getStack();c&&c.promote(this,a),s&&(this.projectionDelta=void 0,this.needsReset=!0),I&&this.setOptions({transition:I})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let I=!1;const{latestValues:a}=s;if((a.z||a.rotate||a.rotateX||a.rotateY||a.rotateZ||a.skewX||a.skewY)&&(I=!0),!I)return;const c={};a.z&&Xh("z",s,c,this.animationValues);for(let C=0;C<wh.length;C++)Xh(`rotate${wh[C]}`,s,c,this.animationValues),Xh(`skew${wh[C]}`,s,c,this.animationValues);s.render();for(const C in c)s.setStaticValue(C,c[C]),this.animationValues&&(this.animationValues[C]=c[C]);s.scheduleRender()}getProjectionStyles(s){var I,a;if(!this.instance||this.isSVG)return;if(!this.isVisible)return g6;const c={visibility:""},C=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=_C(s==null?void 0:s.pointerEvents)||"",c.transform=C?C(this.latestValues,""):"none",c;const A=this.getLead();if(!this.projectionDelta||!this.layout||!A.target){const G={};return this.options.layoutId&&(G.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,G.pointerEvents=_C(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Br(this.latestValues)&&(G.transform=C?C({},""):"none",this.hasProjected=!1),G}const m=A.animationValues||A.latestValues;this.applyTransformsToTarget(),c.transform=$$(this.projectionDeltaWithTransform,this.treeScale,m),C&&(c.transform=C(m,c.transform));const{x:p,y:b}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${b.origin*100}% 0`,A.animationValues?c.opacity=A===this?(a=(I=m.opacity)!==null&&I!==void 0?I:this.latestValues.opacity)!==null&&a!==void 0?a:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=A===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const G in iu){if(m[G]===void 0)continue;const{correct:W,applyTo:Z}=iu[G],y=c.transform==="none"?m[G]:W(m[G],A);if(Z){const f=Z.length;for(let v=0;v<f;v++)c[Z[v]]=y}else c[G]=y}return this.options.layoutId&&(c.pointerEvents=A===this?_C(s==null?void 0:s.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var I;return(I=s.currentAnimation)===null||I===void 0?void 0:I.stop()}),this.root.nodes.forEach(rW),this.root.sharedNodes.clear()}}}function s6(e){e.updateLayout()}function l6(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:i}=e.layout,{animationType:r}=e.options,s=n.source!==e.layout.source;r==="size"?zo(A=>{const m=s?n.measuredBox[A]:n.layoutBox[A],p=Ro(m);m.min=o[A].min,m.max=m.min+p}):o1(r,n.layoutBox,o)&&zo(A=>{const m=s?n.measuredBox[A]:n.layoutBox[A],p=Ro(o[A]);m.max=m.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[A].max=e.relativeTarget[A].min+p)});const I=tl();uI(I,o,n.layoutBox);const a=tl();s?uI(a,e.applyTransform(i,!0),n.measuredBox):uI(a,o,n.layoutBox);const c=!$J(I);let C=!1;if(!e.resumeFrom){const A=e.getClosestProjectingParent();if(A&&!A.resumeFrom){const{snapshot:m,layout:p}=A;if(m&&p){const b=zt();AI(b,n.layoutBox,m.layoutBox);const G=zt();AI(G,o,p.layoutBox),e1(b,G)||(C=!0),A.options.layoutRoot&&(e.relativeTarget=G,e.relativeTargetOrigin=b,e.relativeParent=A)}}}e.notifyListeners("didUpdate",{layout:o,snapshot:n,delta:a,layoutDelta:I,hasLayoutChanged:c,hasRelativeTargetChanged:C})}else if(e.isLead()){const{onExitComplete:o}=e.options;o&&o()}e.options.transition=void 0}function a6(e){$a&&Sr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function I6(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function c6(e){e.clearSnapshot()}function rW(e){e.clearMeasurements()}function C6(e){e.isLayoutDirty=!1}function d6(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function sW(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function u6(e){e.resolveTargetDelta()}function A6(e){e.calcProjection()}function m6(e){e.resetSkewAndRotation()}function h6(e){e.removeLeadSnapshot()}function lW(e,t,n){e.translate=Yt(t.translate,0,n),e.scale=Yt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function aW(e,t,n,o){e.min=Yt(t.min,n.min,o),e.max=Yt(t.max,n.max,o)}function p6(e,t,n,o){aW(e.x,t.x,n.x,o),aW(e.y,t.y,n.y,o)}function b6(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const f6={duration:.45,ease:[.4,0,.1,1]},IW=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),cW=IW("applewebkit/")&&!IW("chrome/")?Math.round:Fn;function CW(e){e.min=cW(e.min),e.max=cW(e.max)}function Z6(e){CW(e.x),CW(e.y)}function o1(e,t,n){return e==="position"||e==="preserve-aspect"&&!y$(oW(t),oW(n),.2)}function y6(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const G6=n1({attachResizeListener:(e,t)=>og(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Jh={current:void 0},i1=n1({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Jh.current){const e=new G6({});e.mount(window),e.setOptions({layoutScroll:!0}),Jh.current=e}return Jh.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),B6={pan:{Feature:F$},drag:{Feature:N$,ProjectionNode:i1,MeasureLayout:_J}};function dW(e,t){const n=t?"pointerenter":"pointerleave",o=t?"onHoverStart":"onHoverEnd",i=(r,s)=>{if(r.pointerType==="touch"||EJ())return;const I=e.getProps();e.animationState&&I.whileHover&&e.animationState.setActive("whileHover",t);const a=I[o];a&&pt.postRender(()=>a(r,s))};return Ig(e.current,n,i,{passive:!e.getProps()[o]})}class S6 extends sr{mount(){this.unmount=ag(dW(this.node,!0),dW(this.node,!1))}unmount(){}}class v6 extends sr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ag(og(this.node.current,"focus",()=>this.onFocus()),og(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const g1=(e,t)=>t?e===t?!0:g1(e,t.parentElement):!1;function Yh(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,OA(n))}class W6 extends sr{constructor(){super(...arguments),this.removeStartListeners=Fn,this.removeEndListeners=Fn,this.removeAccessibleListeners=Fn,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const o=this.node.getProps(),r=Ig(window,"pointerup",(I,a)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:C,globalTapTarget:A}=this.node.getProps(),m=!A&&!g1(this.node.current,I.target)?C:c;m&&pt.update(()=>m(I,a))},{passive:!(o.onTap||o.onPointerUp)}),s=Ig(window,"pointercancel",(I,a)=>this.cancelPress(I,a),{passive:!(o.onTapCancel||o.onPointerCancel)});this.removeEndListeners=ag(r,s),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=r=>{if(r.key!=="Enter"||this.isPressing)return;const s=I=>{I.key!=="Enter"||!this.checkPressEnd()||Yh("up",(a,c)=>{const{onTap:C}=this.node.getProps();C&&pt.postRender(()=>C(a,c))})};this.removeEndListeners(),this.removeEndListeners=og(this.node.current,"keyup",s),Yh("down",(I,a)=>{this.startPress(I,a)})},n=og(this.node.current,"keydown",t),o=()=>{this.isPressing&&Yh("cancel",(r,s)=>this.cancelPress(r,s))},i=og(this.node.current,"blur",o);this.removeAccessibleListeners=ag(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:o,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),o&&pt.postRender(()=>o(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!EJ()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:o}=this.node.getProps();o&&pt.postRender(()=>o(t,n))}mount(){const t=this.node.getProps(),n=Ig(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),o=og(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ag(n,o)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Bb=new WeakMap,Hh=new WeakMap,V6=e=>{const t=Bb.get(e.target);t&&t(e)},R6=e=>{e.forEach(V6)};function k6({root:e,...t}){const n=e||document;Hh.has(n)||Hh.set(n,{});const o=Hh.get(n),i=JSON.stringify(t);return o[i]||(o[i]=new IntersectionObserver(R6,{root:e,...t})),o[i]}function w6(e,t,n){const o=k6(t);return Bb.set(e,n),o.observe(e),()=>{Bb.delete(e),o.unobserve(e)}}const X6={some:0,all:1};class J6 extends sr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:o,amount:i="some",once:r}=t,s={root:n?n.current:void 0,rootMargin:o,threshold:typeof i=="number"?i:X6[i]},I=a=>{const{isIntersecting:c}=a;if(this.isInView===c||(this.isInView=c,r&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:C,onViewportLeave:A}=this.node.getProps(),m=c?C:A;m&&m(a)};return w6(this.node.current,s,I)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Y6(t,n))&&this.startObserver()}unmount(){}}function Y6({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const H6={inView:{Feature:J6},tap:{Feature:W6},focus:{Feature:v6},hover:{Feature:S6}},x6={layout:{ProjectionNode:i1,MeasureLayout:_J}},r1=B.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),qA=B.createContext({}),fZ=typeof window<"u",N6=fZ?B.useLayoutEffect:B.useEffect,s1=B.createContext({strict:!1});function F6(e,t,n,o,i){var r,s;const{visualElement:I}=B.useContext(qA),a=B.useContext(s1),c=B.useContext(pZ),C=B.useContext(r1).reducedMotion,A=B.useRef();o=o||a.renderer,!A.current&&o&&(A.current=o(e,{visualState:t,parent:I,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:C}));const m=A.current,p=B.useContext(jJ);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&K6(A.current,n,i,p),B.useInsertionEffect(()=>{m&&m.update(n,c)});const b=n[wJ],G=B.useRef(!!b&&!(!((r=window.MotionHandoffIsComplete)===null||r===void 0)&&r.call(window,b))&&((s=window.MotionHasOptimisedAnimation)===null||s===void 0?void 0:s.call(window,b)));return N6(()=>{m&&(window.MotionIsMounted=!0,m.updateFeatures(),bZ.render(m.render),G.current&&m.animationState&&m.animationState.animateChanges())}),B.useEffect(()=>{m&&(!G.current&&m.animationState&&m.animationState.animateChanges(),G.current&&(queueMicrotask(()=>{var W;(W=window.MotionHandoffMarkAsComplete)===null||W===void 0||W.call(window,b)}),G.current=!1))}),m}function K6(e,t,n,o){const{layoutId:i,layout:r,drag:s,dragConstraints:I,layoutScroll:a,layoutRoot:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:l1(e.parent)),e.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:!!s||I&&el(I),visualElement:e,animationType:typeof r=="string"?r:"both",initialPromotionConfig:o,layoutScroll:a,layoutRoot:c})}function l1(e){if(e)return e.options.allowProjection!==!1?e.projection:l1(e.parent)}function E6(e,t,n){return B.useCallback(o=>{o&&e.mount&&e.mount(o),t&&(o?t.mount(o):t.unmount()),n&&(typeof n=="function"?n(o):el(n)&&(n.current=o))},[t])}function $A(e){return PI(e.animate)||$0.some(t=>jI(e[t]))}function a1(e){return!!($A(e)||e.variants)}function M6(e,t){if($A(e)){const{initial:n,animate:o}=e;return{initial:n===!1||jI(n)?n:void 0,animate:jI(o)?o:void 0}}return e.inherit!==!1?t:{}}function L6(e){const{initial:t,animate:n}=M6(e,B.useContext(qA));return B.useMemo(()=>({initial:t,animate:n}),[uW(t),uW(n)])}function uW(e){return Array.isArray(e)?e.join(" "):e}const AW={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ll={};for(const e in AW)Ll[e]={isEnabled:t=>AW[e].some(n=>!!t[n])};function z6(e){for(const t in e)Ll[t]={...Ll[t],...e[t]}}const T6=Symbol.for("motionComponentSymbol");function U6({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:o,Component:i}){e&&z6(e);function r(I,a){let c;const C={...B.useContext(r1),...I,layoutId:D6(I)},{isStatic:A}=C,m=L6(I),p=o(I,A);if(!A&&fZ){Q6();const b=P6(C);c=b.MeasureLayout,m.visualElement=F6(i,p,C,t,b.ProjectionNode)}return u.jsxs(qA.Provider,{value:m,children:[c&&m.visualElement?u.jsx(c,{visualElement:m.visualElement,...C}):null,n(i,I,E6(p,m.visualElement,a),p,A,m.visualElement)]})}const s=B.forwardRef(r);return s[T6]=i,s}function D6({layoutId:e}){const t=B.useContext(PJ).id;return t&&e!==void 0?t+"-"+e:e}function Q6(e,t){B.useContext(s1).strict}function P6(e){const{drag:t,layout:n}=Ll;if(!t&&!n)return{};const o={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}const j6=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ZZ(e){return typeof e!="string"||e.includes("-")?!1:!!(j6.indexOf(e)>-1||/[A-Z]/u.test(e))}function I1(e,{style:t,vars:n},o,i){Object.assign(e.style,t,i&&i.getProjectionStyles(o));for(const r in n)e.style.setProperty(r,n[r])}const c1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function C1(e,t,n,o){I1(e,t,void 0,o);for(const i in t.attrs)e.setAttribute(c1.has(i)?i:_A(i),t.attrs[i])}function d1(e,{layout:t,layoutId:n}){return rr.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!iu[e]||e==="opacity")}function yZ(e,t,n){var o;const{style:i}=e,r={};for(const s in i)(Nn(i[s])||t.style&&Nn(t.style[s])||d1(s,e)||((o=n==null?void 0:n.getValue(s))===null||o===void 0?void 0:o.liveStyle)!==void 0)&&(r[s]=i[s]);return n&&i&&typeof i.willChange=="string"&&(n.applyWillChange=!1),r}function u1(e,t,n){const o=yZ(e,t,n);for(const i in e)if(Nn(e[i])||Nn(t[i])){const r=Gc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;o[r]=e[i]}return o}function _6(e){const t=B.useRef(null);return t.current===null&&(t.current=e()),t.current}function O6(e){if(rr.has(e))return"transform";if(WJ.has(e))return _A(e)}function q6({applyWillChange:e=!1,scrapeMotionValuesFromProps:t,createRenderState:n,onMount:o},i,r,s,I){const a={latestValues:$6(i,r,s,I?!1:e,t),renderState:n()};return o&&(a.mount=c=>o(i,c,a)),a}const A1=e=>(t,n)=>{const o=B.useContext(qA),i=B.useContext(pZ),r=()=>q6(e,t,o,i,n);return n?r():_6(r)};function mW(e,t,n){const o=Array.isArray(t)?t:[t];for(let i=0;i<o.length;i++){const r=O0(e,o[i]);if(r){const{transitionEnd:s,transition:I,...a}=r;n(a,s)}}}function $6(e,t,n,o,i){var r;const s={},I=new Set,a=o&&((r=e.style)===null||r===void 0?void 0:r.willChange)===void 0,c=i(e,{});for(const W in c)s[W]=_C(c[W]);let{initial:C,animate:A}=e;const m=$A(e),p=a1(e);t&&p&&!m&&e.inherit!==!1&&(C===void 0&&(C=t.initial),A===void 0&&(A=t.animate));let b=n?n.initial===!1:!1;b=b||C===!1;const G=b?A:C;return G&&typeof G!="boolean"&&!PI(G)&&mW(e,G,(W,Z)=>{for(const y in W){let f=W[y];if(Array.isArray(f)){const v=b?f.length-1:0;f=f[v]}f!==null&&(s[y]=f)}for(const y in Z)s[y]=Z[y]}),a&&(A&&C!==!1&&!PI(A)&&mW(e,A,W=>{for(const Z in W){const y=O6(Z);y&&I.add(y)}}),I.size&&(s.willChange=Array.from(I).join(","))),s}const GZ=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),m1=()=>({...GZ(),attrs:{}}),h1=(e,t)=>t&&typeof e=="number"?t.transform(e):e,eee={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},tee=Gc.length;function nee(e,t,n){let o="",i=!0;for(let r=0;r<tee;r++){const s=Gc[r],I=e[s];if(I===void 0)continue;let a=!0;if(typeof I=="number"?a=I===(s.startsWith("scale")?1:0):a=parseFloat(I)===0,!a||n){const c=h1(I,sZ[s]);if(!a){i=!1;const C=eee[s]||s;o+=`${C}(${c}) `}n&&(t[s]=c)}}return o=o.trim(),n?o=n(t,i?"":o):i&&(o="none"),o}function BZ(e,t,n){const{style:o,vars:i,transformOrigin:r}=e;let s=!1,I=!1;for(const a in t){const c=t[a];if(rr.has(a)){s=!0;continue}else if(sJ(a)){i[a]=c;continue}else{const C=h1(c,sZ[a]);a.startsWith("origin")?(I=!0,r[a]=C):o[a]=C}}if(t.transform||(s||n?o.transform=nee(t,e.transform,n):o.transform&&(o.transform="none")),I){const{originX:a="50%",originY:c="50%",originZ:C=0}=r;o.transformOrigin=`${a} ${c} ${C}`}}function hW(e,t,n){return typeof e=="string"?e:ve.transform(t+n*e)}function oee(e,t,n){const o=hW(t,e.x,e.width),i=hW(n,e.y,e.height);return`${o} ${i}`}const iee={offset:"stroke-dashoffset",array:"stroke-dasharray"},gee={offset:"strokeDashoffset",array:"strokeDasharray"};function ree(e,t,n=1,o=0,i=!0){e.pathLength=1;const r=i?iee:gee;e[r.offset]=ve.transform(-o);const s=ve.transform(t),I=ve.transform(n);e[r.array]=`${s} ${I}`}function SZ(e,{attrX:t,attrY:n,attrScale:o,originX:i,originY:r,pathLength:s,pathSpacing:I=1,pathOffset:a=0,...c},C,A){if(BZ(e,c,A),C){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:p,dimensions:b}=e;m.transform&&(b&&(p.transform=m.transform),delete m.transform),b&&(i!==void 0||r!==void 0||p.transform)&&(p.transformOrigin=oee(b,i!==void 0?i:.5,r!==void 0?r:.5)),t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),o!==void 0&&(m.scale=o),s!==void 0&&ree(m,s,I,a,!1)}const vZ=e=>typeof e=="string"&&e.toLowerCase()==="svg",see={useVisualState:A1({scrapeMotionValuesFromProps:u1,createRenderState:m1,onMount:(e,t,{renderState:n,latestValues:o})=>{pt.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),pt.render(()=>{SZ(n,o,vZ(t.tagName),e.transformTemplate),C1(t,n)})}})},lee={useVisualState:A1({applyWillChange:!0,scrapeMotionValuesFromProps:yZ,createRenderState:GZ})};function p1(e,t,n){for(const o in t)!Nn(t[o])&&!d1(o,n)&&(e[o]=t[o])}function aee({transformTemplate:e},t){return B.useMemo(()=>{const n=GZ();return BZ(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Iee(e,t){const n=e.style||{},o={};return p1(o,n,e),Object.assign(o,aee(e,t)),o}function cee(e,t){const n={},o=Iee(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=o,n}const Cee=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function gu(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Cee.has(e)}let b1=e=>!gu(e);function dee(e){e&&(b1=t=>t.startsWith("on")?!gu(t):e(t))}try{dee(require("@emotion/is-prop-valid").default)}catch{}function uee(e,t,n){const o={};for(const i in e)i==="values"&&typeof e.values=="object"||(b1(i)||n===!0&&gu(i)||!t&&!gu(i)||e.draggable&&i.startsWith("onDrag"))&&(o[i]=e[i]);return o}function Aee(e,t,n,o){const i=B.useMemo(()=>{const r=m1();return SZ(r,t,vZ(o),e.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const r={};p1(r,e.style,e),i.style={...r,...i.style}}return i}function mee(e=!1){return(n,o,i,{latestValues:r},s)=>{const a=(ZZ(n)?Aee:cee)(o,r,s,n),c=uee(o,typeof n=="string",e),C=n!==B.Fragment?{...c,...a,ref:i}:{},{children:A}=o,m=B.useMemo(()=>Nn(A)?A.get():A,[A]);return B.createElement(n,{...C,children:m})}}function hee(e,t){return function(o,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...ZZ(o)?see:lee,preloadedFeatures:e,useRender:mee(i),createVisualElement:t,Component:o};return U6(s)}}const Sb={current:null},f1={current:!1};function pee(){if(f1.current=!0,!!fZ)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Sb.current=e.matches;e.addListener(t),t()}else Sb.current=!1}function bee(e,t,n){for(const o in t){const i=t[o],r=n[o];if(Nn(i))e.addValue(o,i);else if(Nn(r))e.addValue(o,qI(i,{owner:e}));else if(r!==i)if(e.hasValue(o)){const s=e.getValue(o);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=e.getStaticValue(o);e.addValue(o,qI(s!==void 0?s:i,{owner:e}))}}for(const o in n)t[o]===void 0&&e.removeValue(o);return t}const pW=new WeakMap,fee=[...IJ,Yn,Og],Zee=e=>fee.find(aJ(e)),bW=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class yee{scrapeMotionValuesFromProps(t,n,o){return{}}constructor({parent:t,props:n,presenceContext:o,reducedMotionConfig:i,blockInitialAnimation:r,visualState:s},I={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=iZ,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Ni.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,pt.render(this.render,!1,!0))};const{latestValues:a,renderState:c}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=o,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=I,this.blockInitialAnimation=!!r,this.isControllingVariants=$A(n),this.isVariantNode=a1(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:C,...A}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in A){const p=A[m];a[m]!==void 0&&Nn(p)&&p.set(a[m],!1)}}mount(t){this.current=t,pW.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,o)=>this.bindToMotionValue(o,n)),f1.current||pee(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Sb.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){pW.delete(this.current),this.projection&&this.projection.unmount(),jg(this.notifyUpdate),jg(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const o=rr.has(t),i=n.on("change",I=>{this.latestValues[t]=I,this.props.onUpdate&&pt.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0)}),r=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),r(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ll){const n=Ll[t];if(!n)continue;const{isEnabled:o,Feature:i}=n;if(!this.features[t]&&i&&o(this.props)&&(this.features[t]=new i(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):zt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let o=0;o<bW.length;o++){const i=bW[o];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r="on"+i,s=t[r];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=bee(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const o=this.values.get(t);n!==o&&(o&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let o=this.values.get(t);return o===void 0&&n!==void 0&&(o=qI(n===null?void 0:n,{owner:this}),this.addValue(t,o)),o}readValue(t,n){var o;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(o=this.getBaseTargetFromProps(this.props,t))!==null&&o!==void 0?o:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(gJ(i)||iJ(i))?i=parseFloat(i):!Zee(i)&&Og.test(n)&&(i=pJ(t,n)),this.setBaseTarget(t,Nn(i)?i.get():i)),Nn(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:o}=this.props;let i;if(typeof o=="string"||typeof o=="object"){const s=O0(this.props,o,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);s&&(i=s[t])}if(o&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!Nn(r)?r:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new hZ),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class Z1 extends yee{constructor(){super(...arguments),this.KeyframeResolver=bJ}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:o}){delete n[t],delete o[t]}}function Gee(e){return window.getComputedStyle(e)}class Bee extends Z1{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=I1}readValueFromInstance(t,n){if(rr.has(n)){const o=lZ(n);return o&&o.default||0}else{const o=Gee(t),i=(sJ(n)?o.getPropertyValue(n):o[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return DJ(t,n)}build(t,n,o){BZ(t,n,o.transformTemplate)}scrapeMotionValuesFromProps(t,n,o){return yZ(t,n,o)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Nn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class See extends Z1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=zt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(rr.has(n)){const o=lZ(n);return o&&o.default||0}return n=c1.has(n)?n:_A(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,o){return u1(t,n,o)}build(t,n,o){SZ(t,n,this.isSVGTag,o.transformTemplate)}renderInstance(t,n,o,i){C1(t,n,o,i)}mount(t){this.isSVGTag=vZ(t.tagName),super.mount(t)}}const vee=(e,t)=>ZZ(e)?new See(t):new Bee(t,{allowProjection:e!==B.Fragment}),Wee=hee({...d$,...H6,...B6,...x6},vee),vb=g7(Wee),xh="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",y1=JSON.parse(localStorage.getItem("user")||"{}"),fW=y1.id,ZW=y1.lineId;async function yW(){var W;const e=os();Xo();const t=(W=e.state)==null?void 0:W.rawData,[n,o]=B.useState([]),[i,r]=B.useState([]),[s,I]=B.useState(!1),[a,c]=B.useState(!1),[C,A]=B.useState([]);B.useEffect(()=>{(async()=>{if(t)try{const y=t.replace(/^"|"$/g,"").trim(),f=JSON.parse(y);if(o(f),console.log(" มาจาก Scan "+JSON.stringify(f)),f.length>0){const v=new Set,V=[];for(const X of f){const w=X.id;if(!v.has(w)){v.add(w);const R=await p8(xh,ZW,w);R&&V.push(R)}}r(V)}}catch(y){console.error("Error parsing rawData:",y)}})()},[t,xh,ZW]),B.useEffect(()=>{(async()=>{try{const y=await Dl(xh,fW);if(y&&y.shop&&y.shop.id){const f=y.shop.id,v=await MG(f);if(v&&v.data&&v.data.attributes){const V=v.data.attributes.redeems.data;console.log(v);const w=V.flatMap(x=>{try{const M=x.attributes.productJsonArray;return JSON.parse(M)}catch(M){return console.error("Error parsing productJsonArray:",M),[]}}).flatMap(x=>{try{return JSON.parse(x)}catch(M){return console.error("Error parsing product string:",M),[]}});console.log("Products Array:",JSON.stringify(w,null,2));const R=JSON.parse(t.replace(/^"|"$/g,"").trim()),F=[];R.forEach(x=>{if(w.some(Q=>Q.id===x.id)){const Q=w.find($=>$.id===x.id);Q&&(F.push(Q),console.log("Matched Product Details:",JSON.stringify(Q,null,2))),console.log("Match found for product ID:",x.id)}else console.log("No match for product ID:",x.id)}),console.log("Final Matched Products:",JSON.stringify(F,null,2)),A(F)}else console.error("Redeem data structure is incorrect or missing")}else console.error("Shop data structure is incorrect or missing");c(!1)}catch(y){console.error("Error fetching data:",y),c(!1)}})()},[fW,t]),B.useEffect(()=>{m(shopId,productId).then(Z=>{setRedeemId(Z)})},[shopId,productId]),console.log(redeemId);const m=async(Z,y)=>{try{const V=(await MG(Z)).data.attributes.redeems.data.find(X=>{const w=X.attributes.productJsonArray;return JSON.parse(w).some(F=>F.id===y)});return V?V.id:null}catch(f){return console.error("Error fetching redeem data:",f),null}},p=Array.isArray(i)?i.reduce((Z,y)=>{const f=n.find(X=>X.id===y.id),v=f?f.counts:0,V=(y.price||0)*v;return Z+V},0):0,b=()=>{I(Z=>!Z),console.log("Toggle switch state:",!s)},G=()=>{console.log("Card closed")};return u.jsxs(u.Fragment,{children:[u.jsx(Ui,{}),u.jsx(Oo,{display:"flex",justifyContent:"center",alignItems:"center",style:{minHeight:"40vh",marginBottom:"30px"},children:u.jsxs(Nd,{style:{width:"80%",maxWidth:"800px"},children:[u.jsx(Kd,{style:{backgroundColor:"#800020",color:"white"},action:u.jsx(Rl,{onClick:G,style:{color:"white"},children:u.jsx(QI,{})})}),u.jsxs(Fd,{children:[u.jsx(Sn,{variant:"h6",sx:{textAlign:"center",marginBottom:"16px",fontFamily:"Sarabun"}}),u.jsx(kk,{sx:{marginBottom:"24px"},children:u.jsxs(Vk,{children:[u.jsx(wk,{children:u.jsxs(ul,{children:[u.jsx(Hn,{sx:{textAlign:"left",fontFamily:"Sarabun, sans-serif",fontSize:"12px",fontWeight:"bold"},children:"รายการสินค้า"}),u.jsx(Hn,{sx:{textAlign:"center",fontFamily:"Sarabun, sans-serif",fontSize:"12px",fontWeight:"bold"},children:"จำนวน"}),u.jsx(Hn,{sx:{textAlign:"left",fontFamily:"Sarabun, sans-serif",fontSize:"12px",fontWeight:"bold"},children:"มูลค่า (บาท)"})]})}),u.jsx(Rk,{children:Array.isArray(i)&&i.length>0?i.map((Z,y)=>{const f=n.find(V=>V.id===Z.id),v=f?f.counts:0;return u.jsxs(ul,{children:[u.jsx(Hn,{sx:{textAlign:"left",fontFamily:"Sarabun, sans-serif",fontSize:"12px"},children:Z.name}),u.jsx(Hn,{sx:{textAlign:"center",fontFamily:"Sarabun, sans-serif",fontSize:"12px"},children:v}),u.jsx(Hn,{sx:{textAlign:"left",fontFamily:"Sarabun, sans-serif",fontSize:"12px"},children:Z.price?`${Number(Z.price).toLocaleString()} บาท`:"ไม่มีราคา"})]},y)}):u.jsx(ul,{children:u.jsx(Hn,{colSpan:4,sx:{textAlign:"center"},children:"ไม่มีข้อมูลผลิตภัณฑ์"})})})]})}),u.jsxs(Sn,{variant:"h6",sx:{textAlign:"center",marginBottom:"16px",fontFamily:"Sarabun",fontSize:"12px",fontWeight:"bold"},children:["รวมเป็นมูลค่า : ",p.toFixed(2)," บาท"]})]})]})}),u.jsx(Oo,{display:"flex",justifyContent:"center",alignItems:"center",style:{minHeight:"20vh"},children:u.jsxs(Nd,{style:{width:"80%",maxWidth:"800px"},children:[u.jsx(Kd,{style:{backgroundColor:"#800020",color:"white"},action:u.jsx(Rl,{onClick:G,style:{color:"white"},children:u.jsx(QI,{})})}),u.jsxs(Fd,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"200px",padding:"16px"},children:[u.jsx(Sn,{variant:"h6",sx:{fontFamily:"Sarabun, sans-serif",fontSize:"18px",textAlign:"center",marginBottom:"20px"},children:"ยืนยันการจัดส่งสินค้า"}),u.jsxs(Oo,{display:"flex",alignItems:"center",children:[u.jsx(Sn,{variant:"body1",sx:{marginRight:"10px"},children:""}),u.jsx(vb.div,{onClick:b,style:{width:200,height:25,borderRadius:12,background:s?"#FFC300":"#ccc",position:"relative",cursor:"pointer"},whileHover:{scale:1.1},children:u.jsx(vb.div,{style:{width:20,height:20,borderRadius:"50%",background:"white",position:"absolute",top:2,left:s?175:5,transition:"left 0.2s"}})})]}),u.jsxs("div",{children:[u.jsx("h2",{children:"Matched Products"}),C.length>0?u.jsx("ul",{children:C.map(Z=>u.jsxs("li",{children:[u.jsx("strong",{children:"Product ID:"})," ",Z.id," ",u.jsx("br",{}),u.jsx("strong",{children:"Name:"})," ",Z.name," ",u.jsx("br",{}),u.jsx("strong",{children:"Counts:"})," ",Z.counts," ",u.jsx("br",{}),u.jsx("strong",{children:"Points:"})," ",Z.point," ",u.jsx("br",{}),u.jsx("strong",{children:"Number in Stock:"})," ",Z.numStock," ",u.jsx("br",{})]},Z.id))}):u.jsx("p",{children:"No matched products found."})]})]})]})})]})}function GW(){const[e,t]=B.useState([]),[n,o]=B.useState(!0),[i,r]=B.useState([]),[s,I]=B.useState(null),[a,c]=B.useState({name:"",fullName:"",cardID:"",bookBankNumber:"",bank:"",location:"",checkedOne:!1}),C=localStorage.getItem("accessToken")||"XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",m=JSON.parse(localStorage.getItem("user")||"{}").id,p=Xo();B.useEffect(()=>{(async()=>{try{o(!0);const V=await Dl(C,m);console.log("Fetched shop data:",V),V&&typeof V=="object"?(t([V]),c({name:V.shop.name||"",fullName:V.fullName||"",cardID:V.cardID||"",bookBankNumber:V.shop.bookBankNumber||"",bank:V.shop.bank||"",location:V.shop.location||"",image:V.shop.image||"",bookBankImage:V.shop.bookBankImage||"",checkedOne:!1})):(p("/ProfileStore"),t([]))}catch(V){I(V.message)}finally{o(!1)}})()},[C,m]);const b=v=>{const{id:V,value:X}=v.target;c(w=>({...w,[V]:X}))},G=v=>{const{id:V,value:X}=v.target;c(w=>({...w,[V]:X}))},W=v=>{const{checked:V}=v.target;c(X=>({...X,checkedOne:V}))},Z=v=>{v&&c(V=>({...V,image:v}))},y=v=>{v&&c(V=>({...V,bookBankImage:v}))},f=v=>{v.preventDefault(),console.log("Form submitted:",a)};return n?u.jsx("p",{children:"Loading..."}):s?u.jsxs("p",{children:["Error: ",s]}):u.jsxs(u.Fragment,{children:[u.jsx(Ui,{}),u.jsxs("form",{onSubmit:f,children:[u.jsx("div",{className:"container mx-auto px-4 py-8",children:u.jsxs("div",{className:"flex flex-wrap -mx-2",children:[u.jsx("div",{className:"w-full md:w-1/2 px-2",children:u.jsx(tt,{id:"name",label:"ชื่อร้านค้า",variant:"outlined",className:"w-full bg-white",required:!0,value:a.name,onChange:b})}),u.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4 md:mt-0",children:u.jsx(tt,{id:"fullName",label:"ชื่อ-นามสกุล",type:"text",variant:"outlined",className:"w-full bg-white",required:!0,value:a.fullName,onChange:b})}),u.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:u.jsx(tt,{id:"cardID",label:"หมายเลขบัตรประจำตัวประชาชน",variant:"outlined",className:"w-full bg-white",required:!0,value:a.cardID,onChange:b})}),u.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:u.jsx(tt,{id:"bookBankNumber",label:"หมายเลขบัญชีธนาคาร",variant:"outlined",className:"w-full bg-white",required:!0,value:a.bookBankNumber,onChange:b})}),u.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:u.jsxs(rs,{fullWidth:!0,children:[u.jsx(mA,{id:"bank-select-label",children:"ธนาคาร"}),u.jsx(pA,{className:"bg-white",labelId:"bank-select-label",id:"bank",value:a.bank,label:"ธนาคาร",onChange:G,children:n?u.jsx(Jn,{disabled:!0,children:"กำลังโหลดข้อมูล..."}):i.map(v=>u.jsxs(Jn,{value:v.id,children:[v.name," "]},v.id))})]})}),u.jsxs("div",{className:"w-full px-2 mt-4",children:[u.jsx("div",{children:u.jsx("label",{children:"ถ่ายรูปตนเองพร้อมถือบัตรประจำตัวประชาชน"})}),u.jsx(ga,{className:"bg-white",id:"image",onCapture:Z,ModuleName:"IDCard"})]}),u.jsxs("div",{className:"w-full px-2 mt-4",children:[u.jsx("label",{children:"ถ่ายหน้าบุ๊คแบงก์"}),u.jsx(hX,{className:"bg-white",id:"bookBankImage",onCapture:y,ModuleName:"BookBank"})]}),u.jsx("div",{className:"w-full px-2 mt-4",children:u.jsx(tt,{label:"ที่อยู่",placeholder:"ที่อยู่",id:"location",multiline:!0,minRows:3,maxRows:10,fullWidth:!0,className:"w-full bg-white",required:!0,value:a.location,onChange:b})})]})}),u.jsxs("div",{className:"container mx-auto px-4 mt-10 mb-5",children:[u.jsx(ea,{id:"checkedOne",checked:a.checkedOne,onChange:W,required:!0,sx:{"& .MuiSvgIcon-root":{fontSize:30}}}),u.jsxs("span",{children:[u.jsx("strong",{children:"ยอมรับเงื่อนไข"})," "]})]}),u.jsx("div",{className:"container mx-auto px-4",children:u.jsx("button",{type:"submit",className:`w-full h-12 mb-10 flex justify-center rounded-xl items-center text-white ${a.name&&a.fullName&&a.cardID&&a.bookBankNumber&&a.bank&&a.location?"bg-green-500":"bg-slate-300"}`,children:"บันทึกข้อมูล"})})]})]})}const Vee="http://209.58.160.245:1337",Ree="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=";function BW(){const e=Li({typography:{fontFamily:"Sarabun !important"}}),n=JSON.parse(localStorage.getItem("user")||"{}").id,[o,i]=B.useState(!0);B.useState(null);const[r,s]=B.useState([]),[I,a]=B.useState(""),[c,C]=B.useState([]);B.useEffect(()=>{(async()=>{try{const p=await Dl(Ree,n);if(console.log("Full shop data response:",p),p&&p.shop&&p.shop.id){const b=p.shop.id;console.log("shopId:",b);const G=await e5(b);console.log("Invoices data received:",G),G.data.attributes&&G.data.attributes.invoices&&Array.isArray(G.data.attributes.invoices.data)?s(G.data.attributes.invoices.data):(console.error("No invoices found in the response or invoices is not an array"),s([]))}else console.error("Shop data structure is incorrect or missing");i(!1)}catch(p){console.error("Error fetching data:",p),i(!1)}})()},[n]),B.useEffect(()=>{if(Array.isArray(r)){const m=r.filter(p=>p.attributes.invoiceNumber.toLowerCase().includes(I.toLowerCase()));C(m)}else console.error("Invoices is not an array:",r)},[I,r]);const A=m=>{a(m.target.value)};return u.jsxs(ir,{theme:e,children:[u.jsx(Ui,{}),u.jsx(Oo,{sx:{p:2},children:o?u.jsx(oz,{}):u.jsxs(vb.div,{initial:{opacity:0,y:0},animate:{opacity:1,y:0},transition:{duration:.5},children:[u.jsx(tt,{label:"ค้นหาใบแจ้งหนี้...",variant:"outlined",fullWidth:!0,value:I,onChange:A,sx:{mb:2,backgroundColor:"white"}}),u.jsx(Lo,{container:!0,spacing:2,children:c.length>0?c.map(m=>u.jsx(Lo,{item:!0,xs:12,md:6,lg:4,children:u.jsxs(Nd,{children:[u.jsx(Kd,{action:u.jsx(Rl,{"aria-label":"close",children:u.jsx(QI,{})}),title:`เลขที่ใบแจ้งหนี้: ${m.attributes.invoiceNumber}`}),u.jsxs(Fd,{children:[m.attributes.redeem&&m.attributes.redeem.data&&m.attributes.redeem.data.attributes.customer.data&&u.jsxs(Sn,{variant:"body1",children:["ชื่อ: ",m.attributes.redeem.data.attributes.customer.data.attributes.username]}),m.attributes.redeem&&m.attributes.redeem.data&&u.jsxs(Sn,{variant:"body1",children:["วันที่: ",new Date(m.attributes.redeem.data.attributes.createdAt).toLocaleDateString("th-TH")]}),m.attributes.transferImage&&m.attributes.transferImage.data&&u.jsx(Oo,{sx:{mt:2},children:u.jsx("img",{src:`${Vee}${m.attributes.transferImage.data.attributes.url}`,alt:"Transfer Receipt",style:{width:"100%",maxHeight:"200px",objectFit:"contain"}})}),u.jsxs(Oo,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[u.jsx(Cl,{variant:"contained",color:"warning",children:"ดูใบเสร็จ"}),m.attributes.status==="paid"?u.jsx(Cl,{variant:"contained",color:"success",children:"ชำระเงินแล้ว"}):u.jsx(Cl,{variant:"outlined",color:"error",children:"ค้างชำระ"})]})]})]})},m.id)):u.jsx(Sn,{variant:"body1",children:"ไม่พบใบแจ้งหนี้"})})]})})]})}const kee="2006448899-kaB4QBVr",wee=kF([{path:"/",element:u.jsx(_F,{})},{path:"/home",element:u.jsx(a5,{})},{path:"/cart",element:u.jsx(R8,{})},{path:"/register/:userId",element:u.jsx(qS,{})},{path:"/shopList",element:u.jsx(v8,{})},{path:"/first",element:u.jsx(B8,{})},{path:"/login",element:u.jsx(S8,{})},{path:"/choose/wimon",element:u.jsx(G8,{})},{path:"/shop/:id",element:u.jsx(y8,{})},{path:"/history-point/:id",element:u.jsx(EE,{})},{path:"/history-service-machine/:id",element:u.jsx(jE,{})},{path:"/UserProfile",element:u.jsx(v4,{})},{path:"/register/:userId",element:u.jsx(qS,{})},{path:"/update-user-profile",element:u.jsx(V8,{})},{path:"/store-map/khunnaiwimon",element:u.jsx(T4,{})},{path:"/store-map/naitonmai",element:u.jsx(U4,{})},{path:"/store-map/paranee",element:u.jsx(D4,{})},{path:"/store-map/krung",element:u.jsx(Q4,{})},{path:"/store-map/kamalad",element:u.jsx(P4,{})},{path:"/conclusion",element:u.jsx(e_,{})},{path:"/machine-position",element:u.jsx(c_,{})},{path:"/map",element:u.jsx(W8,{})},{path:"/contact-us",element:u.jsx(C_,{})},{path:"/partner/ProfileStore",element:u.jsx(YS,{})},{path:"/partner/contact-us",element:u.jsx(H_,{})},{path:"/pdpa",element:u.jsx(HS,{})},{path:"/partner/pdpa",element:u.jsx(HS,{})},{path:"/shopHome",element:u.jsx($S,{})},{path:"/partner/shopHome",element:u.jsx($S,{})},{path:"/partner/shopRegister",element:u.jsx("shopRegister",{})},{path:"/partner/get-money-item",element:u.jsx(F_,{})},{path:"/partner/add-product",element:u.jsx(Z8,{})},{path:"/ProfileStore",element:u.jsx(YS,{})},{path:"/partner/shopHomeDetail",element:u.jsx(gv,{})},{path:"/shopHomeDetail",element:u.jsx(gv,{})},{path:"/partner/shopHomeDetailResive",element:u.jsx(yW,{})},{path:"/shopHomeDetailResive",element:u.jsx(yW,{})},{path:"/partner/ProfileStoreEdit",element:u.jsx(GW,{})},{path:"/ProfileStoreEdit",element:u.jsx(GW,{})},{path:"/partner/ShopHomeDetailPreSlip",element:u.jsx(BW,{})},{path:"/ShopHomeDetailPreSlip",element:u.jsx(BW,{})}]);KR(document.getElementById("root")).render(u.jsx(B.StrictMode,{children:u.jsx(aN,{liffId:kee,children:u.jsx(TR,{children:u.jsx(FF,{router:wee})})})}));export{vW as c,Wb as g};
