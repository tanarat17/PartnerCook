function bW(e,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const i in o)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(o,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>o[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var fW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ki(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var i=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,i.get?i:{enumerable:!0,get:function(){return e[o]}})}),n}var ZW={exports:{}},ou={},yW={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QI=Symbol.for("react.element"),I1=Symbol.for("react.portal"),c1=Symbol.for("react.fragment"),C1=Symbol.for("react.strict_mode"),d1=Symbol.for("react.profiler"),u1=Symbol.for("react.provider"),A1=Symbol.for("react.context"),m1=Symbol.for("react.forward_ref"),h1=Symbol.for("react.suspense"),p1=Symbol.for("react.memo"),b1=Symbol.for("react.lazy"),dy=Symbol.iterator;function f1(e){return e===null||typeof e!="object"?null:(e=dy&&e[dy]||e["@@iterator"],typeof e=="function"?e:null)}var GW={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},BW=Object.assign,SW={};function El(e,t,n){this.props=e,this.context=t,this.refs=SW,this.updater=n||GW}El.prototype.isReactComponent={};El.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};El.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vW(){}vW.prototype=El.prototype;function yb(e,t,n){this.props=e,this.context=t,this.refs=SW,this.updater=n||GW}var Gb=yb.prototype=new vW;Gb.constructor=yb;BW(Gb,El.prototype);Gb.isPureReactComponent=!0;var uy=Array.isArray,WW=Object.prototype.hasOwnProperty,Bb={current:null},VW={key:!0,ref:!0,__self:!0,__source:!0};function RW(e,t,n){var o,i={},s=null,r=null;if(t!=null)for(o in t.ref!==void 0&&(r=t.ref),t.key!==void 0&&(s=""+t.key),t)WW.call(t,o)&&!VW.hasOwnProperty(o)&&(i[o]=t[o]);var I=arguments.length-2;if(I===1)i.children=n;else if(1<I){for(var a=Array(I),c=0;c<I;c++)a[c]=arguments[c+2];i.children=a}if(e&&e.defaultProps)for(o in I=e.defaultProps,I)i[o]===void 0&&(i[o]=I[o]);return{$$typeof:QI,type:e,key:s,ref:r,props:i,_owner:Bb.current}}function Z1(e,t){return{$$typeof:QI,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Sb(e){return typeof e=="object"&&e!==null&&e.$$typeof===QI}function y1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ay=/\/+/g;function ym(e,t){return typeof e=="object"&&e!==null&&e.key!=null?y1(""+e.key):t.toString(36)}function pC(e,t,n,o,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var r=!1;if(e===null)r=!0;else switch(s){case"string":case"number":r=!0;break;case"object":switch(e.$$typeof){case QI:case I1:r=!0}}if(r)return r=e,i=i(r),e=o===""?"."+ym(r,0):o,uy(i)?(n="",e!=null&&(n=e.replace(Ay,"$&/")+"/"),pC(i,t,n,"",function(c){return c})):i!=null&&(Sb(i)&&(i=Z1(i,n+(!i.key||r&&r.key===i.key?"":(""+i.key).replace(Ay,"$&/")+"/")+e)),t.push(i)),1;if(r=0,o=o===""?".":o+":",uy(e))for(var I=0;I<e.length;I++){s=e[I];var a=o+ym(s,I);r+=pC(s,t,n,a,i)}else if(a=f1(e),typeof a=="function")for(e=a.call(e),I=0;!(s=e.next()).done;)s=s.value,a=o+ym(s,I++),r+=pC(s,t,n,a,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return r}function Mc(e,t,n){if(e==null)return e;var o=[],i=0;return pC(e,o,"","",function(s){return t.call(n,s,i++)}),o}function G1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _n={current:null},bC={transition:null},B1={ReactCurrentDispatcher:_n,ReactCurrentBatchConfig:bC,ReactCurrentOwner:Bb};function kW(){throw Error("act(...) is not supported in production builds of React.")}Qe.Children={map:Mc,forEach:function(e,t,n){Mc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Mc(e,function(){t++}),t},toArray:function(e){return Mc(e,function(t){return t})||[]},only:function(e){if(!Sb(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Qe.Component=El;Qe.Fragment=c1;Qe.Profiler=d1;Qe.PureComponent=yb;Qe.StrictMode=C1;Qe.Suspense=h1;Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B1;Qe.act=kW;Qe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=BW({},e.props),i=e.key,s=e.ref,r=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,r=Bb.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var I=e.type.defaultProps;for(a in t)WW.call(t,a)&&!VW.hasOwnProperty(a)&&(o[a]=t[a]===void 0&&I!==void 0?I[a]:t[a])}var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){I=Array(a);for(var c=0;c<a;c++)I[c]=arguments[c+2];o.children=I}return{$$typeof:QI,type:e.type,key:i,ref:s,props:o,_owner:r}};Qe.createContext=function(e){return e={$$typeof:A1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:u1,_context:e},e.Consumer=e};Qe.createElement=RW;Qe.createFactory=function(e){var t=RW.bind(null,e);return t.type=e,t};Qe.createRef=function(){return{current:null}};Qe.forwardRef=function(e){return{$$typeof:m1,render:e}};Qe.isValidElement=Sb;Qe.lazy=function(e){return{$$typeof:b1,_payload:{_status:-1,_result:e},_init:G1}};Qe.memo=function(e,t){return{$$typeof:p1,type:e,compare:t===void 0?null:t}};Qe.startTransition=function(e){var t=bC.transition;bC.transition={};try{e()}finally{bC.transition=t}};Qe.unstable_act=kW;Qe.useCallback=function(e,t){return _n.current.useCallback(e,t)};Qe.useContext=function(e){return _n.current.useContext(e)};Qe.useDebugValue=function(){};Qe.useDeferredValue=function(e){return _n.current.useDeferredValue(e)};Qe.useEffect=function(e,t){return _n.current.useEffect(e,t)};Qe.useId=function(){return _n.current.useId()};Qe.useImperativeHandle=function(e,t,n){return _n.current.useImperativeHandle(e,t,n)};Qe.useInsertionEffect=function(e,t){return _n.current.useInsertionEffect(e,t)};Qe.useLayoutEffect=function(e,t){return _n.current.useLayoutEffect(e,t)};Qe.useMemo=function(e,t){return _n.current.useMemo(e,t)};Qe.useReducer=function(e,t,n){return _n.current.useReducer(e,t,n)};Qe.useRef=function(e){return _n.current.useRef(e)};Qe.useState=function(e){return _n.current.useState(e)};Qe.useSyncExternalStore=function(e,t,n){return _n.current.useSyncExternalStore(e,t,n)};Qe.useTransition=function(){return _n.current.useTransition()};Qe.version="18.3.1";yW.exports=Qe;var B=yW.exports;const Ee=Zb(B),PC=bW({__proto__:null,default:Ee},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S1=B,v1=Symbol.for("react.element"),W1=Symbol.for("react.fragment"),V1=Object.prototype.hasOwnProperty,R1=S1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,k1={key:!0,ref:!0,__self:!0,__source:!0};function wW(e,t,n){var o,i={},s=null,r=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(r=t.ref);for(o in t)V1.call(t,o)&&!k1.hasOwnProperty(o)&&(i[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)i[o]===void 0&&(i[o]=t[o]);return{$$typeof:v1,type:e,key:s,ref:r,props:i,_owner:R1.current}}ou.Fragment=W1;ou.jsx=wW;ou.jsxs=wW;ZW.exports=ou;var d=ZW.exports,XW={exports:{}},ko={},JW={exports:{}},YW={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,_){var P=N.length;N.push(_);e:for(;0<P;){var le=P-1>>>1,ae=N[le];if(0<i(ae,_))N[le]=_,N[P]=ae,P=le;else break e}}function n(N){return N.length===0?null:N[0]}function o(N){if(N.length===0)return null;var _=N[0],P=N.pop();if(P!==_){N[0]=P;e:for(var le=0,ae=N.length,ye=ae>>>1;le<ye;){var se=2*(le+1)-1,ue=N[se],ie=se+1,Je=N[ie];if(0>i(ue,P))ie<ae&&0>i(Je,ue)?(N[le]=Je,N[ie]=P,le=ie):(N[le]=ue,N[se]=P,le=se);else if(ie<ae&&0>i(Je,P))N[le]=Je,N[ie]=P,le=ie;else break e}}return _}function i(N,_){var P=N.sortIndex-_.sortIndex;return P!==0?P:N.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var r=Date,I=r.now();e.unstable_now=function(){return r.now()-I}}var a=[],c=[],C=1,A=null,m=3,p=!1,b=!1,Z=!1,v=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(N){for(var _=n(c);_!==null;){if(_.callback===null)o(c);else if(_.startTime<=N)o(c),_.sortIndex=_.expirationTime,t(a,_);else break;_=n(c)}}function W(N){if(Z=!1,y(N),!b)if(n(a)!==null)b=!0,ee(V);else{var _=n(c);_!==null&&te(W,_.startTime-N)}}function V(N,_){b=!1,Z&&(Z=!1,f(k),k=-1),p=!0;var P=m;try{for(y(_),A=n(a);A!==null&&(!(A.expirationTime>_)||N&&!M());){var le=A.callback;if(typeof le=="function"){A.callback=null,m=A.priorityLevel;var ae=le(A.expirationTime<=_);_=e.unstable_now(),typeof ae=="function"?A.callback=ae:A===n(a)&&o(a),y(_)}else o(a);A=n(a)}if(A!==null)var ye=!0;else{var se=n(c);se!==null&&te(W,se.startTime-_),ye=!1}return ye}finally{A=null,m=P,p=!1}}var X=!1,R=null,k=-1,F=5,x=-1;function M(){return!(e.unstable_now()-x<F)}function Q(){if(R!==null){var N=e.unstable_now();x=N;var _=!0;try{_=R(!0,N)}finally{_?q():(X=!1,R=null)}}else X=!1}var q;if(typeof G=="function")q=function(){G(Q)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,ne=j.port2;j.port1.onmessage=Q,q=function(){ne.postMessage(null)}}else q=function(){v(Q,0)};function ee(N){R=N,X||(X=!0,q())}function te(N,_){k=v(function(){N(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){b||p||(b=!0,ee(V))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(N){switch(m){case 1:case 2:case 3:var _=3;break;default:_=m}var P=m;m=_;try{return N()}finally{m=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,_){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var P=m;m=N;try{return _()}finally{m=P}},e.unstable_scheduleCallback=function(N,_,P){var le=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?le+P:le):P=le,N){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=P+ae,N={id:C++,callback:_,priorityLevel:N,startTime:P,expirationTime:ae,sortIndex:-1},P>le?(N.sortIndex=P,t(c,N),n(a)===null&&N===n(c)&&(Z?(f(k),k=-1):Z=!0,te(W,P-le))):(N.sortIndex=ae,t(a,N),b||p||(b=!0,ee(V))),N},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(N){var _=m;return function(){var P=m;m=_;try{return N.apply(this,arguments)}finally{m=P}}}})(YW);JW.exports=YW;var w1=JW.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X1=B,Wo=w1;function oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HW=new Set,II={};function er(e,t){ul(e,t),ul(e+"Capture",t)}function ul(e,t){for(II[e]=t,e=0;e<t.length;e++)HW.add(t[e])}var lg=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wh=Object.prototype.hasOwnProperty,J1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,my={},hy={};function Y1(e){return wh.call(hy,e)?!0:wh.call(my,e)?!1:J1.test(e)?hy[e]=!0:(my[e]=!0,!1)}function H1(e,t,n,o){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function x1(e,t,n,o){if(t===null||typeof t>"u"||H1(e,t,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function On(e,t,n,o,i,s,r){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=r}var Wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Wn[e]=new On(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Wn[t]=new On(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Wn[e]=new On(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Wn[e]=new On(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Wn[e]=new On(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Wn[e]=new On(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Wn[e]=new On(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Wn[e]=new On(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Wn[e]=new On(e,5,!1,e.toLowerCase(),null,!1,!1)});var vb=/[\-:]([a-z])/g;function Wb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vb,Wb);Wn[t]=new On(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vb,Wb);Wn[t]=new On(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vb,Wb);Wn[t]=new On(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Wn[e]=new On(e,1,!1,e.toLowerCase(),null,!1,!1)});Wn.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Wn[e]=new On(e,1,!1,e.toLowerCase(),null,!0,!0)});function Vb(e,t,n,o){var i=Wn.hasOwnProperty(t)?Wn[t]:null;(i!==null?i.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(x1(t,n,i,o)&&(n=null),o||i===null?Y1(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,o=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}var ug=X1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lc=Symbol.for("react.element"),xr=Symbol.for("react.portal"),Nr=Symbol.for("react.fragment"),Rb=Symbol.for("react.strict_mode"),Xh=Symbol.for("react.profiler"),xW=Symbol.for("react.provider"),NW=Symbol.for("react.context"),kb=Symbol.for("react.forward_ref"),Jh=Symbol.for("react.suspense"),Yh=Symbol.for("react.suspense_list"),wb=Symbol.for("react.memo"),Wg=Symbol.for("react.lazy"),FW=Symbol.for("react.offscreen"),py=Symbol.iterator;function ha(e){return e===null||typeof e!="object"?null:(e=py&&e[py]||e["@@iterator"],typeof e=="function"?e:null)}var Nt=Object.assign,Gm;function Na(e){if(Gm===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Gm=t&&t[1]||""}return`
`+Gm+e}var Bm=!1;function Sm(e,t){if(!e||Bm)return"";Bm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var o=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){o=c}e.call(t.prototype)}else{try{throw Error()}catch(c){o=c}e()}}catch(c){if(c&&o&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=o.stack.split(`
`),r=i.length-1,I=s.length-1;1<=r&&0<=I&&i[r]!==s[I];)I--;for(;1<=r&&0<=I;r--,I--)if(i[r]!==s[I]){if(r!==1||I!==1)do if(r--,I--,0>I||i[r]!==s[I]){var a=`
`+i[r].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=r&&0<=I);break}}}finally{Bm=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Na(e):""}function N1(e){switch(e.tag){case 5:return Na(e.type);case 16:return Na("Lazy");case 13:return Na("Suspense");case 19:return Na("SuspenseList");case 0:case 2:case 15:return e=Sm(e.type,!1),e;case 11:return e=Sm(e.type.render,!1),e;case 1:return e=Sm(e.type,!0),e;default:return""}}function Hh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Nr:return"Fragment";case xr:return"Portal";case Xh:return"Profiler";case Rb:return"StrictMode";case Jh:return"Suspense";case Yh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case NW:return(e.displayName||"Context")+".Consumer";case xW:return(e._context.displayName||"Context")+".Provider";case kb:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wb:return t=e.displayName||null,t!==null?t:Hh(e.type)||"Memo";case Wg:t=e._payload,e=e._init;try{return Hh(e(t))}catch{}}return null}function F1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hh(t);case 8:return t===Rb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ug(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function KW(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function K1(e){var t=KW(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(r){o=""+r,s.call(this,r)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(r){o=""+r},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zc(e){e._valueTracker||(e._valueTracker=K1(e))}function EW(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=KW(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function jC(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xh(e,t){var n=t.checked;return Nt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function by(e,t){var n=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;n=Ug(t.value!=null?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function MW(e,t){t=t.checked,t!=null&&Vb(e,"checked",t,!1)}function Nh(e,t){MW(e,t);var n=Ug(t.value),o=t.type;if(n!=null)o==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fh(e,t.type,n):t.hasOwnProperty("defaultValue")&&Fh(e,t.type,Ug(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function fy(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Fh(e,t,n){(t!=="number"||jC(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Fa=Array.isArray;function ol(e,t,n,o){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&o&&(e[n].defaultSelected=!0)}else{for(n=""+Ug(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,o&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Kh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(oe(91));return Nt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zy(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(oe(92));if(Fa(n)){if(1<n.length)throw Error(oe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ug(n)}}function LW(e,t){var n=Ug(t.value),o=Ug(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),o!=null&&(e.defaultValue=""+o)}function yy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function zW(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Eh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?zW(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Tc,TW=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,o,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,o,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Tc=Tc||document.createElement("div"),Tc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Tc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function cI(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Pa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E1=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(e){E1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pa[t]=Pa[e]})});function UW(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Pa.hasOwnProperty(e)&&Pa[e]?(""+t).trim():t+"px"}function DW(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var o=n.indexOf("--")===0,i=UW(n,t[n],o);n==="float"&&(n="cssFloat"),o?e.setProperty(n,i):e[n]=i}}var M1=Nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mh(e,t){if(t){if(M1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(oe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(oe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(oe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(oe(62))}}function Lh(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zh=null;function Xb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Th=null,il=null,gl=null;function Gy(e){if(e=_I(e)){if(typeof Th!="function")throw Error(oe(280));var t=e.stateNode;t&&(t=lu(t),Th(e.stateNode,e.type,t))}}function QW(e){il?gl?gl.push(e):gl=[e]:il=e}function PW(){if(il){var e=il,t=gl;if(gl=il=null,Gy(e),t)for(e=0;e<t.length;e++)Gy(t[e])}}function jW(e,t){return e(t)}function _W(){}var vm=!1;function OW(e,t,n){if(vm)return e(t,n);vm=!0;try{return jW(e,t,n)}finally{vm=!1,(il!==null||gl!==null)&&(_W(),PW())}}function CI(e,t){var n=e.stateNode;if(n===null)return null;var o=lu(n);if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(oe(231,t,typeof n));return n}var Uh=!1;if(lg)try{var pa={};Object.defineProperty(pa,"passive",{get:function(){Uh=!0}}),window.addEventListener("test",pa,pa),window.removeEventListener("test",pa,pa)}catch{Uh=!1}function L1(e,t,n,o,i,s,r,I,a){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(C){this.onError(C)}}var ja=!1,_C=null,OC=!1,Dh=null,z1={onError:function(e){ja=!0,_C=e}};function T1(e,t,n,o,i,s,r,I,a){ja=!1,_C=null,L1.apply(z1,arguments)}function U1(e,t,n,o,i,s,r,I,a){if(T1.apply(this,arguments),ja){if(ja){var c=_C;ja=!1,_C=null}else throw Error(oe(198));OC||(OC=!0,Dh=c)}}function tr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function qW(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function By(e){if(tr(e)!==e)throw Error(oe(188))}function D1(e){var t=e.alternate;if(!t){if(t=tr(e),t===null)throw Error(oe(188));return t!==e?null:e}for(var n=e,o=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(o=i.return,o!==null){n=o;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return By(i),e;if(s===o)return By(i),t;s=s.sibling}throw Error(oe(188))}if(n.return!==o.return)n=i,o=s;else{for(var r=!1,I=i.child;I;){if(I===n){r=!0,n=i,o=s;break}if(I===o){r=!0,o=i,n=s;break}I=I.sibling}if(!r){for(I=s.child;I;){if(I===n){r=!0,n=s,o=i;break}if(I===o){r=!0,o=s,n=i;break}I=I.sibling}if(!r)throw Error(oe(189))}}if(n.alternate!==o)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?e:t}function $W(e){return e=D1(e),e!==null?eV(e):null}function eV(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=eV(e);if(t!==null)return t;e=e.sibling}return null}var tV=Wo.unstable_scheduleCallback,Sy=Wo.unstable_cancelCallback,Q1=Wo.unstable_shouldYield,P1=Wo.unstable_requestPaint,Dt=Wo.unstable_now,j1=Wo.unstable_getCurrentPriorityLevel,Jb=Wo.unstable_ImmediatePriority,nV=Wo.unstable_UserBlockingPriority,qC=Wo.unstable_NormalPriority,_1=Wo.unstable_LowPriority,oV=Wo.unstable_IdlePriority,iu=null,Xi=null;function O1(e){if(Xi&&typeof Xi.onCommitFiberRoot=="function")try{Xi.onCommitFiberRoot(iu,e,void 0,(e.current.flags&128)===128)}catch{}}var di=Math.clz32?Math.clz32:eH,q1=Math.log,$1=Math.LN2;function eH(e){return e>>>=0,e===0?32:31-(q1(e)/$1|0)|0}var Uc=64,Dc=4194304;function Ka(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $C(e,t){var n=e.pendingLanes;if(n===0)return 0;var o=0,i=e.suspendedLanes,s=e.pingedLanes,r=n&268435455;if(r!==0){var I=r&~i;I!==0?o=Ka(I):(s&=r,s!==0&&(o=Ka(s)))}else r=n&~i,r!==0?o=Ka(r):s!==0&&(o=Ka(s));if(o===0)return 0;if(t!==0&&t!==o&&!(t&i)&&(i=o&-o,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(o&4&&(o|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)n=31-di(t),i=1<<n,o|=e[n],t&=~i;return o}function tH(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nH(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var r=31-di(s),I=1<<r,a=i[r];a===-1?(!(I&n)||I&o)&&(i[r]=tH(I,t)):a<=t&&(e.expiredLanes|=I),s&=~I}}function Qh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function iV(){var e=Uc;return Uc<<=1,!(Uc&4194240)&&(Uc=64),e}function Wm(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function PI(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-di(t),e[t]=n}function oH(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-di(n),s=1<<i;t[i]=0,o[i]=-1,e[i]=-1,n&=~s}}function Yb(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-di(n),i=1<<o;i&t|e[o]&t&&(e[o]|=t),n&=~i}}var ct=0;function gV(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var sV,Hb,rV,lV,aV,Ph=!1,Qc=[],xg=null,Ng=null,Fg=null,dI=new Map,uI=new Map,Rg=[],iH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vy(e,t){switch(e){case"focusin":case"focusout":xg=null;break;case"dragenter":case"dragleave":Ng=null;break;case"mouseover":case"mouseout":Fg=null;break;case"pointerover":case"pointerout":dI.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":uI.delete(t.pointerId)}}function ba(e,t,n,o,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:s,targetContainers:[i]},t!==null&&(t=_I(t),t!==null&&Hb(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function gH(e,t,n,o,i){switch(t){case"focusin":return xg=ba(xg,e,t,n,o,i),!0;case"dragenter":return Ng=ba(Ng,e,t,n,o,i),!0;case"mouseover":return Fg=ba(Fg,e,t,n,o,i),!0;case"pointerover":var s=i.pointerId;return dI.set(s,ba(dI.get(s)||null,e,t,n,o,i)),!0;case"gotpointercapture":return s=i.pointerId,uI.set(s,ba(uI.get(s)||null,e,t,n,o,i)),!0}return!1}function IV(e){var t=vs(e.target);if(t!==null){var n=tr(t);if(n!==null){if(t=n.tag,t===13){if(t=qW(n),t!==null){e.blockedOn=t,aV(e.priority,function(){rV(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fC(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=jh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);zh=o,n.target.dispatchEvent(o),zh=null}else return t=_I(n),t!==null&&Hb(t),e.blockedOn=n,!1;t.shift()}return!0}function Wy(e,t,n){fC(e)&&n.delete(t)}function sH(){Ph=!1,xg!==null&&fC(xg)&&(xg=null),Ng!==null&&fC(Ng)&&(Ng=null),Fg!==null&&fC(Fg)&&(Fg=null),dI.forEach(Wy),uI.forEach(Wy)}function fa(e,t){e.blockedOn===t&&(e.blockedOn=null,Ph||(Ph=!0,Wo.unstable_scheduleCallback(Wo.unstable_NormalPriority,sH)))}function AI(e){function t(i){return fa(i,e)}if(0<Qc.length){fa(Qc[0],e);for(var n=1;n<Qc.length;n++){var o=Qc[n];o.blockedOn===e&&(o.blockedOn=null)}}for(xg!==null&&fa(xg,e),Ng!==null&&fa(Ng,e),Fg!==null&&fa(Fg,e),dI.forEach(t),uI.forEach(t),n=0;n<Rg.length;n++)o=Rg[n],o.blockedOn===e&&(o.blockedOn=null);for(;0<Rg.length&&(n=Rg[0],n.blockedOn===null);)IV(n),n.blockedOn===null&&Rg.shift()}var sl=ug.ReactCurrentBatchConfig,ed=!0;function rH(e,t,n,o){var i=ct,s=sl.transition;sl.transition=null;try{ct=1,xb(e,t,n,o)}finally{ct=i,sl.transition=s}}function lH(e,t,n,o){var i=ct,s=sl.transition;sl.transition=null;try{ct=4,xb(e,t,n,o)}finally{ct=i,sl.transition=s}}function xb(e,t,n,o){if(ed){var i=jh(e,t,n,o);if(i===null)Nm(e,t,o,td,n),vy(e,o);else if(gH(i,e,t,n,o))o.stopPropagation();else if(vy(e,o),t&4&&-1<iH.indexOf(e)){for(;i!==null;){var s=_I(i);if(s!==null&&sV(s),s=jh(e,t,n,o),s===null&&Nm(e,t,o,td,n),s===i)break;i=s}i!==null&&o.stopPropagation()}else Nm(e,t,o,null,n)}}var td=null;function jh(e,t,n,o){if(td=null,e=Xb(o),e=vs(e),e!==null)if(t=tr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=qW(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return td=e,null}function cV(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(j1()){case Jb:return 1;case nV:return 4;case qC:case _1:return 16;case oV:return 536870912;default:return 16}default:return 16}}var wg=null,Nb=null,ZC=null;function CV(){if(ZC)return ZC;var e,t=Nb,n=t.length,o,i="value"in wg?wg.value:wg.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var r=n-e;for(o=1;o<=r&&t[n-o]===i[s-o];o++);return ZC=i.slice(e,1<o?1-o:void 0)}function yC(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Pc(){return!0}function Vy(){return!1}function wo(e){function t(n,o,i,s,r){this._reactName=n,this._targetInst=i,this.type=o,this.nativeEvent=s,this.target=r,this.currentTarget=null;for(var I in e)e.hasOwnProperty(I)&&(n=e[I],this[I]=n?n(s):s[I]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Pc:Vy,this.isPropagationStopped=Vy,this}return Nt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pc)},persist:function(){},isPersistent:Pc}),t}var Ml={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fb=wo(Ml),jI=Nt({},Ml,{view:0,detail:0}),aH=wo(jI),Vm,Rm,Za,gu=Nt({},jI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kb,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Za&&(Za&&e.type==="mousemove"?(Vm=e.screenX-Za.screenX,Rm=e.screenY-Za.screenY):Rm=Vm=0,Za=e),Vm)},movementY:function(e){return"movementY"in e?e.movementY:Rm}}),Ry=wo(gu),IH=Nt({},gu,{dataTransfer:0}),cH=wo(IH),CH=Nt({},jI,{relatedTarget:0}),km=wo(CH),dH=Nt({},Ml,{animationName:0,elapsedTime:0,pseudoElement:0}),uH=wo(dH),AH=Nt({},Ml,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mH=wo(AH),hH=Nt({},Ml,{data:0}),ky=wo(hH),pH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZH(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fH[e])?!!t[e]:!1}function Kb(){return ZH}var yH=Nt({},jI,{key:function(e){if(e.key){var t=pH[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yC(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bH[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kb,charCode:function(e){return e.type==="keypress"?yC(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yC(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),GH=wo(yH),BH=Nt({},gu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wy=wo(BH),SH=Nt({},jI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kb}),vH=wo(SH),WH=Nt({},Ml,{propertyName:0,elapsedTime:0,pseudoElement:0}),VH=wo(WH),RH=Nt({},gu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kH=wo(RH),wH=[9,13,27,32],Eb=lg&&"CompositionEvent"in window,_a=null;lg&&"documentMode"in document&&(_a=document.documentMode);var XH=lg&&"TextEvent"in window&&!_a,dV=lg&&(!Eb||_a&&8<_a&&11>=_a),Xy=" ",Jy=!1;function uV(e,t){switch(e){case"keyup":return wH.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AV(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fr=!1;function JH(e,t){switch(e){case"compositionend":return AV(t);case"keypress":return t.which!==32?null:(Jy=!0,Xy);case"textInput":return e=t.data,e===Xy&&Jy?null:e;default:return null}}function YH(e,t){if(Fr)return e==="compositionend"||!Eb&&uV(e,t)?(e=CV(),ZC=Nb=wg=null,Fr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dV&&t.locale!=="ko"?null:t.data;default:return null}}var HH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!HH[e.type]:t==="textarea"}function mV(e,t,n,o){QW(o),t=nd(t,"onChange"),0<t.length&&(n=new Fb("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var Oa=null,mI=null;function xH(e){WV(e,0)}function su(e){var t=Mr(e);if(EW(t))return e}function NH(e,t){if(e==="change")return t}var hV=!1;if(lg){var wm;if(lg){var Xm="oninput"in document;if(!Xm){var Hy=document.createElement("div");Hy.setAttribute("oninput","return;"),Xm=typeof Hy.oninput=="function"}wm=Xm}else wm=!1;hV=wm&&(!document.documentMode||9<document.documentMode)}function xy(){Oa&&(Oa.detachEvent("onpropertychange",pV),mI=Oa=null)}function pV(e){if(e.propertyName==="value"&&su(mI)){var t=[];mV(t,mI,e,Xb(e)),OW(xH,t)}}function FH(e,t,n){e==="focusin"?(xy(),Oa=t,mI=n,Oa.attachEvent("onpropertychange",pV)):e==="focusout"&&xy()}function KH(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return su(mI)}function EH(e,t){if(e==="click")return su(t)}function MH(e,t){if(e==="input"||e==="change")return su(t)}function LH(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mi=typeof Object.is=="function"?Object.is:LH;function hI(e,t){if(mi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var i=n[o];if(!wh.call(t,i)||!mi(e[i],t[i]))return!1}return!0}function Ny(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fy(e,t){var n=Ny(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ny(n)}}function bV(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bV(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function fV(){for(var e=window,t=jC();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=jC(e.document)}return t}function Mb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function zH(e){var t=fV(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&bV(n.ownerDocument.documentElement,n)){if(o!==null&&Mb(n)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(o.start,i);o=o.end===void 0?s:Math.min(o.end,i),!e.extend&&s>o&&(i=o,o=s,s=i),i=Fy(n,s);var r=Fy(n,o);i&&r&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==r.node||e.focusOffset!==r.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>o?(e.addRange(t),e.extend(r.node,r.offset)):(t.setEnd(r.node,r.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var TH=lg&&"documentMode"in document&&11>=document.documentMode,Kr=null,_h=null,qa=null,Oh=!1;function Ky(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Oh||Kr==null||Kr!==jC(o)||(o=Kr,"selectionStart"in o&&Mb(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),qa&&hI(qa,o)||(qa=o,o=nd(_h,"onSelect"),0<o.length&&(t=new Fb("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=Kr)))}function jc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:jc("Animation","AnimationEnd"),animationiteration:jc("Animation","AnimationIteration"),animationstart:jc("Animation","AnimationStart"),transitionend:jc("Transition","TransitionEnd")},Jm={},ZV={};lg&&(ZV=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);function ru(e){if(Jm[e])return Jm[e];if(!Er[e])return e;var t=Er[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ZV)return Jm[e]=t[n];return e}var yV=ru("animationend"),GV=ru("animationiteration"),BV=ru("animationstart"),SV=ru("transitionend"),vV=new Map,Ey="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Og(e,t){vV.set(e,t),er(t,[e])}for(var Ym=0;Ym<Ey.length;Ym++){var Hm=Ey[Ym],UH=Hm.toLowerCase(),DH=Hm[0].toUpperCase()+Hm.slice(1);Og(UH,"on"+DH)}Og(yV,"onAnimationEnd");Og(GV,"onAnimationIteration");Og(BV,"onAnimationStart");Og("dblclick","onDoubleClick");Og("focusin","onFocus");Og("focusout","onBlur");Og(SV,"onTransitionEnd");ul("onMouseEnter",["mouseout","mouseover"]);ul("onMouseLeave",["mouseout","mouseover"]);ul("onPointerEnter",["pointerout","pointerover"]);ul("onPointerLeave",["pointerout","pointerover"]);er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));er("onBeforeInput",["compositionend","keypress","textInput","paste"]);er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ea));function My(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,U1(o,t,void 0,e),e.currentTarget=null}function WV(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],i=o.event;o=o.listeners;e:{var s=void 0;if(t)for(var r=o.length-1;0<=r;r--){var I=o[r],a=I.instance,c=I.currentTarget;if(I=I.listener,a!==s&&i.isPropagationStopped())break e;My(i,I,c),s=a}else for(r=0;r<o.length;r++){if(I=o[r],a=I.instance,c=I.currentTarget,I=I.listener,a!==s&&i.isPropagationStopped())break e;My(i,I,c),s=a}}}if(OC)throw e=Dh,OC=!1,Dh=null,e}function St(e,t){var n=t[np];n===void 0&&(n=t[np]=new Set);var o=e+"__bubble";n.has(o)||(VV(t,e,2,!1),n.add(o))}function xm(e,t,n){var o=0;t&&(o|=4),VV(n,e,o,t)}var _c="_reactListening"+Math.random().toString(36).slice(2);function pI(e){if(!e[_c]){e[_c]=!0,HW.forEach(function(n){n!=="selectionchange"&&(QH.has(n)||xm(n,!1,e),xm(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_c]||(t[_c]=!0,xm("selectionchange",!1,t))}}function VV(e,t,n,o){switch(cV(t)){case 1:var i=rH;break;case 4:i=lH;break;default:i=xb}n=i.bind(null,t,n,e),i=void 0,!Uh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),o?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Nm(e,t,n,o,i){var s=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var r=o.tag;if(r===3||r===4){var I=o.stateNode.containerInfo;if(I===i||I.nodeType===8&&I.parentNode===i)break;if(r===4)for(r=o.return;r!==null;){var a=r.tag;if((a===3||a===4)&&(a=r.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;r=r.return}for(;I!==null;){if(r=vs(I),r===null)return;if(a=r.tag,a===5||a===6){o=s=r;continue e}I=I.parentNode}}o=o.return}OW(function(){var c=s,C=Xb(n),A=[];e:{var m=vV.get(e);if(m!==void 0){var p=Fb,b=e;switch(e){case"keypress":if(yC(n)===0)break e;case"keydown":case"keyup":p=GH;break;case"focusin":b="focus",p=km;break;case"focusout":b="blur",p=km;break;case"beforeblur":case"afterblur":p=km;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Ry;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=cH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=vH;break;case yV:case GV:case BV:p=uH;break;case SV:p=VH;break;case"scroll":p=aH;break;case"wheel":p=kH;break;case"copy":case"cut":case"paste":p=mH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=wy}var Z=(t&4)!==0,v=!Z&&e==="scroll",f=Z?m!==null?m+"Capture":null:m;Z=[];for(var G=c,y;G!==null;){y=G;var W=y.stateNode;if(y.tag===5&&W!==null&&(y=W,f!==null&&(W=CI(G,f),W!=null&&Z.push(bI(G,W,y)))),v)break;G=G.return}0<Z.length&&(m=new p(m,b,null,n,C),A.push({event:m,listeners:Z}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&n!==zh&&(b=n.relatedTarget||n.fromElement)&&(vs(b)||b[ag]))break e;if((p||m)&&(m=C.window===C?C:(m=C.ownerDocument)?m.defaultView||m.parentWindow:window,p?(b=n.relatedTarget||n.toElement,p=c,b=b?vs(b):null,b!==null&&(v=tr(b),b!==v||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=c),p!==b)){if(Z=Ry,W="onMouseLeave",f="onMouseEnter",G="mouse",(e==="pointerout"||e==="pointerover")&&(Z=wy,W="onPointerLeave",f="onPointerEnter",G="pointer"),v=p==null?m:Mr(p),y=b==null?m:Mr(b),m=new Z(W,G+"leave",p,n,C),m.target=v,m.relatedTarget=y,W=null,vs(C)===c&&(Z=new Z(f,G+"enter",b,n,C),Z.target=y,Z.relatedTarget=v,W=Z),v=W,p&&b)t:{for(Z=p,f=b,G=0,y=Z;y;y=Gr(y))G++;for(y=0,W=f;W;W=Gr(W))y++;for(;0<G-y;)Z=Gr(Z),G--;for(;0<y-G;)f=Gr(f),y--;for(;G--;){if(Z===f||f!==null&&Z===f.alternate)break t;Z=Gr(Z),f=Gr(f)}Z=null}else Z=null;p!==null&&Ly(A,m,p,Z,!1),b!==null&&v!==null&&Ly(A,v,b,Z,!0)}}e:{if(m=c?Mr(c):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var V=NH;else if(Yy(m))if(hV)V=MH;else{V=KH;var X=FH}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(V=EH);if(V&&(V=V(e,c))){mV(A,V,n,C);break e}X&&X(e,m,c),e==="focusout"&&(X=m._wrapperState)&&X.controlled&&m.type==="number"&&Fh(m,"number",m.value)}switch(X=c?Mr(c):window,e){case"focusin":(Yy(X)||X.contentEditable==="true")&&(Kr=X,_h=c,qa=null);break;case"focusout":qa=_h=Kr=null;break;case"mousedown":Oh=!0;break;case"contextmenu":case"mouseup":case"dragend":Oh=!1,Ky(A,n,C);break;case"selectionchange":if(TH)break;case"keydown":case"keyup":Ky(A,n,C)}var R;if(Eb)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Fr?uV(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(dV&&n.locale!=="ko"&&(Fr||k!=="onCompositionStart"?k==="onCompositionEnd"&&Fr&&(R=CV()):(wg=C,Nb="value"in wg?wg.value:wg.textContent,Fr=!0)),X=nd(c,k),0<X.length&&(k=new ky(k,e,null,n,C),A.push({event:k,listeners:X}),R?k.data=R:(R=AV(n),R!==null&&(k.data=R)))),(R=XH?JH(e,n):YH(e,n))&&(c=nd(c,"onBeforeInput"),0<c.length&&(C=new ky("onBeforeInput","beforeinput",null,n,C),A.push({event:C,listeners:c}),C.data=R))}WV(A,t)})}function bI(e,t,n){return{instance:e,listener:t,currentTarget:n}}function nd(e,t){for(var n=t+"Capture",o=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=CI(e,n),s!=null&&o.unshift(bI(e,s,i)),s=CI(e,t),s!=null&&o.push(bI(e,s,i))),e=e.return}return o}function Gr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ly(e,t,n,o,i){for(var s=t._reactName,r=[];n!==null&&n!==o;){var I=n,a=I.alternate,c=I.stateNode;if(a!==null&&a===o)break;I.tag===5&&c!==null&&(I=c,i?(a=CI(n,s),a!=null&&r.unshift(bI(n,a,I))):i||(a=CI(n,s),a!=null&&r.push(bI(n,a,I)))),n=n.return}r.length!==0&&e.push({event:t,listeners:r})}var PH=/\r\n?/g,jH=/\u0000|\uFFFD/g;function zy(e){return(typeof e=="string"?e:""+e).replace(PH,`
`).replace(jH,"")}function Oc(e,t,n){if(t=zy(t),zy(e)!==t&&n)throw Error(oe(425))}function od(){}var qh=null,$h=null;function ep(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var tp=typeof setTimeout=="function"?setTimeout:void 0,_H=typeof clearTimeout=="function"?clearTimeout:void 0,Ty=typeof Promise=="function"?Promise:void 0,OH=typeof queueMicrotask=="function"?queueMicrotask:typeof Ty<"u"?function(e){return Ty.resolve(null).then(e).catch(qH)}:tp;function qH(e){setTimeout(function(){throw e})}function Fm(e,t){var n=t,o=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(o===0){e.removeChild(i),AI(t);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=i}while(n);AI(t)}function Kg(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Uy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ll=Math.random().toString(36).slice(2),wi="__reactFiber$"+Ll,fI="__reactProps$"+Ll,ag="__reactContainer$"+Ll,np="__reactEvents$"+Ll,$H="__reactListeners$"+Ll,ex="__reactHandles$"+Ll;function vs(e){var t=e[wi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ag]||n[wi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Uy(e);e!==null;){if(n=e[wi])return n;e=Uy(e)}return t}e=n,n=e.parentNode}return null}function _I(e){return e=e[wi]||e[ag],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(oe(33))}function lu(e){return e[fI]||null}var op=[],Lr=-1;function qg(e){return{current:e}}function Wt(e){0>Lr||(e.current=op[Lr],op[Lr]=null,Lr--)}function yt(e,t){Lr++,op[Lr]=e.current,e.current=t}var Dg={},Fn=qg(Dg),so=qg(!1),zs=Dg;function Al(e,t){var n=e.type.contextTypes;if(!n)return Dg;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ro(e){return e=e.childContextTypes,e!=null}function id(){Wt(so),Wt(Fn)}function Dy(e,t,n){if(Fn.current!==Dg)throw Error(oe(168));yt(Fn,t),yt(so,n)}function RV(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var i in o)if(!(i in t))throw Error(oe(108,F1(e)||"Unknown",i));return Nt({},n,o)}function gd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Dg,zs=Fn.current,yt(Fn,e),yt(so,so.current),!0}function Qy(e,t,n){var o=e.stateNode;if(!o)throw Error(oe(169));n?(e=RV(e,t,zs),o.__reactInternalMemoizedMergedChildContext=e,Wt(so),Wt(Fn),yt(Fn,e)):Wt(so),yt(so,n)}var ji=null,au=!1,Km=!1;function kV(e){ji===null?ji=[e]:ji.push(e)}function tx(e){au=!0,kV(e)}function $g(){if(!Km&&ji!==null){Km=!0;var e=0,t=ct;try{var n=ji;for(ct=1;e<n.length;e++){var o=n[e];do o=o(!0);while(o!==null)}ji=null,au=!1}catch(i){throw ji!==null&&(ji=ji.slice(e+1)),tV(Jb,$g),i}finally{ct=t,Km=!1}}return null}var zr=[],Tr=0,sd=null,rd=0,To=[],Uo=0,Ts=null,Oi=1,qi="";function bs(e,t){zr[Tr++]=rd,zr[Tr++]=sd,sd=e,rd=t}function wV(e,t,n){To[Uo++]=Oi,To[Uo++]=qi,To[Uo++]=Ts,Ts=e;var o=Oi;e=qi;var i=32-di(o)-1;o&=~(1<<i),n+=1;var s=32-di(t)+i;if(30<s){var r=i-i%5;s=(o&(1<<r)-1).toString(32),o>>=r,i-=r,Oi=1<<32-di(t)+i|n<<i|o,qi=s+e}else Oi=1<<s|n<<i|o,qi=e}function Lb(e){e.return!==null&&(bs(e,1),wV(e,1,0))}function zb(e){for(;e===sd;)sd=zr[--Tr],zr[Tr]=null,rd=zr[--Tr],zr[Tr]=null;for(;e===Ts;)Ts=To[--Uo],To[Uo]=null,qi=To[--Uo],To[Uo]=null,Oi=To[--Uo],To[Uo]=null}var Bo=null,Go=null,kt=!1,Ci=null;function XV(e,t){var n=Po(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Py(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Bo=e,Go=Kg(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Bo=e,Go=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ts!==null?{id:Oi,overflow:qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Po(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Bo=e,Go=null,!0):!1;default:return!1}}function ip(e){return(e.mode&1)!==0&&(e.flags&128)===0}function gp(e){if(kt){var t=Go;if(t){var n=t;if(!Py(e,t)){if(ip(e))throw Error(oe(418));t=Kg(n.nextSibling);var o=Bo;t&&Py(e,t)?XV(o,n):(e.flags=e.flags&-4097|2,kt=!1,Bo=e)}}else{if(ip(e))throw Error(oe(418));e.flags=e.flags&-4097|2,kt=!1,Bo=e}}}function jy(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Bo=e}function qc(e){if(e!==Bo)return!1;if(!kt)return jy(e),kt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ep(e.type,e.memoizedProps)),t&&(t=Go)){if(ip(e))throw JV(),Error(oe(418));for(;t;)XV(e,t),t=Kg(t.nextSibling)}if(jy(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(oe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Go=Kg(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Go=null}}else Go=Bo?Kg(e.stateNode.nextSibling):null;return!0}function JV(){for(var e=Go;e;)e=Kg(e.nextSibling)}function ml(){Go=Bo=null,kt=!1}function Tb(e){Ci===null?Ci=[e]:Ci.push(e)}var nx=ug.ReactCurrentBatchConfig;function ya(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var o=n.stateNode}if(!o)throw Error(oe(147,e));var i=o,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(r){var I=i.refs;r===null?delete I[s]:I[s]=r},t._stringRef=s,t)}if(typeof e!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,e))}return e}function $c(e,t){throw e=Object.prototype.toString.call(t),Error(oe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _y(e){var t=e._init;return t(e._payload)}function YV(e){function t(f,G){if(e){var y=f.deletions;y===null?(f.deletions=[G],f.flags|=16):y.push(G)}}function n(f,G){if(!e)return null;for(;G!==null;)t(f,G),G=G.sibling;return null}function o(f,G){for(f=new Map;G!==null;)G.key!==null?f.set(G.key,G):f.set(G.index,G),G=G.sibling;return f}function i(f,G){return f=zg(f,G),f.index=0,f.sibling=null,f}function s(f,G,y){return f.index=y,e?(y=f.alternate,y!==null?(y=y.index,y<G?(f.flags|=2,G):y):(f.flags|=2,G)):(f.flags|=1048576,G)}function r(f){return e&&f.alternate===null&&(f.flags|=2),f}function I(f,G,y,W){return G===null||G.tag!==6?(G=Dm(y,f.mode,W),G.return=f,G):(G=i(G,y),G.return=f,G)}function a(f,G,y,W){var V=y.type;return V===Nr?C(f,G,y.props.children,W,y.key):G!==null&&(G.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Wg&&_y(V)===G.type)?(W=i(G,y.props),W.ref=ya(f,G,y),W.return=f,W):(W=RC(y.type,y.key,y.props,null,f.mode,W),W.ref=ya(f,G,y),W.return=f,W)}function c(f,G,y,W){return G===null||G.tag!==4||G.stateNode.containerInfo!==y.containerInfo||G.stateNode.implementation!==y.implementation?(G=Qm(y,f.mode,W),G.return=f,G):(G=i(G,y.children||[]),G.return=f,G)}function C(f,G,y,W,V){return G===null||G.tag!==7?(G=xs(y,f.mode,W,V),G.return=f,G):(G=i(G,y),G.return=f,G)}function A(f,G,y){if(typeof G=="string"&&G!==""||typeof G=="number")return G=Dm(""+G,f.mode,y),G.return=f,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Lc:return y=RC(G.type,G.key,G.props,null,f.mode,y),y.ref=ya(f,null,G),y.return=f,y;case xr:return G=Qm(G,f.mode,y),G.return=f,G;case Wg:var W=G._init;return A(f,W(G._payload),y)}if(Fa(G)||ha(G))return G=xs(G,f.mode,y,null),G.return=f,G;$c(f,G)}return null}function m(f,G,y,W){var V=G!==null?G.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return V!==null?null:I(f,G,""+y,W);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Lc:return y.key===V?a(f,G,y,W):null;case xr:return y.key===V?c(f,G,y,W):null;case Wg:return V=y._init,m(f,G,V(y._payload),W)}if(Fa(y)||ha(y))return V!==null?null:C(f,G,y,W,null);$c(f,y)}return null}function p(f,G,y,W,V){if(typeof W=="string"&&W!==""||typeof W=="number")return f=f.get(y)||null,I(G,f,""+W,V);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Lc:return f=f.get(W.key===null?y:W.key)||null,a(G,f,W,V);case xr:return f=f.get(W.key===null?y:W.key)||null,c(G,f,W,V);case Wg:var X=W._init;return p(f,G,y,X(W._payload),V)}if(Fa(W)||ha(W))return f=f.get(y)||null,C(G,f,W,V,null);$c(G,W)}return null}function b(f,G,y,W){for(var V=null,X=null,R=G,k=G=0,F=null;R!==null&&k<y.length;k++){R.index>k?(F=R,R=null):F=R.sibling;var x=m(f,R,y[k],W);if(x===null){R===null&&(R=F);break}e&&R&&x.alternate===null&&t(f,R),G=s(x,G,k),X===null?V=x:X.sibling=x,X=x,R=F}if(k===y.length)return n(f,R),kt&&bs(f,k),V;if(R===null){for(;k<y.length;k++)R=A(f,y[k],W),R!==null&&(G=s(R,G,k),X===null?V=R:X.sibling=R,X=R);return kt&&bs(f,k),V}for(R=o(f,R);k<y.length;k++)F=p(R,f,k,y[k],W),F!==null&&(e&&F.alternate!==null&&R.delete(F.key===null?k:F.key),G=s(F,G,k),X===null?V=F:X.sibling=F,X=F);return e&&R.forEach(function(M){return t(f,M)}),kt&&bs(f,k),V}function Z(f,G,y,W){var V=ha(y);if(typeof V!="function")throw Error(oe(150));if(y=V.call(y),y==null)throw Error(oe(151));for(var X=V=null,R=G,k=G=0,F=null,x=y.next();R!==null&&!x.done;k++,x=y.next()){R.index>k?(F=R,R=null):F=R.sibling;var M=m(f,R,x.value,W);if(M===null){R===null&&(R=F);break}e&&R&&M.alternate===null&&t(f,R),G=s(M,G,k),X===null?V=M:X.sibling=M,X=M,R=F}if(x.done)return n(f,R),kt&&bs(f,k),V;if(R===null){for(;!x.done;k++,x=y.next())x=A(f,x.value,W),x!==null&&(G=s(x,G,k),X===null?V=x:X.sibling=x,X=x);return kt&&bs(f,k),V}for(R=o(f,R);!x.done;k++,x=y.next())x=p(R,f,k,x.value,W),x!==null&&(e&&x.alternate!==null&&R.delete(x.key===null?k:x.key),G=s(x,G,k),X===null?V=x:X.sibling=x,X=x);return e&&R.forEach(function(Q){return t(f,Q)}),kt&&bs(f,k),V}function v(f,G,y,W){if(typeof y=="object"&&y!==null&&y.type===Nr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Lc:e:{for(var V=y.key,X=G;X!==null;){if(X.key===V){if(V=y.type,V===Nr){if(X.tag===7){n(f,X.sibling),G=i(X,y.props.children),G.return=f,f=G;break e}}else if(X.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Wg&&_y(V)===X.type){n(f,X.sibling),G=i(X,y.props),G.ref=ya(f,X,y),G.return=f,f=G;break e}n(f,X);break}else t(f,X);X=X.sibling}y.type===Nr?(G=xs(y.props.children,f.mode,W,y.key),G.return=f,f=G):(W=RC(y.type,y.key,y.props,null,f.mode,W),W.ref=ya(f,G,y),W.return=f,f=W)}return r(f);case xr:e:{for(X=y.key;G!==null;){if(G.key===X)if(G.tag===4&&G.stateNode.containerInfo===y.containerInfo&&G.stateNode.implementation===y.implementation){n(f,G.sibling),G=i(G,y.children||[]),G.return=f,f=G;break e}else{n(f,G);break}else t(f,G);G=G.sibling}G=Qm(y,f.mode,W),G.return=f,f=G}return r(f);case Wg:return X=y._init,v(f,G,X(y._payload),W)}if(Fa(y))return b(f,G,y,W);if(ha(y))return Z(f,G,y,W);$c(f,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,G!==null&&G.tag===6?(n(f,G.sibling),G=i(G,y),G.return=f,f=G):(n(f,G),G=Dm(y,f.mode,W),G.return=f,f=G),r(f)):n(f,G)}return v}var hl=YV(!0),HV=YV(!1),ld=qg(null),ad=null,Ur=null,Ub=null;function Db(){Ub=Ur=ad=null}function Qb(e){var t=ld.current;Wt(ld),e._currentValue=t}function sp(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function rl(e,t){ad=e,Ub=Ur=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(oo=!0),e.firstContext=null)}function _o(e){var t=e._currentValue;if(Ub!==e)if(e={context:e,memoizedValue:t,next:null},Ur===null){if(ad===null)throw Error(oe(308));Ur=e,ad.dependencies={lanes:0,firstContext:e}}else Ur=Ur.next=e;return t}var Ws=null;function Pb(e){Ws===null?Ws=[e]:Ws.push(e)}function xV(e,t,n,o){var i=t.interleaved;return i===null?(n.next=n,Pb(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ig(e,o)}function Ig(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Vg=!1;function jb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function NV(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function eg(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Eg(e,t,n){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,$e&2){var i=o.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),o.pending=t,Ig(e,n)}return i=o.interleaved,i===null?(t.next=t,Pb(o)):(t.next=i.next,i.next=t),o.interleaved=t,Ig(e,n)}function GC(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,Yb(e,n)}}function Oy(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var r={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=r:s=s.next=r,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:o.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:o.shared,effects:o.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Id(e,t,n,o){var i=e.updateQueue;Vg=!1;var s=i.firstBaseUpdate,r=i.lastBaseUpdate,I=i.shared.pending;if(I!==null){i.shared.pending=null;var a=I,c=a.next;a.next=null,r===null?s=c:r.next=c,r=a;var C=e.alternate;C!==null&&(C=C.updateQueue,I=C.lastBaseUpdate,I!==r&&(I===null?C.firstBaseUpdate=c:I.next=c,C.lastBaseUpdate=a))}if(s!==null){var A=i.baseState;r=0,C=c=a=null,I=s;do{var m=I.lane,p=I.eventTime;if((o&m)===m){C!==null&&(C=C.next={eventTime:p,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var b=e,Z=I;switch(m=t,p=n,Z.tag){case 1:if(b=Z.payload,typeof b=="function"){A=b.call(p,A,m);break e}A=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=Z.payload,m=typeof b=="function"?b.call(p,A,m):b,m==null)break e;A=Nt({},A,m);break e;case 2:Vg=!0}}I.callback!==null&&I.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[I]:m.push(I))}else p={eventTime:p,lane:m,tag:I.tag,payload:I.payload,callback:I.callback,next:null},C===null?(c=C=p,a=A):C=C.next=p,r|=m;if(I=I.next,I===null){if(I=i.shared.pending,I===null)break;m=I,I=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(C===null&&(a=A),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=C,t=i.shared.interleaved,t!==null){i=t;do r|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Ds|=r,e.lanes=r,e.memoizedState=A}}function qy(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],i=o.callback;if(i!==null){if(o.callback=null,o=n,typeof i!="function")throw Error(oe(191,i));i.call(o)}}}var OI={},Ji=qg(OI),ZI=qg(OI),yI=qg(OI);function Vs(e){if(e===OI)throw Error(oe(174));return e}function _b(e,t){switch(yt(yI,t),yt(ZI,e),yt(Ji,OI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Eh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Eh(t,e)}Wt(Ji),yt(Ji,t)}function pl(){Wt(Ji),Wt(ZI),Wt(yI)}function FV(e){Vs(yI.current);var t=Vs(Ji.current),n=Eh(t,e.type);t!==n&&(yt(ZI,e),yt(Ji,n))}function Ob(e){ZI.current===e&&(Wt(Ji),Wt(ZI))}var Yt=qg(0);function cd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Em=[];function qb(){for(var e=0;e<Em.length;e++)Em[e]._workInProgressVersionPrimary=null;Em.length=0}var BC=ug.ReactCurrentDispatcher,Mm=ug.ReactCurrentBatchConfig,Us=0,xt=null,sn=null,un=null,Cd=!1,$a=!1,GI=0,ox=0;function kn(){throw Error(oe(321))}function $b(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!mi(e[n],t[n]))return!1;return!0}function ef(e,t,n,o,i,s){if(Us=s,xt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,BC.current=e===null||e.memoizedState===null?rx:lx,e=n(o,i),$a){s=0;do{if($a=!1,GI=0,25<=s)throw Error(oe(301));s+=1,un=sn=null,t.updateQueue=null,BC.current=ax,e=n(o,i)}while($a)}if(BC.current=dd,t=sn!==null&&sn.next!==null,Us=0,un=sn=xt=null,Cd=!1,t)throw Error(oe(300));return e}function tf(){var e=GI!==0;return GI=0,e}function vi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?xt.memoizedState=un=e:un=un.next=e,un}function Oo(){if(sn===null){var e=xt.alternate;e=e!==null?e.memoizedState:null}else e=sn.next;var t=un===null?xt.memoizedState:un.next;if(t!==null)un=t,sn=e;else{if(e===null)throw Error(oe(310));sn=e,e={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},un===null?xt.memoizedState=un=e:un=un.next=e}return un}function BI(e,t){return typeof t=="function"?t(e):t}function Lm(e){var t=Oo(),n=t.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=e;var o=sn,i=o.baseQueue,s=n.pending;if(s!==null){if(i!==null){var r=i.next;i.next=s.next,s.next=r}o.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,o=o.baseState;var I=r=null,a=null,c=s;do{var C=c.lane;if((Us&C)===C)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),o=c.hasEagerState?c.eagerState:e(o,c.action);else{var A={lane:C,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(I=a=A,r=o):a=a.next=A,xt.lanes|=C,Ds|=C}c=c.next}while(c!==null&&c!==s);a===null?r=o:a.next=I,mi(o,t.memoizedState)||(oo=!0),t.memoizedState=o,t.baseState=r,t.baseQueue=a,n.lastRenderedState=o}if(e=n.interleaved,e!==null){i=e;do s=i.lane,xt.lanes|=s,Ds|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function zm(e){var t=Oo(),n=t.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=e;var o=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var r=i=i.next;do s=e(s,r.action),r=r.next;while(r!==i);mi(s,t.memoizedState)||(oo=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,o]}function KV(){}function EV(e,t){var n=xt,o=Oo(),i=t(),s=!mi(o.memoizedState,i);if(s&&(o.memoizedState=i,oo=!0),o=o.queue,nf(zV.bind(null,n,o,e),[e]),o.getSnapshot!==t||s||un!==null&&un.memoizedState.tag&1){if(n.flags|=2048,SI(9,LV.bind(null,n,o,i,t),void 0,null),hn===null)throw Error(oe(349));Us&30||MV(n,t,i)}return i}function MV(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xt.updateQueue,t===null?(t={lastEffect:null,stores:null},xt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function LV(e,t,n,o){t.value=n,t.getSnapshot=o,TV(t)&&UV(e)}function zV(e,t,n){return n(function(){TV(t)&&UV(e)})}function TV(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!mi(e,n)}catch{return!0}}function UV(e){var t=Ig(e,1);t!==null&&ui(t,e,1,-1)}function $y(e){var t=vi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:BI,lastRenderedState:e},t.queue=e,e=e.dispatch=sx.bind(null,xt,e),[t.memoizedState,e]}function SI(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},t=xt.updateQueue,t===null?(t={lastEffect:null,stores:null},xt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e)),e}function DV(){return Oo().memoizedState}function SC(e,t,n,o){var i=vi();xt.flags|=e,i.memoizedState=SI(1|t,n,void 0,o===void 0?null:o)}function Iu(e,t,n,o){var i=Oo();o=o===void 0?null:o;var s=void 0;if(sn!==null){var r=sn.memoizedState;if(s=r.destroy,o!==null&&$b(o,r.deps)){i.memoizedState=SI(t,n,s,o);return}}xt.flags|=e,i.memoizedState=SI(1|t,n,s,o)}function eG(e,t){return SC(8390656,8,e,t)}function nf(e,t){return Iu(2048,8,e,t)}function QV(e,t){return Iu(4,2,e,t)}function PV(e,t){return Iu(4,4,e,t)}function jV(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _V(e,t,n){return n=n!=null?n.concat([e]):null,Iu(4,4,jV.bind(null,t,e),n)}function of(){}function OV(e,t){var n=Oo();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&$b(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function qV(e,t){var n=Oo();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&$b(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function $V(e,t,n){return Us&21?(mi(n,t)||(n=iV(),xt.lanes|=n,Ds|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,oo=!0),e.memoizedState=n)}function ix(e,t){var n=ct;ct=n!==0&&4>n?n:4,e(!0);var o=Mm.transition;Mm.transition={};try{e(!1),t()}finally{ct=n,Mm.transition=o}}function eR(){return Oo().memoizedState}function gx(e,t,n){var o=Lg(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},tR(e))nR(t,n);else if(n=xV(e,t,n,o),n!==null){var i=Pn();ui(n,e,o,i),oR(n,t,o)}}function sx(e,t,n){var o=Lg(e),i={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(tR(e))nR(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var r=t.lastRenderedState,I=s(r,n);if(i.hasEagerState=!0,i.eagerState=I,mi(I,r)){var a=t.interleaved;a===null?(i.next=i,Pb(t)):(i.next=a.next,a.next=i),t.interleaved=i;return}}catch{}finally{}n=xV(e,t,i,o),n!==null&&(i=Pn(),ui(n,e,o,i),oR(n,t,o))}}function tR(e){var t=e.alternate;return e===xt||t!==null&&t===xt}function nR(e,t){$a=Cd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oR(e,t,n){if(n&4194240){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,Yb(e,n)}}var dd={readContext:_o,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useInsertionEffect:kn,useLayoutEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useMutableSource:kn,useSyncExternalStore:kn,useId:kn,unstable_isNewReconciler:!1},rx={readContext:_o,useCallback:function(e,t){return vi().memoizedState=[e,t===void 0?null:t],e},useContext:_o,useEffect:eG,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,SC(4194308,4,jV.bind(null,t,e),n)},useLayoutEffect:function(e,t){return SC(4194308,4,e,t)},useInsertionEffect:function(e,t){return SC(4,2,e,t)},useMemo:function(e,t){var n=vi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=vi();return t=n!==void 0?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=gx.bind(null,xt,e),[o.memoizedState,e]},useRef:function(e){var t=vi();return e={current:e},t.memoizedState=e},useState:$y,useDebugValue:of,useDeferredValue:function(e){return vi().memoizedState=e},useTransition:function(){var e=$y(!1),t=e[0];return e=ix.bind(null,e[1]),vi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=xt,i=vi();if(kt){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=t(),hn===null)throw Error(oe(349));Us&30||MV(o,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,eG(zV.bind(null,o,s,e),[e]),o.flags|=2048,SI(9,LV.bind(null,o,s,n,t),void 0,null),n},useId:function(){var e=vi(),t=hn.identifierPrefix;if(kt){var n=qi,o=Oi;n=(o&~(1<<32-di(o)-1)).toString(32)+n,t=":"+t+"R"+n,n=GI++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ox++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lx={readContext:_o,useCallback:OV,useContext:_o,useEffect:nf,useImperativeHandle:_V,useInsertionEffect:QV,useLayoutEffect:PV,useMemo:qV,useReducer:Lm,useRef:DV,useState:function(){return Lm(BI)},useDebugValue:of,useDeferredValue:function(e){var t=Oo();return $V(t,sn.memoizedState,e)},useTransition:function(){var e=Lm(BI)[0],t=Oo().memoizedState;return[e,t]},useMutableSource:KV,useSyncExternalStore:EV,useId:eR,unstable_isNewReconciler:!1},ax={readContext:_o,useCallback:OV,useContext:_o,useEffect:nf,useImperativeHandle:_V,useInsertionEffect:QV,useLayoutEffect:PV,useMemo:qV,useReducer:zm,useRef:DV,useState:function(){return zm(BI)},useDebugValue:of,useDeferredValue:function(e){var t=Oo();return sn===null?t.memoizedState=e:$V(t,sn.memoizedState,e)},useTransition:function(){var e=zm(BI)[0],t=Oo().memoizedState;return[e,t]},useMutableSource:KV,useSyncExternalStore:EV,useId:eR,unstable_isNewReconciler:!1};function ai(e,t){if(e&&e.defaultProps){t=Nt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function rp(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:Nt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var cu={isMounted:function(e){return(e=e._reactInternals)?tr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=Pn(),i=Lg(e),s=eg(o,i);s.payload=t,n!=null&&(s.callback=n),t=Eg(e,s,i),t!==null&&(ui(t,e,i,o),GC(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=Pn(),i=Lg(e),s=eg(o,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Eg(e,s,i),t!==null&&(ui(t,e,i,o),GC(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pn(),o=Lg(e),i=eg(n,o);i.tag=2,t!=null&&(i.callback=t),t=Eg(e,i,o),t!==null&&(ui(t,e,o,n),GC(t,e,o))}};function tG(e,t,n,o,i,s,r){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,s,r):t.prototype&&t.prototype.isPureReactComponent?!hI(n,o)||!hI(i,s):!0}function iR(e,t,n){var o=!1,i=Dg,s=t.contextType;return typeof s=="object"&&s!==null?s=_o(s):(i=ro(t)?zs:Fn.current,o=t.contextTypes,s=(o=o!=null)?Al(e,i):Dg),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=cu,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function nG(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&cu.enqueueReplaceState(t,t.state,null)}function lp(e,t,n,o){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},jb(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=_o(s):(s=ro(t)?zs:Fn.current,i.context=Al(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(rp(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&cu.enqueueReplaceState(i,i.state,null),Id(e,n,i,o),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function bl(e,t){try{var n="",o=t;do n+=N1(o),o=o.return;while(o);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Tm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ap(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Ix=typeof WeakMap=="function"?WeakMap:Map;function gR(e,t,n){n=eg(-1,n),n.tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){Ad||(Ad=!0,bp=o),ap(e,t)},n}function sR(e,t,n){n=eg(-1,n),n.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var i=t.value;n.payload=function(){return o(i)},n.callback=function(){ap(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ap(e,t),typeof o!="function"&&(Mg===null?Mg=new Set([this]):Mg.add(this));var r=t.stack;this.componentDidCatch(t.value,{componentStack:r!==null?r:""})}),n}function oG(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new Ix;var i=new Set;o.set(t,i)}else i=o.get(t),i===void 0&&(i=new Set,o.set(t,i));i.has(n)||(i.add(n),e=Bx.bind(null,e,t,n),t.then(e,e))}function iG(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function gG(e,t,n,o,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=eg(-1,1),t.tag=2,Eg(n,t,1))),n.lanes|=1),e)}var cx=ug.ReactCurrentOwner,oo=!1;function Dn(e,t,n,o){t.child=e===null?HV(t,null,n,o):hl(t,e.child,n,o)}function sG(e,t,n,o,i){n=n.render;var s=t.ref;return rl(t,i),o=ef(e,t,n,o,s,i),n=tf(),e!==null&&!oo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,cg(e,t,i)):(kt&&n&&Lb(t),t.flags|=1,Dn(e,t,o,i),t.child)}function rG(e,t,n,o,i){if(e===null){var s=n.type;return typeof s=="function"&&!Cf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,rR(e,t,s,o,i)):(e=RC(n.type,null,o,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var r=s.memoizedProps;if(n=n.compare,n=n!==null?n:hI,n(r,o)&&e.ref===t.ref)return cg(e,t,i)}return t.flags|=1,e=zg(s,o),e.ref=t.ref,e.return=t,t.child=e}function rR(e,t,n,o,i){if(e!==null){var s=e.memoizedProps;if(hI(s,o)&&e.ref===t.ref)if(oo=!1,t.pendingProps=o=s,(e.lanes&i)!==0)e.flags&131072&&(oo=!0);else return t.lanes=e.lanes,cg(e,t,i)}return Ip(e,t,n,o,i)}function lR(e,t,n){var o=t.pendingProps,i=o.children,s=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt(Qr,fo),fo|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,yt(Qr,fo),fo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=s!==null?s.baseLanes:n,yt(Qr,fo),fo|=o}else s!==null?(o=s.baseLanes|n,t.memoizedState=null):o=n,yt(Qr,fo),fo|=o;return Dn(e,t,i,n),t.child}function aR(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ip(e,t,n,o,i){var s=ro(n)?zs:Fn.current;return s=Al(t,s),rl(t,i),n=ef(e,t,n,o,s,i),o=tf(),e!==null&&!oo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,cg(e,t,i)):(kt&&o&&Lb(t),t.flags|=1,Dn(e,t,n,i),t.child)}function lG(e,t,n,o,i){if(ro(n)){var s=!0;gd(t)}else s=!1;if(rl(t,i),t.stateNode===null)vC(e,t),iR(t,n,o),lp(t,n,o,i),o=!0;else if(e===null){var r=t.stateNode,I=t.memoizedProps;r.props=I;var a=r.context,c=n.contextType;typeof c=="object"&&c!==null?c=_o(c):(c=ro(n)?zs:Fn.current,c=Al(t,c));var C=n.getDerivedStateFromProps,A=typeof C=="function"||typeof r.getSnapshotBeforeUpdate=="function";A||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(I!==o||a!==c)&&nG(t,r,o,c),Vg=!1;var m=t.memoizedState;r.state=m,Id(t,o,r,i),a=t.memoizedState,I!==o||m!==a||so.current||Vg?(typeof C=="function"&&(rp(t,n,C,o),a=t.memoizedState),(I=Vg||tG(t,n,I,o,m,a,c))?(A||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=a),r.props=o,r.state=a,r.context=c,o=I):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{r=t.stateNode,NV(e,t),I=t.memoizedProps,c=t.type===t.elementType?I:ai(t.type,I),r.props=c,A=t.pendingProps,m=r.context,a=n.contextType,typeof a=="object"&&a!==null?a=_o(a):(a=ro(n)?zs:Fn.current,a=Al(t,a));var p=n.getDerivedStateFromProps;(C=typeof p=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(I!==A||m!==a)&&nG(t,r,o,a),Vg=!1,m=t.memoizedState,r.state=m,Id(t,o,r,i);var b=t.memoizedState;I!==A||m!==b||so.current||Vg?(typeof p=="function"&&(rp(t,n,p,o),b=t.memoizedState),(c=Vg||tG(t,n,c,o,m,b,a)||!1)?(C||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(o,b,a),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(o,b,a)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||I===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||I===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=b),r.props=o,r.state=b,r.context=a,o=c):(typeof r.componentDidUpdate!="function"||I===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||I===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),o=!1)}return cp(e,t,n,o,s,i)}function cp(e,t,n,o,i,s){aR(e,t);var r=(t.flags&128)!==0;if(!o&&!r)return i&&Qy(t,n,!1),cg(e,t,s);o=t.stateNode,cx.current=t;var I=r&&typeof n.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&r?(t.child=hl(t,e.child,null,s),t.child=hl(t,null,I,s)):Dn(e,t,I,s),t.memoizedState=o.state,i&&Qy(t,n,!0),t.child}function IR(e){var t=e.stateNode;t.pendingContext?Dy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Dy(e,t.context,!1),_b(e,t.containerInfo)}function aG(e,t,n,o,i){return ml(),Tb(i),t.flags|=256,Dn(e,t,n,o),t.child}var Cp={dehydrated:null,treeContext:null,retryLane:0};function dp(e){return{baseLanes:e,cachePool:null,transitions:null}}function cR(e,t,n){var o=t.pendingProps,i=Yt.current,s=!1,r=(t.flags&128)!==0,I;if((I=r)||(I=e!==null&&e.memoizedState===null?!1:(i&2)!==0),I?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),yt(Yt,i&1),e===null)return gp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(r=o.children,e=o.fallback,s?(o=t.mode,s=t.child,r={mode:"hidden",children:r},!(o&1)&&s!==null?(s.childLanes=0,s.pendingProps=r):s=uu(r,o,0,null),e=xs(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=dp(n),t.memoizedState=Cp,e):gf(t,r));if(i=e.memoizedState,i!==null&&(I=i.dehydrated,I!==null))return Cx(e,t,r,o,I,i,n);if(s){s=o.fallback,r=t.mode,i=e.child,I=i.sibling;var a={mode:"hidden",children:o.children};return!(r&1)&&t.child!==i?(o=t.child,o.childLanes=0,o.pendingProps=a,t.deletions=null):(o=zg(i,a),o.subtreeFlags=i.subtreeFlags&14680064),I!==null?s=zg(I,s):(s=xs(s,r,n,null),s.flags|=2),s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,r=e.child.memoizedState,r=r===null?dp(n):{baseLanes:r.baseLanes|n,cachePool:null,transitions:r.transitions},s.memoizedState=r,s.childLanes=e.childLanes&~n,t.memoizedState=Cp,o}return s=e.child,e=s.sibling,o=zg(s,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=n),o.return=t,o.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function gf(e,t){return t=uu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function eC(e,t,n,o){return o!==null&&Tb(o),hl(t,e.child,null,n),e=gf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Cx(e,t,n,o,i,s,r){if(n)return t.flags&256?(t.flags&=-257,o=Tm(Error(oe(422))),eC(e,t,r,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=o.fallback,i=t.mode,o=uu({mode:"visible",children:o.children},i,0,null),s=xs(s,i,r,null),s.flags|=2,o.return=t,s.return=t,o.sibling=s,t.child=o,t.mode&1&&hl(t,e.child,null,r),t.child.memoizedState=dp(r),t.memoizedState=Cp,s);if(!(t.mode&1))return eC(e,t,r,null);if(i.data==="$!"){if(o=i.nextSibling&&i.nextSibling.dataset,o)var I=o.dgst;return o=I,s=Error(oe(419)),o=Tm(s,o,void 0),eC(e,t,r,o)}if(I=(r&e.childLanes)!==0,oo||I){if(o=hn,o!==null){switch(r&-r){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(o.suspendedLanes|r)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ig(e,i),ui(o,e,i,-1))}return cf(),o=Tm(Error(oe(421))),eC(e,t,r,o)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Sx.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Go=Kg(i.nextSibling),Bo=t,kt=!0,Ci=null,e!==null&&(To[Uo++]=Oi,To[Uo++]=qi,To[Uo++]=Ts,Oi=e.id,qi=e.overflow,Ts=t),t=gf(t,o.children),t.flags|=4096,t)}function IG(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),sp(e.return,t,n)}function Um(e,t,n,o,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=o,s.tail=n,s.tailMode=i)}function CR(e,t,n){var o=t.pendingProps,i=o.revealOrder,s=o.tail;if(Dn(e,t,o.children,n),o=Yt.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&IG(e,n,t);else if(e.tag===19)IG(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(yt(Yt,o),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&cd(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Um(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&cd(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Um(t,!0,n,null,s);break;case"together":Um(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function vC(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cg(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ds|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(oe(153));if(t.child!==null){for(e=t.child,n=zg(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=zg(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function dx(e,t,n){switch(t.tag){case 3:IR(t),ml();break;case 5:FV(t);break;case 1:ro(t.type)&&gd(t);break;case 4:_b(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,i=t.memoizedProps.value;yt(ld,o._currentValue),o._currentValue=i;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(yt(Yt,Yt.current&1),t.flags|=128,null):n&t.child.childLanes?cR(e,t,n):(yt(Yt,Yt.current&1),e=cg(e,t,n),e!==null?e.sibling:null);yt(Yt,Yt.current&1);break;case 19:if(o=(n&t.childLanes)!==0,e.flags&128){if(o)return CR(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),yt(Yt,Yt.current),o)break;return null;case 22:case 23:return t.lanes=0,lR(e,t,n)}return cg(e,t,n)}var dR,up,uR,AR;dR=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};up=function(){};uR=function(e,t,n,o){var i=e.memoizedProps;if(i!==o){e=t.stateNode,Vs(Ji.current);var s=null;switch(n){case"input":i=xh(e,i),o=xh(e,o),s=[];break;case"select":i=Nt({},i,{value:void 0}),o=Nt({},o,{value:void 0}),s=[];break;case"textarea":i=Kh(e,i),o=Kh(e,o),s=[];break;default:typeof i.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=od)}Mh(n,o);var r;n=null;for(c in i)if(!o.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var I=i[c];for(r in I)I.hasOwnProperty(r)&&(n||(n={}),n[r]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(II.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in o){var a=o[c];if(I=i!=null?i[c]:void 0,o.hasOwnProperty(c)&&a!==I&&(a!=null||I!=null))if(c==="style")if(I){for(r in I)!I.hasOwnProperty(r)||a&&a.hasOwnProperty(r)||(n||(n={}),n[r]="");for(r in a)a.hasOwnProperty(r)&&I[r]!==a[r]&&(n||(n={}),n[r]=a[r])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,I=I?I.__html:void 0,a!=null&&I!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(II.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&St("scroll",e),s||I===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};AR=function(e,t,n,o){n!==o&&(t.flags|=4)};function Ga(e,t){if(!kt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function wn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,o|=i.subtreeFlags&14680064,o|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,o|=i.subtreeFlags,o|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function ux(e,t,n){var o=t.pendingProps;switch(zb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(t),null;case 1:return ro(t.type)&&id(),wn(t),null;case 3:return o=t.stateNode,pl(),Wt(so),Wt(Fn),qb(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(qc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ci!==null&&(yp(Ci),Ci=null))),up(e,t),wn(t),null;case 5:Ob(t);var i=Vs(yI.current);if(n=t.type,e!==null&&t.stateNode!=null)uR(e,t,n,o,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(oe(166));return wn(t),null}if(e=Vs(Ji.current),qc(t)){o=t.stateNode,n=t.type;var s=t.memoizedProps;switch(o[wi]=t,o[fI]=s,e=(t.mode&1)!==0,n){case"dialog":St("cancel",o),St("close",o);break;case"iframe":case"object":case"embed":St("load",o);break;case"video":case"audio":for(i=0;i<Ea.length;i++)St(Ea[i],o);break;case"source":St("error",o);break;case"img":case"image":case"link":St("error",o),St("load",o);break;case"details":St("toggle",o);break;case"input":by(o,s),St("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!s.multiple},St("invalid",o);break;case"textarea":Zy(o,s),St("invalid",o)}Mh(n,s),i=null;for(var r in s)if(s.hasOwnProperty(r)){var I=s[r];r==="children"?typeof I=="string"?o.textContent!==I&&(s.suppressHydrationWarning!==!0&&Oc(o.textContent,I,e),i=["children",I]):typeof I=="number"&&o.textContent!==""+I&&(s.suppressHydrationWarning!==!0&&Oc(o.textContent,I,e),i=["children",""+I]):II.hasOwnProperty(r)&&I!=null&&r==="onScroll"&&St("scroll",o)}switch(n){case"input":zc(o),fy(o,s,!0);break;case"textarea":zc(o),yy(o);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(o.onclick=od)}o=i,t.updateQueue=o,o!==null&&(t.flags|=4)}else{r=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=zW(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=r.createElement(n,{is:o.is}):(e=r.createElement(n),n==="select"&&(r=e,o.multiple?r.multiple=!0:o.size&&(r.size=o.size))):e=r.createElementNS(e,n),e[wi]=t,e[fI]=o,dR(e,t,!1,!1),t.stateNode=e;e:{switch(r=Lh(n,o),n){case"dialog":St("cancel",e),St("close",e),i=o;break;case"iframe":case"object":case"embed":St("load",e),i=o;break;case"video":case"audio":for(i=0;i<Ea.length;i++)St(Ea[i],e);i=o;break;case"source":St("error",e),i=o;break;case"img":case"image":case"link":St("error",e),St("load",e),i=o;break;case"details":St("toggle",e),i=o;break;case"input":by(e,o),i=xh(e,o),St("invalid",e);break;case"option":i=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},i=Nt({},o,{value:void 0}),St("invalid",e);break;case"textarea":Zy(e,o),i=Kh(e,o),St("invalid",e);break;default:i=o}Mh(n,i),I=i;for(s in I)if(I.hasOwnProperty(s)){var a=I[s];s==="style"?DW(e,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&TW(e,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&cI(e,a):typeof a=="number"&&cI(e,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(II.hasOwnProperty(s)?a!=null&&s==="onScroll"&&St("scroll",e):a!=null&&Vb(e,s,a,r))}switch(n){case"input":zc(e),fy(e,o,!1);break;case"textarea":zc(e),yy(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Ug(o.value));break;case"select":e.multiple=!!o.multiple,s=o.value,s!=null?ol(e,!!o.multiple,s,!1):o.defaultValue!=null&&ol(e,!!o.multiple,o.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=od)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return wn(t),null;case 6:if(e&&t.stateNode!=null)AR(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(oe(166));if(n=Vs(yI.current),Vs(Ji.current),qc(t)){if(o=t.stateNode,n=t.memoizedProps,o[wi]=t,(s=o.nodeValue!==n)&&(e=Bo,e!==null))switch(e.tag){case 3:Oc(o.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Oc(o.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[wi]=t,t.stateNode=o}return wn(t),null;case 13:if(Wt(Yt),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(kt&&Go!==null&&t.mode&1&&!(t.flags&128))JV(),ml(),t.flags|=98560,s=!1;else if(s=qc(t),o!==null&&o.dehydrated!==null){if(e===null){if(!s)throw Error(oe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(oe(317));s[wi]=t}else ml(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;wn(t),s=!1}else Ci!==null&&(yp(Ci),Ci=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||Yt.current&1?rn===0&&(rn=3):cf())),t.updateQueue!==null&&(t.flags|=4),wn(t),null);case 4:return pl(),up(e,t),e===null&&pI(t.stateNode.containerInfo),wn(t),null;case 10:return Qb(t.type._context),wn(t),null;case 17:return ro(t.type)&&id(),wn(t),null;case 19:if(Wt(Yt),s=t.memoizedState,s===null)return wn(t),null;if(o=(t.flags&128)!==0,r=s.rendering,r===null)if(o)Ga(s,!1);else{if(rn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(r=cd(e),r!==null){for(t.flags|=128,Ga(s,!1),o=r.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;n!==null;)s=n,e=o,s.flags&=14680066,r=s.alternate,r===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=r.childLanes,s.lanes=r.lanes,s.child=r.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=r.memoizedProps,s.memoizedState=r.memoizedState,s.updateQueue=r.updateQueue,s.type=r.type,e=r.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return yt(Yt,Yt.current&1|2),t.child}e=e.sibling}s.tail!==null&&Dt()>fl&&(t.flags|=128,o=!0,Ga(s,!1),t.lanes=4194304)}else{if(!o)if(e=cd(r),e!==null){if(t.flags|=128,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ga(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!kt)return wn(t),null}else 2*Dt()-s.renderingStartTime>fl&&n!==1073741824&&(t.flags|=128,o=!0,Ga(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(n=s.last,n!==null?n.sibling=r:t.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Dt(),t.sibling=null,n=Yt.current,yt(Yt,o?n&1|2:n&1),t):(wn(t),null);case 22:case 23:return If(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?fo&1073741824&&(wn(t),t.subtreeFlags&6&&(t.flags|=8192)):wn(t),null;case 24:return null;case 25:return null}throw Error(oe(156,t.tag))}function Ax(e,t){switch(zb(t),t.tag){case 1:return ro(t.type)&&id(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pl(),Wt(so),Wt(Fn),qb(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ob(t),null;case 13:if(Wt(Yt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(oe(340));ml()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Wt(Yt),null;case 4:return pl(),null;case 10:return Qb(t.type._context),null;case 22:case 23:return If(),null;case 24:return null;default:return null}}var tC=!1,Hn=!1,mx=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function Dr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){Mt(e,t,o)}else n.current=null}function Ap(e,t,n){try{n()}catch(o){Mt(e,t,o)}}var cG=!1;function hx(e,t){if(qh=ed,e=fV(),Mb(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var i=o.anchorOffset,s=o.focusNode;o=o.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var r=0,I=-1,a=-1,c=0,C=0,A=e,m=null;t:for(;;){for(var p;A!==n||i!==0&&A.nodeType!==3||(I=r+i),A!==s||o!==0&&A.nodeType!==3||(a=r+o),A.nodeType===3&&(r+=A.nodeValue.length),(p=A.firstChild)!==null;)m=A,A=p;for(;;){if(A===e)break t;if(m===n&&++c===i&&(I=r),m===s&&++C===o&&(a=r),(p=A.nextSibling)!==null)break;A=m,m=A.parentNode}A=p}n=I===-1||a===-1?null:{start:I,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for($h={focusedElem:e,selectionRange:n},ed=!1,Ae=t;Ae!==null;)if(t=Ae,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ae=e;else for(;Ae!==null;){t=Ae;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var Z=b.memoizedProps,v=b.memoizedState,f=t.stateNode,G=f.getSnapshotBeforeUpdate(t.elementType===t.type?Z:ai(t.type,Z),v);f.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(W){Mt(t,t.return,W)}if(e=t.sibling,e!==null){e.return=t.return,Ae=e;break}Ae=t.return}return b=cG,cG=!1,b}function eI(e,t,n){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var i=o=o.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ap(t,n,s)}i=i.next}while(i!==o)}}function Cu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function mp(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function mR(e){var t=e.alternate;t!==null&&(e.alternate=null,mR(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wi],delete t[fI],delete t[np],delete t[$H],delete t[ex])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hR(e){return e.tag===5||e.tag===3||e.tag===4}function CG(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hR(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hp(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=od));else if(o!==4&&(e=e.child,e!==null))for(hp(e,t,n),e=e.sibling;e!==null;)hp(e,t,n),e=e.sibling}function pp(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(pp(e,t,n),e=e.sibling;e!==null;)pp(e,t,n),e=e.sibling}var Gn=null,Ii=!1;function Zg(e,t,n){for(n=n.child;n!==null;)pR(e,t,n),n=n.sibling}function pR(e,t,n){if(Xi&&typeof Xi.onCommitFiberUnmount=="function")try{Xi.onCommitFiberUnmount(iu,n)}catch{}switch(n.tag){case 5:Hn||Dr(n,t);case 6:var o=Gn,i=Ii;Gn=null,Zg(e,t,n),Gn=o,Ii=i,Gn!==null&&(Ii?(e=Gn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Gn.removeChild(n.stateNode));break;case 18:Gn!==null&&(Ii?(e=Gn,n=n.stateNode,e.nodeType===8?Fm(e.parentNode,n):e.nodeType===1&&Fm(e,n),AI(e)):Fm(Gn,n.stateNode));break;case 4:o=Gn,i=Ii,Gn=n.stateNode.containerInfo,Ii=!0,Zg(e,t,n),Gn=o,Ii=i;break;case 0:case 11:case 14:case 15:if(!Hn&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){i=o=o.next;do{var s=i,r=s.destroy;s=s.tag,r!==void 0&&(s&2||s&4)&&Ap(n,t,r),i=i.next}while(i!==o)}Zg(e,t,n);break;case 1:if(!Hn&&(Dr(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(I){Mt(n,t,I)}Zg(e,t,n);break;case 21:Zg(e,t,n);break;case 22:n.mode&1?(Hn=(o=Hn)||n.memoizedState!==null,Zg(e,t,n),Hn=o):Zg(e,t,n);break;default:Zg(e,t,n)}}function dG(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new mx),t.forEach(function(o){var i=vx.bind(null,e,o);n.has(o)||(n.add(o),o.then(i,i))})}}function li(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var i=n[o];try{var s=e,r=t,I=r;e:for(;I!==null;){switch(I.tag){case 5:Gn=I.stateNode,Ii=!1;break e;case 3:Gn=I.stateNode.containerInfo,Ii=!0;break e;case 4:Gn=I.stateNode.containerInfo,Ii=!0;break e}I=I.return}if(Gn===null)throw Error(oe(160));pR(s,r,i),Gn=null,Ii=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){Mt(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bR(t,e),t=t.sibling}function bR(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(li(t,e),Si(e),o&4){try{eI(3,e,e.return),Cu(3,e)}catch(Z){Mt(e,e.return,Z)}try{eI(5,e,e.return)}catch(Z){Mt(e,e.return,Z)}}break;case 1:li(t,e),Si(e),o&512&&n!==null&&Dr(n,n.return);break;case 5:if(li(t,e),Si(e),o&512&&n!==null&&Dr(n,n.return),e.flags&32){var i=e.stateNode;try{cI(i,"")}catch(Z){Mt(e,e.return,Z)}}if(o&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,r=n!==null?n.memoizedProps:s,I=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{I==="input"&&s.type==="radio"&&s.name!=null&&MW(i,s),Lh(I,r);var c=Lh(I,s);for(r=0;r<a.length;r+=2){var C=a[r],A=a[r+1];C==="style"?DW(i,A):C==="dangerouslySetInnerHTML"?TW(i,A):C==="children"?cI(i,A):Vb(i,C,A,c)}switch(I){case"input":Nh(i,s);break;case"textarea":LW(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?ol(i,!!s.multiple,p,!1):m!==!!s.multiple&&(s.defaultValue!=null?ol(i,!!s.multiple,s.defaultValue,!0):ol(i,!!s.multiple,s.multiple?[]:"",!1))}i[fI]=s}catch(Z){Mt(e,e.return,Z)}}break;case 6:if(li(t,e),Si(e),o&4){if(e.stateNode===null)throw Error(oe(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(Z){Mt(e,e.return,Z)}}break;case 3:if(li(t,e),Si(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{AI(t.containerInfo)}catch(Z){Mt(e,e.return,Z)}break;case 4:li(t,e),Si(e);break;case 13:li(t,e),Si(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(lf=Dt())),o&4&&dG(e);break;case 22:if(C=n!==null&&n.memoizedState!==null,e.mode&1?(Hn=(c=Hn)||C,li(t,e),Hn=c):li(t,e),Si(e),o&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!C&&e.mode&1)for(Ae=e,C=e.child;C!==null;){for(A=Ae=C;Ae!==null;){switch(m=Ae,p=m.child,m.tag){case 0:case 11:case 14:case 15:eI(4,m,m.return);break;case 1:Dr(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){o=m,n=m.return;try{t=o,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(Z){Mt(o,n,Z)}}break;case 5:Dr(m,m.return);break;case 22:if(m.memoizedState!==null){AG(A);continue}}p!==null?(p.return=m,Ae=p):AG(A)}C=C.sibling}e:for(C=null,A=e;;){if(A.tag===5){if(C===null){C=A;try{i=A.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(I=A.stateNode,a=A.memoizedProps.style,r=a!=null&&a.hasOwnProperty("display")?a.display:null,I.style.display=UW("display",r))}catch(Z){Mt(e,e.return,Z)}}}else if(A.tag===6){if(C===null)try{A.stateNode.nodeValue=c?"":A.memoizedProps}catch(Z){Mt(e,e.return,Z)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===e)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;A.sibling===null;){if(A.return===null||A.return===e)break e;C===A&&(C=null),A=A.return}C===A&&(C=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:li(t,e),Si(e),o&4&&dG(e);break;case 21:break;default:li(t,e),Si(e)}}function Si(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(hR(n)){var o=n;break e}n=n.return}throw Error(oe(160))}switch(o.tag){case 5:var i=o.stateNode;o.flags&32&&(cI(i,""),o.flags&=-33);var s=CG(e);pp(e,s,i);break;case 3:case 4:var r=o.stateNode.containerInfo,I=CG(e);hp(e,I,r);break;default:throw Error(oe(161))}}catch(a){Mt(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function px(e,t,n){Ae=e,fR(e)}function fR(e,t,n){for(var o=(e.mode&1)!==0;Ae!==null;){var i=Ae,s=i.child;if(i.tag===22&&o){var r=i.memoizedState!==null||tC;if(!r){var I=i.alternate,a=I!==null&&I.memoizedState!==null||Hn;I=tC;var c=Hn;if(tC=r,(Hn=a)&&!c)for(Ae=i;Ae!==null;)r=Ae,a=r.child,r.tag===22&&r.memoizedState!==null?mG(i):a!==null?(a.return=r,Ae=a):mG(i);for(;s!==null;)Ae=s,fR(s),s=s.sibling;Ae=i,tC=I,Hn=c}uG(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ae=s):uG(e)}}function uG(e){for(;Ae!==null;){var t=Ae;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Hn||Cu(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!Hn)if(n===null)o.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ai(t.type,n.memoizedProps);o.componentDidUpdate(i,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&qy(t,s,o);break;case 3:var r=t.updateQueue;if(r!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}qy(t,r,n)}break;case 5:var I=t.stateNode;if(n===null&&t.flags&4){n=I;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var C=c.memoizedState;if(C!==null){var A=C.dehydrated;A!==null&&AI(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}Hn||t.flags&512&&mp(t)}catch(m){Mt(t,t.return,m)}}if(t===e){Ae=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ae=n;break}Ae=t.return}}function AG(e){for(;Ae!==null;){var t=Ae;if(t===e){Ae=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ae=n;break}Ae=t.return}}function mG(e){for(;Ae!==null;){var t=Ae;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Cu(4,t)}catch(a){Mt(t,n,a)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var i=t.return;try{o.componentDidMount()}catch(a){Mt(t,i,a)}}var s=t.return;try{mp(t)}catch(a){Mt(t,s,a)}break;case 5:var r=t.return;try{mp(t)}catch(a){Mt(t,r,a)}}}catch(a){Mt(t,t.return,a)}if(t===e){Ae=null;break}var I=t.sibling;if(I!==null){I.return=t.return,Ae=I;break}Ae=t.return}}var bx=Math.ceil,ud=ug.ReactCurrentDispatcher,sf=ug.ReactCurrentOwner,jo=ug.ReactCurrentBatchConfig,$e=0,hn=null,nn=null,vn=0,fo=0,Qr=qg(0),rn=0,vI=null,Ds=0,du=0,rf=0,tI=null,no=null,lf=0,fl=1/0,Qi=null,Ad=!1,bp=null,Mg=null,nC=!1,Xg=null,md=0,nI=0,fp=null,WC=-1,VC=0;function Pn(){return $e&6?Dt():WC!==-1?WC:WC=Dt()}function Lg(e){return e.mode&1?$e&2&&vn!==0?vn&-vn:nx.transition!==null?(VC===0&&(VC=iV()),VC):(e=ct,e!==0||(e=window.event,e=e===void 0?16:cV(e.type)),e):1}function ui(e,t,n,o){if(50<nI)throw nI=0,fp=null,Error(oe(185));PI(e,n,o),(!($e&2)||e!==hn)&&(e===hn&&(!($e&2)&&(du|=n),rn===4&&kg(e,vn)),lo(e,o),n===1&&$e===0&&!(t.mode&1)&&(fl=Dt()+500,au&&$g()))}function lo(e,t){var n=e.callbackNode;nH(e,t);var o=$C(e,e===hn?vn:0);if(o===0)n!==null&&Sy(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(n!=null&&Sy(n),t===1)e.tag===0?tx(hG.bind(null,e)):kV(hG.bind(null,e)),OH(function(){!($e&6)&&$g()}),n=null;else{switch(gV(o)){case 1:n=Jb;break;case 4:n=nV;break;case 16:n=qC;break;case 536870912:n=oV;break;default:n=qC}n=VR(n,ZR.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ZR(e,t){if(WC=-1,VC=0,$e&6)throw Error(oe(327));var n=e.callbackNode;if(ll()&&e.callbackNode!==n)return null;var o=$C(e,e===hn?vn:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=hd(e,o);else{t=o;var i=$e;$e|=2;var s=GR();(hn!==e||vn!==t)&&(Qi=null,fl=Dt()+500,Hs(e,t));do try{yx();break}catch(I){yR(e,I)}while(!0);Db(),ud.current=s,$e=i,nn!==null?t=0:(hn=null,vn=0,t=rn)}if(t!==0){if(t===2&&(i=Qh(e),i!==0&&(o=i,t=Zp(e,i))),t===1)throw n=vI,Hs(e,0),kg(e,o),lo(e,Dt()),n;if(t===6)kg(e,o);else{if(i=e.current.alternate,!(o&30)&&!fx(i)&&(t=hd(e,o),t===2&&(s=Qh(e),s!==0&&(o=s,t=Zp(e,s))),t===1))throw n=vI,Hs(e,0),kg(e,o),lo(e,Dt()),n;switch(e.finishedWork=i,e.finishedLanes=o,t){case 0:case 1:throw Error(oe(345));case 2:fs(e,no,Qi);break;case 3:if(kg(e,o),(o&130023424)===o&&(t=lf+500-Dt(),10<t)){if($C(e,0)!==0)break;if(i=e.suspendedLanes,(i&o)!==o){Pn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=tp(fs.bind(null,e,no,Qi),t);break}fs(e,no,Qi);break;case 4:if(kg(e,o),(o&4194240)===o)break;for(t=e.eventTimes,i=-1;0<o;){var r=31-di(o);s=1<<r,r=t[r],r>i&&(i=r),o&=~s}if(o=i,o=Dt()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*bx(o/1960))-o,10<o){e.timeoutHandle=tp(fs.bind(null,e,no,Qi),o);break}fs(e,no,Qi);break;case 5:fs(e,no,Qi);break;default:throw Error(oe(329))}}}return lo(e,Dt()),e.callbackNode===n?ZR.bind(null,e):null}function Zp(e,t){var n=tI;return e.current.memoizedState.isDehydrated&&(Hs(e,t).flags|=256),e=hd(e,t),e!==2&&(t=no,no=n,t!==null&&yp(t)),e}function yp(e){no===null?no=e:no.push.apply(no,e)}function fx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var i=n[o],s=i.getSnapshot;i=i.value;try{if(!mi(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function kg(e,t){for(t&=~rf,t&=~du,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-di(t),o=1<<n;e[n]=-1,t&=~o}}function hG(e){if($e&6)throw Error(oe(327));ll();var t=$C(e,0);if(!(t&1))return lo(e,Dt()),null;var n=hd(e,t);if(e.tag!==0&&n===2){var o=Qh(e);o!==0&&(t=o,n=Zp(e,o))}if(n===1)throw n=vI,Hs(e,0),kg(e,t),lo(e,Dt()),n;if(n===6)throw Error(oe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fs(e,no,Qi),lo(e,Dt()),null}function af(e,t){var n=$e;$e|=1;try{return e(t)}finally{$e=n,$e===0&&(fl=Dt()+500,au&&$g())}}function Qs(e){Xg!==null&&Xg.tag===0&&!($e&6)&&ll();var t=$e;$e|=1;var n=jo.transition,o=ct;try{if(jo.transition=null,ct=1,e)return e()}finally{ct=o,jo.transition=n,$e=t,!($e&6)&&$g()}}function If(){fo=Qr.current,Wt(Qr)}function Hs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,_H(n)),nn!==null)for(n=nn.return;n!==null;){var o=n;switch(zb(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&id();break;case 3:pl(),Wt(so),Wt(Fn),qb();break;case 5:Ob(o);break;case 4:pl();break;case 13:Wt(Yt);break;case 19:Wt(Yt);break;case 10:Qb(o.type._context);break;case 22:case 23:If()}n=n.return}if(hn=e,nn=e=zg(e.current,null),vn=fo=t,rn=0,vI=null,rf=du=Ds=0,no=tI=null,Ws!==null){for(t=0;t<Ws.length;t++)if(n=Ws[t],o=n.interleaved,o!==null){n.interleaved=null;var i=o.next,s=n.pending;if(s!==null){var r=s.next;s.next=i,o.next=r}n.pending=o}Ws=null}return e}function yR(e,t){do{var n=nn;try{if(Db(),BC.current=dd,Cd){for(var o=xt.memoizedState;o!==null;){var i=o.queue;i!==null&&(i.pending=null),o=o.next}Cd=!1}if(Us=0,un=sn=xt=null,$a=!1,GI=0,sf.current=null,n===null||n.return===null){rn=1,vI=t,nn=null;break}e:{var s=e,r=n.return,I=n,a=t;if(t=vn,I.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,C=I,A=C.tag;if(!(C.mode&1)&&(A===0||A===11||A===15)){var m=C.alternate;m?(C.updateQueue=m.updateQueue,C.memoizedState=m.memoizedState,C.lanes=m.lanes):(C.updateQueue=null,C.memoizedState=null)}var p=iG(r);if(p!==null){p.flags&=-257,gG(p,r,I,s,t),p.mode&1&&oG(s,c,t),t=p,a=c;var b=t.updateQueue;if(b===null){var Z=new Set;Z.add(a),t.updateQueue=Z}else b.add(a);break e}else{if(!(t&1)){oG(s,c,t),cf();break e}a=Error(oe(426))}}else if(kt&&I.mode&1){var v=iG(r);if(v!==null){!(v.flags&65536)&&(v.flags|=256),gG(v,r,I,s,t),Tb(bl(a,I));break e}}s=a=bl(a,I),rn!==4&&(rn=2),tI===null?tI=[s]:tI.push(s),s=r;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var f=gR(s,a,t);Oy(s,f);break e;case 1:I=a;var G=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof G.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Mg===null||!Mg.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var W=sR(s,I,t);Oy(s,W);break e}}s=s.return}while(s!==null)}SR(n)}catch(V){t=V,nn===n&&n!==null&&(nn=n=n.return);continue}break}while(!0)}function GR(){var e=ud.current;return ud.current=dd,e===null?dd:e}function cf(){(rn===0||rn===3||rn===2)&&(rn=4),hn===null||!(Ds&268435455)&&!(du&268435455)||kg(hn,vn)}function hd(e,t){var n=$e;$e|=2;var o=GR();(hn!==e||vn!==t)&&(Qi=null,Hs(e,t));do try{Zx();break}catch(i){yR(e,i)}while(!0);if(Db(),$e=n,ud.current=o,nn!==null)throw Error(oe(261));return hn=null,vn=0,rn}function Zx(){for(;nn!==null;)BR(nn)}function yx(){for(;nn!==null&&!Q1();)BR(nn)}function BR(e){var t=WR(e.alternate,e,fo);e.memoizedProps=e.pendingProps,t===null?SR(e):nn=t,sf.current=null}function SR(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ax(n,t),n!==null){n.flags&=32767,nn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rn=6,nn=null;return}}else if(n=ux(n,t,fo),n!==null){nn=n;return}if(t=t.sibling,t!==null){nn=t;return}nn=t=e}while(t!==null);rn===0&&(rn=5)}function fs(e,t,n){var o=ct,i=jo.transition;try{jo.transition=null,ct=1,Gx(e,t,n,o)}finally{jo.transition=i,ct=o}return null}function Gx(e,t,n,o){do ll();while(Xg!==null);if($e&6)throw Error(oe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(oe(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(oH(e,s),e===hn&&(nn=hn=null,vn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nC||(nC=!0,VR(qC,function(){return ll(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=jo.transition,jo.transition=null;var r=ct;ct=1;var I=$e;$e|=4,sf.current=null,hx(e,n),bR(n,e),zH($h),ed=!!qh,$h=qh=null,e.current=n,px(n),P1(),$e=I,ct=r,jo.transition=s}else e.current=n;if(nC&&(nC=!1,Xg=e,md=i),s=e.pendingLanes,s===0&&(Mg=null),O1(n.stateNode),lo(e,Dt()),t!==null)for(o=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],o(i.value,{componentStack:i.stack,digest:i.digest});if(Ad)throw Ad=!1,e=bp,bp=null,e;return md&1&&e.tag!==0&&ll(),s=e.pendingLanes,s&1?e===fp?nI++:(nI=0,fp=e):nI=0,$g(),null}function ll(){if(Xg!==null){var e=gV(md),t=jo.transition,n=ct;try{if(jo.transition=null,ct=16>e?16:e,Xg===null)var o=!1;else{if(e=Xg,Xg=null,md=0,$e&6)throw Error(oe(331));var i=$e;for($e|=4,Ae=e.current;Ae!==null;){var s=Ae,r=s.child;if(Ae.flags&16){var I=s.deletions;if(I!==null){for(var a=0;a<I.length;a++){var c=I[a];for(Ae=c;Ae!==null;){var C=Ae;switch(C.tag){case 0:case 11:case 15:eI(8,C,s)}var A=C.child;if(A!==null)A.return=C,Ae=A;else for(;Ae!==null;){C=Ae;var m=C.sibling,p=C.return;if(mR(C),C===c){Ae=null;break}if(m!==null){m.return=p,Ae=m;break}Ae=p}}}var b=s.alternate;if(b!==null){var Z=b.child;if(Z!==null){b.child=null;do{var v=Z.sibling;Z.sibling=null,Z=v}while(Z!==null)}}Ae=s}}if(s.subtreeFlags&2064&&r!==null)r.return=s,Ae=r;else e:for(;Ae!==null;){if(s=Ae,s.flags&2048)switch(s.tag){case 0:case 11:case 15:eI(9,s,s.return)}var f=s.sibling;if(f!==null){f.return=s.return,Ae=f;break e}Ae=s.return}}var G=e.current;for(Ae=G;Ae!==null;){r=Ae;var y=r.child;if(r.subtreeFlags&2064&&y!==null)y.return=r,Ae=y;else e:for(r=G;Ae!==null;){if(I=Ae,I.flags&2048)try{switch(I.tag){case 0:case 11:case 15:Cu(9,I)}}catch(V){Mt(I,I.return,V)}if(I===r){Ae=null;break e}var W=I.sibling;if(W!==null){W.return=I.return,Ae=W;break e}Ae=I.return}}if($e=i,$g(),Xi&&typeof Xi.onPostCommitFiberRoot=="function")try{Xi.onPostCommitFiberRoot(iu,e)}catch{}o=!0}return o}finally{ct=n,jo.transition=t}}return!1}function pG(e,t,n){t=bl(n,t),t=gR(e,t,1),e=Eg(e,t,1),t=Pn(),e!==null&&(PI(e,1,t),lo(e,t))}function Mt(e,t,n){if(e.tag===3)pG(e,e,n);else for(;t!==null;){if(t.tag===3){pG(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Mg===null||!Mg.has(o))){e=bl(n,e),e=sR(t,e,1),t=Eg(t,e,1),e=Pn(),t!==null&&(PI(t,1,e),lo(t,e));break}}t=t.return}}function Bx(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),t=Pn(),e.pingedLanes|=e.suspendedLanes&n,hn===e&&(vn&n)===n&&(rn===4||rn===3&&(vn&130023424)===vn&&500>Dt()-lf?Hs(e,0):rf|=n),lo(e,t)}function vR(e,t){t===0&&(e.mode&1?(t=Dc,Dc<<=1,!(Dc&130023424)&&(Dc=4194304)):t=1);var n=Pn();e=Ig(e,t),e!==null&&(PI(e,t,n),lo(e,n))}function Sx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),vR(e,n)}function vx(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(oe(314))}o!==null&&o.delete(t),vR(e,n)}var WR;WR=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||so.current)oo=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return oo=!1,dx(e,t,n);oo=!!(e.flags&131072)}else oo=!1,kt&&t.flags&1048576&&wV(t,rd,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;vC(e,t),e=t.pendingProps;var i=Al(t,Fn.current);rl(t,n),i=ef(null,t,o,e,i,n);var s=tf();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ro(o)?(s=!0,gd(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,jb(t),i.updater=cu,t.stateNode=i,i._reactInternals=t,lp(t,o,e,n),t=cp(null,t,o,!0,s,n)):(t.tag=0,kt&&s&&Lb(t),Dn(null,t,i,n),t=t.child),t;case 16:o=t.elementType;e:{switch(vC(e,t),e=t.pendingProps,i=o._init,o=i(o._payload),t.type=o,i=t.tag=Vx(o),e=ai(o,e),i){case 0:t=Ip(null,t,o,e,n);break e;case 1:t=lG(null,t,o,e,n);break e;case 11:t=sG(null,t,o,e,n);break e;case 14:t=rG(null,t,o,ai(o.type,e),n);break e}throw Error(oe(306,o,""))}return t;case 0:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:ai(o,i),Ip(e,t,o,i,n);case 1:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:ai(o,i),lG(e,t,o,i,n);case 3:e:{if(IR(t),e===null)throw Error(oe(387));o=t.pendingProps,s=t.memoizedState,i=s.element,NV(e,t),Id(t,o,null,n);var r=t.memoizedState;if(o=r.element,s.isDehydrated)if(s={element:o,isDehydrated:!1,cache:r.cache,pendingSuspenseBoundaries:r.pendingSuspenseBoundaries,transitions:r.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=bl(Error(oe(423)),t),t=aG(e,t,o,n,i);break e}else if(o!==i){i=bl(Error(oe(424)),t),t=aG(e,t,o,n,i);break e}else for(Go=Kg(t.stateNode.containerInfo.firstChild),Bo=t,kt=!0,Ci=null,n=HV(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ml(),o===i){t=cg(e,t,n);break e}Dn(e,t,o,n)}t=t.child}return t;case 5:return FV(t),e===null&&gp(t),o=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,r=i.children,ep(o,i)?r=null:s!==null&&ep(o,s)&&(t.flags|=32),aR(e,t),Dn(e,t,r,n),t.child;case 6:return e===null&&gp(t),null;case 13:return cR(e,t,n);case 4:return _b(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=hl(t,null,o,n):Dn(e,t,o,n),t.child;case 11:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:ai(o,i),sG(e,t,o,i,n);case 7:return Dn(e,t,t.pendingProps,n),t.child;case 8:return Dn(e,t,t.pendingProps.children,n),t.child;case 12:return Dn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,i=t.pendingProps,s=t.memoizedProps,r=i.value,yt(ld,o._currentValue),o._currentValue=r,s!==null)if(mi(s.value,r)){if(s.children===i.children&&!so.current){t=cg(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var I=s.dependencies;if(I!==null){r=s.child;for(var a=I.firstContext;a!==null;){if(a.context===o){if(s.tag===1){a=eg(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var C=c.pending;C===null?a.next=a:(a.next=C.next,C.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),sp(s.return,n,t),I.lanes|=n;break}a=a.next}}else if(s.tag===10)r=s.type===t.type?null:s.child;else if(s.tag===18){if(r=s.return,r===null)throw Error(oe(341));r.lanes|=n,I=r.alternate,I!==null&&(I.lanes|=n),sp(r,n,t),r=s.sibling}else r=s.child;if(r!==null)r.return=s;else for(r=s;r!==null;){if(r===t){r=null;break}if(s=r.sibling,s!==null){s.return=r.return,r=s;break}r=r.return}s=r}Dn(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,o=t.pendingProps.children,rl(t,n),i=_o(i),o=o(i),t.flags|=1,Dn(e,t,o,n),t.child;case 14:return o=t.type,i=ai(o,t.pendingProps),i=ai(o.type,i),rG(e,t,o,i,n);case 15:return rR(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:ai(o,i),vC(e,t),t.tag=1,ro(o)?(e=!0,gd(t)):e=!1,rl(t,n),iR(t,o,i),lp(t,o,i,n),cp(null,t,o,!0,e,n);case 19:return CR(e,t,n);case 22:return lR(e,t,n)}throw Error(oe(156,t.tag))};function VR(e,t){return tV(e,t)}function Wx(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Po(e,t,n,o){return new Wx(e,t,n,o)}function Cf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vx(e){if(typeof e=="function")return Cf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===kb)return 11;if(e===wb)return 14}return 2}function zg(e,t){var n=e.alternate;return n===null?(n=Po(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function RC(e,t,n,o,i,s){var r=2;if(o=e,typeof e=="function")Cf(e)&&(r=1);else if(typeof e=="string")r=5;else e:switch(e){case Nr:return xs(n.children,i,s,t);case Rb:r=8,i|=8;break;case Xh:return e=Po(12,n,t,i|2),e.elementType=Xh,e.lanes=s,e;case Jh:return e=Po(13,n,t,i),e.elementType=Jh,e.lanes=s,e;case Yh:return e=Po(19,n,t,i),e.elementType=Yh,e.lanes=s,e;case FW:return uu(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xW:r=10;break e;case NW:r=9;break e;case kb:r=11;break e;case wb:r=14;break e;case Wg:r=16,o=null;break e}throw Error(oe(130,e==null?e:typeof e,""))}return t=Po(r,n,t,i),t.elementType=e,t.type=o,t.lanes=s,t}function xs(e,t,n,o){return e=Po(7,e,o,t),e.lanes=n,e}function uu(e,t,n,o){return e=Po(22,e,o,t),e.elementType=FW,e.lanes=n,e.stateNode={isHidden:!1},e}function Dm(e,t,n){return e=Po(6,e,null,t),e.lanes=n,e}function Qm(e,t,n){return t=Po(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Rx(e,t,n,o,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wm(0),this.expirationTimes=Wm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wm(0),this.identifierPrefix=o,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function df(e,t,n,o,i,s,r,I,a){return e=new Rx(e,t,n,I,a),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Po(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jb(s),e}function kx(e,t,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xr,key:o==null?null:""+o,children:e,containerInfo:t,implementation:n}}function RR(e){if(!e)return Dg;e=e._reactInternals;e:{if(tr(e)!==e||e.tag!==1)throw Error(oe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ro(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(oe(171))}if(e.tag===1){var n=e.type;if(ro(n))return RV(e,n,t)}return t}function kR(e,t,n,o,i,s,r,I,a){return e=df(n,o,!0,e,i,s,r,I,a),e.context=RR(null),n=e.current,o=Pn(),i=Lg(n),s=eg(o,i),s.callback=t??null,Eg(n,s,i),e.current.lanes=i,PI(e,i,o),lo(e,o),e}function Au(e,t,n,o){var i=t.current,s=Pn(),r=Lg(i);return n=RR(n),t.context===null?t.context=n:t.pendingContext=n,t=eg(s,r),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=Eg(i,t,r),e!==null&&(ui(e,i,r,s),GC(e,i,r)),r}function pd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function bG(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function uf(e,t){bG(e,t),(e=e.alternate)&&bG(e,t)}function wx(){return null}var wR=typeof reportError=="function"?reportError:function(e){console.error(e)};function Af(e){this._internalRoot=e}mu.prototype.render=Af.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(oe(409));Au(e,t,null,null)};mu.prototype.unmount=Af.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qs(function(){Au(null,e,null,null)}),t[ag]=null}};function mu(e){this._internalRoot=e}mu.prototype.unstable_scheduleHydration=function(e){if(e){var t=lV();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rg.length&&t!==0&&t<Rg[n].priority;n++);Rg.splice(n,0,e),n===0&&IV(e)}};function mf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function hu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fG(){}function Xx(e,t,n,o,i){if(i){if(typeof o=="function"){var s=o;o=function(){var c=pd(r);s.call(c)}}var r=kR(t,o,e,0,null,!1,!1,"",fG);return e._reactRootContainer=r,e[ag]=r.current,pI(e.nodeType===8?e.parentNode:e),Qs(),r}for(;i=e.lastChild;)e.removeChild(i);if(typeof o=="function"){var I=o;o=function(){var c=pd(a);I.call(c)}}var a=df(e,0,!1,null,null,!1,!1,"",fG);return e._reactRootContainer=a,e[ag]=a.current,pI(e.nodeType===8?e.parentNode:e),Qs(function(){Au(t,a,n,o)}),a}function pu(e,t,n,o,i){var s=n._reactRootContainer;if(s){var r=s;if(typeof i=="function"){var I=i;i=function(){var a=pd(r);I.call(a)}}Au(t,r,e,i)}else r=Xx(n,t,e,i,o);return pd(r)}sV=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ka(t.pendingLanes);n!==0&&(Yb(t,n|1),lo(t,Dt()),!($e&6)&&(fl=Dt()+500,$g()))}break;case 13:Qs(function(){var o=Ig(e,1);if(o!==null){var i=Pn();ui(o,e,1,i)}}),uf(e,1)}};Hb=function(e){if(e.tag===13){var t=Ig(e,134217728);if(t!==null){var n=Pn();ui(t,e,134217728,n)}uf(e,134217728)}};rV=function(e){if(e.tag===13){var t=Lg(e),n=Ig(e,t);if(n!==null){var o=Pn();ui(n,e,t,o)}uf(e,t)}};lV=function(){return ct};aV=function(e,t){var n=ct;try{return ct=e,t()}finally{ct=n}};Th=function(e,t,n){switch(t){case"input":if(Nh(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var i=lu(o);if(!i)throw Error(oe(90));EW(o),Nh(o,i)}}}break;case"textarea":LW(e,n);break;case"select":t=n.value,t!=null&&ol(e,!!n.multiple,t,!1)}};jW=af;_W=Qs;var Jx={usingClientEntryPoint:!1,Events:[_I,Mr,lu,QW,PW,af]},Ba={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yx={bundleType:Ba.bundleType,version:Ba.version,rendererPackageName:Ba.rendererPackageName,rendererConfig:Ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ug.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=$W(e),e===null?null:e.stateNode},findFiberByHostInstance:Ba.findFiberByHostInstance||wx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oC.isDisabled&&oC.supportsFiber)try{iu=oC.inject(Yx),Xi=oC}catch{}}ko.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jx;ko.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mf(t))throw Error(oe(200));return kx(e,t,null,n)};ko.createRoot=function(e,t){if(!mf(e))throw Error(oe(299));var n=!1,o="",i=wR;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=df(e,1,!1,null,null,n,!1,o,i),e[ag]=t.current,pI(e.nodeType===8?e.parentNode:e),new Af(t)};ko.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(oe(188)):(e=Object.keys(e).join(","),Error(oe(268,e)));return e=$W(t),e=e===null?null:e.stateNode,e};ko.flushSync=function(e){return Qs(e)};ko.hydrate=function(e,t,n){if(!hu(t))throw Error(oe(200));return pu(null,e,t,!0,n)};ko.hydrateRoot=function(e,t,n){if(!mf(e))throw Error(oe(405));var o=n!=null&&n.hydratedSources||null,i=!1,s="",r=wR;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(r=n.onRecoverableError)),t=kR(t,null,e,1,n??null,i,!1,s,r),e[ag]=t.current,pI(e),o)for(e=0;e<o.length;e++)n=o[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new mu(t)};ko.render=function(e,t,n){if(!hu(t))throw Error(oe(200));return pu(null,e,t,!1,n)};ko.unmountComponentAtNode=function(e){if(!hu(e))throw Error(oe(40));return e._reactRootContainer?(Qs(function(){pu(null,null,e,!1,function(){e._reactRootContainer=null,e[ag]=null})}),!0):!1};ko.unstable_batchedUpdates=af;ko.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!hu(n))throw Error(oe(200));if(e==null||e._reactInternals===void 0)throw Error(oe(38));return pu(e,t,n,!1,o)};ko.version="18.3.1-next-f1338f8080-20240426";function XR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XR)}catch(e){console.error(e)}}XR(),XW.exports=ko;var qI=XW.exports;const Ma=Zb(qI),Hx=bW({__proto__:null,default:Ma},[qI]);var JR,ZG=qI;JR=ZG.createRoot,ZG.hydrateRoot;var YR={exports:{}},xx="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Nx=xx,Fx=Nx;function HR(){}function xR(){}xR.resetWarningCache=HR;var Kx=function(){function e(o,i,s,r,I,a){if(a!==Fx){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:xR,resetWarningCache:HR};return n.PropTypes=n,n};YR.exports=Kx();var Di=YR.exports;const Ex=Zb(Di);var Mx=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const Lx=e=>{const t=e??{},{isLoggedIn:n=()=>!1,login:o=()=>{},logout:i=()=>{}}=t,s=Mx(t,["isLoggedIn","login","logout"]),[r,I]=B.useState(!1);B.useEffect(()=>{I(n())},[n]);const a=(...C)=>{o(...C),I(n())},c=()=>{i(),I(n())};return[r,Object.assign(Object.assign({},s),{isLoggedIn:n,login:a,logout:c})]},zx="modulepreload",Tx=function(e){return"/"+e},yG={},Ux=function(t,n,o){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),I=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));i=Promise.allSettled(n.map(a=>{if(a=Tx(a),a in yG)return;yG[a]=!0;const c=a.endsWith(".css"),C=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${C}`))return;const A=document.createElement("link");if(A.rel=c?"stylesheet":zx,c||(A.as="script"),A.crossOrigin="",A.href=a,I&&A.setAttribute("nonce",I),document.head.appendChild(A),c)return new Promise((m,p)=>{A.addEventListener("load",m),A.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${a}`)))})}))}function s(r){const I=new Event("vite:preloadError",{cancelable:!0});if(I.payload=r,window.dispatchEvent(I),!I.defaultPrevented)throw r}return i.then(r=>{for(const I of r||[])I.status==="rejected"&&s(I.reason);return t().catch(s)})};var NR=function(e,t,n,o){function i(s){return s instanceof n?s:new n(function(r){r(s)})}return new(n||(n=Promise))(function(s,r){function I(C){try{c(o.next(C))}catch(A){r(A)}}function a(C){try{c(o.throw(C))}catch(A){r(A)}}function c(C){C.done?s(C.value):i(C.value).then(I,a)}c((o=o.apply(e,t||[])).next())})},Dx=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const Qx=()=>NR(void 0,void 0,void 0,function*(){var e;return(e=window.liff)!==null&&e!==void 0?e:(yield Ux(()=>import("./index-yc4nmKtY.js"),[])).default}),Px=(e,t)=>{Array.isArray(t)?e.use(...t):e.use(t)},jx=e=>NR(void 0,void 0,void 0,function*(){var{plugins:t=[],callback:n=()=>{}}=e,o=Dx(e,["plugins","callback"]);const i=yield Qx();return t.forEach(s=>Px(i,s)),yield i.init(o),yield n(i),i});var _x=function(e,t,n,o){function i(s){return s instanceof n?s:new n(function(r){r(s)})}return new(n||(n=Promise))(function(s,r){function I(C){try{c(o.next(C))}catch(A){r(A)}}function a(C){try{c(o.throw(C))}catch(A){r(A)}}function c(C){C.done?s(C.value):i(C.value).then(I,a)}c((o=o.apply(e,t||[])).next())})},Ox=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const qx={children:Di.element.isRequired,liffId:Di.string.isRequired,withLoginOnExternalBrowser:Di.bool,plugins:Di.arrayOf(Di.oneOfType([Di.object,Di.array])),callback:Di.func},$x=e=>{const t=n=>{var{children:o}=n,i=Ox(n,["children"]);const[s,r]=B.useState(),[I,a]=B.useState(!1),[c,C]=B.useState(),[A,m]=Lx(c);return B.useEffect(()=>{_x(void 0,void 0,void 0,function*(){try{C(yield jx(i)),a(!0)}catch(p){r(p)}})},[i]),B.createElement(e.Provider,{value:{error:s,isLoggedIn:A,isReady:I,liff:m}},o)};return t.propTypes=qx,t},eN=()=>{const e=B.createContext({isLoggedIn:!1,isReady:!1,liff:{}});return e.displayName="LiffContext",{LiffConsumer:e.Consumer,LiffProvider:$x(e),useLiff:()=>B.useContext(e)}},{LiffConsumer:fee,LiffProvider:tN,useLiff:hf}=eN(),pf=B.createContext(),FR=({children:e})=>{const[t,n]=B.useState([]),o=s=>{n(r=>{const I=[...r],a=I.findIndex(c=>c.name===s.name);return a>=0?(console.log("existingProductIndex:",a),console.log("updatedCart:",I[a].quantity),I[a].quantity+=1):I.push({...s,quantity:1}),I})},i=s=>{n(r=>r.map(a=>a.id===s&&a.quantity>0?{...a,quantity:a.quantity-1}:a).filter(a=>a.quantity>0))};return d.jsx(pf.Provider,{value:{cartItems:t,addToCart:o,removeFromCart:i},children:e})};FR.propTypes={children:Ex.node.isRequired};/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xt(){return Xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Xt.apply(this,arguments)}var $t;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})($t||($t={}));const GG="popstate";function nN(e){e===void 0&&(e={});function t(o,i){let{pathname:s,search:r,hash:I}=o.location;return WI("",{pathname:s,search:r,hash:I},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(o,i){return typeof i=="string"?i:Ps(i)}return iN(t,n,null,e)}function Te(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Zl(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function oN(){return Math.random().toString(36).substr(2,8)}function BG(e,t){return{usr:e.state,key:e.key,idx:t}}function WI(e,t,n,o){return n===void 0&&(n=null),Xt({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?es(t):t,{state:n,key:t&&t.key||o||oN()})}function Ps(e){let{pathname:t="/",search:n="",hash:o=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function es(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function iN(e,t,n,o){o===void 0&&(o={});let{window:i=document.defaultView,v5Compat:s=!1}=o,r=i.history,I=$t.Pop,a=null,c=C();c==null&&(c=0,r.replaceState(Xt({},r.state,{idx:c}),""));function C(){return(r.state||{idx:null}).idx}function A(){I=$t.Pop;let v=C(),f=v==null?null:v-c;c=v,a&&a({action:I,location:Z.location,delta:f})}function m(v,f){I=$t.Push;let G=WI(Z.location,v,f);c=C()+1;let y=BG(G,c),W=Z.createHref(G);try{r.pushState(y,"",W)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(W)}s&&a&&a({action:I,location:Z.location,delta:1})}function p(v,f){I=$t.Replace;let G=WI(Z.location,v,f);c=C();let y=BG(G,c),W=Z.createHref(G);r.replaceState(y,"",W),s&&a&&a({action:I,location:Z.location,delta:0})}function b(v){let f=i.location.origin!=="null"?i.location.origin:i.location.href,G=typeof v=="string"?v:Ps(v);return G=G.replace(/ $/,"%20"),Te(f,"No window.location.(origin|href) available to create URL for href: "+G),new URL(G,f)}let Z={get action(){return I},get location(){return e(i,r)},listen(v){if(a)throw new Error("A history only accepts one active listener");return i.addEventListener(GG,A),a=v,()=>{i.removeEventListener(GG,A),a=null}},createHref(v){return t(i,v)},createURL:b,encodeLocation(v){let f=b(v);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:m,replace:p,go(v){return r.go(v)}};return Z}var ht;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ht||(ht={}));const gN=new Set(["lazy","caseSensitive","path","id","index","children"]);function sN(e){return e.index===!0}function VI(e,t,n,o){return n===void 0&&(n=[]),o===void 0&&(o={}),e.map((i,s)=>{let r=[...n,String(s)],I=typeof i.id=="string"?i.id:r.join("-");if(Te(i.index!==!0||!i.children,"Cannot specify children on an index route"),Te(!o[I],'Found a route id collision on id "'+I+`".  Route id's must be globally unique within Data Router usages`),sN(i)){let a=Xt({},i,t(i),{id:I});return o[I]=a,a}else{let a=Xt({},i,t(i),{id:I,children:void 0});return o[I]=a,i.children&&(a.children=VI(i.children,t,r,o)),a}})}function Ss(e,t,n){return n===void 0&&(n="/"),kC(e,t,n,!1)}function kC(e,t,n,o){let i=typeof t=="string"?es(t):t,s=Cg(i.pathname||"/",n);if(s==null)return null;let r=KR(e);lN(r);let I=null;for(let a=0;I==null&&a<r.length;++a){let c=bN(s);I=hN(r[a],c,o)}return I}function rN(e,t){let{route:n,pathname:o,params:i}=e;return{id:n.id,pathname:o,params:i,data:t[n.id],handle:n.handle}}function KR(e,t,n,o){t===void 0&&(t=[]),n===void 0&&(n=[]),o===void 0&&(o="");let i=(s,r,I)=>{let a={relativePath:I===void 0?s.path||"":I,caseSensitive:s.caseSensitive===!0,childrenIndex:r,route:s};a.relativePath.startsWith("/")&&(Te(a.relativePath.startsWith(o),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(o.length));let c=tg([o,a.relativePath]),C=n.concat(a);s.children&&s.children.length>0&&(Te(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),KR(s.children,t,C,c)),!(s.path==null&&!s.index)&&t.push({path:c,score:AN(c,s.index),routesMeta:C})};return e.forEach((s,r)=>{var I;if(s.path===""||!((I=s.path)!=null&&I.includes("?")))i(s,r);else for(let a of ER(s.path))i(s,r,a)}),t}function ER(e){let t=e.split("/");if(t.length===0)return[];let[n,...o]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(o.length===0)return i?[s,""]:[s];let r=ER(o.join("/")),I=[];return I.push(...r.map(a=>a===""?s:[s,a].join("/"))),i&&I.push(...r),I.map(a=>e.startsWith("/")&&a===""?"/":a)}function lN(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:mN(t.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}const aN=/^:[\w-]+$/,IN=3,cN=2,CN=1,dN=10,uN=-2,SG=e=>e==="*";function AN(e,t){let n=e.split("/"),o=n.length;return n.some(SG)&&(o+=uN),t&&(o+=cN),n.filter(i=>!SG(i)).reduce((i,s)=>i+(aN.test(s)?IN:s===""?CN:dN),o)}function mN(e,t){return e.length===t.length&&e.slice(0,-1).every((o,i)=>o===t[i])?e[e.length-1]-t[t.length-1]:0}function hN(e,t,n){n===void 0&&(n=!1);let{routesMeta:o}=e,i={},s="/",r=[];for(let I=0;I<o.length;++I){let a=o[I],c=I===o.length-1,C=s==="/"?t:t.slice(s.length)||"/",A=bd({path:a.relativePath,caseSensitive:a.caseSensitive,end:c},C),m=a.route;if(!A&&c&&n&&!o[o.length-1].route.index&&(A=bd({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},C)),!A)return null;Object.assign(i,A.params),r.push({params:i,pathname:tg([s,A.pathname]),pathnameBase:yN(tg([s,A.pathnameBase])),route:m}),A.pathnameBase!=="/"&&(s=tg([s,A.pathnameBase]))}return r}function bd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,o]=pN(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],r=s.replace(/(.)\/+$/,"$1"),I=i.slice(1);return{params:o.reduce((c,C,A)=>{let{paramName:m,isOptional:p}=C;if(m==="*"){let Z=I[A]||"";r=s.slice(0,s.length-Z.length).replace(/(.)\/+$/,"$1")}const b=I[A];return p&&!b?c[m]=void 0:c[m]=(b||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:r,pattern:e}}function pN(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Zl(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(r,I,a)=>(o.push({paramName:I,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),o]}function bN(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Zl(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Cg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,o=e.charAt(n);return o&&o!=="/"?null:e.slice(n)||"/"}function fN(e,t){t===void 0&&(t="/");let{pathname:n,search:o="",hash:i=""}=typeof e=="string"?es(e):e;return{pathname:n?n.startsWith("/")?n:ZN(n,t):t,search:GN(o),hash:BN(i)}}function ZN(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Pm(e,t,n,o){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function MR(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function bf(e,t){let n=MR(e);return t?n.map((o,i)=>i===n.length-1?o.pathname:o.pathnameBase):n.map(o=>o.pathnameBase)}function ff(e,t,n,o){o===void 0&&(o=!1);let i;typeof e=="string"?i=es(e):(i=Xt({},e),Te(!i.pathname||!i.pathname.includes("?"),Pm("?","pathname","search",i)),Te(!i.pathname||!i.pathname.includes("#"),Pm("#","pathname","hash",i)),Te(!i.search||!i.search.includes("#"),Pm("#","search","hash",i)));let s=e===""||i.pathname==="",r=s?"/":i.pathname,I;if(r==null)I=n;else{let A=t.length-1;if(!o&&r.startsWith("..")){let m=r.split("/");for(;m[0]==="..";)m.shift(),A-=1;i.pathname=m.join("/")}I=A>=0?t[A]:"/"}let a=fN(i,I),c=r&&r!=="/"&&r.endsWith("/"),C=(s||r===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(c||C)&&(a.pathname+="/"),a}const tg=e=>e.join("/").replace(/\/\/+/g,"/"),yN=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),GN=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,BN=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class fd{constructor(t,n,o,i){i===void 0&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}}function bu(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const LR=["post","put","patch","delete"],SN=new Set(LR),vN=["get",...LR],WN=new Set(vN),VN=new Set([301,302,303,307,308]),RN=new Set([307,308]),jm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},kN={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Sa={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Zf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wN=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),zR="remix-router-transitions";function XN(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",o=!n;Te(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let Y=e.detectErrorBoundary;i=K=>({hasErrorBoundary:Y(K)})}else i=wN;let s={},r=VI(e.routes,i,void 0,s),I,a=e.basename||"/",c=e.unstable_dataStrategy||FN,C=e.unstable_patchRoutesOnNavigation,A=Xt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),m=null,p=new Set,b=1e3,Z=new Set,v=null,f=null,G=null,y=e.hydrationData!=null,W=Ss(r,e.history.location,a),V=null;if(W==null&&!C){let Y=Un(404,{pathname:e.history.location.pathname}),{matches:K,route:z}=YG(r);W=K,V={[z.id]:Y}}W&&!e.hydrationData&&ur(W,r,e.history.location.pathname).active&&(W=null);let X;if(W)if(W.some(Y=>Y.route.lazy))X=!1;else if(!W.some(Y=>Y.route.loader))X=!0;else if(A.v7_partialHydration){let Y=e.hydrationData?e.hydrationData.loaderData:null,K=e.hydrationData?e.hydrationData.errors:null,z=O=>O.route.loader?typeof O.route.loader=="function"&&O.route.loader.hydrate===!0?!1:Y&&Y[O.route.id]!==void 0||K&&K[O.route.id]!==void 0:!0;if(K){let O=W.findIndex(ce=>K[ce.route.id]!==void 0);X=W.slice(0,O+1).every(z)}else X=W.every(z)}else X=e.hydrationData!=null;else if(X=!1,W=[],A.v7_partialHydration){let Y=ur(null,r,e.history.location.pathname);Y.active&&Y.matches&&(W=Y.matches)}let R,k={historyAction:e.history.action,location:e.history.location,matches:W,initialized:X,navigation:jm,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||V,fetchers:new Map,blockers:new Map},F=$t.Pop,x=!1,M,Q=!1,q=new Map,j=null,ne=!1,ee=!1,te=[],N=new Set,_=new Map,P=0,le=-1,ae=new Map,ye=new Set,se=new Map,ue=new Map,ie=new Set,Je=new Map,Ue=new Map,je=new Map,ft;function Ke(){if(m=e.history.listen(Y=>{let{action:K,location:z,delta:O}=Y;if(ft){ft(),ft=void 0;return}Zl(Ue.size===0||O!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ce=ia({currentLocation:k.location,nextLocation:z,historyAction:K});if(ce&&O!=null){let be=new Promise(Ve=>{ft=Ve});e.history.go(O*-1),rs(ce,{state:"blocked",location:z,proceed(){rs(ce,{state:"proceeding",proceed:void 0,reset:void 0,location:z}),be.then(()=>e.history.go(O))},reset(){let Ve=new Map(k.blockers);Ve.set(ce,Sa),Re({blockers:Ve})}});return}return Bt(K,z)}),n){$N(t,q);let Y=()=>eF(t,q);t.addEventListener("pagehide",Y),j=()=>t.removeEventListener("pagehide",Y)}return k.initialized||Bt($t.Pop,k.location,{initialHydration:!0}),R}function Me(){m&&m(),j&&j(),p.clear(),M&&M.abort(),k.fetchers.forEach((Y,K)=>Ze(K)),k.blockers.forEach((Y,K)=>oa(K))}function Ye(Y){return p.add(Y),()=>p.delete(Y)}function Re(Y,K){K===void 0&&(K={}),k=Xt({},k,Y);let z=[],O=[];A.v7_fetcherPersist&&k.fetchers.forEach((ce,be)=>{ce.state==="idle"&&(ie.has(be)?O.push(be):z.push(be))}),[...p].forEach(ce=>ce(k,{deletedFetchers:O,unstable_viewTransitionOpts:K.viewTransitionOpts,unstable_flushSync:K.flushSync===!0})),A.v7_fetcherPersist&&(z.forEach(ce=>k.fetchers.delete(ce)),O.forEach(ce=>Ze(ce)))}function _e(Y,K,z){var O,ce;let{flushSync:be}=z===void 0?{}:z,Ve=k.actionData!=null&&k.navigation.formMethod!=null&&ci(k.navigation.formMethod)&&k.navigation.state==="loading"&&((O=Y.state)==null?void 0:O._isRedirect)!==!0,ge;K.actionData?Object.keys(K.actionData).length>0?ge=K.actionData:ge=null:Ve?ge=k.actionData:ge=null;let Be=K.loaderData?XG(k.loaderData,K.loaderData,K.matches||[],K.errors):k.loaderData,he=k.blockers;he.size>0&&(he=new Map(he),he.forEach((ot,mt)=>he.set(mt,Sa)));let pe=x===!0||k.navigation.formMethod!=null&&ci(k.navigation.formMethod)&&((ce=Y.state)==null?void 0:ce._isRedirect)!==!0;I&&(r=I,I=void 0),ne||F===$t.Pop||(F===$t.Push?e.history.push(Y,Y.state):F===$t.Replace&&e.history.replace(Y,Y.state));let qe;if(F===$t.Pop){let ot=q.get(k.location.pathname);ot&&ot.has(Y.pathname)?qe={currentLocation:k.location,nextLocation:Y}:q.has(Y.pathname)&&(qe={currentLocation:Y,nextLocation:k.location})}else if(Q){let ot=q.get(k.location.pathname);ot?ot.add(Y.pathname):(ot=new Set([Y.pathname]),q.set(k.location.pathname,ot)),qe={currentLocation:k.location,nextLocation:Y}}Re(Xt({},K,{actionData:ge,loaderData:Be,historyAction:F,location:Y,initialized:!0,navigation:jm,revalidation:"idle",restoreScrollPosition:dr(Y,K.matches||k.matches),preventScrollReset:pe,blockers:he}),{viewTransitionOpts:qe,flushSync:be===!0}),F=$t.Pop,x=!1,Q=!1,ne=!1,ee=!1,te=[]}async function qn(Y,K){if(typeof Y=="number"){e.history.go(Y);return}let z=Gp(k.location,k.matches,a,A.v7_prependBasename,Y,A.v7_relativeSplatPath,K==null?void 0:K.fromRouteId,K==null?void 0:K.relative),{path:O,submission:ce,error:be}=vG(A.v7_normalizeFormMethod,!1,z,K),Ve=k.location,ge=WI(k.location,O,K&&K.state);ge=Xt({},ge,e.history.encodeLocation(ge));let Be=K&&K.replace!=null?K.replace:void 0,he=$t.Push;Be===!0?he=$t.Replace:Be===!1||ce!=null&&ci(ce.formMethod)&&ce.formAction===k.location.pathname+k.location.search&&(he=$t.Replace);let pe=K&&"preventScrollReset"in K?K.preventScrollReset===!0:void 0,qe=(K&&K.unstable_flushSync)===!0,ot=ia({currentLocation:Ve,nextLocation:ge,historyAction:he});if(ot){rs(ot,{state:"blocked",location:ge,proceed(){rs(ot,{state:"proceeding",proceed:void 0,reset:void 0,location:ge}),qn(Y,K)},reset(){let mt=new Map(k.blockers);mt.set(ot,Sa),Re({blockers:mt})}});return}return await Bt(he,ge,{submission:ce,pendingError:be,preventScrollReset:pe,replace:K&&K.replace,enableViewTransition:K&&K.unstable_viewTransition,flushSync:qe})}function an(){if(Ge(),Re({revalidation:"loading"}),k.navigation.state!=="submitting"){if(k.navigation.state==="idle"){Bt(k.historyAction,k.location,{startUninterruptedRevalidation:!0});return}Bt(F||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:Q===!0})}}async function Bt(Y,K,z){M&&M.abort(),M=null,F=Y,ne=(z&&z.startUninterruptedRevalidation)===!0,OA(k.location,k.matches),x=(z&&z.preventScrollReset)===!0,Q=(z&&z.enableViewTransition)===!0;let O=I||r,ce=z&&z.overrideNavigation,be=Ss(O,K,a),Ve=(z&&z.flushSync)===!0,ge=ur(be,O,K.pathname);if(ge.active&&ge.matches&&(be=ge.matches),!be){let{error:Pe,notFoundMatches:wt,route:Ft}=ga(K.pathname);_e(K,{matches:wt,loaderData:{},errors:{[Ft.id]:Pe}},{flushSync:Ve});return}if(k.initialized&&!ee&&TN(k.location,K)&&!(z&&z.submission&&ci(z.submission.formMethod))){_e(K,{matches:be},{flushSync:Ve});return}M=new AbortController;let Be=Br(e.history,K,M.signal,z&&z.submission),he;if(z&&z.pendingError)he=[Pr(be).route.id,{type:ht.error,error:z.pendingError}];else if(z&&z.submission&&ci(z.submission.formMethod)){let Pe=await Ln(Be,K,z.submission,be,ge.active,{replace:z.replace,flushSync:Ve});if(Pe.shortCircuited)return;if(Pe.pendingActionResult){let[wt,Ft]=Pe.pendingActionResult;if(Zo(Ft)&&bu(Ft.error)&&Ft.error.status===404){M=null,_e(K,{matches:Pe.matches,loaderData:{},errors:{[wt]:Ft.error}});return}}be=Pe.matches||be,he=Pe.pendingActionResult,ce=_m(K,z.submission),Ve=!1,ge.active=!1,Be=Br(e.history,Be.url,Be.signal)}let{shortCircuited:pe,matches:qe,loaderData:ot,errors:mt}=await Zn(Be,K,be,ge.active,ce,z&&z.submission,z&&z.fetcherSubmission,z&&z.replace,z&&z.initialHydration===!0,Ve,he);pe||(M=null,_e(K,Xt({matches:qe||be},JG(he),{loaderData:ot,errors:mt})))}async function Ln(Y,K,z,O,ce,be){be===void 0&&(be={}),Ge();let Ve=ON(K,z);if(Re({navigation:Ve},{flushSync:be.flushSync===!0}),ce){let he=await Ar(O,K.pathname,Y.signal);if(he.type==="aborted")return{shortCircuited:!0};if(he.type==="error"){let{boundaryId:pe,error:qe}=Cr(K.pathname,he);return{matches:he.partialMatches,pendingActionResult:[pe,{type:ht.error,error:qe}]}}else if(he.matches)O=he.matches;else{let{notFoundMatches:pe,error:qe,route:ot}=ga(K.pathname);return{matches:pe,pendingActionResult:[ot.id,{type:ht.error,error:qe}]}}}let ge,Be=La(O,K);if(!Be.route.action&&!Be.route.lazy)ge={type:ht.error,error:Un(405,{method:Y.method,pathname:K.pathname,routeId:Be.route.id})};else if(ge=(await In("action",k,Y,[Be],O,null))[Be.route.id],Y.signal.aborted)return{shortCircuited:!0};if(Rs(ge)){let he;return be&&be.replace!=null?he=be.replace:he=RG(ge.response.headers.get("Location"),new URL(Y.url),a)===k.location.pathname+k.location.search,await _t(Y,ge,!0,{submission:z,replace:he}),{shortCircuited:!0}}if(Jg(ge))throw Un(400,{type:"defer-action"});if(Zo(ge)){let he=Pr(O,Be.route.id);return(be&&be.replace)!==!0&&(F=$t.Push),{matches:O,pendingActionResult:[he.route.id,ge]}}return{matches:O,pendingActionResult:[Be.route.id,ge]}}async function Zn(Y,K,z,O,ce,be,Ve,ge,Be,he,pe){let qe=ce||_m(K,be),ot=be||Ve||xG(qe),mt=!ne&&(!A.v7_partialHydration||!Be);if(O){if(mt){let ke=rt(pe);Re(Xt({navigation:qe},ke!==void 0?{actionData:ke}:{}),{flushSync:he})}let re=await Ar(z,K.pathname,Y.signal);if(re.type==="aborted")return{shortCircuited:!0};if(re.type==="error"){let{boundaryId:ke,error:Cn}=Cr(K.pathname,re);return{matches:re.partialMatches,loaderData:{},errors:{[ke]:Cn}}}else if(re.matches)z=re.matches;else{let{error:ke,notFoundMatches:Cn,route:It}=ga(K.pathname);return{matches:Cn,loaderData:{},errors:{[It.id]:ke}}}}let Pe=I||r,[wt,Ft]=WG(e.history,k,z,ot,K,A.v7_partialHydration&&Be===!0,A.v7_skipActionErrorRevalidation,ee,te,N,ie,se,ye,Pe,a,pe);if(sa(re=>!(z&&z.some(ke=>ke.route.id===re))||wt&&wt.some(ke=>ke.route.id===re)),le=++P,wt.length===0&&Ft.length===0){let re=ii();return _e(K,Xt({matches:z,loaderData:{},errors:pe&&Zo(pe[1])?{[pe[0]]:pe[1].error}:null},JG(pe),re?{fetchers:new Map(k.fetchers)}:{}),{flushSync:he}),{shortCircuited:!0}}if(mt){let re={};if(!O){re.navigation=qe;let ke=rt(pe);ke!==void 0&&(re.actionData=ke)}Ft.length>0&&(re.fetchers=$n(Ft)),Re(re,{flushSync:he})}Ft.forEach(re=>{_.has(re.key)&&at(re.key),re.controller&&_.set(re.key,re.controller)});let ls=()=>Ft.forEach(re=>at(re.key));M&&M.signal.addEventListener("abort",ls);let{loaderResults:gi,fetcherResults:hg}=await et(k,z,wt,Ft,Y);if(Y.signal.aborted)return{shortCircuited:!0};M&&M.signal.removeEventListener("abort",ls),Ft.forEach(re=>_.delete(re.key));let fi=iC(gi);if(fi)return await _t(Y,fi.result,!0,{replace:ge}),{shortCircuited:!0};if(fi=iC(hg),fi)return ye.add(fi.key),await _t(Y,fi.result,!0,{replace:ge}),{shortCircuited:!0};let{loaderData:pg,errors:zn}=wG(k,z,wt,gi,pe,Ft,hg,Je);Je.forEach((re,ke)=>{re.subscribe(Cn=>{(Cn||re.done)&&Je.delete(ke)})}),A.v7_partialHydration&&Be&&k.errors&&Object.entries(k.errors).filter(re=>{let[ke]=re;return!wt.some(Cn=>Cn.route.id===ke)}).forEach(re=>{let[ke,Cn]=re;zn=Object.assign(zn||{},{[ke]:Cn})});let as=ii(),Is=yc(le),Zi=as||Is||Ft.length>0;return Xt({matches:z,loaderData:pg,errors:zn},Zi?{fetchers:new Map(k.fetchers)}:{})}function rt(Y){if(Y&&!Zo(Y[1]))return{[Y[0]]:Y[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function $n(Y){return Y.forEach(K=>{let z=k.fetchers.get(K.key),O=va(void 0,z?z.data:void 0);k.fetchers.set(K.key,O)}),new Map(k.fetchers)}function gn(Y,K,z,O){if(o)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");_.has(Y)&&at(Y);let ce=(O&&O.unstable_flushSync)===!0,be=I||r,Ve=Gp(k.location,k.matches,a,A.v7_prependBasename,z,A.v7_relativeSplatPath,K,O==null?void 0:O.relative),ge=Ss(be,Ve,a),Be=ur(ge,be,Ve);if(Be.active&&Be.matches&&(ge=Be.matches),!ge){cn(Y,K,Un(404,{pathname:Ve}),{flushSync:ce});return}let{path:he,submission:pe,error:qe}=vG(A.v7_normalizeFormMethod,!0,Ve,O);if(qe){cn(Y,K,qe,{flushSync:ce});return}let ot=La(ge,he);if(x=(O&&O.preventScrollReset)===!0,pe&&ci(pe.formMethod)){At(Y,K,he,ot,ge,Be.active,ce,pe);return}se.set(Y,{routeId:K,path:he}),eo(Y,K,he,ot,ge,Be.active,ce,pe)}async function At(Y,K,z,O,ce,be,Ve,ge){Ge(),se.delete(Y);function Be(It){if(!It.route.action&&!It.route.lazy){let Rn=Un(405,{method:ge.formMethod,pathname:z,routeId:K});return cn(Y,K,Rn,{flushSync:Ve}),!0}return!1}if(!be&&Be(O))return;let he=k.fetchers.get(Y);Lt(Y,qN(ge,he),{flushSync:Ve});let pe=new AbortController,qe=Br(e.history,z,pe.signal,ge);if(be){let It=await Ar(ce,z,qe.signal);if(It.type==="aborted")return;if(It.type==="error"){let{error:Rn}=Cr(z,It);cn(Y,K,Rn,{flushSync:Ve});return}else if(It.matches){if(ce=It.matches,O=La(ce,z),Be(O))return}else{cn(Y,K,Un(404,{pathname:z}),{flushSync:Ve});return}}_.set(Y,pe);let ot=P,Pe=(await In("action",k,qe,[O],ce,Y))[O.route.id];if(qe.signal.aborted){_.get(Y)===pe&&_.delete(Y);return}if(A.v7_fetcherPersist&&ie.has(Y)){if(Rs(Pe)||Zo(Pe)){Lt(Y,Bg(void 0));return}}else{if(Rs(Pe))if(_.delete(Y),le>ot){Lt(Y,Bg(void 0));return}else return ye.add(Y),Lt(Y,va(ge)),_t(qe,Pe,!1,{fetcherSubmission:ge});if(Zo(Pe)){cn(Y,K,Pe.error);return}}if(Jg(Pe))throw Un(400,{type:"defer-action"});let wt=k.navigation.location||k.location,Ft=Br(e.history,wt,pe.signal),ls=I||r,gi=k.navigation.state!=="idle"?Ss(ls,k.navigation.location,a):k.matches;Te(gi,"Didn't find any matches after fetcher action");let hg=++P;ae.set(Y,hg);let fi=va(ge,Pe.data);k.fetchers.set(Y,fi);let[pg,zn]=WG(e.history,k,gi,ge,wt,!1,A.v7_skipActionErrorRevalidation,ee,te,N,ie,se,ye,ls,a,[O.route.id,Pe]);zn.filter(It=>It.key!==Y).forEach(It=>{let Rn=It.key,mr=k.fetchers.get(Rn),He=va(void 0,mr?mr.data:void 0);k.fetchers.set(Rn,He),_.has(Rn)&&at(Rn),It.controller&&_.set(Rn,It.controller)}),Re({fetchers:new Map(k.fetchers)});let as=()=>zn.forEach(It=>at(It.key));pe.signal.addEventListener("abort",as);let{loaderResults:Is,fetcherResults:Zi}=await et(k,gi,pg,zn,Ft);if(pe.signal.aborted)return;pe.signal.removeEventListener("abort",as),ae.delete(Y),_.delete(Y),zn.forEach(It=>_.delete(It.key));let re=iC(Is);if(re)return _t(Ft,re.result,!1);if(re=iC(Zi),re)return ye.add(re.key),_t(Ft,re.result,!1);let{loaderData:ke,errors:Cn}=wG(k,gi,pg,Is,void 0,zn,Zi,Je);if(k.fetchers.has(Y)){let It=Bg(Pe.data);k.fetchers.set(Y,It)}yc(hg),k.navigation.state==="loading"&&hg>le?(Te(F,"Expected pending action"),M&&M.abort(),_e(k.navigation.location,{matches:gi,loaderData:ke,errors:Cn,fetchers:new Map(k.fetchers)})):(Re({errors:Cn,loaderData:XG(k.loaderData,ke,gi,Cn),fetchers:new Map(k.fetchers)}),ee=!1)}async function eo(Y,K,z,O,ce,be,Ve,ge){let Be=k.fetchers.get(Y);Lt(Y,va(ge,Be?Be.data:void 0),{flushSync:Ve});let he=new AbortController,pe=Br(e.history,z,he.signal);if(be){let Pe=await Ar(ce,z,pe.signal);if(Pe.type==="aborted")return;if(Pe.type==="error"){let{error:wt}=Cr(z,Pe);cn(Y,K,wt,{flushSync:Ve});return}else if(Pe.matches)ce=Pe.matches,O=La(ce,z);else{cn(Y,K,Un(404,{pathname:z}),{flushSync:Ve});return}}_.set(Y,he);let qe=P,mt=(await In("loader",k,pe,[O],ce,Y))[O.route.id];if(Jg(mt)&&(mt=await yf(mt,pe.signal,!0)||mt),_.get(Y)===he&&_.delete(Y),!pe.signal.aborted){if(ie.has(Y)){Lt(Y,Bg(void 0));return}if(Rs(mt))if(le>qe){Lt(Y,Bg(void 0));return}else{ye.add(Y),await _t(pe,mt,!1);return}if(Zo(mt)){cn(Y,K,mt.error);return}Te(!Jg(mt),"Unhandled fetcher deferred data"),Lt(Y,Bg(mt.data))}}async function _t(Y,K,z,O){let{submission:ce,fetcherSubmission:be,replace:Ve}=O===void 0?{}:O;K.response.headers.has("X-Remix-Revalidate")&&(ee=!0);let ge=K.response.headers.get("Location");Te(ge,"Expected a Location header on the redirect Response"),ge=RG(ge,new URL(Y.url),a);let Be=WI(k.location,ge,{_isRedirect:!0});if(n){let Pe=!1;if(K.response.headers.has("X-Remix-Reload-Document"))Pe=!0;else if(Zf.test(ge)){const wt=e.history.createURL(ge);Pe=wt.origin!==t.location.origin||Cg(wt.pathname,a)==null}if(Pe){Ve?t.location.replace(ge):t.location.assign(ge);return}}M=null;let he=Ve===!0||K.response.headers.has("X-Remix-Replace")?$t.Replace:$t.Push,{formMethod:pe,formAction:qe,formEncType:ot}=k.navigation;!ce&&!be&&pe&&qe&&ot&&(ce=xG(k.navigation));let mt=ce||be;if(RN.has(K.response.status)&&mt&&ci(mt.formMethod))await Bt(he,Be,{submission:Xt({},mt,{formAction:ge}),preventScrollReset:x,enableViewTransition:z?Q:void 0});else{let Pe=_m(Be,ce);await Bt(he,Be,{overrideNavigation:Pe,fetcherSubmission:be,preventScrollReset:x,enableViewTransition:z?Q:void 0})}}async function In(Y,K,z,O,ce,be){let Ve,ge={};try{Ve=await KN(c,Y,K,z,O,ce,be,s,i)}catch(Be){return O.forEach(he=>{ge[he.route.id]={type:ht.error,error:Be}}),ge}for(let[Be,he]of Object.entries(Ve))if(DN(he)){let pe=he.result;ge[Be]={type:ht.redirect,response:LN(pe,z,Be,ce,a,A.v7_relativeSplatPath)}}else ge[Be]=await MN(he);return ge}async function et(Y,K,z,O,ce){let be=Y.matches,Ve=In("loader",Y,ce,z,K,null),ge=Promise.all(O.map(async pe=>{if(pe.matches&&pe.match&&pe.controller){let ot=(await In("loader",Y,Br(e.history,pe.path,pe.controller.signal),[pe.match],pe.matches,pe.key))[pe.match.route.id];return{[pe.key]:ot}}else return Promise.resolve({[pe.key]:{type:ht.error,error:Un(404,{pathname:pe.path})}})})),Be=await Ve,he=(await ge).reduce((pe,qe)=>Object.assign(pe,qe),{});return await Promise.all([jN(K,Be,ce.signal,be,Y.loaderData),_N(K,he,O)]),{loaderResults:Be,fetcherResults:he}}function Ge(){ee=!0,te.push(...sa()),se.forEach((Y,K)=>{_.has(K)&&(N.add(K),at(K))})}function Lt(Y,K,z){z===void 0&&(z={}),k.fetchers.set(Y,K),Re({fetchers:new Map(k.fetchers)},{flushSync:(z&&z.flushSync)===!0})}function cn(Y,K,z,O){O===void 0&&(O={});let ce=Pr(k.matches,K);Ze(Y),Re({errors:{[ce.route.id]:z},fetchers:new Map(k.fetchers)},{flushSync:(O&&O.flushSync)===!0})}function bi(Y){return A.v7_fetcherPersist&&(ue.set(Y,(ue.get(Y)||0)+1),ie.has(Y)&&ie.delete(Y)),k.fetchers.get(Y)||kN}function Ze(Y){let K=k.fetchers.get(Y);_.has(Y)&&!(K&&K.state==="loading"&&ae.has(Y))&&at(Y),se.delete(Y),ae.delete(Y),ye.delete(Y),ie.delete(Y),N.delete(Y),k.fetchers.delete(Y)}function nt(Y){if(A.v7_fetcherPersist){let K=(ue.get(Y)||0)-1;K<=0?(ue.delete(Y),ie.add(Y)):ue.set(Y,K)}else Ze(Y);Re({fetchers:new Map(k.fetchers)})}function at(Y){let K=_.get(Y);Te(K,"Expected fetch controller: "+Y),K.abort(),_.delete(Y)}function oi(Y){for(let K of Y){let z=bi(K),O=Bg(z.data);k.fetchers.set(K,O)}}function ii(){let Y=[],K=!1;for(let z of ye){let O=k.fetchers.get(z);Te(O,"Expected fetcher: "+z),O.state==="loading"&&(ye.delete(z),Y.push(z),K=!0)}return oi(Y),K}function yc(Y){let K=[];for(let[z,O]of ae)if(O<Y){let ce=k.fetchers.get(z);Te(ce,"Expected fetcher: "+z),ce.state==="loading"&&(at(z),ae.delete(z),K.push(z))}return oi(K),K.length>0}function jA(Y,K){let z=k.blockers.get(Y)||Sa;return Ue.get(Y)!==K&&Ue.set(Y,K),z}function oa(Y){k.blockers.delete(Y),Ue.delete(Y)}function rs(Y,K){let z=k.blockers.get(Y)||Sa;Te(z.state==="unblocked"&&K.state==="blocked"||z.state==="blocked"&&K.state==="blocked"||z.state==="blocked"&&K.state==="proceeding"||z.state==="blocked"&&K.state==="unblocked"||z.state==="proceeding"&&K.state==="unblocked","Invalid blocker state transition: "+z.state+" -> "+K.state);let O=new Map(k.blockers);O.set(Y,K),Re({blockers:O})}function ia(Y){let{currentLocation:K,nextLocation:z,historyAction:O}=Y;if(Ue.size===0)return;Ue.size>1&&Zl(!1,"A router only supports one blocker at a time");let ce=Array.from(Ue.entries()),[be,Ve]=ce[ce.length-1],ge=k.blockers.get(be);if(!(ge&&ge.state==="proceeding")&&Ve({currentLocation:K,nextLocation:z,historyAction:O}))return be}function ga(Y){let K=Un(404,{pathname:Y}),z=I||r,{matches:O,route:ce}=YG(z);return sa(),{notFoundMatches:O,route:ce,error:K}}function Cr(Y,K){return{boundaryId:Pr(K.partialMatches).route.id,error:Un(400,{type:"route-discovery",pathname:Y,message:K.error!=null&&"message"in K.error?K.error:String(K.error)})}}function sa(Y){let K=[];return Je.forEach((z,O)=>{(!Y||Y(O))&&(z.cancel(),K.push(O),Je.delete(O))}),K}function _A(Y,K,z){if(v=Y,G=K,f=z||null,!y&&k.navigation===jm){y=!0;let O=dr(k.location,k.matches);O!=null&&Re({restoreScrollPosition:O})}return()=>{v=null,G=null,f=null}}function Gc(Y,K){return f&&f(Y,K.map(O=>rN(O,k.loaderData)))||Y.key}function OA(Y,K){if(v&&G){let z=Gc(Y,K);v[z]=G()}}function dr(Y,K){if(v){let z=Gc(Y,K),O=v[z];if(typeof O=="number")return O}return null}function ur(Y,K,z){if(C){if(Z.has(z))return{active:!1,matches:Y};if(Y){if(Object.keys(Y[0].params).length>0)return{active:!0,matches:kC(K,z,a,!0)}}else return{active:!0,matches:kC(K,z,a,!0)||[]}}return{active:!1,matches:null}}async function Ar(Y,K,z){let O=Y;for(;;){let ce=I==null,be=I||r;try{await xN(C,K,O,be,s,i,je,z)}catch(Be){return{type:"error",error:Be,partialMatches:O}}finally{ce&&(r=[...r])}if(z.aborted)return{type:"aborted"};let Ve=Ss(be,K,a);if(Ve)return Bc(K,Z),{type:"success",matches:Ve};let ge=kC(be,K,a,!0);if(!ge||O.length===ge.length&&O.every((Be,he)=>Be.route.id===ge[he].route.id))return Bc(K,Z),{type:"success",matches:null};O=ge}}function Bc(Y,K){if(K.size>=b){let z=K.values().next().value;K.delete(z)}K.add(Y)}function qA(Y){s={},I=VI(Y,i,void 0,s)}function xo(Y,K){let z=I==null;UR(Y,K,I||r,s,i),z&&(r=[...r],Re({}))}return R={get basename(){return a},get future(){return A},get state(){return k},get routes(){return r},get window(){return t},initialize:Ke,subscribe:Ye,enableScrollRestoration:_A,navigate:qn,fetch:gn,revalidate:an,createHref:Y=>e.history.createHref(Y),encodeLocation:Y=>e.history.encodeLocation(Y),getFetcher:bi,deleteFetcher:nt,dispose:Me,getBlocker:jA,deleteBlocker:oa,patchRoutes:xo,_internalFetchControllers:_,_internalActiveDeferreds:Je,_internalSetRoutes:qA},R}function JN(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function Gp(e,t,n,o,i,s,r,I){let a,c;if(r){a=[];for(let A of t)if(a.push(A),A.route.id===r){c=A;break}}else a=t,c=t[t.length-1];let C=ff(i||".",bf(a,s),Cg(e.pathname,n)||e.pathname,I==="path");return i==null&&(C.search=e.search,C.hash=e.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!Gf(C.search)&&(C.search=C.search?C.search.replace(/^\?/,"?index&"):"?index"),o&&n!=="/"&&(C.pathname=C.pathname==="/"?n:tg([n,C.pathname])),Ps(C)}function vG(e,t,n,o){if(!o||!JN(o))return{path:n};if(o.formMethod&&!PN(o.formMethod))return{path:n,error:Un(405,{method:o.formMethod})};let i=()=>({path:n,error:Un(400,{type:"invalid-body"})}),s=o.formMethod||"get",r=e?s.toUpperCase():s.toLowerCase(),I=DR(n);if(o.body!==void 0){if(o.formEncType==="text/plain"){if(!ci(r))return i();let m=typeof o.body=="string"?o.body:o.body instanceof FormData||o.body instanceof URLSearchParams?Array.from(o.body.entries()).reduce((p,b)=>{let[Z,v]=b;return""+p+Z+"="+v+`
`},""):String(o.body);return{path:n,submission:{formMethod:r,formAction:I,formEncType:o.formEncType,formData:void 0,json:void 0,text:m}}}else if(o.formEncType==="application/json"){if(!ci(r))return i();try{let m=typeof o.body=="string"?JSON.parse(o.body):o.body;return{path:n,submission:{formMethod:r,formAction:I,formEncType:o.formEncType,formData:void 0,json:m,text:void 0}}}catch{return i()}}}Te(typeof FormData=="function","FormData is not available in this environment");let a,c;if(o.formData)a=Bp(o.formData),c=o.formData;else if(o.body instanceof FormData)a=Bp(o.body),c=o.body;else if(o.body instanceof URLSearchParams)a=o.body,c=kG(a);else if(o.body==null)a=new URLSearchParams,c=new FormData;else try{a=new URLSearchParams(o.body),c=kG(a)}catch{return i()}let C={formMethod:r,formAction:I,formEncType:o&&o.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(ci(C.formMethod))return{path:n,submission:C};let A=es(n);return t&&A.search&&Gf(A.search)&&a.append("index",""),A.search="?"+a,{path:Ps(A),submission:C}}function YN(e,t){let n=e;if(t){let o=e.findIndex(i=>i.route.id===t);o>=0&&(n=e.slice(0,o))}return n}function WG(e,t,n,o,i,s,r,I,a,c,C,A,m,p,b,Z){let v=Z?Zo(Z[1])?Z[1].error:Z[1].data:void 0,f=e.createURL(t.location),G=e.createURL(i),y=Z&&Zo(Z[1])?Z[0]:void 0,W=y?YN(n,y):n,V=Z?Z[1].statusCode:void 0,X=r&&V&&V>=400,R=W.filter((F,x)=>{let{route:M}=F;if(M.lazy)return!0;if(M.loader==null)return!1;if(s)return typeof M.loader!="function"||M.loader.hydrate?!0:t.loaderData[M.id]===void 0&&(!t.errors||t.errors[M.id]===void 0);if(HN(t.loaderData,t.matches[x],F)||a.some(j=>j===F.route.id))return!0;let Q=t.matches[x],q=F;return VG(F,Xt({currentUrl:f,currentParams:Q.params,nextUrl:G,nextParams:q.params},o,{actionResult:v,actionStatus:V,defaultShouldRevalidate:X?!1:I||f.pathname+f.search===G.pathname+G.search||f.search!==G.search||TR(Q,q)}))}),k=[];return A.forEach((F,x)=>{if(s||!n.some(ne=>ne.route.id===F.routeId)||C.has(x))return;let M=Ss(p,F.path,b);if(!M){k.push({key:x,routeId:F.routeId,path:F.path,matches:null,match:null,controller:null});return}let Q=t.fetchers.get(x),q=La(M,F.path),j=!1;m.has(x)?j=!1:c.has(x)?(c.delete(x),j=!0):Q&&Q.state!=="idle"&&Q.data===void 0?j=I:j=VG(q,Xt({currentUrl:f,currentParams:t.matches[t.matches.length-1].params,nextUrl:G,nextParams:n[n.length-1].params},o,{actionResult:v,actionStatus:V,defaultShouldRevalidate:X?!1:I})),j&&k.push({key:x,routeId:F.routeId,path:F.path,matches:M,match:q,controller:new AbortController})}),[R,k]}function HN(e,t,n){let o=!t||n.route.id!==t.route.id,i=e[n.route.id]===void 0;return o||i}function TR(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function VG(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}async function xN(e,t,n,o,i,s,r,I){let a=[t,...n.map(c=>c.route.id)].join("-");try{let c=r.get(a);c||(c=e({path:t,matches:n,patch:(C,A)=>{I.aborted||UR(C,A,o,i,s)}}),r.set(a,c)),c&&UN(c)&&await c}finally{r.delete(a)}}function UR(e,t,n,o,i){if(e){var s;let r=o[e];Te(r,"No route found to patch children into: routeId = "+e);let I=VI(t,i,[e,"patch",String(((s=r.children)==null?void 0:s.length)||"0")],o);r.children?r.children.push(...I):r.children=I}else{let r=VI(t,i,["patch",String(n.length||"0")],o);n.push(...r)}}async function NN(e,t,n){if(!e.lazy)return;let o=await e.lazy();if(!e.lazy)return;let i=n[e.id];Te(i,"No route found in manifest");let s={};for(let r in o){let a=i[r]!==void 0&&r!=="hasErrorBoundary";Zl(!a,'Route "'+i.id+'" has a static property "'+r+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+r+'" will be ignored.')),!a&&!gN.has(r)&&(s[r]=o[r])}Object.assign(i,s),Object.assign(i,Xt({},t(i),{lazy:void 0}))}async function FN(e){let{matches:t}=e,n=t.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,r)=>Object.assign(i,{[n[r].route.id]:s}),{})}async function KN(e,t,n,o,i,s,r,I,a,c){let C=s.map(p=>p.route.lazy?NN(p.route,a,I):void 0),A=s.map((p,b)=>{let Z=C[b],v=i.some(G=>G.route.id===p.route.id);return Xt({},p,{shouldLoad:v,resolve:async G=>(G&&o.method==="GET"&&(p.route.lazy||p.route.loader)&&(v=!0),v?EN(t,o,p,Z,G,c):Promise.resolve({type:ht.data,result:void 0}))})}),m=await e({matches:A,request:o,params:s[0].params,fetcherKey:r,context:c});try{await Promise.all(C)}catch{}return m}async function EN(e,t,n,o,i,s){let r,I,a=c=>{let C,A=new Promise((b,Z)=>C=Z);I=()=>C(),t.signal.addEventListener("abort",I);let m=b=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+n.route.id+"]"))):c({request:t,params:n.params,context:s},...b!==void 0?[b]:[]),p=(async()=>{try{return{type:"data",result:await(i?i(Z=>m(Z)):m())}}catch(b){return{type:"error",result:b}}})();return Promise.race([p,A])};try{let c=n.route[e];if(o)if(c){let C,[A]=await Promise.all([a(c).catch(m=>{C=m}),o]);if(C!==void 0)throw C;r=A}else if(await o,c=n.route[e],c)r=await a(c);else if(e==="action"){let C=new URL(t.url),A=C.pathname+C.search;throw Un(405,{method:t.method,pathname:A,routeId:n.route.id})}else return{type:ht.data,result:void 0};else if(c)r=await a(c);else{let C=new URL(t.url),A=C.pathname+C.search;throw Un(404,{pathname:A})}Te(r.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:ht.error,result:c}}finally{I&&t.signal.removeEventListener("abort",I)}return r}async function MN(e){let{result:t,type:n}=e;if(QR(t)){let c;try{let C=t.headers.get("Content-Type");C&&/\bapplication\/json\b/.test(C)?t.body==null?c=null:c=await t.json():c=await t.text()}catch(C){return{type:ht.error,error:C}}return n===ht.error?{type:ht.error,error:new fd(t.status,t.statusText,c),statusCode:t.status,headers:t.headers}:{type:ht.data,data:c,statusCode:t.status,headers:t.headers}}if(n===ht.error){if(HG(t)){var o;if(t.data instanceof Error){var i;return{type:ht.error,error:t.data,statusCode:(i=t.init)==null?void 0:i.status}}t=new fd(((o=t.init)==null?void 0:o.status)||500,void 0,t.data)}return{type:ht.error,error:t,statusCode:bu(t)?t.status:void 0}}if(QN(t)){var s,r;return{type:ht.deferred,deferredData:t,statusCode:(s=t.init)==null?void 0:s.status,headers:((r=t.init)==null?void 0:r.headers)&&new Headers(t.init.headers)}}if(HG(t)){var I,a;return{type:ht.data,data:t.data,statusCode:(I=t.init)==null?void 0:I.status,headers:(a=t.init)!=null&&a.headers?new Headers(t.init.headers):void 0}}return{type:ht.data,data:t}}function LN(e,t,n,o,i,s){let r=e.headers.get("Location");if(Te(r,"Redirects returned/thrown from loaders/actions must have a Location header"),!Zf.test(r)){let I=o.slice(0,o.findIndex(a=>a.route.id===n)+1);r=Gp(new URL(t.url),I,i,!0,r,s),e.headers.set("Location",r)}return e}function RG(e,t,n){if(Zf.test(e)){let o=e,i=o.startsWith("//")?new URL(t.protocol+o):new URL(o),s=Cg(i.pathname,n)!=null;if(i.origin===t.origin&&s)return i.pathname+i.search+i.hash}return e}function Br(e,t,n,o){let i=e.createURL(DR(t)).toString(),s={signal:n};if(o&&ci(o.formMethod)){let{formMethod:r,formEncType:I}=o;s.method=r.toUpperCase(),I==="application/json"?(s.headers=new Headers({"Content-Type":I}),s.body=JSON.stringify(o.json)):I==="text/plain"?s.body=o.text:I==="application/x-www-form-urlencoded"&&o.formData?s.body=Bp(o.formData):s.body=o.formData}return new Request(i,s)}function Bp(e){let t=new URLSearchParams;for(let[n,o]of e.entries())t.append(n,typeof o=="string"?o:o.name);return t}function kG(e){let t=new FormData;for(let[n,o]of e.entries())t.append(n,o);return t}function zN(e,t,n,o,i){let s={},r=null,I,a=!1,c={},C=n&&Zo(n[1])?n[1].error:void 0;return e.forEach(A=>{if(!(A.route.id in t))return;let m=A.route.id,p=t[m];if(Te(!Rs(p),"Cannot handle redirect results in processLoaderData"),Zo(p)){let b=p.error;C!==void 0&&(b=C,C=void 0),r=r||{};{let Z=Pr(e,m);r[Z.route.id]==null&&(r[Z.route.id]=b)}s[m]=void 0,a||(a=!0,I=bu(p.error)?p.error.status:500),p.headers&&(c[m]=p.headers)}else Jg(p)?(o.set(m,p.deferredData),s[m]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!a&&(I=p.statusCode),p.headers&&(c[m]=p.headers)):(s[m]=p.data,p.statusCode&&p.statusCode!==200&&!a&&(I=p.statusCode),p.headers&&(c[m]=p.headers))}),C!==void 0&&n&&(r={[n[0]]:C},s[n[0]]=void 0),{loaderData:s,errors:r,statusCode:I||200,loaderHeaders:c}}function wG(e,t,n,o,i,s,r,I){let{loaderData:a,errors:c}=zN(t,o,i,I);return s.forEach(C=>{let{key:A,match:m,controller:p}=C,b=r[A];if(Te(b,"Did not find corresponding fetcher result"),!(p&&p.signal.aborted))if(Zo(b)){let Z=Pr(e.matches,m==null?void 0:m.route.id);c&&c[Z.route.id]||(c=Xt({},c,{[Z.route.id]:b.error})),e.fetchers.delete(A)}else if(Rs(b))Te(!1,"Unhandled fetcher revalidation redirect");else if(Jg(b))Te(!1,"Unhandled fetcher deferred data");else{let Z=Bg(b.data);e.fetchers.set(A,Z)}}),{loaderData:a,errors:c}}function XG(e,t,n,o){let i=Xt({},t);for(let s of n){let r=s.route.id;if(t.hasOwnProperty(r)?t[r]!==void 0&&(i[r]=t[r]):e[r]!==void 0&&s.route.loader&&(i[r]=e[r]),o&&o.hasOwnProperty(r))break}return i}function JG(e){return e?Zo(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Pr(e,t){return(t?e.slice(0,e.findIndex(o=>o.route.id===t)+1):[...e]).reverse().find(o=>o.route.hasErrorBoundary===!0)||e[0]}function YG(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Un(e,t){let{pathname:n,routeId:o,method:i,type:s,message:r}=t===void 0?{}:t,I="Unknown Server Error",a="Unknown @remix-run/router error";return e===400?(I="Bad Request",s==="route-discovery"?a='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+r):i&&n&&o?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+o+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):e===403?(I="Forbidden",a='Route "'+o+'" does not match URL "'+n+'"'):e===404?(I="Not Found",a='No route matches URL "'+n+'"'):e===405&&(I="Method Not Allowed",i&&n&&o?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+o+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new fd(e||500,I,new Error(a),!0)}function iC(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[o,i]=t[n];if(Rs(i))return{key:o,result:i}}}function DR(e){let t=typeof e=="string"?es(e):e;return Ps(Xt({},t,{hash:""}))}function TN(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function UN(e){return typeof e=="object"&&e!=null&&"then"in e}function DN(e){return QR(e.result)&&VN.has(e.result.status)}function Jg(e){return e.type===ht.deferred}function Zo(e){return e.type===ht.error}function Rs(e){return(e&&e.type)===ht.redirect}function HG(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function QN(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function QR(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function PN(e){return WN.has(e.toLowerCase())}function ci(e){return SN.has(e.toLowerCase())}async function jN(e,t,n,o,i){let s=Object.entries(t);for(let r=0;r<s.length;r++){let[I,a]=s[r],c=e.find(m=>(m==null?void 0:m.route.id)===I);if(!c)continue;let C=o.find(m=>m.route.id===c.route.id),A=C!=null&&!TR(C,c)&&(i&&i[c.route.id])!==void 0;Jg(a)&&A&&await yf(a,n,!1).then(m=>{m&&(t[I]=m)})}}async function _N(e,t,n){for(let o=0;o<n.length;o++){let{key:i,routeId:s,controller:r}=n[o],I=t[i];e.find(c=>(c==null?void 0:c.route.id)===s)&&Jg(I)&&(Te(r,"Expected an AbortController for revalidating fetcher deferred result"),await yf(I,r.signal,!0).then(c=>{c&&(t[i]=c)}))}}async function yf(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:ht.data,data:e.deferredData.unwrappedData}}catch(i){return{type:ht.error,error:i}}return{type:ht.data,data:e.deferredData.data}}}function Gf(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function La(e,t){let n=typeof t=="string"?es(t).search:t.search;if(e[e.length-1].route.index&&Gf(n||""))return e[e.length-1];let o=MR(e);return o[o.length-1]}function xG(e){let{formMethod:t,formAction:n,formEncType:o,text:i,formData:s,json:r}=e;if(!(!t||!n||!o)){if(i!=null)return{formMethod:t,formAction:n,formEncType:o,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:t,formAction:n,formEncType:o,formData:s,json:void 0,text:void 0};if(r!==void 0)return{formMethod:t,formAction:n,formEncType:o,formData:void 0,json:r,text:void 0}}}function _m(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function ON(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function va(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function qN(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Bg(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function $N(e,t){try{let n=e.sessionStorage.getItem(zR);if(n){let o=JSON.parse(n);for(let[i,s]of Object.entries(o||{}))s&&Array.isArray(s)&&t.set(i,new Set(s||[]))}}catch{}}function eF(e,t){if(t.size>0){let n={};for(let[o,i]of t)n[o]=[...i];try{e.sessionStorage.setItem(zR,JSON.stringify(n))}catch(o){Zl(!1,"Failed to save applied view transitions in sessionStorage ("+o+").")}}}/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zd(){return Zd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Zd.apply(this,arguments)}const $I=B.createContext(null),Bf=B.createContext(null),ts=B.createContext(null),Sf=B.createContext(null),ns=B.createContext({outlet:null,matches:[],isDataRoute:!1}),PR=B.createContext(null);function tF(e,t){let{relative:n}=t===void 0?{}:t;ec()||Te(!1);let{basename:o,navigator:i}=B.useContext(ts),{hash:s,pathname:r,search:I}=Zu(e,{relative:n}),a=r;return o!=="/"&&(a=r==="/"?o:tg([o,r])),i.createHref({pathname:a,search:I,hash:s})}function ec(){return B.useContext(Sf)!=null}function os(){return ec()||Te(!1),B.useContext(Sf).location}function jR(e){B.useContext(ts).static||B.useLayoutEffect(e)}function mo(){let{isDataRoute:e}=B.useContext(ns);return e?dF():nF()}function nF(){ec()||Te(!1);let e=B.useContext($I),{basename:t,future:n,navigator:o}=B.useContext(ts),{matches:i}=B.useContext(ns),{pathname:s}=os(),r=JSON.stringify(bf(i,n.v7_relativeSplatPath)),I=B.useRef(!1);return jR(()=>{I.current=!0}),B.useCallback(function(c,C){if(C===void 0&&(C={}),!I.current)return;if(typeof c=="number"){o.go(c);return}let A=ff(c,JSON.parse(r),s,C.relative==="path");e==null&&t!=="/"&&(A.pathname=A.pathname==="/"?t:tg([t,A.pathname])),(C.replace?o.replace:o.push)(A,C.state,C)},[t,o,r,s,e])}function fu(){let{matches:e}=B.useContext(ns),t=e[e.length-1];return t?t.params:{}}function Zu(e,t){let{relative:n}=t===void 0?{}:t,{future:o}=B.useContext(ts),{matches:i}=B.useContext(ns),{pathname:s}=os(),r=JSON.stringify(bf(i,o.v7_relativeSplatPath));return B.useMemo(()=>ff(e,JSON.parse(r),s,n==="path"),[e,r,s,n])}function oF(e,t,n,o){ec()||Te(!1);let{navigator:i}=B.useContext(ts),{matches:s}=B.useContext(ns),r=s[s.length-1],I=r?r.params:{};r&&r.pathname;let a=r?r.pathnameBase:"/";r&&r.route;let c=os(),C;C=c;let A=C.pathname||"/",m=A;if(a!=="/"){let Z=a.replace(/^\//,"").split("/");m="/"+A.replace(/^\//,"").split("/").slice(Z.length).join("/")}let p=Ss(e,{pathname:m});return lF(p&&p.map(Z=>Object.assign({},Z,{params:Object.assign({},I,Z.params),pathname:tg([a,i.encodeLocation?i.encodeLocation(Z.pathname).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?a:tg([a,i.encodeLocation?i.encodeLocation(Z.pathnameBase).pathname:Z.pathnameBase])})),s,n,o)}function iF(){let e=CF(),t=bu(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},t),n?B.createElement("pre",{style:i},n):null,null)}const gF=B.createElement(iF,null);class sF extends B.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?B.createElement(ns.Provider,{value:this.props.routeContext},B.createElement(PR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rF(e){let{routeContext:t,match:n,children:o}=e,i=B.useContext($I);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),B.createElement(ns.Provider,{value:t},o)}function lF(e,t,n,o){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),o===void 0&&(o=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=o)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let r=e,I=(i=n)==null?void 0:i.errors;if(I!=null){let C=r.findIndex(A=>A.route.id&&(I==null?void 0:I[A.route.id])!==void 0);C>=0||Te(!1),r=r.slice(0,Math.min(r.length,C+1))}let a=!1,c=-1;if(n&&o&&o.v7_partialHydration)for(let C=0;C<r.length;C++){let A=r[C];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(c=C),A.route.id){let{loaderData:m,errors:p}=n,b=A.route.loader&&m[A.route.id]===void 0&&(!p||p[A.route.id]===void 0);if(A.route.lazy||b){a=!0,c>=0?r=r.slice(0,c+1):r=[r[0]];break}}}return r.reduceRight((C,A,m)=>{let p,b=!1,Z=null,v=null;n&&(p=I&&A.route.id?I[A.route.id]:void 0,Z=A.route.errorElement||gF,a&&(c<0&&m===0?(uF("route-fallback"),b=!0,v=null):c===m&&(b=!0,v=A.route.hydrateFallbackElement||null)));let f=t.concat(r.slice(0,m+1)),G=()=>{let y;return p?y=Z:b?y=v:A.route.Component?y=B.createElement(A.route.Component,null):A.route.element?y=A.route.element:y=C,B.createElement(rF,{match:A,routeContext:{outlet:C,matches:f,isDataRoute:n!=null},children:y})};return n&&(A.route.ErrorBoundary||A.route.errorElement||m===0)?B.createElement(sF,{location:n.location,revalidation:n.revalidation,component:Z,error:p,children:G(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):G()},null)}var _R=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(_R||{}),yd=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(yd||{});function aF(e){let t=B.useContext($I);return t||Te(!1),t}function IF(e){let t=B.useContext(Bf);return t||Te(!1),t}function cF(e){let t=B.useContext(ns);return t||Te(!1),t}function OR(e){let t=cF(),n=t.matches[t.matches.length-1];return n.route.id||Te(!1),n.route.id}function CF(){var e;let t=B.useContext(PR),n=IF(yd.UseRouteError),o=OR(yd.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[o]}function dF(){let{router:e}=aF(_R.UseNavigateStable),t=OR(yd.UseNavigateStable),n=B.useRef(!1);return jR(()=>{n.current=!0}),B.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Zd({fromRouteId:t},s)))},[e,t])}const NG={};function uF(e,t,n){NG[e]||(NG[e]=!0)}function AF(e){let{basename:t="/",children:n=null,location:o,navigationType:i=$t.Pop,navigator:s,static:r=!1,future:I}=e;ec()&&Te(!1);let a=t.replace(/^\/*/,"/"),c=B.useMemo(()=>({basename:a,navigator:s,static:r,future:Zd({v7_relativeSplatPath:!1},I)}),[a,I,s,r]);typeof o=="string"&&(o=es(o));let{pathname:C="/",search:A="",hash:m="",state:p=null,key:b="default"}=o,Z=B.useMemo(()=>{let v=Cg(C,a);return v==null?null:{location:{pathname:v,search:A,hash:m,state:p,key:b},navigationType:i}},[a,C,A,m,p,b,i]);return Z==null?null:B.createElement(ts.Provider,{value:c},B.createElement(Sf.Provider,{children:n,value:Z}))}new Promise(()=>{});function mF(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:B.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:B.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:B.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yl(){return yl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},yl.apply(this,arguments)}function qR(e,t){if(e==null)return{};var n={},o=Object.keys(e),i,s;for(s=0;s<o.length;s++)i=o[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function hF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function pF(e,t){return e.button===0&&(!t||t==="_self")&&!hF(e)}const bF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],fF=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],ZF="6";try{window.__reactRouterVersion=ZF}catch{}function yF(e,t){return XN({basename:void 0,future:yl({},void 0,{v7_prependBasename:!0}),history:nN({window:void 0}),hydrationData:GF(),routes:e,mapRouteProperties:mF,unstable_dataStrategy:void 0,unstable_patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function GF(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=yl({},t,{errors:BF(t.errors)})),t}function BF(e){if(!e)return null;let t=Object.entries(e),n={};for(let[o,i]of t)if(i&&i.__type==="RouteErrorResponse")n[o]=new fd(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let r=new s(i.message);r.stack="",n[o]=r}catch{}}if(n[o]==null){let s=new Error(i.message);s.stack="",n[o]=s}}else n[o]=i;return n}const $R=B.createContext({isTransitioning:!1}),SF=B.createContext(new Map),vF="startTransition",FG=PC[vF],WF="flushSync",KG=Hx[WF];function VF(e){FG?FG(e):e()}function Wa(e){KG?KG(e):e()}class RF{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=o=>{this.status==="pending"&&(this.status="resolved",t(o))},this.reject=o=>{this.status==="pending"&&(this.status="rejected",n(o))}})}}function kF(e){let{fallbackElement:t,router:n,future:o}=e,[i,s]=B.useState(n.state),[r,I]=B.useState(),[a,c]=B.useState({isTransitioning:!1}),[C,A]=B.useState(),[m,p]=B.useState(),[b,Z]=B.useState(),v=B.useRef(new Map),{v7_startTransition:f}=o||{},G=B.useCallback(k=>{f?VF(k):k()},[f]),y=B.useCallback((k,F)=>{let{deletedFetchers:x,unstable_flushSync:M,unstable_viewTransitionOpts:Q}=F;x.forEach(j=>v.current.delete(j)),k.fetchers.forEach((j,ne)=>{j.data!==void 0&&v.current.set(ne,j.data)});let q=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!Q||q){M?Wa(()=>s(k)):G(()=>s(k));return}if(M){Wa(()=>{m&&(C&&C.resolve(),m.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:Q.currentLocation,nextLocation:Q.nextLocation})});let j=n.window.document.startViewTransition(()=>{Wa(()=>s(k))});j.finished.finally(()=>{Wa(()=>{A(void 0),p(void 0),I(void 0),c({isTransitioning:!1})})}),Wa(()=>p(j));return}m?(C&&C.resolve(),m.skipTransition(),Z({state:k,currentLocation:Q.currentLocation,nextLocation:Q.nextLocation})):(I(k),c({isTransitioning:!0,flushSync:!1,currentLocation:Q.currentLocation,nextLocation:Q.nextLocation}))},[n.window,m,C,v,G]);B.useLayoutEffect(()=>n.subscribe(y),[n,y]),B.useEffect(()=>{a.isTransitioning&&!a.flushSync&&A(new RF)},[a]),B.useEffect(()=>{if(C&&r&&n.window){let k=r,F=C.promise,x=n.window.document.startViewTransition(async()=>{G(()=>s(k)),await F});x.finished.finally(()=>{A(void 0),p(void 0),I(void 0),c({isTransitioning:!1})}),p(x)}},[G,r,C,n.window]),B.useEffect(()=>{C&&r&&i.location.key===r.location.key&&C.resolve()},[C,m,i.location,r]),B.useEffect(()=>{!a.isTransitioning&&b&&(I(b.state),c({isTransitioning:!0,flushSync:!1,currentLocation:b.currentLocation,nextLocation:b.nextLocation}),Z(void 0))},[a.isTransitioning,b]),B.useEffect(()=>{},[]);let W=B.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:k=>n.navigate(k),push:(k,F,x)=>n.navigate(k,{state:F,preventScrollReset:x==null?void 0:x.preventScrollReset}),replace:(k,F,x)=>n.navigate(k,{replace:!0,state:F,preventScrollReset:x==null?void 0:x.preventScrollReset})}),[n]),V=n.basename||"/",X=B.useMemo(()=>({router:n,navigator:W,static:!1,basename:V}),[n,W,V]),R=B.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return B.createElement(B.Fragment,null,B.createElement($I.Provider,{value:X},B.createElement(Bf.Provider,{value:i},B.createElement(SF.Provider,{value:v.current},B.createElement($R.Provider,{value:a},B.createElement(AF,{basename:V,location:i.location,navigationType:i.historyAction,navigator:W,future:R},i.initialized||n.future.v7_partialHydration?B.createElement(wF,{routes:n.routes,future:n.future,state:i}):t))))),null)}const wF=B.memo(XF);function XF(e){let{routes:t,future:n,state:o}=e;return oF(t,void 0,o,n)}const JF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vf=B.forwardRef(function(t,n){let{onClick:o,relative:i,reloadDocument:s,replace:r,state:I,target:a,to:c,preventScrollReset:C,unstable_viewTransition:A}=t,m=qR(t,bF),{basename:p}=B.useContext(ts),b,Z=!1;if(typeof c=="string"&&YF.test(c)&&(b=c,JF))try{let y=new URL(window.location.href),W=c.startsWith("//")?new URL(y.protocol+c):new URL(c),V=Cg(W.pathname,p);W.origin===y.origin&&V!=null?c=V+W.search+W.hash:Z=!0}catch{}let v=tF(c,{relative:i}),f=xF(c,{replace:r,state:I,target:a,preventScrollReset:C,relative:i,unstable_viewTransition:A});function G(y){o&&o(y),y.defaultPrevented||f(y)}return B.createElement("a",yl({},m,{href:b||v,onClick:Z||s?o:G,ref:n,target:a}))}),Qo=B.forwardRef(function(t,n){let{"aria-current":o="page",caseSensitive:i=!1,className:s="",end:r=!1,style:I,to:a,unstable_viewTransition:c,children:C}=t,A=qR(t,fF),m=Zu(a,{relative:A.relative}),p=os(),b=B.useContext(Bf),{navigator:Z,basename:v}=B.useContext(ts),f=b!=null&&NF(m)&&c===!0,G=Z.encodeLocation?Z.encodeLocation(m).pathname:m.pathname,y=p.pathname,W=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;i||(y=y.toLowerCase(),W=W?W.toLowerCase():null,G=G.toLowerCase()),W&&v&&(W=Cg(W,v)||W);const V=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let X=y===G||!r&&y.startsWith(G)&&y.charAt(V)==="/",R=W!=null&&(W===G||!r&&W.startsWith(G)&&W.charAt(G.length)==="/"),k={isActive:X,isPending:R,isTransitioning:f},F=X?o:void 0,x;typeof s=="function"?x=s(k):x=[s,X?"active":null,R?"pending":null,f?"transitioning":null].filter(Boolean).join(" ");let M=typeof I=="function"?I(k):I;return B.createElement(vf,yl({},A,{"aria-current":F,className:x,ref:n,style:M,to:a,unstable_viewTransition:c}),typeof C=="function"?C(k):C)});var Sp;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Sp||(Sp={}));var EG;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(EG||(EG={}));function HF(e){let t=B.useContext($I);return t||Te(!1),t}function xF(e,t){let{target:n,replace:o,state:i,preventScrollReset:s,relative:r,unstable_viewTransition:I}=t===void 0?{}:t,a=mo(),c=os(),C=Zu(e,{relative:r});return B.useCallback(A=>{if(pF(A,n)){A.preventDefault();let m=o!==void 0?o:Ps(c)===Ps(C);a(e,{replace:m,state:i,preventScrollReset:s,relative:r,unstable_viewTransition:I})}},[c,a,C,o,i,n,e,s,r,I])}function NF(e,t){t===void 0&&(t={});let n=B.useContext($R);n==null&&Te(!1);let{basename:o}=HF(Sp.useViewTransitionState),i=Zu(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=Cg(n.currentLocation.pathname,o)||n.currentLocation.pathname,r=Cg(n.nextLocation.pathname,o)||n.nextLocation.pathname;return bd(i.pathname,r)!=null||bd(i.pathname,s)!=null}const FF="https://cookbstaging.careervio.com",KF=async(e,t)=>{try{const n=`${FF}/api/auth/local`;console.log("identifier: ",e," password: ",t);const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,password:t})});if(!o.ok){const s=await o.json();throw console.error("Error:",s),new Error(`Request failed with status ${o.status}`)}return await o.json()}catch(n){throw console.error("Error:",n.message),n}},vp=async e=>{const t=`cook${e}@cook.com`,n="cookcook";try{const o=await KF(t,n);return{jwt:o.jwt,user:{id:o.user.id,username:o.user.username,email:o.user.email,provider:o.user.provider,confirmed:o.user.confirmed,blocked:o.user.blocked,createdAt:o.user.createdAt,updatedAt:o.user.updatedAt,lineId:o.user.lineId,backgroundImage:o.user.backgroundImage,fullName:o.user.fullName,gender:o.user.gender,address:o.user.address,cardID:o.user.cardID,telNumber:o.user.telNumber,userType:o.user.userType,point:o.user.point}}}catch(o){return console.error("Authentication failed:",o.message),!1}},EF="2006448899-kaB4QBVr",MF=()=>{const e=mo(),{isLoggedIn:t,liff:n,error:o}=hf(),[i,s]=B.useState(!0),[r,I]=B.useState(""),[a,c]=B.useState("");return B.useEffect(()=>{(async()=>{try{if(typeof n>"u"){console.error("LIFF is undefined. Please check if the SDK is loaded correctly."),c("LIFF is not loaded. Please refresh the page.");return}if(typeof n.init!="function"){c("LIFF is not initialized correctly. Please try again.");return}if(await n.init({liffId:EF}),console.log("LIFF initialized successfully."),n.isLoggedIn()){const A=await n.getProfile();I(A.displayName);const m=await vp(A.userId);if(!m)e("/Login");else{const{jwt:p,user:b}=m;localStorage.setItem("accessToken",p),localStorage.setItem("user",JSON.stringify(b)),console.log("Token and user data saved to localStorage"),e("/partner/ProfileStore")}}else n.login()}catch{c("Initialization or login error. Please try again.")}finally{s(!1)}})()},[n,e]),i?d.jsx("div",{className:"App",children:d.jsx("p",{children:"Loading..."})}):o?d.jsx("div",{className:"App",children:d.jsxs("p",{children:["Something went wrong: ",o.message]})}):d.jsx("div",{className:"App"})},tc="https://cookbstaging.careervio.com",e2=async e=>{try{const t=`${tc}/api/shops/?populate=image`,n=await fetch(t,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!n.ok){const s=await n.json();throw console.error("Error fetching shops:",s),new Error(`Request failed with status ${n.status}`)}return(await n.json()).data.map(s=>({id:s.id,name:s.attributes.name,location:s.attributes.location,latitude:s.attributes.latitude,longitude:s.attributes.longitude,createdAt:s.attributes.createdAt,updatedAt:s.attributes.updatedAt,publishedAt:s.attributes.publishedAt,bookBankNumber:s.attributes.bookBankNumber,image:s.attributes.image}))}catch(t){throw console.error("Error fetching shops:",t.message),t}},yu=async(e,t)=>{try{const n=await fetch(`${tc}/api/users/${t}?populate=shop`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok){const s=await n.json();throw console.error("Error fetching shops:",s),new Error(`Request failed with status ${n.status}`)}const o=await n.json();if(!o.shop)throw new Error("Shop data is undefined or missing.");const i=o.shop.id;return o}catch(n){throw n}},LF=async(e,t)=>{try{const n=`${tc}/api/shops`,o=await fetch(n,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({data:t})});if(!o.ok){const s=await o.json();throw console.error("Error creating shop:",s),new Error(`Request failed with status ${o.status}`)}return await o.json()}catch(n){throw console.error("Error creating shop:",n.message),n}},zF=async(e,t,n)=>{console.log(t);try{const o=`${tc}/api/users/${t}`,i=await fetch(o,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!i.ok){const r=await i.json();throw console.error("Error creating UserFromShop:",r),new Error(`Request failed with status ${i.status}`)}return await i.json()}catch(o){throw console.error("Error creating UserFromShop:",o.message),o}},TF=async e=>{try{const t=`${tc}/api/banks`,n=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok){const s=await n.json();throw console.error("Error fetching banks:",s),new Error(`Request failed with status ${n.status}`)}const o=await n.json();if(!o||!o.data)return console.error("No data found in response"),[];const i=o.data.map(s=>({id:s.id,name:s.attributes.name,createdAt:s.attributes.createdAt,updatedAt:s.attributes.updatedAt,publishedAt:s.attributes.publishedAt}));return console.log(i),i}catch(t){throw console.error("Error fetching banks:",t.message),t}},t2="/assets/logo-CZ1hDsNe.png";var n2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},MG=Ee.createContext&&Ee.createContext(n2),UF=["attr","size","title"];function DF(e,t){if(e==null)return{};var n=QF(e,t),o,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)o=s[i],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function QF(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function Gd(){return Gd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Gd.apply(this,arguments)}function LG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,o)}return n}function Bd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LG(Object(n),!0).forEach(function(o){PF(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LG(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function PF(e,t,n){return t=jF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jF(e){var t=_F(e,"string");return typeof t=="symbol"?t:t+""}function _F(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function o2(e){return e&&e.map((t,n)=>Ee.createElement(t.tag,Bd({key:n},t.attr),o2(t.child)))}function Ag(e){return t=>Ee.createElement(OF,Gd({attr:Bd({},e.attr)},t),o2(e.child))}function OF(e){var t=n=>{var{attr:o,size:i,title:s}=e,r=DF(e,UF),I=i||n.size||"1em",a;return n.className&&(a=n.className),e.className&&(a=(a?a+" ":"")+e.className),Ee.createElement("svg",Gd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,o,r,{className:a,style:Bd(Bd({color:e.color||n.color},n.style),e.style),height:I,width:I,xmlns:"http://www.w3.org/2000/svg"}),s&&Ee.createElement("title",null,s),e.children)};return MG!==void 0?Ee.createElement(MG.Consumer,null,n=>t(n)):t(n2)}function i2(e){return Ag({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 10a1 1 0 0 1 2 0v2a1 1 0 0 1-2 0zm3 0a1 1 0 0 1 2 0v2a1 1 0 0 1-2 0zm3 0a1 1 0 1 1 2 0v2a1 1 0 0 1-2 0z"},child:[]},{tag:"path",attr:{d:"M5.757 1.071a.5.5 0 0 1 .172.686L3.383 6h9.234L10.07 1.757a.5.5 0 1 1 .858-.514L13.783 6H15.5a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-.623l-1.844 6.456a.75.75 0 0 1-.722.544H3.69a.75.75 0 0 1-.722-.544L1.123 8H.5a.5.5 0 0 1-.5-.5v-1A.5.5 0 0 1 .5 6h1.717L5.07 1.243a.5.5 0 0 1 .686-.172zM2.163 8l1.714 6h8.246l1.714-6z"},child:[]}]})(e)}function g2(e){return Ag({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.5 9.511c.076.954.83 1.697 2.182 1.785V12h.6v-.709c1.4-.098 2.218-.846 2.218-1.932 0-.987-.626-1.496-1.745-1.76l-.473-.112V5.57c.6.068.982.396 1.074.85h1.052c-.076-.919-.864-1.638-2.126-1.716V4h-.6v.719c-1.195.117-2.01.836-2.01 1.853 0 .9.606 1.472 1.613 1.707l.397.098v2.034c-.615-.093-1.022-.43-1.114-.9zm2.177-2.166c-.59-.137-.91-.416-.91-.836 0-.47.345-.822.915-.925v1.76h-.005zm.692 1.193c.717.166 1.048.435 1.048.91 0 .542-.412.914-1.135.982V8.518z"},child:[]},{tag:"path",attr:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"},child:[]},{tag:"path",attr:{d:"M8 13.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11m0 .5A6 6 0 1 0 8 2a6 6 0 0 0 0 12"},child:[]}]})(e)}const Wf="https://cookbstaging.careervio.com",qF=async(e,t,n)=>{try{const o=`${Wf}/api/users/${e}`,i=await fetch(o,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(t)});if(!i.ok){const r=await i.json();throw console.error("Error:",r),new Error(`Request failed with status ${i.status}`)}return await i.json()}catch(o){throw console.error("Error:",o.message),o}},Gu=async(e,t)=>{var n;if(!e||!t)throw new Error("No userId or token provided. User must be authenticated.");try{const o=e.toLowerCase();console.log("lowerCaseUserId",o);const i=`${Wf}/api/users?populate[photoImage]=true&filters[lineId][$eq]=${o}`,s=await fetch(i,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!s.ok){const a=await s.json();throw console.error("Error fetching user:",a),new Error(`Request failed with status ${s.status}: ${((n=a==null?void 0:a.error)==null?void 0:n.message)||"Unknown error"}`)}const r=await s.json();if(console.log("data",r),!r||!Array.isArray(r))throw new Error("Invalid response format: Expected an array of user data.");if(console.log("data.data.length",r.length),console.log("data[0].attributes.username",r[0].username),r.length===0)throw new Error("No user found with the provided lineId.");const I={id:r[0].id,username:r[0].username,email:r[0].email,fullName:r[0].fullName,lineId:r[0].lineId,gender:r[0].gender,address:r[0].address,cardID:r[0].cardID,telNumber:r[0].telNumber,userType:r[0].userType,point:r[0].point,photoImage:r[0].photoImage};return console.log("users",I),I}catch(o){throw console.error("Error fetching user:",o.message),o}},s2=async(e,t)=>{try{console.log("userData in createUser: ",e);const n=`${Wf}/api/auth/local/register`,o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("body: ",JSON.stringify(e)),!o.ok){const s=await o.json();throw console.error("Error:",s),new Error(`Request failed with status ${o.status}`)}return await o.json()}catch(n){throw console.error("Error:",n.message),n}};function En(){const e=localStorage.getItem("cart");let t=0;if(e){const v=JSON.parse(e);t=Object.values(v).reduce((f,G)=>f+G,0)}const n=void 0,o="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",[i,s]=B.useState(null),[r,I]=B.useState(!0),[a,c]=B.useState(null),{cartItems:C}=B.useContext(pf),[A,m]=B.useState(!1);console.log("cartItems in header: ",C);const p=mo(),b=()=>{p("/cart",{state:{storedCounts:e,cartItems:C}})};B.useEffect(()=>{(async()=>{try{I(!0);const f=await Gu(n,o);s(f),I(!1)}catch(f){console.error("Error fetching user:",f),c(f.message),I(!1)}})()},[n,o]);const Z=()=>{m(v=>!v)};return r?d.jsx("p",{children:"Loading..."}):a?d.jsxs("p",{children:["Error: ",a]}):d.jsx(d.Fragment,{children:d.jsxs("nav",{className:"flex items-center justify-between p-5 pr-20 bg-white",children:[d.jsx(Qo,{to:"/",children:d.jsx("img",{src:t2,alt:"Logo",width:50})}),d.jsxs("div",{className:"flex items-center relative",children:[d.jsx(i2,{className:"w-10 h-10 text-green-700 ml-10",onClick:b}),t>0&&d.jsx("span",{className:"absolute -top-2 -right-2 bg-red-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:t})]}),d.jsx(Qo,{to:`/history-point/${i==null?void 0:i.id}`,children:d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx(g2,{className:"w-7 h-7 text-yellow-hard ml-8"}),d.jsx("p",{className:"ml-6 mt-2",children:d.jsx("strong",{children:(i==null?void 0:i.point)??0})})]})}),d.jsx("div",{children:d.jsxs("ul",{id:"navbar",className:A?"navbar open":"navbar",children:[d.jsx("li",{children:d.jsx(Qo,{className:"font-semibold hover:text-yellow-hard",to:"/update-user-profile",style:({isActive:v})=>({color:v?"yellow-hard":""}),children:"ข้อมูลส่วนตัว/ลงทะเบียน"})}),d.jsx("li",{children:d.jsx(Qo,{className:"font-semibold hover:text-yellow-hard",to:`/history-point/${i==null?void 0:i.id}`,style:({isActive:v})=>({color:v?"yellow-hard":""}),children:"คะแนนสะสมและประวัติการแลกแต้ม"})}),d.jsx("li",{children:d.jsx(Qo,{className:"font-semibold hover:text-yellow-hard",to:`/history-service-machine/${i==null?void 0:i.id}`,style:({isActive:v})=>({color:v?"yellow-hard":""}),children:"ประวัติการใช้บริการตู้"})})]})}),d.jsx("div",{id:"mobile",onClick:Z,children:d.jsx("i",{id:"bar",className:A?"fas fa-times":"fas fa-bars"})})]})})}function $F(){const[e,t]=B.useState([]),[n,o]=B.useState(!0),[i,s]=B.useState(null),r="https://cookbstaging.careervio.com",I="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=";return B.useEffect(()=>{(async()=>{try{o(!0);const c=await e2(I);t(c),o(!1)}catch(c){console.error("Error fetching shops:",c),s(c.message),o(!1)}})()},[I]),n?d.jsx("p",{children:"Loading..."}):i?d.jsxs("p",{children:["Error: ",i]}):d.jsxs(d.Fragment,{children:[d.jsx(En,{}),d.jsx("div",{className:"mx-auto px-4",children:d.jsx("div",{className:"grid mt-5 md:grid-cols-2 md:gap-5 md:mt-2 lg:grid-cols-3  lg:gap-5 lg:mt-7",children:e.map(a=>{var c,C,A;return d.jsx(vf,{to:`/shop/${a.id}`,children:d.jsxs("div",{className:"shop-2",children:[d.jsx("span",{className:"circle",style:{backgroundImage:(A=(C=(c=a.image)==null?void 0:c.data)==null?void 0:C.attributes)!=null&&A.url?`url(${r}${a.image.data.attributes.url})`:"url(https://cdn.britannica.com/70/234870-050-D4D024BB/Orange-colored-cat-yawns-displaying-teeth.jpg)",backgroundSize:"cover"}}),d.jsx("span",{className:"pl-2",children:a.name})]})},a.id)})})})]})}const e5="/assets/coins-CXLUNMre.png";function js(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const t5=Object.freeze(Object.defineProperty({__proto__:null,default:js},Symbol.toStringTag,{value:"Module"}));function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},J.apply(null,arguments)}const n5=Object.freeze(Object.defineProperty({__proto__:null,get default(){return J}},Symbol.toStringTag,{value:"Module"}));function r2(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var o5=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,i5=r2(function(e){return o5.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),g5=!1;function s5(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function r5(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var l5=function(){function e(n){var o=this;this._insertTag=function(i){var s;o.tags.length===0?o.insertionPoint?s=o.insertionPoint.nextSibling:o.prepend?s=o.container.firstChild:s=o.before:s=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(i,s),o.tags.push(i)},this.isSpeedy=n.speedy===void 0?!g5:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(o){o.forEach(this._insertTag)},t.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(r5(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=s5(i);try{s.insertRule(o,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(o));this.ctr++},t.flush=function(){this.tags.forEach(function(o){var i;return(i=o.parentNode)==null?void 0:i.removeChild(o)}),this.tags=[],this.ctr=0},e}(),Xn="-ms-",Sd="-moz-",it="-webkit-",l2="comm",Vf="rule",Rf="decl",a5="@import",a2="@keyframes",I5="@layer",c5=Math.abs,Bu=String.fromCharCode,C5=Object.assign;function d5(e,t){return Sn(e,0)^45?(((t<<2^Sn(e,0))<<2^Sn(e,1))<<2^Sn(e,2))<<2^Sn(e,3):0}function I2(e){return e.trim()}function u5(e,t){return(e=t.exec(e))?e[0]:e}function gt(e,t,n){return e.replace(t,n)}function Wp(e,t){return e.indexOf(t)}function Sn(e,t){return e.charCodeAt(t)|0}function RI(e,t,n){return e.slice(t,n)}function Vi(e){return e.length}function kf(e){return e.length}function gC(e,t){return t.push(e),e}function A5(e,t){return e.map(t).join("")}var Su=1,Gl=1,c2=0,uo=0,en=0,zl="";function vu(e,t,n,o,i,s,r){return{value:e,root:t,parent:n,type:o,props:i,children:s,line:Su,column:Gl,length:r,return:""}}function Va(e,t){return C5(vu("",null,null,"",null,null,0),e,{length:-e.length},t)}function m5(){return en}function h5(){return en=uo>0?Sn(zl,--uo):0,Gl--,en===10&&(Gl=1,Su--),en}function So(){return en=uo<c2?Sn(zl,uo++):0,Gl++,en===10&&(Gl=1,Su++),en}function Yi(){return Sn(zl,uo)}function wC(){return uo}function nc(e,t){return RI(zl,e,t)}function kI(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function C2(e){return Su=Gl=1,c2=Vi(zl=e),uo=0,[]}function d2(e){return zl="",e}function XC(e){return I2(nc(uo-1,Vp(e===91?e+2:e===40?e+1:e)))}function p5(e){for(;(en=Yi())&&en<33;)So();return kI(e)>2||kI(en)>3?"":" "}function b5(e,t){for(;--t&&So()&&!(en<48||en>102||en>57&&en<65||en>70&&en<97););return nc(e,wC()+(t<6&&Yi()==32&&So()==32))}function Vp(e){for(;So();)switch(en){case e:return uo;case 34:case 39:e!==34&&e!==39&&Vp(en);break;case 40:e===41&&Vp(e);break;case 92:So();break}return uo}function f5(e,t){for(;So()&&e+en!==57;)if(e+en===84&&Yi()===47)break;return"/*"+nc(t,uo-1)+"*"+Bu(e===47?e:So())}function Z5(e){for(;!kI(Yi());)So();return nc(e,uo)}function y5(e){return d2(JC("",null,null,null,[""],e=C2(e),0,[0],e))}function JC(e,t,n,o,i,s,r,I,a){for(var c=0,C=0,A=r,m=0,p=0,b=0,Z=1,v=1,f=1,G=0,y="",W=i,V=s,X=o,R=y;v;)switch(b=G,G=So()){case 40:if(b!=108&&Sn(R,A-1)==58){Wp(R+=gt(XC(G),"&","&\f"),"&\f")!=-1&&(f=-1);break}case 34:case 39:case 91:R+=XC(G);break;case 9:case 10:case 13:case 32:R+=p5(b);break;case 92:R+=b5(wC()-1,7);continue;case 47:switch(Yi()){case 42:case 47:gC(G5(f5(So(),wC()),t,n),a);break;default:R+="/"}break;case 123*Z:I[c++]=Vi(R)*f;case 125*Z:case 59:case 0:switch(G){case 0:case 125:v=0;case 59+C:f==-1&&(R=gt(R,/\f/g,"")),p>0&&Vi(R)-A&&gC(p>32?TG(R+";",o,n,A-1):TG(gt(R," ","")+";",o,n,A-2),a);break;case 59:R+=";";default:if(gC(X=zG(R,t,n,c,C,i,I,y,W=[],V=[],A),s),G===123)if(C===0)JC(R,t,X,X,W,s,A,I,V);else switch(m===99&&Sn(R,3)===110?100:m){case 100:case 108:case 109:case 115:JC(e,X,X,o&&gC(zG(e,X,X,0,0,i,I,y,i,W=[],A),V),i,V,A,I,o?W:V);break;default:JC(R,X,X,X,[""],V,0,I,V)}}c=C=p=0,Z=f=1,y=R="",A=r;break;case 58:A=1+Vi(R),p=b;default:if(Z<1){if(G==123)--Z;else if(G==125&&Z++==0&&h5()==125)continue}switch(R+=Bu(G),G*Z){case 38:f=C>0?1:(R+="\f",-1);break;case 44:I[c++]=(Vi(R)-1)*f,f=1;break;case 64:Yi()===45&&(R+=XC(So())),m=Yi(),C=A=Vi(y=R+=Z5(wC())),G++;break;case 45:b===45&&Vi(R)==2&&(Z=0)}}return s}function zG(e,t,n,o,i,s,r,I,a,c,C){for(var A=i-1,m=i===0?s:[""],p=kf(m),b=0,Z=0,v=0;b<o;++b)for(var f=0,G=RI(e,A+1,A=c5(Z=r[b])),y=e;f<p;++f)(y=I2(Z>0?m[f]+" "+G:gt(G,/&\f/g,m[f])))&&(a[v++]=y);return vu(e,t,n,i===0?Vf:I,a,c,C)}function G5(e,t,n){return vu(e,t,n,l2,Bu(m5()),RI(e,2,-2),0)}function TG(e,t,n,o){return vu(e,t,n,Rf,RI(e,0,o),RI(e,o+1,-1),o)}function al(e,t){for(var n="",o=kf(e),i=0;i<o;i++)n+=t(e[i],i,e,t)||"";return n}function B5(e,t,n,o){switch(e.type){case I5:if(e.children.length)break;case a5:case Rf:return e.return=e.return||e.value;case l2:return"";case a2:return e.return=e.value+"{"+al(e.children,o)+"}";case Vf:e.value=e.props.join(",")}return Vi(n=al(e.children,o))?e.return=e.value+"{"+n+"}":""}function S5(e){var t=kf(e);return function(n,o,i,s){for(var r="",I=0;I<t;I++)r+=e[I](n,o,i,s)||"";return r}}function v5(e){return function(t){t.root||(t=t.return)&&e(t)}}var W5=function(t,n,o){for(var i=0,s=0;i=s,s=Yi(),i===38&&s===12&&(n[o]=1),!kI(s);)So();return nc(t,uo)},V5=function(t,n){var o=-1,i=44;do switch(kI(i)){case 0:i===38&&Yi()===12&&(n[o]=1),t[o]+=W5(uo-1,n,o);break;case 2:t[o]+=XC(i);break;case 4:if(i===44){t[++o]=Yi()===58?"&\f":"",n[o]=t[o].length;break}default:t[o]+=Bu(i)}while(i=So());return t},R5=function(t,n){return d2(V5(C2(t),n))},UG=new WeakMap,k5=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,o=t.parent,i=t.column===o.column&&t.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!UG.get(o))&&!i){UG.set(t,!0);for(var s=[],r=R5(n,s),I=o.props,a=0,c=0;a<r.length;a++)for(var C=0;C<I.length;C++,c++)t.props[c]=s[a]?r[a].replace(/&\f/g,I[C]):I[C]+" "+r[a]}}},w5=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function u2(e,t){switch(d5(e,t)){case 5103:return it+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return it+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return it+e+Sd+e+Xn+e+e;case 6828:case 4268:return it+e+Xn+e+e;case 6165:return it+e+Xn+"flex-"+e+e;case 5187:return it+e+gt(e,/(\w+).+(:[^]+)/,it+"box-$1$2"+Xn+"flex-$1$2")+e;case 5443:return it+e+Xn+"flex-item-"+gt(e,/flex-|-self/,"")+e;case 4675:return it+e+Xn+"flex-line-pack"+gt(e,/align-content|flex-|-self/,"")+e;case 5548:return it+e+Xn+gt(e,"shrink","negative")+e;case 5292:return it+e+Xn+gt(e,"basis","preferred-size")+e;case 6060:return it+"box-"+gt(e,"-grow","")+it+e+Xn+gt(e,"grow","positive")+e;case 4554:return it+gt(e,/([^-])(transform)/g,"$1"+it+"$2")+e;case 6187:return gt(gt(gt(e,/(zoom-|grab)/,it+"$1"),/(image-set)/,it+"$1"),e,"")+e;case 5495:case 3959:return gt(e,/(image-set\([^]*)/,it+"$1$`$1");case 4968:return gt(gt(e,/(.+:)(flex-)?(.*)/,it+"box-pack:$3"+Xn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+it+e+e;case 4095:case 3583:case 4068:case 2532:return gt(e,/(.+)-inline(.+)/,it+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Vi(e)-1-t>6)switch(Sn(e,t+1)){case 109:if(Sn(e,t+4)!==45)break;case 102:return gt(e,/(.+:)(.+)-([^]+)/,"$1"+it+"$2-$3$1"+Sd+(Sn(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Wp(e,"stretch")?u2(gt(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Sn(e,t+1)!==115)break;case 6444:switch(Sn(e,Vi(e)-3-(~Wp(e,"!important")&&10))){case 107:return gt(e,":",":"+it)+e;case 101:return gt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+it+(Sn(e,14)===45?"inline-":"")+"box$3$1"+it+"$2$3$1"+Xn+"$2box$3")+e}break;case 5936:switch(Sn(e,t+11)){case 114:return it+e+Xn+gt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return it+e+Xn+gt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return it+e+Xn+gt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return it+e+Xn+e+e}return e}var X5=function(t,n,o,i){if(t.length>-1&&!t.return)switch(t.type){case Rf:t.return=u2(t.value,t.length);break;case a2:return al([Va(t,{value:gt(t.value,"@","@"+it)})],i);case Vf:if(t.length)return A5(t.props,function(s){switch(u5(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return al([Va(t,{props:[gt(s,/:(read-\w+)/,":"+Sd+"$1")]})],i);case"::placeholder":return al([Va(t,{props:[gt(s,/:(plac\w+)/,":"+it+"input-$1")]}),Va(t,{props:[gt(s,/:(plac\w+)/,":"+Sd+"$1")]}),Va(t,{props:[gt(s,/:(plac\w+)/,Xn+"input-$1")]})],i)}return""})}},J5=[X5],A2=function(t){var n=t.key;if(n==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(Z){var v=Z.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(Z),Z.setAttribute("data-s",""))})}var i=t.stylisPlugins||J5,s={},r,I=[];r=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(Z){for(var v=Z.getAttribute("data-emotion").split(" "),f=1;f<v.length;f++)s[v[f]]=!0;I.push(Z)});var a,c=[k5,w5];{var C,A=[B5,v5(function(Z){C.insert(Z)})],m=S5(c.concat(i,A)),p=function(v){return al(y5(v),m)};a=function(v,f,G,y){C=G,p(v?v+"{"+f.styles+"}":f.styles),y&&(b.inserted[f.name]=!0)}}var b={key:n,sheet:new l5({key:n,container:r,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:a};return b.sheet.hydrate(I),b},m2={exports:{}},dt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bn=typeof Symbol=="function"&&Symbol.for,wf=bn?Symbol.for("react.element"):60103,Xf=bn?Symbol.for("react.portal"):60106,Wu=bn?Symbol.for("react.fragment"):60107,Vu=bn?Symbol.for("react.strict_mode"):60108,Ru=bn?Symbol.for("react.profiler"):60114,ku=bn?Symbol.for("react.provider"):60109,wu=bn?Symbol.for("react.context"):60110,Jf=bn?Symbol.for("react.async_mode"):60111,Xu=bn?Symbol.for("react.concurrent_mode"):60111,Ju=bn?Symbol.for("react.forward_ref"):60112,Yu=bn?Symbol.for("react.suspense"):60113,Y5=bn?Symbol.for("react.suspense_list"):60120,Hu=bn?Symbol.for("react.memo"):60115,xu=bn?Symbol.for("react.lazy"):60116,H5=bn?Symbol.for("react.block"):60121,x5=bn?Symbol.for("react.fundamental"):60117,N5=bn?Symbol.for("react.responder"):60118,F5=bn?Symbol.for("react.scope"):60119;function Xo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case wf:switch(e=e.type,e){case Jf:case Xu:case Wu:case Ru:case Vu:case Yu:return e;default:switch(e=e&&e.$$typeof,e){case wu:case Ju:case xu:case Hu:case ku:return e;default:return t}}case Xf:return t}}}function h2(e){return Xo(e)===Xu}dt.AsyncMode=Jf;dt.ConcurrentMode=Xu;dt.ContextConsumer=wu;dt.ContextProvider=ku;dt.Element=wf;dt.ForwardRef=Ju;dt.Fragment=Wu;dt.Lazy=xu;dt.Memo=Hu;dt.Portal=Xf;dt.Profiler=Ru;dt.StrictMode=Vu;dt.Suspense=Yu;dt.isAsyncMode=function(e){return h2(e)||Xo(e)===Jf};dt.isConcurrentMode=h2;dt.isContextConsumer=function(e){return Xo(e)===wu};dt.isContextProvider=function(e){return Xo(e)===ku};dt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===wf};dt.isForwardRef=function(e){return Xo(e)===Ju};dt.isFragment=function(e){return Xo(e)===Wu};dt.isLazy=function(e){return Xo(e)===xu};dt.isMemo=function(e){return Xo(e)===Hu};dt.isPortal=function(e){return Xo(e)===Xf};dt.isProfiler=function(e){return Xo(e)===Ru};dt.isStrictMode=function(e){return Xo(e)===Vu};dt.isSuspense=function(e){return Xo(e)===Yu};dt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Wu||e===Xu||e===Ru||e===Vu||e===Yu||e===Y5||typeof e=="object"&&e!==null&&(e.$$typeof===xu||e.$$typeof===Hu||e.$$typeof===ku||e.$$typeof===wu||e.$$typeof===Ju||e.$$typeof===x5||e.$$typeof===N5||e.$$typeof===F5||e.$$typeof===H5)};dt.typeOf=Xo;m2.exports=dt;var K5=m2.exports,p2=K5,E5={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},M5={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},b2={};b2[p2.ForwardRef]=E5;b2[p2.Memo]=M5;var L5=!0;function z5(e,t,n){var o="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(o+=i+" ")}),o}var f2=function(t,n,o){var i=t.key+"-"+n.name;(o===!1||L5===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},Z2=function(t,n,o){f2(t,n,o);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var s=n;do t.insert(n===s?"."+i:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function T5(e){for(var t=0,n,o=0,i=e.length;i>=4;++o,i-=4)n=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(o+2)&255)<<16;case 2:t^=(e.charCodeAt(o+1)&255)<<8;case 1:t^=e.charCodeAt(o)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var U5={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},D5=!1,Q5=/[A-Z]|^ms/g,P5=/_EMO_([^_]+?)_([^]*?)_EMO_/g,y2=function(t){return t.charCodeAt(1)===45},DG=function(t){return t!=null&&typeof t!="boolean"},Om=r2(function(e){return y2(e)?e:e.replace(Q5,"-$&").toLowerCase()}),QG=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(P5,function(o,i,s){return Ri={name:i,styles:s,next:Ri},i})}return U5[t]!==1&&!y2(t)&&typeof n=="number"&&n!==0?n+"px":n},j5="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function wI(e,t,n){if(n==null)return"";var o=n;if(o.__emotion_styles!==void 0)return o;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Ri={name:i.name,styles:i.styles,next:Ri},i.name;var s=n;if(s.styles!==void 0){var r=s.next;if(r!==void 0)for(;r!==void 0;)Ri={name:r.name,styles:r.styles,next:Ri},r=r.next;var I=s.styles+";";return I}return _5(e,t,n)}case"function":{if(e!==void 0){var a=Ri,c=n(e);return Ri=a,wI(e,t,c)}break}}var C=n;if(t==null)return C;var A=t[C];return A!==void 0?A:C}function _5(e,t,n){var o="";if(Array.isArray(n))for(var i=0;i<n.length;i++)o+=wI(e,t,n[i])+";";else for(var s in n){var r=n[s];if(typeof r!="object"){var I=r;t!=null&&t[I]!==void 0?o+=s+"{"+t[I]+"}":DG(I)&&(o+=Om(s)+":"+QG(s,I)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&D5)throw new Error(j5);if(Array.isArray(r)&&typeof r[0]=="string"&&(t==null||t[r[0]]===void 0))for(var a=0;a<r.length;a++)DG(r[a])&&(o+=Om(s)+":"+QG(s,r[a])+";");else{var c=wI(e,t,r);switch(s){case"animation":case"animationName":{o+=Om(s)+":"+c+";";break}default:o+=s+"{"+c+"}"}}}}return o}var PG=/label:\s*([^\s;{]+)\s*(;|$)/g,Ri;function Yf(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var o=!0,i="";Ri=void 0;var s=e[0];if(s==null||s.raw===void 0)o=!1,i+=wI(n,t,s);else{var r=s;i+=r[0]}for(var I=1;I<e.length;I++)if(i+=wI(n,t,e[I]),o){var a=s;i+=a[I]}PG.lastIndex=0;for(var c="",C;(C=PG.exec(i))!==null;)c+="-"+C[1];var A=T5(i)+c;return{name:A,styles:i,next:Ri}}var O5=function(t){return t()},G2=PC.useInsertionEffect?PC.useInsertionEffect:!1,q5=G2||O5,jG=G2||B.useLayoutEffect,B2=B.createContext(typeof HTMLElement<"u"?A2({key:"css"}):null),$5=B2.Provider,S2=function(t){return B.forwardRef(function(n,o){var i=B.useContext(B2);return t(n,i,o)})},oc=B.createContext({}),e9=S2(function(e,t){var n=e.styles,o=Yf([n],void 0,B.useContext(oc)),i=B.useRef();return jG(function(){var s=t.key+"-global",r=new t.sheet.constructor({key:s,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),I=!1,a=document.querySelector('style[data-emotion="'+s+" "+o.name+'"]');return t.sheet.tags.length&&(r.before=t.sheet.tags[0]),a!==null&&(I=!0,a.setAttribute("data-emotion",s),r.hydrate([a])),i.current=[r,I],function(){r.flush()}},[t]),jG(function(){var s=i.current,r=s[0],I=s[1];if(I){s[1]=!1;return}if(o.next!==void 0&&Z2(t,o.next,!0),r.tags.length){var a=r.tags[r.tags.length-1].nextElementSibling;r.before=a,r.flush()}t.insert("",o,r,!1)},[t,o.name]),null});function v2(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Yf(t)}var Nu=function(){var t=v2.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},t9=i5,n9=function(t){return t!=="theme"},_G=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?t9:n9},OG=function(t,n,o){var i;if(n){var s=n.shouldForwardProp;i=t.__emotion_forwardProp&&s?function(r){return t.__emotion_forwardProp(r)&&s(r)}:s}return typeof i!="function"&&o&&(i=t.__emotion_forwardProp),i},o9=!1,i9=function(t){var n=t.cache,o=t.serialized,i=t.isStringTag;return f2(n,o,i),q5(function(){return Z2(n,o,i)}),null},g9=function e(t,n){var o=t.__emotion_real===t,i=o&&t.__emotion_base||t,s,r;n!==void 0&&(s=n.label,r=n.target);var I=OG(t,n,o),a=I||_G(i),c=!a("as");return function(){var C=arguments,A=o&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(s!==void 0&&A.push("label:"+s+";"),C[0]==null||C[0].raw===void 0)A.push.apply(A,C);else{A.push(C[0][0]);for(var m=C.length,p=1;p<m;p++)A.push(C[p],C[0][p])}var b=S2(function(Z,v,f){var G=c&&Z.as||i,y="",W=[],V=Z;if(Z.theme==null){V={};for(var X in Z)V[X]=Z[X];V.theme=B.useContext(oc)}typeof Z.className=="string"?y=z5(v.registered,W,Z.className):Z.className!=null&&(y=Z.className+" ");var R=Yf(A.concat(W),v.registered,V);y+=v.key+"-"+R.name,r!==void 0&&(y+=" "+r);var k=c&&I===void 0?_G(G):a,F={};for(var x in Z)c&&x==="as"||k(x)&&(F[x]=Z[x]);return F.className=y,f&&(F.ref=f),B.createElement(B.Fragment,null,B.createElement(i9,{cache:v,serialized:R,isStringTag:typeof G=="string"}),B.createElement(G,F))});return b.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",b.defaultProps=t.defaultProps,b.__emotion_real=b,b.__emotion_base=i,b.__emotion_styles=A,b.__emotion_forwardProp=I,Object.defineProperty(b,"toString",{value:function(){return r===void 0&&o9?"NO_COMPONENT_SELECTOR":"."+r}}),b.withComponent=function(Z,v){return e(Z,J({},n,v,{shouldForwardProp:OG(b,v,!0)})).apply(void 0,A)},b}},s9=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Rp=g9.bind();s9.forEach(function(e){Rp[e]=Rp(e)});let kp;typeof document=="object"&&(kp=A2({key:"css",prepend:!0}));function r9(e){const{injectFirst:t,children:n}=e;return t&&kp?d.jsx($5,{value:kp,children:n}):n}function l9(e){return e==null||Object.keys(e).length===0}function W2(e){const{styles:t,defaultTheme:n={}}=e,o=typeof t=="function"?i=>t(l9(i)?n:i):t;return d.jsx(e9,{styles:o})}function Hf(e,t){return Rp(e,t)}const V2=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},a9=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:W2,StyledEngineProvider:r9,ThemeContext:oc,css:v2,default:Hf,internal_processStyles:V2,keyframes:Nu},Symbol.toStringTag,{value:"Module"}));function de(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.includes(o))continue;n[o]=e[o]}return n}function _i(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function R2(e){if(!_i(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=R2(e[n])}),t}function jn(e,t,n={clone:!0}){const o=n.clone?J({},e):e;return _i(e)&&_i(t)&&Object.keys(t).forEach(i=>{_i(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&_i(e[i])?o[i]=jn(e[i],t[i],n):n.clone?o[i]=_i(t[i])?R2(t[i]):t[i]:o[i]=t[i]}),o}const I9=Object.freeze(Object.defineProperty({__proto__:null,default:jn,isPlainObject:_i},Symbol.toStringTag,{value:"Module"})),c9=["values","unit","step"],C9=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,o)=>n.val-o.val),t.reduce((n,o)=>J({},n,{[o.key]:o.val}),{})};function k2(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:o=5}=e,i=de(e,c9),s=C9(t),r=Object.keys(s);function I(m){return`@media (min-width:${typeof t[m]=="number"?t[m]:m}${n})`}function a(m){return`@media (max-width:${(typeof t[m]=="number"?t[m]:m)-o/100}${n})`}function c(m,p){const b=r.indexOf(p);return`@media (min-width:${typeof t[m]=="number"?t[m]:m}${n}) and (max-width:${(b!==-1&&typeof t[r[b]]=="number"?t[r[b]]:p)-o/100}${n})`}function C(m){return r.indexOf(m)+1<r.length?c(m,r[r.indexOf(m)+1]):I(m)}function A(m){const p=r.indexOf(m);return p===0?I(r[1]):p===r.length-1?a(r[p]):c(m,r[r.indexOf(m)+1]).replace("@media","@media not all and")}return J({keys:r,values:s,up:I,down:a,between:c,only:C,not:A,unit:n},i)}const d9={borderRadius:4};function oI(e,t){return t?jn(e,t,{clone:!1}):e}const xf={xs:0,sm:600,md:900,lg:1200,xl:1536},qG={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${xf[e]}px)`};function Ao(e,t,n){const o=e.theme||{};if(Array.isArray(t)){const s=o.breakpoints||qG;return t.reduce((r,I,a)=>(r[s.up(s.keys[a])]=n(t[a]),r),{})}if(typeof t=="object"){const s=o.breakpoints||qG;return Object.keys(t).reduce((r,I)=>{if(Object.keys(s.values||xf).indexOf(I)!==-1){const a=s.up(I);r[a]=n(t[I],I)}else{const a=I;r[a]=t[a]}return r},{})}return n(t)}function w2(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((o,i)=>{const s=e.up(i);return o[s]={},o},{}))||{}}function X2(e,t){return e.reduce((n,o)=>{const i=n[o];return(!i||Object.keys(i).length===0)&&delete n[o],n},t)}function u9(e,...t){const n=w2(e),o=[n,...t].reduce((i,s)=>jn(i,s),{});return X2(Object.keys(n),o)}function A9(e,t){if(typeof e!="object")return{};const n={},o=Object.keys(t);return Array.isArray(e)?o.forEach((i,s)=>{s<e.length&&(n[i]=!0)}):o.forEach(i=>{e[i]!=null&&(n[i]=!0)}),n}function Ns({values:e,breakpoints:t,base:n}){const o=n||A9(e,t),i=Object.keys(o);if(i.length===0)return e;let s;return i.reduce((r,I,a)=>(Array.isArray(e)?(r[I]=e[a]!=null?e[a]:e[s],s=a):typeof e=="object"?(r[I]=e[I]!=null?e[I]:e[s],s=I):r[I]=e,r),{})}function me(e){if(typeof e!="string")throw new Error(js(7));return e.charAt(0).toUpperCase()+e.slice(1)}const m9=Object.freeze(Object.defineProperty({__proto__:null,default:me},Symbol.toStringTag,{value:"Module"}));function Fu(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const o=`vars.${t}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,e);if(o!=null)return o}return t.split(".").reduce((o,i)=>o&&o[i]!=null?o[i]:null,e)}function vd(e,t,n,o=n){let i;return typeof e=="function"?i=e(n):Array.isArray(e)?i=e[n]||o:i=Fu(e,n)||o,t&&(i=t(i,o,e)),i}function Qt(e){const{prop:t,cssProperty:n=e.prop,themeKey:o,transform:i}=e,s=r=>{if(r[t]==null)return null;const I=r[t],a=r.theme,c=Fu(a,o)||{};return Ao(r,I,A=>{let m=vd(c,i,A);return A===m&&typeof A=="string"&&(m=vd(c,i,`${t}${A==="default"?"":me(A)}`,A)),n===!1?m:{[n]:m}})};return s.propTypes={},s.filterProps=[t],s}function h9(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const p9={m:"margin",p:"padding"},b9={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},$G={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},f9=h9(e=>{if(e.length>2)if($G[e])e=$G[e];else return[e];const[t,n]=e.split(""),o=p9[t],i=b9[n]||"";return Array.isArray(i)?i.map(s=>o+s):[o+i]}),Nf=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Ff=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Nf,...Ff];function ic(e,t,n,o){var i;const s=(i=Fu(e,t,!1))!=null?i:n;return typeof s=="number"?r=>typeof r=="string"?r:s*r:Array.isArray(s)?r=>typeof r=="string"?r:s[r]:typeof s=="function"?s:()=>{}}function Kf(e){return ic(e,"spacing",8)}function _s(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),o=e(n);return t>=0?o:typeof o=="number"?-o:`-${o}`}function Z9(e,t){return n=>e.reduce((o,i)=>(o[i]=_s(t,n),o),{})}function y9(e,t,n,o){if(t.indexOf(n)===-1)return null;const i=f9(n),s=Z9(i,o),r=e[n];return Ao(e,r,s)}function J2(e,t){const n=Kf(e.theme);return Object.keys(e).map(o=>y9(e,t,o,n)).reduce(oI,{})}function Kt(e){return J2(e,Nf)}Kt.propTypes={};Kt.filterProps=Nf;function Et(e){return J2(e,Ff)}Et.propTypes={};Et.filterProps=Ff;function G9(e=8){if(e.mui)return e;const t=Kf({spacing:e}),n=(...o)=>(o.length===0?[1]:o).map(s=>{const r=t(s);return typeof r=="number"?`${r}px`:r}).join(" ");return n.mui=!0,n}function Ku(...e){const t=e.reduce((o,i)=>(i.filterProps.forEach(s=>{o[s]=i}),o),{}),n=o=>Object.keys(o).reduce((i,s)=>t[s]?oI(i,t[s](o)):i,{});return n.propTypes={},n.filterProps=e.reduce((o,i)=>o.concat(i.filterProps),[]),n}function Do(e){return typeof e!="number"?e:`${e}px solid`}function ei(e,t){return Qt({prop:e,themeKey:"borders",transform:t})}const B9=ei("border",Do),S9=ei("borderTop",Do),v9=ei("borderRight",Do),W9=ei("borderBottom",Do),V9=ei("borderLeft",Do),R9=ei("borderColor"),k9=ei("borderTopColor"),w9=ei("borderRightColor"),X9=ei("borderBottomColor"),J9=ei("borderLeftColor"),Y9=ei("outline",Do),H9=ei("outlineColor"),Eu=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=ic(e.theme,"shape.borderRadius",4),n=o=>({borderRadius:_s(t,o)});return Ao(e,e.borderRadius,n)}return null};Eu.propTypes={};Eu.filterProps=["borderRadius"];Ku(B9,S9,v9,W9,V9,R9,k9,w9,X9,J9,Eu,Y9,H9);const Mu=e=>{if(e.gap!==void 0&&e.gap!==null){const t=ic(e.theme,"spacing",8),n=o=>({gap:_s(t,o)});return Ao(e,e.gap,n)}return null};Mu.propTypes={};Mu.filterProps=["gap"];const Lu=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=ic(e.theme,"spacing",8),n=o=>({columnGap:_s(t,o)});return Ao(e,e.columnGap,n)}return null};Lu.propTypes={};Lu.filterProps=["columnGap"];const zu=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=ic(e.theme,"spacing",8),n=o=>({rowGap:_s(t,o)});return Ao(e,e.rowGap,n)}return null};zu.propTypes={};zu.filterProps=["rowGap"];const x9=Qt({prop:"gridColumn"}),N9=Qt({prop:"gridRow"}),F9=Qt({prop:"gridAutoFlow"}),K9=Qt({prop:"gridAutoColumns"}),E9=Qt({prop:"gridAutoRows"}),M9=Qt({prop:"gridTemplateColumns"}),L9=Qt({prop:"gridTemplateRows"}),z9=Qt({prop:"gridTemplateAreas"}),T9=Qt({prop:"gridArea"});Ku(Mu,Lu,zu,x9,N9,F9,K9,E9,M9,L9,z9,T9);function Il(e,t){return t==="grey"?t:e}const U9=Qt({prop:"color",themeKey:"palette",transform:Il}),D9=Qt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Il}),Q9=Qt({prop:"backgroundColor",themeKey:"palette",transform:Il});Ku(U9,D9,Q9);function yo(e){return e<=1&&e!==0?`${e*100}%`:e}const P9=Qt({prop:"width",transform:yo}),Ef=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var o,i;const s=((o=e.theme)==null||(o=o.breakpoints)==null||(o=o.values)==null?void 0:o[n])||xf[n];return s?((i=e.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${s}${e.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:yo(n)}};return Ao(e,e.maxWidth,t)}return null};Ef.filterProps=["maxWidth"];const j9=Qt({prop:"minWidth",transform:yo}),_9=Qt({prop:"height",transform:yo}),O9=Qt({prop:"maxHeight",transform:yo}),q9=Qt({prop:"minHeight",transform:yo});Qt({prop:"size",cssProperty:"width",transform:yo});Qt({prop:"size",cssProperty:"height",transform:yo});const $9=Qt({prop:"boxSizing"});Ku(P9,Ef,j9,_9,O9,q9,$9);const gc={border:{themeKey:"borders",transform:Do},borderTop:{themeKey:"borders",transform:Do},borderRight:{themeKey:"borders",transform:Do},borderBottom:{themeKey:"borders",transform:Do},borderLeft:{themeKey:"borders",transform:Do},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Do},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Eu},color:{themeKey:"palette",transform:Il},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Il},backgroundColor:{themeKey:"palette",transform:Il},p:{style:Et},pt:{style:Et},pr:{style:Et},pb:{style:Et},pl:{style:Et},px:{style:Et},py:{style:Et},padding:{style:Et},paddingTop:{style:Et},paddingRight:{style:Et},paddingBottom:{style:Et},paddingLeft:{style:Et},paddingX:{style:Et},paddingY:{style:Et},paddingInline:{style:Et},paddingInlineStart:{style:Et},paddingInlineEnd:{style:Et},paddingBlock:{style:Et},paddingBlockStart:{style:Et},paddingBlockEnd:{style:Et},m:{style:Kt},mt:{style:Kt},mr:{style:Kt},mb:{style:Kt},ml:{style:Kt},mx:{style:Kt},my:{style:Kt},margin:{style:Kt},marginTop:{style:Kt},marginRight:{style:Kt},marginBottom:{style:Kt},marginLeft:{style:Kt},marginX:{style:Kt},marginY:{style:Kt},marginInline:{style:Kt},marginInlineStart:{style:Kt},marginInlineEnd:{style:Kt},marginBlock:{style:Kt},marginBlockStart:{style:Kt},marginBlockEnd:{style:Kt},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Mu},rowGap:{style:zu},columnGap:{style:Lu},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:yo},maxWidth:{style:Ef},minWidth:{transform:yo},height:{transform:yo},maxHeight:{transform:yo},minHeight:{transform:yo},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function eK(...e){const t=e.reduce((o,i)=>o.concat(Object.keys(i)),[]),n=new Set(t);return e.every(o=>n.size===Object.keys(o).length)}function tK(e,t){return typeof e=="function"?e(t):e}function Y2(){function e(n,o,i,s){const r={[n]:o,theme:i},I=s[n];if(!I)return{[n]:o};const{cssProperty:a=n,themeKey:c,transform:C,style:A}=I;if(o==null)return null;if(c==="typography"&&o==="inherit")return{[n]:o};const m=Fu(i,c)||{};return A?A(r):Ao(r,o,b=>{let Z=vd(m,C,b);return b===Z&&typeof b=="string"&&(Z=vd(m,C,`${n}${b==="default"?"":me(b)}`,b)),a===!1?Z:{[a]:Z}})}function t(n){var o;const{sx:i,theme:s={}}=n||{};if(!i)return null;const r=(o=s.unstable_sxConfig)!=null?o:gc;function I(a){let c=a;if(typeof a=="function")c=a(s);else if(typeof a!="object")return a;if(!c)return null;const C=w2(s.breakpoints),A=Object.keys(C);let m=C;return Object.keys(c).forEach(p=>{const b=tK(c[p],s);if(b!=null)if(typeof b=="object")if(r[p])m=oI(m,e(p,b,s,r));else{const Z=Ao({theme:s},b,v=>({[p]:v}));eK(Z,b)?m[p]=t({sx:b,theme:s}):m=oI(m,Z)}else m=oI(m,e(p,b,s,r))}),X2(A,m)}return Array.isArray(i)?i.map(I):I(i)}return t}const Tl=Y2();Tl.filterProps=["sx"];function H2(e,t){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:n.palette.mode===e?t:{}}const nK=["breakpoints","palette","spacing","shape"];function Ul(e={},...t){const{breakpoints:n={},palette:o={},spacing:i,shape:s={}}=e,r=de(e,nK),I=k2(n),a=G9(i);let c=jn({breakpoints:I,direction:"ltr",components:{},palette:J({mode:"light"},o),spacing:a,shape:J({},d9,s)},r);return c.applyStyles=H2,c=t.reduce((C,A)=>jn(C,A),c),c.unstable_sxConfig=J({},gc,r==null?void 0:r.unstable_sxConfig),c.unstable_sx=function(A){return Tl({sx:A,theme:this})},c}const oK=Object.freeze(Object.defineProperty({__proto__:null,default:Ul,private_createBreakpoints:k2,unstable_applyStyles:H2},Symbol.toStringTag,{value:"Module"}));function iK(e){return Object.keys(e).length===0}function x2(e=null){const t=B.useContext(oc);return!t||iK(t)?e:t}const gK=Ul();function Tu(e=gK){return x2(e)}function sK({styles:e,themeId:t,defaultTheme:n={}}){const o=Tu(n),i=typeof e=="function"?e(t&&o[t]||o):e;return d.jsx(W2,{styles:i})}const rK=["sx"],lK=e=>{var t,n;const o={systemProps:{},otherProps:{}},i=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:gc;return Object.keys(e).forEach(s=>{i[s]?o.systemProps[s]=e[s]:o.otherProps[s]=e[s]}),o};function sc(e){const{sx:t}=e,n=de(e,rK),{systemProps:o,otherProps:i}=lK(n);let s;return Array.isArray(t)?s=[o,...t]:typeof t=="function"?s=(...r)=>{const I=t(...r);return _i(I)?J({},o,I):o}:s=J({},o,t),J({},i,{sx:s})}const aK=Object.freeze(Object.defineProperty({__proto__:null,default:Tl,extendSxProp:sc,unstable_createStyleFunctionSx:Y2,unstable_defaultSxConfig:gc},Symbol.toStringTag,{value:"Module"})),eB=e=>e,IK=()=>{let e=eB;return{configure(t){e=t},generate(t){return e(t)},reset(){e=eB}}},Mf=IK();function N2(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=N2(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function fe(){for(var e,t,n=0,o="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=N2(e))&&(o&&(o+=" "),o+=t);return o}const cK=["className","component"];function CK(e={}){const{themeId:t,defaultTheme:n,defaultClassName:o="MuiBox-root",generateClassName:i}=e,s=Hf("div",{shouldForwardProp:I=>I!=="theme"&&I!=="sx"&&I!=="as"})(Tl);return B.forwardRef(function(a,c){const C=Tu(n),A=sc(a),{className:m,component:p="div"}=A,b=de(A,cK);return d.jsx(s,J({as:p,ref:c,className:fe(m,i?i(o):o),theme:t&&C[t]||C},b))})}const dK={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Xe(e,t,n="Mui"){const o=dK[t];return o?`${n}-${o}`:`${Mf.generate(e)}-${t}`}function we(e,t,n="Mui"){const o={};return t.forEach(i=>{o[i]=Xe(e,i,n)}),o}var F2={exports:{}},ut={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf=Symbol.for("react.element"),zf=Symbol.for("react.portal"),Uu=Symbol.for("react.fragment"),Du=Symbol.for("react.strict_mode"),Qu=Symbol.for("react.profiler"),Pu=Symbol.for("react.provider"),ju=Symbol.for("react.context"),uK=Symbol.for("react.server_context"),_u=Symbol.for("react.forward_ref"),Ou=Symbol.for("react.suspense"),qu=Symbol.for("react.suspense_list"),$u=Symbol.for("react.memo"),eA=Symbol.for("react.lazy"),AK=Symbol.for("react.offscreen"),K2;K2=Symbol.for("react.module.reference");function ti(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Lf:switch(e=e.type,e){case Uu:case Qu:case Du:case Ou:case qu:return e;default:switch(e=e&&e.$$typeof,e){case uK:case ju:case _u:case eA:case $u:case Pu:return e;default:return t}}case zf:return t}}}ut.ContextConsumer=ju;ut.ContextProvider=Pu;ut.Element=Lf;ut.ForwardRef=_u;ut.Fragment=Uu;ut.Lazy=eA;ut.Memo=$u;ut.Portal=zf;ut.Profiler=Qu;ut.StrictMode=Du;ut.Suspense=Ou;ut.SuspenseList=qu;ut.isAsyncMode=function(){return!1};ut.isConcurrentMode=function(){return!1};ut.isContextConsumer=function(e){return ti(e)===ju};ut.isContextProvider=function(e){return ti(e)===Pu};ut.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Lf};ut.isForwardRef=function(e){return ti(e)===_u};ut.isFragment=function(e){return ti(e)===Uu};ut.isLazy=function(e){return ti(e)===eA};ut.isMemo=function(e){return ti(e)===$u};ut.isPortal=function(e){return ti(e)===zf};ut.isProfiler=function(e){return ti(e)===Qu};ut.isStrictMode=function(e){return ti(e)===Du};ut.isSuspense=function(e){return ti(e)===Ou};ut.isSuspenseList=function(e){return ti(e)===qu};ut.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Uu||e===Qu||e===Du||e===Ou||e===qu||e===AK||typeof e=="object"&&e!==null&&(e.$$typeof===eA||e.$$typeof===$u||e.$$typeof===Pu||e.$$typeof===ju||e.$$typeof===_u||e.$$typeof===K2||e.getModuleId!==void 0)};ut.typeOf=ti;F2.exports=ut;var tB=F2.exports;const mK=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function E2(e){const t=`${e}`.match(mK);return t&&t[1]||""}function M2(e,t=""){return e.displayName||e.name||E2(e)||t}function nB(e,t,n){const o=M2(t);return e.displayName||(o!==""?`${n}(${o})`:n)}function hK(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return M2(e,"Component");if(typeof e=="object")switch(e.$$typeof){case tB.ForwardRef:return nB(e,e.render,"ForwardRef");case tB.Memo:return nB(e,e.type,"memo");default:return}}}const pK=Object.freeze(Object.defineProperty({__proto__:null,default:hK,getFunctionName:E2},Symbol.toStringTag,{value:"Module"})),bK=["ownerState"],fK=["variants"],ZK=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function yK(e){return Object.keys(e).length===0}function GK(e){return typeof e=="string"&&e.charCodeAt(0)>96}function qm(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const BK=Ul(),SK=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function sC({defaultTheme:e,theme:t,themeId:n}){return yK(t)?e:t[n]||t}function vK(e){return e?(t,n)=>n[e]:null}function YC(e,t){let{ownerState:n}=t,o=de(t,bK);const i=typeof e=="function"?e(J({ownerState:n},o)):e;if(Array.isArray(i))return i.flatMap(s=>YC(s,J({ownerState:n},o)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:s=[]}=i;let I=de(i,fK);return s.forEach(a=>{let c=!0;typeof a.props=="function"?c=a.props(J({ownerState:n},o,n)):Object.keys(a.props).forEach(C=>{(n==null?void 0:n[C])!==a.props[C]&&o[C]!==a.props[C]&&(c=!1)}),c&&(Array.isArray(I)||(I=[I]),I.push(typeof a.style=="function"?a.style(J({ownerState:n},o,n)):a.style))}),I}return i}function WK(e={}){const{themeId:t,defaultTheme:n=BK,rootShouldForwardProp:o=qm,slotShouldForwardProp:i=qm}=e,s=r=>Tl(J({},r,{theme:sC(J({},r,{defaultTheme:n,themeId:t}))}));return s.__mui_systemSx=!0,(r,I={})=>{V2(r,V=>V.filter(X=>!(X!=null&&X.__mui_systemSx)));const{name:a,slot:c,skipVariantsResolver:C,skipSx:A,overridesResolver:m=vK(SK(c))}=I,p=de(I,ZK),b=C!==void 0?C:c&&c!=="Root"&&c!=="root"||!1,Z=A||!1;let v,f=qm;c==="Root"||c==="root"?f=o:c?f=i:GK(r)&&(f=void 0);const G=Hf(r,J({shouldForwardProp:f,label:v},p)),y=V=>typeof V=="function"&&V.__emotion_real!==V||_i(V)?X=>YC(V,J({},X,{theme:sC({theme:X.theme,defaultTheme:n,themeId:t})})):V,W=(V,...X)=>{let R=y(V);const k=X?X.map(y):[];a&&m&&k.push(M=>{const Q=sC(J({},M,{defaultTheme:n,themeId:t}));if(!Q.components||!Q.components[a]||!Q.components[a].styleOverrides)return null;const q=Q.components[a].styleOverrides,j={};return Object.entries(q).forEach(([ne,ee])=>{j[ne]=YC(ee,J({},M,{theme:Q}))}),m(M,j)}),a&&!b&&k.push(M=>{var Q;const q=sC(J({},M,{defaultTheme:n,themeId:t})),j=q==null||(Q=q.components)==null||(Q=Q[a])==null?void 0:Q.variants;return YC({variants:j},J({},M,{theme:q}))}),Z||k.push(s);const F=k.length-X.length;if(Array.isArray(V)&&F>0){const M=new Array(F).fill("");R=[...V,...M],R.raw=[...V.raw,...M]}const x=G(R,...k);return r.muiName&&(x.muiName=r.muiName),x};return G.withConfig&&(W.withConfig=G.withConfig),W}}const L2=WK();function XI(e,t){const n=J({},t);return Object.keys(e).forEach(o=>{if(o.toString().match(/^(components|slots)$/))n[o]=J({},e[o],n[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const i=e[o]||{},s=t[o];n[o]={},!s||!Object.keys(s)?n[o]=i:!i||!Object.keys(i)?n[o]=s:(n[o]=J({},s),Object.keys(i).forEach(r=>{n[o][r]=XI(i[r],s[r])}))}else n[o]===void 0&&(n[o]=e[o])}),n}function VK(e){const{theme:t,name:n,props:o}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?o:XI(t.components[n].defaultProps,o)}function z2({props:e,name:t,defaultTheme:n,themeId:o}){let i=Tu(n);return o&&(i=i[o]||i),VK({theme:i,name:t,props:e})}const dg=typeof window<"u"?B.useLayoutEffect:B.useEffect;function RK(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}const kK=Object.freeze(Object.defineProperty({__proto__:null,default:RK},Symbol.toStringTag,{value:"Module"}));function Wd(...e){return e.reduce((t,n)=>n==null?t:function(...i){t.apply(this,i),n.apply(this,i)},()=>{})}function Tf(e,t=166){let n;function o(...i){const s=()=>{e.apply(this,i)};clearTimeout(n),n=setTimeout(s,t)}return o.clear=()=>{clearTimeout(n)},o}function wK(e,t){return()=>null}function HC(e,t){var n,o;return B.isValidElement(e)&&t.indexOf((n=e.type.muiName)!=null?n:(o=e.type)==null||(o=o._payload)==null||(o=o.value)==null?void 0:o.muiName)!==-1}function ao(e){return e&&e.ownerDocument||document}function Qg(e){return ao(e).defaultView||window}function XK(e,t){return()=>null}function Vd(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let oB=0;function JK(e){const[t,n]=B.useState(e),o=e||t;return B.useEffect(()=>{t==null&&(oB+=1,n(`mui-${oB}`))},[t]),o}const iB=PC.useId;function tA(e){if(iB!==void 0){const t=iB();return e??t}return JK(e)}function YK(e,t,n,o,i){return null}function JI({controlled:e,default:t,name:n,state:o="value"}){const{current:i}=B.useRef(e!==void 0),[s,r]=B.useState(t),I=i?e:s,a=B.useCallback(c=>{i||r(c)},[]);return[I,a]}function ks(e){const t=B.useRef(e);return dg(()=>{t.current=e}),B.useRef((...n)=>(0,t.current)(...n)).current}function Vn(...e){return B.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{Vd(n,t)})},e)}const gB={};function HK(e,t){const n=B.useRef(gB);return n.current===gB&&(n.current=e(t)),n}const xK=[];function NK(e){B.useEffect(e,xK)}class nA{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new nA}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}function T2(){const e=HK(nA.create).current;return NK(e.disposeEffect),e}let oA=!0,wp=!1;const FK=new nA,KK={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function EK(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&KK[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function MK(e){e.metaKey||e.altKey||e.ctrlKey||(oA=!0)}function $m(){oA=!1}function LK(){this.visibilityState==="hidden"&&wp&&(oA=!0)}function zK(e){e.addEventListener("keydown",MK,!0),e.addEventListener("mousedown",$m,!0),e.addEventListener("pointerdown",$m,!0),e.addEventListener("touchstart",$m,!0),e.addEventListener("visibilitychange",LK,!0)}function TK(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return oA||EK(t)}function U2(){const e=B.useCallback(i=>{i!=null&&zK(i.ownerDocument)},[]),t=B.useRef(!1);function n(){return t.current?(wp=!0,FK.start(100,()=>{wp=!1}),t.current=!1,!0):!1}function o(i){return TK(i)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:o,onBlur:n,ref:e}}function D2(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}function Fe(e,t,n=void 0){const o={};return Object.keys(e).forEach(i=>{o[i]=e[i].reduce((s,r)=>{if(r){const I=t(r);I!==""&&s.push(I),n&&n[r]&&s.push(n[r])}return s},[]).join(" ")}),o}function Rd(e){return typeof e=="string"}function UK(e,t,n){return e===void 0||Rd(e)?t:J({},t,{ownerState:J({},t.ownerState,n)})}function Q2(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(o=>o.match(/^on[A-Z]/)&&typeof e[o]=="function"&&!t.includes(o)).forEach(o=>{n[o]=e[o]}),n}function sB(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function DK(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:o,externalForwardedProps:i,className:s}=e;if(!t){const p=fe(n==null?void 0:n.className,s,i==null?void 0:i.className,o==null?void 0:o.className),b=J({},n==null?void 0:n.style,i==null?void 0:i.style,o==null?void 0:o.style),Z=J({},n,i,o);return p.length>0&&(Z.className=p),Object.keys(b).length>0&&(Z.style=b),{props:Z,internalRef:void 0}}const r=Q2(J({},i,o)),I=sB(o),a=sB(i),c=t(r),C=fe(c==null?void 0:c.className,n==null?void 0:n.className,s,i==null?void 0:i.className,o==null?void 0:o.className),A=J({},c==null?void 0:c.style,n==null?void 0:n.style,i==null?void 0:i.style,o==null?void 0:o.style),m=J({},c,n,a,I);return C.length>0&&(m.className=C),Object.keys(A).length>0&&(m.style=A),{props:m,internalRef:c.ref}}function QK(e,t,n){return typeof e=="function"?e(t,n):e}const PK=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function Bl(e){var t;const{elementType:n,externalSlotProps:o,ownerState:i,skipResolvingSlotProps:s=!1}=e,r=de(e,PK),I=s?{}:QK(o,i),{props:a,internalRef:c}=DK(J({},r,{externalSlotProps:I})),C=Vn(c,I==null?void 0:I.ref,(t=e.additionalProps)==null?void 0:t.ref);return UK(n,J({},a,{ref:C}),i)}const P2=B.createContext(null);function j2(){return B.useContext(P2)}const jK=typeof Symbol=="function"&&Symbol.for,_K=jK?Symbol.for("mui.nested"):"__THEME_NESTED__";function OK(e,t){return typeof t=="function"?t(e):J({},e,t)}function qK(e){const{children:t,theme:n}=e,o=j2(),i=B.useMemo(()=>{const s=o===null?n:OK(o,n);return s!=null&&(s[_K]=o!==null),s},[n,o]);return d.jsx(P2.Provider,{value:i,children:t})}const $K=["value"],_2=B.createContext();function e3(e){let{value:t}=e,n=de(e,$K);return d.jsx(_2.Provider,J({value:t??!0},n))}const t3=()=>{const e=B.useContext(_2);return e??!1},O2=B.createContext(void 0);function n3({value:e,children:t}){return d.jsx(O2.Provider,{value:e,children:t})}function o3(e){const{theme:t,name:n,props:o}=e;if(!t||!t.components||!t.components[n])return o;const i=t.components[n];return i.defaultProps?XI(i.defaultProps,o):!i.styleOverrides&&!i.variants?XI(i,o):o}function i3({props:e,name:t}){const n=B.useContext(O2);return o3({props:e,name:t,theme:{components:n}})}const rB={};function lB(e,t,n,o=!1){return B.useMemo(()=>{const i=e&&t[e]||t;if(typeof n=="function"){const s=n(i),r=e?J({},t,{[e]:s}):s;return o?()=>r:r}return e?J({},t,{[e]:n}):J({},t,n)},[e,t,n,o])}function g3(e){const{children:t,theme:n,themeId:o}=e,i=x2(rB),s=j2()||rB,r=lB(o,i,n),I=lB(o,s,n,!0),a=r.direction==="rtl";return d.jsx(qK,{theme:I,children:d.jsx(oc.Provider,{value:r,children:d.jsx(e3,{value:a,children:d.jsx(n3,{value:r==null?void 0:r.components,children:t})})})})}function YI(e){"@babel/helpers - typeof";return YI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YI(e)}function s3(e,t){if(YI(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(YI(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function r3(e){var t=s3(e,"string");return YI(t)=="symbol"?t:t+""}const l3=["className","component","disableGutters","fixed","maxWidth","classes"],a3=Ul(),I3=L2("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${me(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),c3=e=>z2({props:e,name:"MuiContainer",defaultTheme:a3}),C3=(e,t)=>{const n=a=>Xe(t,a),{classes:o,fixed:i,disableGutters:s,maxWidth:r}=e,I={root:["root",r&&`maxWidth${me(String(r))}`,i&&"fixed",s&&"disableGutters"]};return Fe(I,n,o)};function d3(e={}){const{createStyledComponent:t=I3,useThemeProps:n=c3,componentName:o="MuiContainer"}=e,i=t(({theme:r,ownerState:I})=>J({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!I.disableGutters&&{paddingLeft:r.spacing(2),paddingRight:r.spacing(2),[r.breakpoints.up("sm")]:{paddingLeft:r.spacing(3),paddingRight:r.spacing(3)}}),({theme:r,ownerState:I})=>I.fixed&&Object.keys(r.breakpoints.values).reduce((a,c)=>{const C=c,A=r.breakpoints.values[C];return A!==0&&(a[r.breakpoints.up(C)]={maxWidth:`${A}${r.breakpoints.unit}`}),a},{}),({theme:r,ownerState:I})=>J({},I.maxWidth==="xs"&&{[r.breakpoints.up("xs")]:{maxWidth:Math.max(r.breakpoints.values.xs,444)}},I.maxWidth&&I.maxWidth!=="xs"&&{[r.breakpoints.up(I.maxWidth)]:{maxWidth:`${r.breakpoints.values[I.maxWidth]}${r.breakpoints.unit}`}}));return B.forwardRef(function(I,a){const c=n(I),{className:C,component:A="div",disableGutters:m=!1,fixed:p=!1,maxWidth:b="lg"}=c,Z=de(c,l3),v=J({},c,{component:A,disableGutters:m,fixed:p,maxWidth:b}),f=C3(v,o);return d.jsx(i,J({as:A,ownerState:v,className:fe(f.root,C),ref:a},Z))})}const u3=["component","direction","spacing","divider","children","className","useFlexGap"],A3=Ul(),m3=L2("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function h3(e){return z2({props:e,name:"MuiStack",defaultTheme:A3})}function p3(e,t){const n=B.Children.toArray(e).filter(Boolean);return n.reduce((o,i,s)=>(o.push(i),s<n.length-1&&o.push(B.cloneElement(t,{key:`separator-${s}`})),o),[])}const b3=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],f3=({ownerState:e,theme:t})=>{let n=J({display:"flex",flexDirection:"column"},Ao({theme:t},Ns({values:e.direction,breakpoints:t.breakpoints.values}),o=>({flexDirection:o})));if(e.spacing){const o=Kf(t),i=Object.keys(t.breakpoints.values).reduce((a,c)=>((typeof e.spacing=="object"&&e.spacing[c]!=null||typeof e.direction=="object"&&e.direction[c]!=null)&&(a[c]=!0),a),{}),s=Ns({values:e.direction,base:i}),r=Ns({values:e.spacing,base:i});typeof s=="object"&&Object.keys(s).forEach((a,c,C)=>{if(!s[a]){const m=c>0?s[C[c-1]]:"column";s[a]=m}}),n=jn(n,Ao({theme:t},r,(a,c)=>e.useFlexGap?{gap:_s(o,a)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${b3(c?s[c]:e.direction)}`]:_s(o,a)}}))}return n=u9(t.breakpoints,n),n};function Z3(e={}){const{createStyledComponent:t=m3,useThemeProps:n=h3,componentName:o="MuiStack"}=e,i=()=>Fe({root:["root"]},a=>Xe(o,a),{}),s=t(f3);return B.forwardRef(function(a,c){const C=n(a),A=sc(C),{component:m="div",direction:p="column",spacing:b=0,divider:Z,children:v,className:f,useFlexGap:G=!1}=A,y=de(A,u3),W={direction:p,spacing:b,useFlexGap:G},V=i();return d.jsx(s,J({as:m,ownerState:W,ref:c,className:fe(V.root,f)},y,{children:Z?p3(v,Z):v}))})}var rc={},q2={exports:{}};(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(q2);var nr=q2.exports;const y3=Ki(n5);var eh={exports:{}},aB;function G3(){return aB||(aB=1,function(e){function t(n,o){if(n==null)return{};var i={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(o.includes(s))continue;i[s]=n[s]}return i}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(eh)),eh.exports}const B3=Ki(a9),S3=Ki(I9),v3=Ki(m9),W3=Ki(pK),V3=Ki(oK),R3=Ki(aK);var Dl=nr;Object.defineProperty(rc,"__esModule",{value:!0});var k3=rc.default=z3;rc.shouldForwardProp=xC;rc.systemDefaultTheme=void 0;var Lo=Dl(y3),Xp=Dl(G3()),IB=N3(B3),w3=S3;Dl(v3);Dl(W3);var X3=Dl(V3),J3=Dl(R3);const Y3=["ownerState"],H3=["variants"],x3=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function $2(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return($2=function(o){return o?n:t})(e)}function N3(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=$2(t);if(n&&n.has(e))return n.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var r=i?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(o,s,r):o[s]=e[s]}return o.default=e,n&&n.set(e,o),o}function F3(e){return Object.keys(e).length===0}function K3(e){return typeof e=="string"&&e.charCodeAt(0)>96}function xC(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const E3=rc.systemDefaultTheme=(0,X3.default)(),M3=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function rC({defaultTheme:e,theme:t,themeId:n}){return F3(t)?e:t[n]||t}function L3(e){return e?(t,n)=>n[e]:null}function NC(e,t){let{ownerState:n}=t,o=(0,Xp.default)(t,Y3);const i=typeof e=="function"?e((0,Lo.default)({ownerState:n},o)):e;if(Array.isArray(i))return i.flatMap(s=>NC(s,(0,Lo.default)({ownerState:n},o)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:s=[]}=i;let I=(0,Xp.default)(i,H3);return s.forEach(a=>{let c=!0;typeof a.props=="function"?c=a.props((0,Lo.default)({ownerState:n},o,n)):Object.keys(a.props).forEach(C=>{(n==null?void 0:n[C])!==a.props[C]&&o[C]!==a.props[C]&&(c=!1)}),c&&(Array.isArray(I)||(I=[I]),I.push(typeof a.style=="function"?a.style((0,Lo.default)({ownerState:n},o,n)):a.style))}),I}return i}function z3(e={}){const{themeId:t,defaultTheme:n=E3,rootShouldForwardProp:o=xC,slotShouldForwardProp:i=xC}=e,s=r=>(0,J3.default)((0,Lo.default)({},r,{theme:rC((0,Lo.default)({},r,{defaultTheme:n,themeId:t}))}));return s.__mui_systemSx=!0,(r,I={})=>{(0,IB.internal_processStyles)(r,V=>V.filter(X=>!(X!=null&&X.__mui_systemSx)));const{name:a,slot:c,skipVariantsResolver:C,skipSx:A,overridesResolver:m=L3(M3(c))}=I,p=(0,Xp.default)(I,x3),b=C!==void 0?C:c&&c!=="Root"&&c!=="root"||!1,Z=A||!1;let v,f=xC;c==="Root"||c==="root"?f=o:c?f=i:K3(r)&&(f=void 0);const G=(0,IB.default)(r,(0,Lo.default)({shouldForwardProp:f,label:v},p)),y=V=>typeof V=="function"&&V.__emotion_real!==V||(0,w3.isPlainObject)(V)?X=>NC(V,(0,Lo.default)({},X,{theme:rC({theme:X.theme,defaultTheme:n,themeId:t})})):V,W=(V,...X)=>{let R=y(V);const k=X?X.map(y):[];a&&m&&k.push(M=>{const Q=rC((0,Lo.default)({},M,{defaultTheme:n,themeId:t}));if(!Q.components||!Q.components[a]||!Q.components[a].styleOverrides)return null;const q=Q.components[a].styleOverrides,j={};return Object.entries(q).forEach(([ne,ee])=>{j[ne]=NC(ee,(0,Lo.default)({},M,{theme:Q}))}),m(M,j)}),a&&!b&&k.push(M=>{var Q;const q=rC((0,Lo.default)({},M,{defaultTheme:n,themeId:t})),j=q==null||(Q=q.components)==null||(Q=Q[a])==null?void 0:Q.variants;return NC({variants:j},(0,Lo.default)({},M,{theme:q}))}),Z||k.push(s);const F=k.length-X.length;if(Array.isArray(V)&&F>0){const M=new Array(F).fill("");R=[...V,...M],R.raw=[...V.raw,...M]}const x=G(R,...k);return r.muiName&&(x.muiName=r.muiName),x};return G.withConfig&&(W.withConfig=G.withConfig),W}}function T3(e,t){return J({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var Pt={};const U3=Ki(t5),D3=Ki(kK);var ek=nr;Object.defineProperty(Pt,"__esModule",{value:!0});var mn=Pt.alpha=sk;Pt.blend=oE;Pt.colorChannel=void 0;var tk=Pt.darken=Df;Pt.decomposeColor=qo;Pt.emphasize=rk;var Q3=Pt.getContrastRatio=q3;Pt.getLuminance=kd;Pt.hexToRgb=ok;Pt.hslToRgb=gk;var nk=Pt.lighten=Qf;Pt.private_safeAlpha=$3;Pt.private_safeColorChannel=void 0;Pt.private_safeDarken=eE;Pt.private_safeEmphasize=nE;Pt.private_safeLighten=tE;Pt.recomposeColor=Ql;Pt.rgbToHex=O3;var cB=ek(U3),P3=ek(D3);function Uf(e,t=0,n=1){return(0,P3.default)(e,t,n)}function ok(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(o=>o+o)),n?`rgb${n.length===4?"a":""}(${n.map((o,i)=>i<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function j3(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function qo(e){if(e.type)return e;if(e.charAt(0)==="#")return qo(ok(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,cB.default)(9,e));let o=e.substring(t+1,e.length-1),i;if(n==="color"){if(o=o.split(" "),i=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error((0,cB.default)(10,i))}else o=o.split(",");return o=o.map(s=>parseFloat(s)),{type:n,values:o,colorSpace:i}}const ik=e=>{const t=qo(e);return t.values.slice(0,3).map((n,o)=>t.type.indexOf("hsl")!==-1&&o!==0?`${n}%`:n).join(" ")};Pt.colorChannel=ik;const _3=(e,t)=>{try{return ik(e)}catch{return e}};Pt.private_safeColorChannel=_3;function Ql(e){const{type:t,colorSpace:n}=e;let{values:o}=e;return t.indexOf("rgb")!==-1?o=o.map((i,s)=>s<3?parseInt(i,10):i):t.indexOf("hsl")!==-1&&(o[1]=`${o[1]}%`,o[2]=`${o[2]}%`),t.indexOf("color")!==-1?o=`${n} ${o.join(" ")}`:o=`${o.join(", ")}`,`${t}(${o})`}function O3(e){if(e.indexOf("#")===0)return e;const{values:t}=qo(e);return`#${t.map((n,o)=>j3(o===3?Math.round(255*n):n)).join("")}`}function gk(e){e=qo(e);const{values:t}=e,n=t[0],o=t[1]/100,i=t[2]/100,s=o*Math.min(i,1-i),r=(c,C=(c+n/30)%12)=>i-s*Math.max(Math.min(C-3,9-C,1),-1);let I="rgb";const a=[Math.round(r(0)*255),Math.round(r(8)*255),Math.round(r(4)*255)];return e.type==="hsla"&&(I+="a",a.push(t[3])),Ql({type:I,values:a})}function kd(e){e=qo(e);let t=e.type==="hsl"||e.type==="hsla"?qo(gk(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function q3(e,t){const n=kd(e),o=kd(t);return(Math.max(n,o)+.05)/(Math.min(n,o)+.05)}function sk(e,t){return e=qo(e),t=Uf(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Ql(e)}function $3(e,t,n){try{return sk(e,t)}catch{return e}}function Df(e,t){if(e=qo(e),t=Uf(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Ql(e)}function eE(e,t,n){try{return Df(e,t)}catch{return e}}function Qf(e,t){if(e=qo(e),t=Uf(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Ql(e)}function tE(e,t,n){try{return Qf(e,t)}catch{return e}}function rk(e,t=.15){return kd(e)>.5?Df(e,t):Qf(e,t)}function nE(e,t,n){try{return rk(e,t)}catch{return e}}function oE(e,t,n,o=1){const i=(a,c)=>Math.round((a**(1/o)*(1-n)+c**(1/o)*n)**o),s=qo(e),r=qo(t),I=[i(s.values[0],r.values[0]),i(s.values[1],r.values[1]),i(s.values[2],r.values[2])];return Ql({type:"rgb",values:I})}const HI={black:"#000",white:"#fff"},iE={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Sr={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},vr={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Ra={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Wr={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Vr={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Rr={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},gE=["mode","contrastThreshold","tonalOffset"],CB={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:HI.white,default:HI.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},th={text:{primary:HI.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:HI.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function dB(e,t,n,o){const i=o.light||o,s=o.dark||o*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=nk(e.main,i):t==="dark"&&(e.dark=tk(e.main,s)))}function sE(e="light"){return e==="dark"?{main:Wr[200],light:Wr[50],dark:Wr[400]}:{main:Wr[700],light:Wr[400],dark:Wr[800]}}function rE(e="light"){return e==="dark"?{main:Sr[200],light:Sr[50],dark:Sr[400]}:{main:Sr[500],light:Sr[300],dark:Sr[700]}}function lE(e="light"){return e==="dark"?{main:vr[500],light:vr[300],dark:vr[700]}:{main:vr[700],light:vr[400],dark:vr[800]}}function aE(e="light"){return e==="dark"?{main:Vr[400],light:Vr[300],dark:Vr[700]}:{main:Vr[700],light:Vr[500],dark:Vr[900]}}function IE(e="light"){return e==="dark"?{main:Rr[400],light:Rr[300],dark:Rr[700]}:{main:Rr[800],light:Rr[500],dark:Rr[900]}}function cE(e="light"){return e==="dark"?{main:Ra[400],light:Ra[300],dark:Ra[700]}:{main:"#ed6c02",light:Ra[500],dark:Ra[900]}}function CE(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:o=.2}=e,i=de(e,gE),s=e.primary||sE(t),r=e.secondary||rE(t),I=e.error||lE(t),a=e.info||aE(t),c=e.success||IE(t),C=e.warning||cE(t);function A(Z){return Q3(Z,th.text.primary)>=n?th.text.primary:CB.text.primary}const m=({color:Z,name:v,mainShade:f=500,lightShade:G=300,darkShade:y=700})=>{if(Z=J({},Z),!Z.main&&Z[f]&&(Z.main=Z[f]),!Z.hasOwnProperty("main"))throw new Error(js(11,v?` (${v})`:"",f));if(typeof Z.main!="string")throw new Error(js(12,v?` (${v})`:"",JSON.stringify(Z.main)));return dB(Z,"light",G,o),dB(Z,"dark",y,o),Z.contrastText||(Z.contrastText=A(Z.main)),Z},p={dark:th,light:CB};return jn(J({common:J({},HI),mode:t,primary:m({color:s,name:"primary"}),secondary:m({color:r,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:I,name:"error"}),warning:m({color:C,name:"warning"}),info:m({color:a,name:"info"}),success:m({color:c,name:"success"}),grey:iE,contrastThreshold:n,getContrastText:A,augmentColor:m,tonalOffset:o},p[t]),i)}const dE=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function uE(e){return Math.round(e*1e5)/1e5}const uB={textTransform:"uppercase"},AB='"Roboto", "Helvetica", "Arial", sans-serif';function AE(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:o=AB,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:r=400,fontWeightMedium:I=500,fontWeightBold:a=700,htmlFontSize:c=16,allVariants:C,pxToRem:A}=n,m=de(n,dE),p=i/14,b=A||(f=>`${f/c*p}rem`),Z=(f,G,y,W,V)=>J({fontFamily:o,fontWeight:f,fontSize:b(G),lineHeight:y},o===AB?{letterSpacing:`${uE(W/G)}em`}:{},V,C),v={h1:Z(s,96,1.167,-1.5),h2:Z(s,60,1.2,-.5),h3:Z(r,48,1.167,0),h4:Z(r,34,1.235,.25),h5:Z(r,24,1.334,0),h6:Z(I,20,1.6,.15),subtitle1:Z(r,16,1.75,.15),subtitle2:Z(I,14,1.57,.1),body1:Z(r,16,1.5,.15),body2:Z(r,14,1.43,.15),button:Z(I,14,1.75,.4,uB),caption:Z(r,12,1.66,.4),overline:Z(r,12,2.66,1,uB),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return jn(J({htmlFontSize:c,pxToRem:b,fontFamily:o,fontSize:i,fontWeightLight:s,fontWeightRegular:r,fontWeightMedium:I,fontWeightBold:a},v),m,{clone:!1})}const mE=.2,hE=.14,pE=.12;function Rt(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${mE})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${hE})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${pE})`].join(",")}const bE=["none",Rt(0,2,1,-1,0,1,1,0,0,1,3,0),Rt(0,3,1,-2,0,2,2,0,0,1,5,0),Rt(0,3,3,-2,0,3,4,0,0,1,8,0),Rt(0,2,4,-1,0,4,5,0,0,1,10,0),Rt(0,3,5,-1,0,5,8,0,0,1,14,0),Rt(0,3,5,-1,0,6,10,0,0,1,18,0),Rt(0,4,5,-2,0,7,10,1,0,2,16,1),Rt(0,5,5,-3,0,8,10,1,0,3,14,2),Rt(0,5,6,-3,0,9,12,1,0,3,16,2),Rt(0,6,6,-3,0,10,14,1,0,4,18,3),Rt(0,6,7,-4,0,11,15,1,0,4,20,3),Rt(0,7,8,-4,0,12,17,2,0,5,22,4),Rt(0,7,8,-4,0,13,19,2,0,5,24,4),Rt(0,7,9,-4,0,14,21,2,0,5,26,4),Rt(0,8,9,-5,0,15,22,2,0,6,28,5),Rt(0,8,10,-5,0,16,24,2,0,6,30,5),Rt(0,8,11,-5,0,17,26,2,0,6,32,5),Rt(0,9,11,-5,0,18,28,2,0,7,34,6),Rt(0,9,12,-6,0,19,29,2,0,7,36,6),Rt(0,10,13,-6,0,20,31,3,0,8,38,7),Rt(0,10,13,-6,0,21,33,3,0,8,40,7),Rt(0,10,14,-6,0,22,35,3,0,8,42,7),Rt(0,11,14,-7,0,23,36,3,0,9,44,8),Rt(0,11,15,-7,0,24,38,3,0,9,46,8)],fE=["duration","easing","delay"],ZE={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},yE={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function mB(e){return`${Math.round(e)}ms`}function GE(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function BE(e){const t=J({},ZE,e.easing),n=J({},yE,e.duration);return J({getAutoHeightDuration:GE,create:(i=["all"],s={})=>{const{duration:r=n.standard,easing:I=t.easeInOut,delay:a=0}=s;return de(s,fE),(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof r=="string"?r:mB(r)} ${I} ${typeof a=="string"?a:mB(a)}`).join(",")}},e,{easing:t,duration:n})}const SE={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},vE=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function mg(e={},...t){const{mixins:n={},palette:o={},transitions:i={},typography:s={}}=e,r=de(e,vE);if(e.vars)throw new Error(js(18));const I=CE(o),a=Ul(e);let c=jn(a,{mixins:T3(a.breakpoints,n),palette:I,shadows:bE.slice(),typography:AE(I,s),transitions:BE(i),zIndex:J({},SE)});return c=jn(c,r),c=t.reduce((C,A)=>jn(C,A),c),c.unstable_sxConfig=J({},gc,r==null?void 0:r.unstable_sxConfig),c.unstable_sx=function(A){return Tl({sx:A,theme:this})},c}const Pf=mg(),Sl="$$material";function lk(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Mn=e=>lk(e)&&e!=="classes",Ie=k3({themeId:Sl,defaultTheme:Pf,rootShouldForwardProp:Mn});function ze(e){return i3(e)}const ni=d3({createStyledComponent:Ie("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${me(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>ze({props:e,name:"MuiContainer"})}),WE="/assets/fruit-D7fCoz1X.png",VE="https://cookbstaging.careervio.com",RE=async(e,t)=>{try{const n=`${VE}/api/history-point?filters[user][id][$eq]=${e}&populate=user&populate=shop&populate=shop.image`,o=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!o.ok){const r=await o.json();throw console.error("Error fetching history point:",r),new Error(`Request failed with status ${o.status}`)}const s=(await o.json()).data.map(r=>{var I,a,c,C,A,m,p,b,Z,v,f,G,y,W,V,X,R,k,F,x,M,Q,q,j,ne,ee,te,N;return{id:r.id,date:r.attributes.date,time:r.attributes.time,totalPoint:r.attributes.totalPoint,user:{id:((a=(I=r.attributes.user)==null?void 0:I.data)==null?void 0:a.id)||"",username:((A=(C=(c=r.attributes.user)==null?void 0:c.data)==null?void 0:C.attributes)==null?void 0:A.username)||"",email:((b=(p=(m=r.attributes.user)==null?void 0:m.data)==null?void 0:p.attributes)==null?void 0:b.email)||"",fullName:((f=(v=(Z=r.attributes.user)==null?void 0:Z.data)==null?void 0:v.attributes)==null?void 0:f.fullName)||"",lineId:((W=(y=(G=r.attributes.user)==null?void 0:G.data)==null?void 0:y.attributes)==null?void 0:W.lineId)||"",userType:((R=(X=(V=r.attributes.user)==null?void 0:V.data)==null?void 0:X.attributes)==null?void 0:R.userType)||"",point:((x=(F=(k=r.attributes.user)==null?void 0:k.data)==null?void 0:F.attributes)==null?void 0:x.point)||0},shop:{id:((Q=(M=r.attributes.shop)==null?void 0:M.data)==null?void 0:Q.id)||"",name:((ne=(j=(q=r.attributes.shop)==null?void 0:q.data)==null?void 0:j.attributes)==null?void 0:ne.name)||"",image:((N=(te=(ee=r.attributes.shop)==null?void 0:ee.data)==null?void 0:te.attributes)==null?void 0:N.image)||""}}});return console.log("recycleMachines in get: ",s),s}catch(n){throw console.error("Error fetching recycle machines:",n.message),n}},ak=(e,t)=>{const n=new Date(`${e}T${t}`),o=["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัสบดี","ศุกร์","เสาร์"],i=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],s=o[n.getDay()],r=n.getDate(),I=i[n.getMonth()],a=n.getFullYear()+543,c=n.getHours().toString().padStart(2,"0"),C=n.getMinutes().toString().padStart(2,"0");return`วัน${s}ที่ ${r} เดือน ${I} ${a} เวลา ${c}:${C} น.`};function kE(){const e="https://cookbstaging.careervio.com",t="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",{id:n}=fu(),[o,i]=B.useState(null),[s,r]=B.useState(!0),[I,a]=B.useState(null);return B.useEffect(()=>{(async()=>{try{r(!0);const C=await RE(n,t);i(C),r(!1)}catch(C){console.error("Error fetching history points:",C),a(C.message),r(!1)}})()},[n,t]),s?d.jsx("p",{children:"Loading..."}):I?d.jsxs("p",{children:["Error: ",I]}):d.jsxs(d.Fragment,{children:[d.jsx(En,{}),d.jsxs(ni,{maxWidth:"sm",children:[d.jsx("p",{className:"text-center mt-16 text-2xl",children:"คะแนนสะสม"}),d.jsx("div",{className:"flex justify-center mt-8",children:d.jsx("img",{src:e5,alt:"coins",width:"120"})}),d.jsxs("p",{className:"text-center mt-8 text-xl font-semibold",children:[o[0].user.point," แต้ม"]}),d.jsx("p",{className:"text-center mt-10 text-2xl font-semibold",children:"ประวัติการแลกแต้ม"}),o.map((c,C)=>{var A,m,p,b,Z;return d.jsxs("div",{className:"shadow-inner w-full max-w-md mx-auto h-auto bg-white mt-10 rounded-lg mb-6 p-4",children:[d.jsx("div",{className:"flex justify-center",children:d.jsx("img",{src:(b=(p=(m=(A=c.shop)==null?void 0:A.image)==null?void 0:m.data)==null?void 0:p.attributes)!=null&&b.url?`${e}${c.shop.image.data.attributes.url}`:WE,alt:`ร้าน ${(Z=c.shop)==null?void 0:Z.name}`,className:"rounded-full w-24 h-24 sm:w-32 sm:h-32 object-cover"})}),d.jsx("div",{className:"flex justify-center mt-4 text-lg sm:text-xl font-semibold",children:d.jsx("p",{children:c.shop.name})}),d.jsxs("div",{className:"grid grid-cols-[4fr_2fr_3fr] mt-10 text-lg sm:text-xl",children:[d.jsx("p",{className:"pl-4 sm:pl-8",children:"แลกแต้มทั้งหมด"}),d.jsx("p",{className:"text-center",children:c.totalPoint}),d.jsx("p",{className:"pr-4 sm:pr-8 text-right",children:"แต้ม"})]}),d.jsx("p",{className:"mt-6 text-center text-sm sm:text-lg",children:ak(c.date,c.time)})]},C)})]})]})}const Jp="/assets/Can_2_-Cuhqxb0c.png",Yp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAA2CAYAAADZJImDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAlHSURBVHgBrVjdbxvHEd+Pu+ORPFGkREu0ZVmUYNeyo7Yy0hSC7TppGgRqEDQGigJtkQJWCwQGigJ9aP+AvgToU4smKPpUB437B7QICrd5sBO7tYIqthynjmzJFhV9UbIk0uSR97W321lKR1PSkVaMDHA87t7e/HZmZ36zexiFSPbCrJ5BKENVlhGcZzEhmUVP+VNurN9GTynKzo5Tf7l3HmOWqTUEQhiT2j2D7EwOoRx6SiF76KkJpXRUWoq+LCDBUah7MMaZHpWdH75wM4meQnBjY/jCbNJQ2C+f9JIv+KTlV69Mjp0ooj3KNqDT786Mgk0jaI/iIzy+zOiVvQRJHejkX+8NE47Poi8oAqPiXiKytkbSZVjgUfQUggVKHqDuEydYA4qr7By8UI8onWIlmyDJ59Lqwe8e0od+9Wzq5TYNq02VYDL4pIhUTl2cHpGzCjq+PxD9RkIlRuMgQ8HxdFSJlF3Pa6YIInI4h9A4am6RGN7Ww3cPWnfEylBXrCOiUNJUEcdZ1EIIrE2msYMhwRrbCxWe/1/BzRka1l8ZMPraIlQJV8Vbum7bDFMa0TsitO7GByV/4f0Fa2rV8i3Z1lWsvnq4beBMr9G9G5C0zClFhmewRl/rVA7Ke8nj5u0NlrtX9NZkOxGh2pGU1k2A+AqOb8q+nkRb+2zRLdxccdYd5nPq0/GWQODbnMBiWEZawUHmP+ftiaXqprJAHE+wuTJb2xdT2iAo2nyB+HqVVfqTWmp/XDX+8cCcq9LaZPPNgIjne5Pyj+0L9smGm98JIuXehlVyGfcXS27x7pqdr7rc3bD9auDOUwf1DPX9LGohZHzsWA7uV1oNKrvCCxT7sOoW47Uw/1fOnHM5591gVUTFx2WqNCNdcnO2kH3rdDp3sI2arcAWy16lsd2h09iRpJa4u7a5jkdSSh+s9WgbjYeyBBHcHeWcnftBNjb8k8Ox069l9WEZfTsHTm94j3b2yTWaM11TWtsVU6OyT2CcDWMJIhCp5VGMClOBgJDhPZLRDu8cKCMrcF8gVY97Zctn0lqVknqq7I+g7C4g+VN0RHLVEfWHjG9P2kAa3QfBwa/NV5fk/7miY1qwjsGzsMCApBPFddsfZHyTVGHWxYk1LxcGJBUmo1SzHME+XbMKDhM1wpLBcnPVWg/GNXJnHUgIkiOEDS2YLD/9yM/nTNY0w6XCa3OVlaAt19KCtJCpUXb8uhc4EZldQJ20fOnN+yi/WmV7qkeyfOzTaI3dbxdYXoLsHBNqUX9/v/3ChdmplIHOFuzNjYlkiagqlIiClS6dGgYlenuEGO1QPj43/fyNNXdhJ8Bwl94B7hdzZa/caF0dSP5cGesv/u7aQjahkUyYFQyU3i/7C5cXrakAIK5iZbgr2tHXrqX6k2oawpoD9633JdXEe/fLd0OBpGgKnoDbq40PZWDcWme5YN3AQpJNReJHO7RUQqF6T7vSnoxQA8aVTJf5PTG8/xgA//tz+p+mQB0RMlGy+ahk7qWKv9bofwlwPB1JHW7XU4ryuLR8tu6sQJaWj6fVga44iQf9owOG/14zoMGkPvnr8fVLNhP1Mt4MQCZuseL5GR11pyDBPdenKPq4PGmUvwS3PzcC1V8+0Z8qVuzHEzmQUKKvDCT6Bjv1zgBEAtxath/qvpc+3k6PBkWyYLGqzyXfbkqUks6RC59lQ4GkXB87OgXBOT4A6/B8r9ErS4BkAFngPpyvzm88stGzHeSZxiosBeqTKDqe3bAMSUVRB0NdV+9gdPxhxf3WjWWUN5nw1qqeIxngZLeWPZrUsqiJVBzudkZRbZ3iKonJYgp/L22zSAgRhevrcMWgaUsGuLvhlKDQWQHNOD5izA/nQIsJ23SFaTK0sWrx5bkKfyD3iY3uq1kEJwULQGQO9V4+l53/4d9mlTWL8wBEyseQpJ8WvaUeQ4l7kJmg2Cu4fNs2+EfPqF+Rd/B27b0t9+XqQFsi632vvF7qb+t2fRS3PeExgXwFIyoHyDULFP19uvJgp2VyvBxTckVtAo3uawyGheAP1OWNQLHcz8l7ACIFJuHL+rQTyPV91KWTTtNhNRc3uq9uEbhvHdwnC1tMRcKT0cYF9uWeQO4RXLCsAhxWBZflSm6t7Kd0pPcaSrJbp8mMTtM+Fm7BEeUDbSrkooUa3bcz6j6ES/v9f9ekohcaH0iizcSxAcydOJPRDnSC8ijF9ZItd7RXl62Z5/aj9MF2NSHzcKnErMB924DAKgabFeO1vkjmoS2yQJw6EK2hEmDzBqU75ZOCN/Pxqrsw1KWnehLgbYXQQ22aIYEC94Xuo0+k9ZE5k2XRE0SG9fiKOyVJF2gi8dV9+j7Zn4yQWG9CaR9fRA9lm2g0uQuoiIp2lMafeFSU+/KPVp1cQLzH03pn8Mxlwo9pivrYfaq96xjybSiEhGC7lRWXF53JD5btmQCkJ6FFG6MSCp+tE6JK98m9/fUf90+Fuk7DWNEp0mwfuUFfUPzCqqvt8W2hLnezqxWvDBtMOjG3+o7sCwW6PlvSojEIUZVutAIIxIRElWmgkc29HTDK3MIj7/JvXjwQ389p4gqsSCjQ9IoN2W+p902hrLl+nhpqUY2ooSCbin0+vmBfPXvUEPt0bfo7WePqy3+Y7L+oiPNV5sv69m4o0COH34HvAt9MYGHnLV+HrB12QR1RiEk1kicKLcIeN4e5yIkInYK8zX80uaHfmlxKYg9n4CPV6wSJ7HzBae+IKc83BYKPTHn5BSIO9JOieOZh2Z0MGZXZukZMVEKbZZkE9aDW2qgwpzOupn77/tKxcCAKQFvLe6hDHSw73oS9RZSB6DAJAzYmwBh6RIXYwaKuyxcYSorPPO6DcRCNnO1rcvB9fHIjGCnHumPDt5etCUPFRqehpQ0dp7UWTLH1JmrTiBrXUAJzCOOwIbEqMq0GNZAjyZPZ+PccxktcHty/gGCMFt94sfeD0O8Gf/z5kAlerjF0TKMdRoRk4ESXkHfSJCXCRAi0RCn/KUJNPwPWaslMTCXgIpQI+sDfSiJKD8r+VoAwyRlY47eXi2zsZ6f7akebpoNB0dsKRWfCnsGuFhiaGsBppueLKlw2KL8BkToJtDD5zhtDu6IUoxbyi4vT8N3BexP8PEIx1mqzFbISixLG4o7g9A5B/I6H1DtvvX6k1ErX/wF4ybUEkEx81gAAAABJRU5ErkJggg==",jf="/assets/logo-CZ1hDsNe.png",wE="/assets/oil%20bottle-DWp1Sx2f.png";function kr(e){return Ag({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(e)}function XE(e){return Ag({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"},child:[]}]})(e)}function JE(e){return Ag({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function YE(e){return Ag({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function HE(e){return Ag({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM272 80v80H144V80h128zm122 352H54a6 6 0 0 1-6-6V86a6 6 0 0 1 6-6h42v104c0 13.255 10.745 24 24 24h176c13.255 0 24-10.745 24-24V83.882l78.243 78.243a6 6 0 0 1 1.757 4.243V426a6 6 0 0 1-6 6zM224 232c-48.523 0-88 39.477-88 88s39.477 88 88 88 88-39.477 88-88-39.477-88-88-88zm0 128c-22.056 0-40-17.944-40-40s17.944-40 40-40 40 17.944 40 40-17.944 40-40 40z"},child:[]}]})(e)}const xE="https://cookbstaging.careervio.com",NE=async(e,t)=>{try{const n=`${xE}/api/history-machine?filters[user][id][$eq]=${e}&populate[user]=true`,o=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(!o.ok){const r=await o.json();throw console.error("Error fetching history machines:",r),new Error(`Request failed with status ${o.status}`)}const s=(await o.json()).data.map(r=>{var I,a,c,C,A,m,p,b,Z,v,f,G,y,W,V,X,R;return{id:r.id,type:r.attributes.type,date:r.attributes.date,time:r.attributes.time,serialNumber:r.attributes.serialNumber,point:r.attributes.point,quantity:r.attributes.quantity,user:{id:((a=(I=r.attributes.user)==null?void 0:I.data)==null?void 0:a.id)||"",username:((A=(C=(c=r.attributes.user)==null?void 0:c.data)==null?void 0:C.attributes)==null?void 0:A.username)||"",email:((b=(p=(m=r.attributes.user)==null?void 0:m.data)==null?void 0:p.attributes)==null?void 0:b.email)||"",fullName:((f=(v=(Z=r.attributes.user)==null?void 0:Z.data)==null?void 0:v.attributes)==null?void 0:f.fullName)||"",lineId:((W=(y=(G=r.attributes.user)==null?void 0:G.data)==null?void 0:y.attributes)==null?void 0:W.lineId)||"",userType:((R=(X=(V=r.attributes.user)==null?void 0:V.data)==null?void 0:X.attributes)==null?void 0:R.userType)||""}}});return console.log("recycleMachines in get: ",s),s}catch(n){throw console.error("Error fetching recycle machines:",n.message),n}};function FE(){const e="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",{id:t}=fu(),[n,o]=B.useState(null),[i,s]=B.useState(!0),[r,I]=B.useState(null),[a,c]=B.useState("ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม"),C=A=>{c(A)};return B.useEffect(()=>{(async()=>{try{s(!0);const m=await NE(t,e);o(m),s(!1)}catch(m){console.error("Error fetching recycleMachiness:",m),I(m.message),s(!1)}})()},[t,e]),console.log("recycleMachines: ",n),i?d.jsx("p",{children:"Loading..."}):r?d.jsxs("p",{children:["Error: ",r]}):d.jsxs(d.Fragment,{children:[d.jsx(En,{}),d.jsxs(ni,{maxWidth:"sm",children:[d.jsx("div",{className:"text-2xl text-center mt-10",children:"ประวัติการใช้บริการตู้"}),d.jsxs("div",{className:"bg-grey-bg mt-20 grid grid-cols-2 rounded-t-lg",children:[d.jsxs("button",{className:` tablink h-40 pt-5 text-xs  rounded-t-lg ${a==="ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม"?"w3-green":""}`,onClick:()=>C("ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม"),children:["ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม",d.jsxs("div",{className:"mt-5 grid grid-cols-2 ",children:[d.jsx("img",{src:Jp,alt:"can",width:"70",className:"ml-5"}),d.jsx("img",{src:Yp,alt:"bottle",width:"40",className:"ml-5"})]})]}),d.jsxs("button",{className:`tablink text-xs  rounded-t-lg ${a==="ตู้รับน้ำมันพืชใช้แล้ว"?"w3-green":""}`,onClick:()=>C("ตู้รับน้ำมันพืชใช้แล้ว"),children:[d.jsx("p",{className:"text-center",children:"ตู้รับน้ำมันพืชใช้แล้ว"}),d.jsx("div",{className:"flex justify-center",children:d.jsx("img",{src:jf,alt:"logo",width:"70",className:"mt-5"})})]})]}),d.jsx("div",{className:"w-full h-full pb-14 bg-white shadow-md shadow-inner rounded-b-lg",children:d.jsx("div",{id:"bottle",className:"w3-container  city",style:{display:a==="ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม"?"block":"none"},children:n.map(A=>d.jsxs("div",{className:"w-full shadow-can shadow-inner mt-10 mb-3 pb-5 p-2 bg-content rounded-lg",children:[d.jsx("div",{className:"flex justify-center",children:A.type==="bottle"?d.jsx("img",{src:Yp,alt:"bottle",width:"60",className:"mt-2"}):A.type==="can"?d.jsx("img",{src:Jp,alt:"can",width:"60",className:"mt-2"}):null}),d.jsx("p",{className:"text-center text-2xl font-bold mt-5",children:A.type==="bottle"?`ขวดพลาสติก ${A.quantity||0} ขวด`:A.type==="can"?`กระป๋องอลูมิเนียม ${A.quantity||0} กระป๋อง`:null}),d.jsxs("div",{className:"grid grid-rows-3",children:[d.jsxs("div",{className:"text-base mt-5",children:[d.jsx(kr,{className:"float-left text-xl ml-3"}),"   ",ak(A.date,A.time)]}),d.jsxs("div",{className:"text-base mt-5",children:[d.jsx(kr,{className:"float-left text-xl ml-3"}),"   หมายเลขตู้เลขที่ ",A.serialNumber]}),d.jsxs("div",{className:"text-base mt-5",children:[d.jsx(kr,{className:"float-left text-xl ml-3"}),"   แต้มที่ได้รับทั้งหมด ",A.point||0," แต้ม"]})]})]},A.id))})}),d.jsx("div",{className:"w-full h-full bg-white shadow-md shadow-inner rounded-b-lg",children:d.jsx("div",{id:"oil",className:"w3-container  city",style:{display:a==="ตู้รับน้ำมันพืชใช้แล้ว"?"block":"none"},children:d.jsxs("div",{className:"w-full shadow-can shadow-inner mt-10 mb-10 pb-5 p-2 bg-content rounded-lg",children:[d.jsx("div",{className:"flex justify-center",children:d.jsx("img",{src:wE,alt:"can",width:"60",className:"mt-2"})}),d.jsx("p",{className:"text-center text-2xl font-bold mt-5",children:"ขวดน้ำมันพืชใช้แล้ว 2 ขวด"}),d.jsxs("div",{className:"grid grid-rows-3",children:[d.jsxs("div",{className:"text-base mt-5",children:[" ",d.jsx(kr,{className:"float-left text-xl ml-3"})," ","   วันอังคารที่ 17 เดือน สิงหาคม 2566 เวลา 10:30 น."]}),d.jsxs("div",{className:"text-base mt-5",children:[" ",d.jsx(kr,{className:"float-left text-xl ml-3"})," ","   หมายเลขตู้เลขที่ 00011/00111"]}),d.jsxs("div",{className:"text-base mt-5",children:[" ",d.jsx(kr,{className:"float-left text-xl ml-3"})," ","   แต้มที่ได้รับทั้งหมด 100 แต้ม"]})]})]})})})]})]})}const _f=({photoImage:e,onFileChange:t})=>{const n="https://cdn.pixabay.com/photo/2019/08/11/18/59/icon-4399701_1280.png",[o,i]=B.useState(e||n),s=B.useRef(null),r=()=>{s.current.click()},I=a=>{const c=a.target.files[0];if(c){const C=new FileReader;C.onload=A=>{i(A.target.result)},C.readAsDataURL(c),t(c)}};return d.jsx(d.Fragment,{children:d.jsx("div",{className:"container mx-auto px-4 py-9 lg:py-20",children:d.jsx("div",{className:"flex justify-center",children:d.jsxs("div",{className:"w-28 h-28 md:w-36 md:h-36 lg:w-48 lg:h-48",onClick:r,style:{cursor:"pointer",borderRadius:"50%",backgroundSize:"cover",backgroundPosition:"center",backgroundImage:`url(${o})`,position:"relative",border:"1px solid #ccc"},children:[d.jsx(XE,{size:20,style:{position:"absolute",bottom:5,right:5,backgroundColor:"white",borderRadius:"50%",padding:5}}),d.jsx("input",{type:"file",ref:s,style:{display:"none"},onChange:I,accept:"image/*"})]})})})})};function Of(){const e=Tu(Pf);return e[Sl]||e}const KE=["theme"];function or(e){let{theme:t}=e,n=de(e,KE);const o=t[Sl];return d.jsx(g3,J({},n,{themeId:o?Sl:void 0,theme:o||t}))}const hB=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)};function EE(e){return Xe("MuiSvgIcon",e)}we("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const ME=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],LE=e=>{const{color:t,fontSize:n,classes:o}=e,i={root:["root",t!=="inherit"&&`color${me(t)}`,`fontSize${me(n)}`]};return Fe(i,EE,o)},zE=Ie("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${me(n.color)}`],t[`fontSize${me(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,o,i,s,r,I,a,c,C,A,m,p,b;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(o=n.create)==null?void 0:o.call(n,"fill",{duration:(i=e.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((s=e.typography)==null||(r=s.pxToRem)==null?void 0:r.call(s,20))||"1.25rem",medium:((I=e.typography)==null||(a=I.pxToRem)==null?void 0:a.call(I,24))||"1.5rem",large:((c=e.typography)==null||(C=c.pxToRem)==null?void 0:C.call(c,35))||"2.1875rem"}[t.fontSize],color:(A=(m=(e.vars||e).palette)==null||(m=m[t.color])==null?void 0:m.main)!=null?A:{action:(p=(e.vars||e).palette)==null||(p=p.action)==null?void 0:p.active,disabled:(b=(e.vars||e).palette)==null||(b=b.action)==null?void 0:b.disabled,inherit:void 0}[t.color]}}),Hp=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiSvgIcon"}),{children:i,className:s,color:r="inherit",component:I="svg",fontSize:a="medium",htmlColor:c,inheritViewBox:C=!1,titleAccess:A,viewBox:m="0 0 24 24"}=o,p=de(o,ME),b=B.isValidElement(i)&&i.type==="svg",Z=J({},o,{color:r,component:I,fontSize:a,instanceFontSize:t.fontSize,inheritViewBox:C,viewBox:m,hasSvgAsChild:b}),v={};C||(v.viewBox=m);const f=LE(Z);return d.jsxs(zE,J({as:I,className:fe(f.root,s),focusable:"false",color:c,"aria-hidden":A?void 0:!0,role:A?"img":void 0,ref:n},v,p,b&&i.props,{ownerState:Z,children:[b?i.props.children:i,A?d.jsx("title",{children:A}):null]}))});Hp.muiName="SvgIcon";function ir(e,t){function n(o,i){return d.jsx(Hp,J({"data-testid":`${t}Icon`,ref:i},o,{children:e}))}return n.muiName=Hp.muiName,B.memo(B.forwardRef(n))}const TE={configure:e=>{Mf.configure(e)}},UE=Object.freeze(Object.defineProperty({__proto__:null,capitalize:me,createChainedFunction:Wd,createSvgIcon:ir,debounce:Tf,deprecatedPropType:wK,isMuiElement:HC,ownerDocument:ao,ownerWindow:Qg,requirePropFactory:XK,setRef:Vd,unstable_ClassNameGenerator:TE,unstable_useEnhancedEffect:dg,unstable_useId:tA,unsupportedProp:YK,useControlled:JI,useEventCallback:ks,useForkRef:Vn,useIsFocusVisible:U2},Symbol.toStringTag,{value:"Module"}));function xp(e,t){return xp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},xp(e,t)}function Ik(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,xp(e,t)}const pB={disabled:!1},wd=Ee.createContext(null);var DE=function(t){return t.scrollTop},za="unmounted",Zs="exited",ys="entering",Hr="entered",Np="exiting",Ei=function(e){Ik(t,e);function t(o,i){var s;s=e.call(this,o,i)||this;var r=i,I=r&&!r.isMounting?o.enter:o.appear,a;return s.appearStatus=null,o.in?I?(a=Zs,s.appearStatus=ys):a=Hr:o.unmountOnExit||o.mountOnEnter?a=za:a=Zs,s.state={status:a},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var r=i.in;return r&&s.status===za?{status:Zs}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var r=this.state.status;this.props.in?r!==ys&&r!==Hr&&(s=ys):(r===ys||r===Hr)&&(s=Np)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,r,I;return s=r=I=i,i!=null&&typeof i!="number"&&(s=i.exit,r=i.enter,I=i.appear!==void 0?i.appear:r),{exit:s,enter:r,appear:I}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===ys){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:Ma.findDOMNode(this);r&&DE(r)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Zs&&this.setState({status:za})},n.performEnter=function(i){var s=this,r=this.props.enter,I=this.context?this.context.isMounting:i,a=this.props.nodeRef?[I]:[Ma.findDOMNode(this),I],c=a[0],C=a[1],A=this.getTimeouts(),m=I?A.appear:A.enter;if(!i&&!r||pB.disabled){this.safeSetState({status:Hr},function(){s.props.onEntered(c)});return}this.props.onEnter(c,C),this.safeSetState({status:ys},function(){s.props.onEntering(c,C),s.onTransitionEnd(m,function(){s.safeSetState({status:Hr},function(){s.props.onEntered(c,C)})})})},n.performExit=function(){var i=this,s=this.props.exit,r=this.getTimeouts(),I=this.props.nodeRef?void 0:Ma.findDOMNode(this);if(!s||pB.disabled){this.safeSetState({status:Zs},function(){i.props.onExited(I)});return}this.props.onExit(I),this.safeSetState({status:Np},function(){i.props.onExiting(I),i.onTransitionEnd(r.exit,function(){i.safeSetState({status:Zs},function(){i.props.onExited(I)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,r=!0;return this.nextCallback=function(I){r&&(r=!1,s.nextCallback=null,i(I))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var r=this.props.nodeRef?this.props.nodeRef.current:Ma.findDOMNode(this),I=i==null&&!this.props.addEndListener;if(!r||I){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],c=a[0],C=a[1];this.props.addEndListener(c,C)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===za)return null;var s=this.props,r=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var I=de(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ee.createElement(wd.Provider,{value:null},typeof r=="function"?r(i,I):Ee.cloneElement(Ee.Children.only(r),I))},t}(Ee.Component);Ei.contextType=wd;Ei.propTypes={};function wr(){}Ei.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:wr,onEntering:wr,onEntered:wr,onExit:wr,onExiting:wr,onExited:wr};Ei.UNMOUNTED=za;Ei.EXITED=Zs;Ei.ENTERING=ys;Ei.ENTERED=Hr;Ei.EXITING=Np;function QE(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qf(e,t){var n=function(s){return t&&B.isValidElement(s)?t(s):s},o=Object.create(null);return e&&B.Children.map(e,function(i){return i}).forEach(function(i){o[i.key]=n(i)}),o}function PE(e,t){e=e||{},t=t||{};function n(C){return C in t?t[C]:e[C]}var o=Object.create(null),i=[];for(var s in e)s in t?i.length&&(o[s]=i,i=[]):i.push(s);var r,I={};for(var a in t){if(o[a])for(r=0;r<o[a].length;r++){var c=o[a][r];I[o[a][r]]=n(c)}I[a]=n(a)}for(r=0;r<i.length;r++)I[i[r]]=n(i[r]);return I}function ws(e,t,n){return n[t]!=null?n[t]:e.props[t]}function jE(e,t){return qf(e.children,function(n){return B.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:ws(n,"appear",e),enter:ws(n,"enter",e),exit:ws(n,"exit",e)})})}function _E(e,t,n){var o=qf(e.children),i=PE(t,o);return Object.keys(i).forEach(function(s){var r=i[s];if(B.isValidElement(r)){var I=s in t,a=s in o,c=t[s],C=B.isValidElement(c)&&!c.props.in;a&&(!I||C)?i[s]=B.cloneElement(r,{onExited:n.bind(null,r),in:!0,exit:ws(r,"exit",e),enter:ws(r,"enter",e)}):!a&&I&&!C?i[s]=B.cloneElement(r,{in:!1}):a&&I&&B.isValidElement(c)&&(i[s]=B.cloneElement(r,{onExited:n.bind(null,r),in:c.props.in,exit:ws(r,"exit",e),enter:ws(r,"enter",e)}))}}),i}var OE=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},qE={component:"div",childFactory:function(t){return t}},$f=function(e){Ik(t,e);function t(o,i){var s;s=e.call(this,o,i)||this;var r=s.handleExited.bind(QE(s));return s.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var r=s.children,I=s.handleExited,a=s.firstRender;return{children:a?jE(i,I):_E(i,r,I),firstRender:!1}},n.handleExited=function(i,s){var r=qf(this.props.children);i.key in r||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(I){var a=J({},I.children);return delete a[i.key],{children:a}}))},n.render=function(){var i=this.props,s=i.component,r=i.childFactory,I=de(i,["component","childFactory"]),a=this.state.contextValue,c=OE(this.state.children).map(r);return delete I.appear,delete I.enter,delete I.exit,s===null?Ee.createElement(wd.Provider,{value:a},c):Ee.createElement(wd.Provider,{value:a},Ee.createElement(s,I,c))},t}(Ee.Component);$f.propTypes={};$f.defaultProps=qE;const ck=e=>e.scrollTop;function Xd(e,t){var n,o;const{timeout:i,easing:s,style:r={}}=e;return{duration:(n=r.transitionDuration)!=null?n:typeof i=="number"?i:i[t.mode]||0,easing:(o=r.transitionTimingFunction)!=null?o:typeof s=="object"?s[t.mode]:s,delay:r.transitionDelay}}function $E(e){return Xe("MuiPaper",e)}we("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const eM=["className","component","elevation","square","variant"],tM=e=>{const{square:t,elevation:n,variant:o,classes:i}=e,s={root:["root",o,!t&&"rounded",o==="elevation"&&`elevation${n}`]};return Fe(s,$E,i)},nM=Ie("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(({theme:e,ownerState:t})=>{var n;return J({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&J({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${mn("#fff",hB(t.elevation))}, ${mn("#fff",hB(t.elevation))})`},e.vars&&{backgroundImage:(n=e.vars.overlays)==null?void 0:n[t.elevation]}))}),e0=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiPaper"}),{className:i,component:s="div",elevation:r=1,square:I=!1,variant:a="elevation"}=o,c=de(o,eM),C=J({},o,{component:s,elevation:r,square:I,variant:a}),A=tM(C);return d.jsx(nM,J({as:s,ownerState:C,className:fe(A.root,i),ref:n},c))});function oM(e){const{className:t,classes:n,pulsate:o=!1,rippleX:i,rippleY:s,rippleSize:r,in:I,onExited:a,timeout:c}=e,[C,A]=B.useState(!1),m=fe(t,n.ripple,n.rippleVisible,o&&n.ripplePulsate),p={width:r,height:r,top:-(r/2)+s,left:-(r/2)+i},b=fe(n.child,C&&n.childLeaving,o&&n.childPulsate);return!I&&!C&&A(!0),B.useEffect(()=>{if(!I&&a!=null){const Z=setTimeout(a,c);return()=>{clearTimeout(Z)}}},[a,I,c]),d.jsx("span",{className:m,style:p,children:d.jsx("span",{className:b})})}const zo=we("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),iM=["center","classes","className"];let iA=e=>e,bB,fB,ZB,yB;const Fp=550,gM=80,sM=Nu(bB||(bB=iA`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),rM=Nu(fB||(fB=iA`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),lM=Nu(ZB||(ZB=iA`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),aM=Ie("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),IM=Ie(oM,{name:"MuiTouchRipple",slot:"Ripple"})(yB||(yB=iA`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),zo.rippleVisible,sM,Fp,({theme:e})=>e.transitions.easing.easeInOut,zo.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,zo.child,zo.childLeaving,rM,Fp,({theme:e})=>e.transitions.easing.easeInOut,zo.childPulsate,lM,({theme:e})=>e.transitions.easing.easeInOut),cM=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:r}=o,I=de(o,iM),[a,c]=B.useState([]),C=B.useRef(0),A=B.useRef(null);B.useEffect(()=>{A.current&&(A.current(),A.current=null)},[a]);const m=B.useRef(!1),p=T2(),b=B.useRef(null),Z=B.useRef(null),v=B.useCallback(W=>{const{pulsate:V,rippleX:X,rippleY:R,rippleSize:k,cb:F}=W;c(x=>[...x,d.jsx(IM,{classes:{ripple:fe(s.ripple,zo.ripple),rippleVisible:fe(s.rippleVisible,zo.rippleVisible),ripplePulsate:fe(s.ripplePulsate,zo.ripplePulsate),child:fe(s.child,zo.child),childLeaving:fe(s.childLeaving,zo.childLeaving),childPulsate:fe(s.childPulsate,zo.childPulsate)},timeout:Fp,pulsate:V,rippleX:X,rippleY:R,rippleSize:k},C.current)]),C.current+=1,A.current=F},[s]),f=B.useCallback((W={},V={},X=()=>{})=>{const{pulsate:R=!1,center:k=i||V.pulsate,fakeElement:F=!1}=V;if((W==null?void 0:W.type)==="mousedown"&&m.current){m.current=!1;return}(W==null?void 0:W.type)==="touchstart"&&(m.current=!0);const x=F?null:Z.current,M=x?x.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Q,q,j;if(k||W===void 0||W.clientX===0&&W.clientY===0||!W.clientX&&!W.touches)Q=Math.round(M.width/2),q=Math.round(M.height/2);else{const{clientX:ne,clientY:ee}=W.touches&&W.touches.length>0?W.touches[0]:W;Q=Math.round(ne-M.left),q=Math.round(ee-M.top)}if(k)j=Math.sqrt((2*M.width**2+M.height**2)/3),j%2===0&&(j+=1);else{const ne=Math.max(Math.abs((x?x.clientWidth:0)-Q),Q)*2+2,ee=Math.max(Math.abs((x?x.clientHeight:0)-q),q)*2+2;j=Math.sqrt(ne**2+ee**2)}W!=null&&W.touches?b.current===null&&(b.current=()=>{v({pulsate:R,rippleX:Q,rippleY:q,rippleSize:j,cb:X})},p.start(gM,()=>{b.current&&(b.current(),b.current=null)})):v({pulsate:R,rippleX:Q,rippleY:q,rippleSize:j,cb:X})},[i,v,p]),G=B.useCallback(()=>{f({},{pulsate:!0})},[f]),y=B.useCallback((W,V)=>{if(p.clear(),(W==null?void 0:W.type)==="touchend"&&b.current){b.current(),b.current=null,p.start(0,()=>{y(W,V)});return}b.current=null,c(X=>X.length>0?X.slice(1):X),A.current=V},[p]);return B.useImperativeHandle(n,()=>({pulsate:G,start:f,stop:y}),[G,f,y]),d.jsx(aM,J({className:fe(zo.root,s.root,r),ref:Z},I,{children:d.jsx($f,{component:null,exit:!0,children:a})}))});function CM(e){return Xe("MuiButtonBase",e)}const dM=we("MuiButtonBase",["root","disabled","focusVisible"]),uM=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],AM=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:o,classes:i}=e,r=Fe({root:["root",t&&"disabled",n&&"focusVisible"]},CM,i);return n&&o&&(r.root+=` ${o}`),r},mM=Ie("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${dM.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),gA=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:r,className:I,component:a="button",disabled:c=!1,disableRipple:C=!1,disableTouchRipple:A=!1,focusRipple:m=!1,LinkComponent:p="a",onBlur:b,onClick:Z,onContextMenu:v,onDragLeave:f,onFocus:G,onFocusVisible:y,onKeyDown:W,onKeyUp:V,onMouseDown:X,onMouseLeave:R,onMouseUp:k,onTouchEnd:F,onTouchMove:x,onTouchStart:M,tabIndex:Q=0,TouchRippleProps:q,touchRippleRef:j,type:ne}=o,ee=de(o,uM),te=B.useRef(null),N=B.useRef(null),_=Vn(N,j),{isFocusVisibleRef:P,onFocus:le,onBlur:ae,ref:ye}=U2(),[se,ue]=B.useState(!1);c&&se&&ue(!1),B.useImperativeHandle(i,()=>({focusVisible:()=>{ue(!0),te.current.focus()}}),[]);const[ie,Je]=B.useState(!1);B.useEffect(()=>{Je(!0)},[]);const Ue=ie&&!C&&!c;B.useEffect(()=>{se&&m&&!C&&ie&&N.current.pulsate()},[C,m,se,ie]);function je(Ge,Lt,cn=A){return ks(bi=>(Lt&&Lt(bi),!cn&&N.current&&N.current[Ge](bi),!0))}const ft=je("start",X),Ke=je("stop",v),Me=je("stop",f),Ye=je("stop",k),Re=je("stop",Ge=>{se&&Ge.preventDefault(),R&&R(Ge)}),_e=je("start",M),qn=je("stop",F),an=je("stop",x),Bt=je("stop",Ge=>{ae(Ge),P.current===!1&&ue(!1),b&&b(Ge)},!1),Ln=ks(Ge=>{te.current||(te.current=Ge.currentTarget),le(Ge),P.current===!0&&(ue(!0),y&&y(Ge)),G&&G(Ge)}),Zn=()=>{const Ge=te.current;return a&&a!=="button"&&!(Ge.tagName==="A"&&Ge.href)},rt=B.useRef(!1),$n=ks(Ge=>{m&&!rt.current&&se&&N.current&&Ge.key===" "&&(rt.current=!0,N.current.stop(Ge,()=>{N.current.start(Ge)})),Ge.target===Ge.currentTarget&&Zn()&&Ge.key===" "&&Ge.preventDefault(),W&&W(Ge),Ge.target===Ge.currentTarget&&Zn()&&Ge.key==="Enter"&&!c&&(Ge.preventDefault(),Z&&Z(Ge))}),gn=ks(Ge=>{m&&Ge.key===" "&&N.current&&se&&!Ge.defaultPrevented&&(rt.current=!1,N.current.stop(Ge,()=>{N.current.pulsate(Ge)})),V&&V(Ge),Z&&Ge.target===Ge.currentTarget&&Zn()&&Ge.key===" "&&!Ge.defaultPrevented&&Z(Ge)});let At=a;At==="button"&&(ee.href||ee.to)&&(At=p);const eo={};At==="button"?(eo.type=ne===void 0?"button":ne,eo.disabled=c):(!ee.href&&!ee.to&&(eo.role="button"),c&&(eo["aria-disabled"]=c));const _t=Vn(n,ye,te),In=J({},o,{centerRipple:s,component:a,disabled:c,disableRipple:C,disableTouchRipple:A,focusRipple:m,tabIndex:Q,focusVisible:se}),et=AM(In);return d.jsxs(mM,J({as:At,className:fe(et.root,I),ownerState:In,onBlur:Bt,onClick:Z,onContextMenu:Ke,onFocus:Ln,onKeyDown:$n,onKeyUp:gn,onMouseDown:ft,onMouseLeave:Re,onMouseUp:Ye,onDragLeave:Me,onTouchEnd:qn,onTouchMove:an,onTouchStart:_e,ref:_t,tabIndex:c?-1:Q,type:ne},eo,ee,{children:[r,Ue?d.jsx(cM,J({ref:_,center:s},q)):null]}))});function hM(e){return Xe("MuiIconButton",e)}const pM=we("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),bM=["edge","children","className","color","disabled","disableFocusRipple","size"],fM=e=>{const{classes:t,disabled:n,color:o,edge:i,size:s}=e,r={root:["root",n&&"disabled",o!=="default"&&`color${me(o)}`,i&&`edge${me(i)}`,`size${me(s)}`]};return Fe(r,hM,t)},ZM=Ie(gA,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${me(n.color)}`],n.edge&&t[`edge${me(n.edge)}`],t[`size${me(n.size)}`]]}})(({theme:e,ownerState:t})=>J({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:mn(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var n;const o=(n=(e.vars||e).palette)==null?void 0:n[t.color];return J({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&J({color:o==null?void 0:o.main},!t.disableRipple&&{"&:hover":J({},o&&{backgroundColor:e.vars?`rgba(${o.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:mn(o.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${pM.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),vl=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiIconButton"}),{edge:i=!1,children:s,className:r,color:I="default",disabled:a=!1,disableFocusRipple:c=!1,size:C="medium"}=o,A=de(o,bM),m=J({},o,{edge:i,color:I,disabled:a,disableFocusRipple:c,size:C}),p=fM(m);return d.jsx(ZM,J({className:fe(p.root,r),centerRipple:!0,focusRipple:!c,disabled:a,ref:n},A,{ownerState:m,children:s}))});function yM(e){return Xe("MuiTypography",e)}we("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const GM=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],BM=e=>{const{align:t,gutterBottom:n,noWrap:o,paragraph:i,variant:s,classes:r}=e,I={root:["root",s,e.align!=="inherit"&&`align${me(t)}`,n&&"gutterBottom",o&&"noWrap",i&&"paragraph"]};return Fe(I,yM,r)},SM=Ie("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${me(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>J({margin:0},t.variant==="inherit"&&{font:"inherit"},t.variant!=="inherit"&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),GB={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},vM={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},WM=e=>vM[e]||e,io=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiTypography"}),i=WM(o.color),s=sc(J({},o,{color:i})),{align:r="inherit",className:I,component:a,gutterBottom:c=!1,noWrap:C=!1,paragraph:A=!1,variant:m="body1",variantMapping:p=GB}=s,b=de(s,GM),Z=J({},s,{align:r,color:i,className:I,component:a,gutterBottom:c,noWrap:C,paragraph:A,variant:m,variantMapping:p}),v=a||(A?"p":p[m]||GB[m])||"span",f=BM(Z);return d.jsx(SM,J({as:v,ref:n,ownerState:Z,className:fe(f.root,I)},b))});function VM(e){return typeof e=="function"?e():e}const RM=B.forwardRef(function(t,n){const{children:o,container:i,disablePortal:s=!1}=t,[r,I]=B.useState(null),a=Vn(B.isValidElement(o)?o.ref:null,n);if(dg(()=>{s||I(VM(i)||document.body)},[i,s]),dg(()=>{if(r&&!s)return Vd(n,r),()=>{Vd(n,null)}},[n,r,s]),s){if(B.isValidElement(o)){const c={ref:a};return B.cloneElement(o,c)}return d.jsx(B.Fragment,{children:o})}return d.jsx(B.Fragment,{children:r&&qI.createPortal(o,r)})}),kM=["onChange","maxRows","minRows","style","value"];function lC(e){return parseInt(e,10)||0}const wM={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function XM(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflowing}const JM=B.forwardRef(function(t,n){const{onChange:o,maxRows:i,minRows:s=1,style:r,value:I}=t,a=de(t,kM),{current:c}=B.useRef(I!=null),C=B.useRef(null),A=Vn(n,C),m=B.useRef(null),p=B.useRef(null),b=B.useCallback(()=>{const f=C.current,y=Qg(f).getComputedStyle(f);if(y.width==="0px")return{outerHeightStyle:0,overflowing:!1};const W=p.current;W.style.width=y.width,W.value=f.value||t.placeholder||"x",W.value.slice(-1)===`
`&&(W.value+=" ");const V=y.boxSizing,X=lC(y.paddingBottom)+lC(y.paddingTop),R=lC(y.borderBottomWidth)+lC(y.borderTopWidth),k=W.scrollHeight;W.value="x";const F=W.scrollHeight;let x=k;s&&(x=Math.max(Number(s)*F,x)),i&&(x=Math.min(Number(i)*F,x)),x=Math.max(x,F);const M=x+(V==="border-box"?X+R:0),Q=Math.abs(x-k)<=1;return{outerHeightStyle:M,overflowing:Q}},[i,s,t.placeholder]),Z=B.useCallback(()=>{const f=b();if(XM(f))return;const G=f.outerHeightStyle,y=C.current;m.current!==G&&(m.current=G,y.style.height=`${G}px`),y.style.overflow=f.overflowing?"hidden":""},[b]);dg(()=>{const f=()=>{Z()};let G;const y=Tf(f),W=C.current,V=Qg(W);V.addEventListener("resize",y);let X;return typeof ResizeObserver<"u"&&(X=new ResizeObserver(f),X.observe(W)),()=>{y.clear(),cancelAnimationFrame(G),V.removeEventListener("resize",y),X&&X.disconnect()}},[b,Z]),dg(()=>{Z()});const v=f=>{c||Z(),o&&o(f)};return d.jsxs(B.Fragment,{children:[d.jsx("textarea",J({value:I,onChange:v,ref:A,rows:s,style:r},a)),d.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:p,tabIndex:-1,style:J({},wM.shadow,r,{paddingTop:0,paddingBottom:0})})]})});function is({props:e,states:t,muiFormControl:n}){return t.reduce((o,i)=>(o[i]=e[i],n&&typeof e[i]>"u"&&(o[i]=n[i]),o),{})}const sA=B.createContext(void 0);function Mi(){return B.useContext(sA)}function YM(e){return d.jsx(sK,J({},e,{defaultTheme:Pf,themeId:Sl}))}function BB(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function Jd(e,t=!1){return e&&(BB(e.value)&&e.value!==""||t&&BB(e.defaultValue)&&e.defaultValue!=="")}function HM(e){return e.startAdornment}function xM(e){return Xe("MuiInputBase",e)}const Wl=we("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),NM=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],rA=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${me(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},lA=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},FM=e=>{const{classes:t,color:n,disabled:o,error:i,endAdornment:s,focused:r,formControl:I,fullWidth:a,hiddenLabel:c,multiline:C,readOnly:A,size:m,startAdornment:p,type:b}=e,Z={root:["root",`color${me(n)}`,o&&"disabled",i&&"error",a&&"fullWidth",r&&"focused",I&&"formControl",m&&m!=="medium"&&`size${me(m)}`,C&&"multiline",p&&"adornedStart",s&&"adornedEnd",c&&"hiddenLabel",A&&"readOnly"],input:["input",o&&"disabled",b==="search"&&"inputTypeSearch",C&&"inputMultiline",m==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",s&&"inputAdornedEnd",A&&"readOnly"]};return Fe(Z,xM,t)},aA=Ie("div",{name:"MuiInputBase",slot:"Root",overridesResolver:rA})(({theme:e,ownerState:t})=>J({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Wl.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&J({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),IA=Ie("input",{name:"MuiInputBase",slot:"Input",overridesResolver:lA})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",o=J({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),i={opacity:"0 !important"},s=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return J({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Wl.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${Wl.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),KM=d.jsx(YM,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),t0=B.forwardRef(function(t,n){var o;const i=ze({props:t,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:r,autoFocus:I,className:a,components:c={},componentsProps:C={},defaultValue:A,disabled:m,disableInjectingGlobalStyles:p,endAdornment:b,fullWidth:Z=!1,id:v,inputComponent:f="input",inputProps:G={},inputRef:y,maxRows:W,minRows:V,multiline:X=!1,name:R,onBlur:k,onChange:F,onClick:x,onFocus:M,onKeyDown:Q,onKeyUp:q,placeholder:j,readOnly:ne,renderSuffix:ee,rows:te,slotProps:N={},slots:_={},startAdornment:P,type:le="text",value:ae}=i,ye=de(i,NM),se=G.value!=null?G.value:ae,{current:ue}=B.useRef(se!=null),ie=B.useRef(),Je=B.useCallback(et=>{},[]),Ue=Vn(ie,y,G.ref,Je),[je,ft]=B.useState(!1),Ke=Mi(),Me=is({props:i,muiFormControl:Ke,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Me.focused=Ke?Ke.focused:je,B.useEffect(()=>{!Ke&&m&&je&&(ft(!1),k&&k())},[Ke,m,je,k]);const Ye=Ke&&Ke.onFilled,Re=Ke&&Ke.onEmpty,_e=B.useCallback(et=>{Jd(et)?Ye&&Ye():Re&&Re()},[Ye,Re]);dg(()=>{ue&&_e({value:se})},[se,_e,ue]);const qn=et=>{if(Me.disabled){et.stopPropagation();return}M&&M(et),G.onFocus&&G.onFocus(et),Ke&&Ke.onFocus?Ke.onFocus(et):ft(!0)},an=et=>{k&&k(et),G.onBlur&&G.onBlur(et),Ke&&Ke.onBlur?Ke.onBlur(et):ft(!1)},Bt=(et,...Ge)=>{if(!ue){const Lt=et.target||ie.current;if(Lt==null)throw new Error(js(1));_e({value:Lt.value})}G.onChange&&G.onChange(et,...Ge),F&&F(et,...Ge)};B.useEffect(()=>{_e(ie.current)},[]);const Ln=et=>{ie.current&&et.currentTarget===et.target&&ie.current.focus(),x&&x(et)};let Zn=f,rt=G;X&&Zn==="input"&&(te?rt=J({type:void 0,minRows:te,maxRows:te},rt):rt=J({type:void 0,maxRows:W,minRows:V},rt),Zn=JM);const $n=et=>{_e(et.animationName==="mui-auto-fill-cancel"?ie.current:{value:"x"})};B.useEffect(()=>{Ke&&Ke.setAdornedStart(!!P)},[Ke,P]);const gn=J({},i,{color:Me.color||"primary",disabled:Me.disabled,endAdornment:b,error:Me.error,focused:Me.focused,formControl:Ke,fullWidth:Z,hiddenLabel:Me.hiddenLabel,multiline:X,size:Me.size,startAdornment:P,type:le}),At=FM(gn),eo=_.root||c.Root||aA,_t=N.root||C.root||{},In=_.input||c.Input||IA;return rt=J({},rt,(o=N.input)!=null?o:C.input),d.jsxs(B.Fragment,{children:[!p&&KM,d.jsxs(eo,J({},_t,!Rd(eo)&&{ownerState:J({},gn,_t.ownerState)},{ref:n,onClick:Ln},ye,{className:fe(At.root,_t.className,a,ne&&"MuiInputBase-readOnly"),children:[P,d.jsx(sA.Provider,{value:null,children:d.jsx(In,J({ownerState:gn,"aria-invalid":Me.error,"aria-describedby":s,autoComplete:r,autoFocus:I,defaultValue:A,disabled:Me.disabled,id:v,onAnimationStart:$n,name:R,placeholder:j,readOnly:ne,required:Me.required,rows:te,value:se,onKeyDown:Q,onKeyUp:q,type:le},rt,!Rd(In)&&{as:Zn,ownerState:J({},gn,rt.ownerState)},{ref:Ue,className:fe(At.input,rt.className,ne&&"MuiInputBase-readOnly"),onBlur:an,onChange:Bt,onFocus:qn}))}),b,ee?ee(J({},Me,{startAdornment:P})):null]}))]})});function EM(e){return Xe("MuiInput",e)}const ka=J({},Wl,we("MuiInput",["root","underline","input"]));function MM(e){return Xe("MuiOutlinedInput",e)}const yg=J({},Wl,we("MuiOutlinedInput",["root","notchedOutline","input"]));function LM(e){return Xe("MuiFilledInput",e)}const ms=J({},Wl,we("MuiFilledInput",["root","underline","input"])),zM=ir(d.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),TM=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],UM={entering:{opacity:1},entered:{opacity:1}},DM=B.forwardRef(function(t,n){const o=Of(),i={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{addEndListener:s,appear:r=!0,children:I,easing:a,in:c,onEnter:C,onEntered:A,onEntering:m,onExit:p,onExited:b,onExiting:Z,style:v,timeout:f=i,TransitionComponent:G=Ei}=t,y=de(t,TM),W=B.useRef(null),V=Vn(W,I.ref,n),X=j=>ne=>{if(j){const ee=W.current;ne===void 0?j(ee):j(ee,ne)}},R=X(m),k=X((j,ne)=>{ck(j);const ee=Xd({style:v,timeout:f,easing:a},{mode:"enter"});j.style.webkitTransition=o.transitions.create("opacity",ee),j.style.transition=o.transitions.create("opacity",ee),C&&C(j,ne)}),F=X(A),x=X(Z),M=X(j=>{const ne=Xd({style:v,timeout:f,easing:a},{mode:"exit"});j.style.webkitTransition=o.transitions.create("opacity",ne),j.style.transition=o.transitions.create("opacity",ne),p&&p(j)}),Q=X(b),q=j=>{s&&s(W.current,j)};return d.jsx(G,J({appear:r,in:c,nodeRef:W,onEnter:k,onEntered:F,onEntering:R,onExit:M,onExited:Q,onExiting:x,addEndListener:q,timeout:f},y,{children:(j,ne)=>B.cloneElement(I,J({style:J({opacity:0,visibility:j==="exited"&&!c?"hidden":void 0},UM[j],v,I.props.style),ref:V},ne))}))});function QM(e){return Xe("MuiBackdrop",e)}we("MuiBackdrop",["root","invisible"]);const PM=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],jM=e=>{const{classes:t,invisible:n}=e;return Fe({root:["root",n&&"invisible"]},QM,t)},_M=Ie("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(({ownerState:e})=>J({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),OM=B.forwardRef(function(t,n){var o,i,s;const r=ze({props:t,name:"MuiBackdrop"}),{children:I,className:a,component:c="div",components:C={},componentsProps:A={},invisible:m=!1,open:p,slotProps:b={},slots:Z={},TransitionComponent:v=DM,transitionDuration:f}=r,G=de(r,PM),y=J({},r,{component:c,invisible:m}),W=jM(y),V=(o=b.root)!=null?o:A.root;return d.jsx(v,J({in:p,timeout:f},G,{children:d.jsx(_M,J({"aria-hidden":!0},V,{as:(i=(s=Z.root)!=null?s:C.Root)!=null?i:c,className:fe(W.root,a,V==null?void 0:V.className),ownerState:J({},y,V==null?void 0:V.ownerState),classes:W,ref:n,children:I}))}))}),qM=we("MuiBox",["root"]),$M=mg(),ng=CK({themeId:Sl,defaultTheme:$M,defaultClassName:qM.root,generateClassName:Mf.generate});function eL(e){return Xe("MuiButton",e)}const aC=we("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),tL=B.createContext({}),nL=B.createContext(void 0),oL=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],iL=e=>{const{color:t,disableElevation:n,fullWidth:o,size:i,variant:s,classes:r}=e,I={root:["root",s,`${s}${me(t)}`,`size${me(i)}`,`${s}Size${me(i)}`,`color${me(t)}`,n&&"disableElevation",o&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${me(i)}`],endIcon:["icon","endIcon",`iconSize${me(i)}`]},a=Fe(I,eL,r);return J({},r,a)},Ck=e=>J({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),gL=Ie(gA,{shouldForwardProp:e=>Mn(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${me(n.color)}`],t[`size${me(n.size)}`],t[`${n.variant}Size${me(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var n,o;const i=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],s=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return J({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":J({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:mn(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:mn(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:mn(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":J({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${aC.focusVisible}`]:J({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${aC.disabled}`]:J({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${mn(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(n=(o=e.palette).getContrastText)==null?void 0:n.call(o,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:i,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${aC.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${aC.disabled}`]:{boxShadow:"none"}}),sL=Ie("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${me(n.size)}`]]}})(({ownerState:e})=>J({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},Ck(e))),rL=Ie("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${me(n.size)}`]]}})(({ownerState:e})=>J({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},Ck(e))),lL=B.forwardRef(function(t,n){const o=B.useContext(tL),i=B.useContext(nL),s=XI(o,t),r=ze({props:s,name:"MuiButton"}),{children:I,color:a="primary",component:c="button",className:C,disabled:A=!1,disableElevation:m=!1,disableFocusRipple:p=!1,endIcon:b,focusVisibleClassName:Z,fullWidth:v=!1,size:f="medium",startIcon:G,type:y,variant:W="text"}=r,V=de(r,oL),X=J({},r,{color:a,component:c,disabled:A,disableElevation:m,disableFocusRipple:p,fullWidth:v,size:f,type:y,variant:W}),R=iL(X),k=G&&d.jsx(sL,{className:R.startIcon,ownerState:X,children:G}),F=b&&d.jsx(rL,{className:R.endIcon,ownerState:X,children:b}),x=i||"";return d.jsxs(gL,J({ownerState:X,className:fe(o.className,R.root,C,x),component:c,disabled:A,focusRipple:!p,focusVisibleClassName:fe(R.focusVisible,Z),ref:n,type:y},V,{classes:R,children:[k,I,F]}))});function aL(e){return Xe("MuiCard",e)}we("MuiCard",["root"]);const IL=["className","raised"],cL=e=>{const{classes:t}=e;return Fe({root:["root"]},aL,t)},CL=Ie(e0,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),Yd=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiCard"}),{className:i,raised:s=!1}=o,r=de(o,IL),I=J({},o,{raised:s}),a=cL(I);return d.jsx(CL,J({className:fe(a.root,i),elevation:s?8:void 0,ref:n,ownerState:I},r))});function dL(e){return Xe("MuiCardContent",e)}we("MuiCardContent",["root"]);const uL=["className","component"],AL=e=>{const{classes:t}=e;return Fe({root:["root"]},dL,t)},mL=Ie("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),Hd=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiCardContent"}),{className:i,component:s="div"}=o,r=de(o,uL),I=J({},o,{component:s}),a=AL(I);return d.jsx(mL,J({as:s,className:fe(a.root,i),ownerState:I,ref:n},r))});function hL(e){return Xe("MuiCardHeader",e)}const SB=we("MuiCardHeader",["root","avatar","action","content","title","subheader"]),pL=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],bL=e=>{const{classes:t}=e;return Fe({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},hL,t)},fL=Ie("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>J({[`& .${SB.title}`]:t.title,[`& .${SB.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),ZL=Ie("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),yL=Ie("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),GL=Ie("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),xd=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiCardHeader"}),{action:i,avatar:s,className:r,component:I="div",disableTypography:a=!1,subheader:c,subheaderTypographyProps:C,title:A,titleTypographyProps:m}=o,p=de(o,pL),b=J({},o,{component:I,disableTypography:a}),Z=bL(b);let v=A;v!=null&&v.type!==io&&!a&&(v=d.jsx(io,J({variant:s?"body2":"h5",className:Z.title,component:"span",display:"block"},m,{children:v})));let f=c;return f!=null&&f.type!==io&&!a&&(f=d.jsx(io,J({variant:s?"body2":"body1",className:Z.subheader,color:"text.secondary",component:"span",display:"block"},C,{children:f}))),d.jsxs(fL,J({className:fe(Z.root,r),as:I,ref:n,ownerState:b},p,{children:[s&&d.jsx(ZL,{className:Z.avatar,ownerState:b,children:s}),d.jsxs(GL,{className:Z.content,ownerState:b,children:[v,f]}),i&&d.jsx(yL,{className:Z.action,ownerState:b,children:i})]}))});function BL(e){return Xe("PrivateSwitchBase",e)}we("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const SL=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],vL=e=>{const{classes:t,checked:n,disabled:o,edge:i}=e,s={root:["root",n&&"checked",o&&"disabled",i&&`edge${me(i)}`],input:["input"]};return Fe(s,BL,t)},WL=Ie(gA)(({ownerState:e})=>J({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),VL=Ie("input",{shouldForwardProp:Mn})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),dk=B.forwardRef(function(t,n){const{autoFocus:o,checked:i,checkedIcon:s,className:r,defaultChecked:I,disabled:a,disableFocusRipple:c=!1,edge:C=!1,icon:A,id:m,inputProps:p,inputRef:b,name:Z,onBlur:v,onChange:f,onFocus:G,readOnly:y,required:W=!1,tabIndex:V,type:X,value:R}=t,k=de(t,SL),[F,x]=JI({controlled:i,default:!!I,name:"SwitchBase",state:"checked"}),M=Mi(),Q=_=>{G&&G(_),M&&M.onFocus&&M.onFocus(_)},q=_=>{v&&v(_),M&&M.onBlur&&M.onBlur(_)},j=_=>{if(_.nativeEvent.defaultPrevented)return;const P=_.target.checked;x(P),f&&f(_,P)};let ne=a;M&&typeof ne>"u"&&(ne=M.disabled);const ee=X==="checkbox"||X==="radio",te=J({},t,{checked:F,disabled:ne,disableFocusRipple:c,edge:C}),N=vL(te);return d.jsxs(WL,J({component:"span",className:fe(N.root,r),centerRipple:!0,focusRipple:!c,disabled:ne,tabIndex:null,role:void 0,onFocus:Q,onBlur:q,ownerState:te,ref:n},k,{children:[d.jsx(VL,J({autoFocus:o,checked:i,defaultChecked:I,className:N.input,disabled:ne,id:ee?m:void 0,name:Z,onChange:j,readOnly:y,ref:b,required:W,ownerState:te,tabIndex:V,type:X},X==="checkbox"&&R===void 0?{}:{value:R},p)),F?s:A]}))}),RL=ir(d.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),kL=ir(d.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),wL=ir(d.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function XL(e){return Xe("MuiCheckbox",e)}const nh=we("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),JL=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],YL=e=>{const{classes:t,indeterminate:n,color:o,size:i}=e,s={root:["root",n&&"indeterminate",`color${me(o)}`,`size${me(i)}`]},r=Fe(s,XL,t);return J({},t,r)},HL=Ie(dk,{shouldForwardProp:e=>Mn(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t[`size${me(n.size)}`],n.color!=="default"&&t[`color${me(n.color)}`]]}})(({theme:e,ownerState:t})=>J({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:mn(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${nh.checked}, &.${nh.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${nh.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),xL=d.jsx(kL,{}),NL=d.jsx(RL,{}),FL=d.jsx(wL,{}),Pl=B.forwardRef(function(t,n){var o,i;const s=ze({props:t,name:"MuiCheckbox"}),{checkedIcon:r=xL,color:I="primary",icon:a=NL,indeterminate:c=!1,indeterminateIcon:C=FL,inputProps:A,size:m="medium",className:p}=s,b=de(s,JL),Z=c?C:a,v=c?C:r,f=J({},s,{color:I,indeterminate:c,size:m}),G=YL(f);return d.jsx(HL,J({type:"checkbox",inputProps:J({"data-indeterminate":c},A),icon:B.cloneElement(Z,{fontSize:(o=Z.props.fontSize)!=null?o:m}),checkedIcon:B.cloneElement(v,{fontSize:(i=v.props.fontSize)!=null?i:m}),ownerState:f,ref:n,className:fe(G.root,p)},b,{classes:G}))});function KL(e){const t=ao(e);return t.body===e?Qg(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function iI(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function vB(e){return parseInt(Qg(e).getComputedStyle(e).paddingRight,10)||0}function EL(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,o=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||o}function WB(e,t,n,o,i){const s=[t,n,...o];[].forEach.call(e.children,r=>{const I=s.indexOf(r)===-1,a=!EL(r);I&&a&&iI(r,i)})}function oh(e,t){let n=-1;return e.some((o,i)=>t(o)?(n=i,!0):!1),n}function ML(e,t){const n=[],o=e.container;if(!t.disableScrollLock){if(KL(o)){const r=D2(ao(o));n.push({value:o.style.paddingRight,property:"padding-right",el:o}),o.style.paddingRight=`${vB(o)+r}px`;const I=ao(o).querySelectorAll(".mui-fixed");[].forEach.call(I,a=>{n.push({value:a.style.paddingRight,property:"padding-right",el:a}),a.style.paddingRight=`${vB(a)+r}px`})}let s;if(o.parentNode instanceof DocumentFragment)s=ao(o).body;else{const r=o.parentElement,I=Qg(o);s=(r==null?void 0:r.nodeName)==="HTML"&&I.getComputedStyle(r).overflowY==="scroll"?r:o}n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:s,el:r,property:I})=>{s?r.style.setProperty(I,s):r.style.removeProperty(I)})}}function LL(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class zL{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let o=this.modals.indexOf(t);if(o!==-1)return o;o=this.modals.length,this.modals.push(t),t.modalRef&&iI(t.modalRef,!1);const i=LL(n);WB(n,t.mount,t.modalRef,i,!0);const s=oh(this.containers,r=>r.container===n);return s!==-1?(this.containers[s].modals.push(t),o):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:i}),o)}mount(t,n){const o=oh(this.containers,s=>s.modals.indexOf(t)!==-1),i=this.containers[o];i.restore||(i.restore=ML(i,n))}remove(t,n=!0){const o=this.modals.indexOf(t);if(o===-1)return o;const i=oh(this.containers,r=>r.modals.indexOf(t)!==-1),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(t),1),this.modals.splice(o,1),s.modals.length===0)s.restore&&s.restore(),t.modalRef&&iI(t.modalRef,n),WB(s.container,t.mount,t.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const r=s.modals[s.modals.length-1];r.modalRef&&iI(r.modalRef,!1)}return o}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const TL=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function UL(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function DL(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=o=>e.ownerDocument.querySelector(`input[type="radio"]${o}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function QL(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||DL(e))}function PL(e){const t=[],n=[];return Array.from(e.querySelectorAll(TL)).forEach((o,i)=>{const s=UL(o);s===-1||!QL(o)||(s===0?t.push(o):n.push({documentOrder:i,tabIndex:s,node:o}))}),n.sort((o,i)=>o.tabIndex===i.tabIndex?o.documentOrder-i.documentOrder:o.tabIndex-i.tabIndex).map(o=>o.node).concat(t)}function jL(){return!0}function _L(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:o=!1,disableRestoreFocus:i=!1,getTabbable:s=PL,isEnabled:r=jL,open:I}=e,a=B.useRef(!1),c=B.useRef(null),C=B.useRef(null),A=B.useRef(null),m=B.useRef(null),p=B.useRef(!1),b=B.useRef(null),Z=Vn(t.ref,b),v=B.useRef(null);B.useEffect(()=>{!I||!b.current||(p.current=!n)},[n,I]),B.useEffect(()=>{if(!I||!b.current)return;const y=ao(b.current);return b.current.contains(y.activeElement)||(b.current.hasAttribute("tabIndex")||b.current.setAttribute("tabIndex","-1"),p.current&&b.current.focus()),()=>{i||(A.current&&A.current.focus&&(a.current=!0,A.current.focus()),A.current=null)}},[I]),B.useEffect(()=>{if(!I||!b.current)return;const y=ao(b.current),W=R=>{v.current=R,!(o||!r()||R.key!=="Tab")&&y.activeElement===b.current&&R.shiftKey&&(a.current=!0,C.current&&C.current.focus())},V=()=>{const R=b.current;if(R===null)return;if(!y.hasFocus()||!r()||a.current){a.current=!1;return}if(R.contains(y.activeElement)||o&&y.activeElement!==c.current&&y.activeElement!==C.current)return;if(y.activeElement!==m.current)m.current=null;else if(m.current!==null)return;if(!p.current)return;let k=[];if((y.activeElement===c.current||y.activeElement===C.current)&&(k=s(b.current)),k.length>0){var F,x;const M=!!((F=v.current)!=null&&F.shiftKey&&((x=v.current)==null?void 0:x.key)==="Tab"),Q=k[0],q=k[k.length-1];typeof Q!="string"&&typeof q!="string"&&(M?q.focus():Q.focus())}else R.focus()};y.addEventListener("focusin",V),y.addEventListener("keydown",W,!0);const X=setInterval(()=>{y.activeElement&&y.activeElement.tagName==="BODY"&&V()},50);return()=>{clearInterval(X),y.removeEventListener("focusin",V),y.removeEventListener("keydown",W,!0)}},[n,o,i,r,I,s]);const f=y=>{A.current===null&&(A.current=y.relatedTarget),p.current=!0,m.current=y.target;const W=t.props.onFocus;W&&W(y)},G=y=>{A.current===null&&(A.current=y.relatedTarget),p.current=!0};return d.jsxs(B.Fragment,{children:[d.jsx("div",{tabIndex:I?0:-1,onFocus:G,ref:c,"data-testid":"sentinelStart"}),B.cloneElement(t,{ref:Z,onFocus:f}),d.jsx("div",{tabIndex:I?0:-1,onFocus:G,ref:C,"data-testid":"sentinelEnd"})]})}function OL(e){return typeof e=="function"?e():e}function qL(e){return e?e.props.hasOwnProperty("in"):!1}const $L=new zL;function ez(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:o=!1,manager:i=$L,closeAfterTransition:s=!1,onTransitionEnter:r,onTransitionExited:I,children:a,onClose:c,open:C,rootRef:A}=e,m=B.useRef({}),p=B.useRef(null),b=B.useRef(null),Z=Vn(b,A),[v,f]=B.useState(!C),G=qL(a);let y=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(y=!1);const W=()=>ao(p.current),V=()=>(m.current.modalRef=b.current,m.current.mount=p.current,m.current),X=()=>{i.mount(V(),{disableScrollLock:o}),b.current&&(b.current.scrollTop=0)},R=ks(()=>{const ee=OL(t)||W().body;i.add(V(),ee),b.current&&X()}),k=B.useCallback(()=>i.isTopModal(V()),[i]),F=ks(ee=>{p.current=ee,ee&&(C&&k()?X():b.current&&iI(b.current,y))}),x=B.useCallback(()=>{i.remove(V(),y)},[y,i]);B.useEffect(()=>()=>{x()},[x]),B.useEffect(()=>{C?R():(!G||!s)&&x()},[C,x,G,s,R]);const M=ee=>te=>{var N;(N=ee.onKeyDown)==null||N.call(ee,te),!(te.key!=="Escape"||te.which===229||!k())&&(n||(te.stopPropagation(),c&&c(te,"escapeKeyDown")))},Q=ee=>te=>{var N;(N=ee.onClick)==null||N.call(ee,te),te.target===te.currentTarget&&c&&c(te,"backdropClick")};return{getRootProps:(ee={})=>{const te=Q2(e);delete te.onTransitionEnter,delete te.onTransitionExited;const N=J({},te,ee);return J({role:"presentation"},N,{onKeyDown:M(N),ref:Z})},getBackdropProps:(ee={})=>{const te=ee;return J({"aria-hidden":!0},te,{onClick:Q(te),open:C})},getTransitionProps:()=>{const ee=()=>{f(!1),r&&r()},te=()=>{f(!0),I&&I(),s&&x()};return{onEnter:Wd(ee,a==null?void 0:a.props.onEnter),onExited:Wd(te,a==null?void 0:a.props.onExited)}},rootRef:Z,portalRef:F,isTopModal:k,exited:v,hasTransition:G}}function tz(e){return Xe("MuiModal",e)}we("MuiModal",["root","hidden","backdrop"]);const nz=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],oz=e=>{const{open:t,exited:n,classes:o}=e;return Fe({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},tz,o)},iz=Ie("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(({theme:e,ownerState:t})=>J({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),gz=Ie(OM,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),n0=B.forwardRef(function(t,n){var o,i,s,r,I,a;const c=ze({name:"MuiModal",props:t}),{BackdropComponent:C=gz,BackdropProps:A,className:m,closeAfterTransition:p=!1,children:b,container:Z,component:v,components:f={},componentsProps:G={},disableAutoFocus:y=!1,disableEnforceFocus:W=!1,disableEscapeKeyDown:V=!1,disablePortal:X=!1,disableRestoreFocus:R=!1,disableScrollLock:k=!1,hideBackdrop:F=!1,keepMounted:x=!1,onBackdropClick:M,open:Q,slotProps:q,slots:j}=c,ne=de(c,nz),ee=J({},c,{closeAfterTransition:p,disableAutoFocus:y,disableEnforceFocus:W,disableEscapeKeyDown:V,disablePortal:X,disableRestoreFocus:R,disableScrollLock:k,hideBackdrop:F,keepMounted:x}),{getRootProps:te,getBackdropProps:N,getTransitionProps:_,portalRef:P,isTopModal:le,exited:ae,hasTransition:ye}=ez(J({},ee,{rootRef:n})),se=J({},ee,{exited:ae}),ue=oz(se),ie={};if(b.props.tabIndex===void 0&&(ie.tabIndex="-1"),ye){const{onEnter:Ye,onExited:Re}=_();ie.onEnter=Ye,ie.onExited=Re}const Je=(o=(i=j==null?void 0:j.root)!=null?i:f.Root)!=null?o:iz,Ue=(s=(r=j==null?void 0:j.backdrop)!=null?r:f.Backdrop)!=null?s:C,je=(I=q==null?void 0:q.root)!=null?I:G.root,ft=(a=q==null?void 0:q.backdrop)!=null?a:G.backdrop,Ke=Bl({elementType:Je,externalSlotProps:je,externalForwardedProps:ne,getSlotProps:te,additionalProps:{ref:n,as:v},ownerState:se,className:fe(m,je==null?void 0:je.className,ue==null?void 0:ue.root,!se.open&&se.exited&&(ue==null?void 0:ue.hidden))}),Me=Bl({elementType:Ue,externalSlotProps:ft,additionalProps:A,getSlotProps:Ye=>N(J({},Ye,{onClick:Re=>{M&&M(Re),Ye!=null&&Ye.onClick&&Ye.onClick(Re)}})),className:fe(ft==null?void 0:ft.className,A==null?void 0:A.className,ue==null?void 0:ue.backdrop),ownerState:se});return!x&&!Q&&(!ye||ae)?null:d.jsx(RM,{ref:P,container:Z,disablePortal:X,children:d.jsxs(Je,J({},Ke,{children:[!F&&C?d.jsx(Ue,J({},Me)):null,d.jsx(_L,{disableEnforceFocus:W,disableAutoFocus:y,disableRestoreFocus:R,isEnabled:le,open:Q,children:B.cloneElement(b,ie)})]}))})}),VB=we("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),sz=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],rz=e=>{const{classes:t,disableUnderline:n}=e,i=Fe({root:["root",!n&&"underline"],input:["input"]},LM,t);return J({},t,i)},lz=Ie(aA,{shouldForwardProp:e=>Mn(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...rA(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var n;const o=e.palette.mode==="light",i=o?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=o?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",r=o?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",I=o?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return J({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:r,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s}},[`&.${ms.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s},[`&.${ms.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:I}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(e.vars||e).palette[t.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ms.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ms.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ms.disabled}, .${ms.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${ms.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&J({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9}))}),az=Ie(IA,{name:"MuiFilledInput",slot:"Input",overridesResolver:lA})(({theme:e,ownerState:t})=>J({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),o0=B.forwardRef(function(t,n){var o,i,s,r;const I=ze({props:t,name:"MuiFilledInput"}),{components:a={},componentsProps:c,fullWidth:C=!1,inputComponent:A="input",multiline:m=!1,slotProps:p,slots:b={},type:Z="text"}=I,v=de(I,sz),f=J({},I,{fullWidth:C,inputComponent:A,multiline:m,type:Z}),G=rz(I),y={root:{ownerState:f},input:{ownerState:f}},W=p??c?jn(y,p??c):y,V=(o=(i=b.root)!=null?i:a.Root)!=null?o:lz,X=(s=(r=b.input)!=null?r:a.Input)!=null?s:az;return d.jsx(t0,J({slots:{root:V,input:X},componentsProps:W,fullWidth:C,inputComponent:A,multiline:m,ref:n,type:Z},v,{classes:G}))});o0.muiName="Input";function Iz(e){return Xe("MuiFormControl",e)}we("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const cz=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Cz=e=>{const{classes:t,margin:n,fullWidth:o}=e,i={root:["root",n!=="none"&&`margin${me(n)}`,o&&"fullWidth"]};return Fe(i,Iz,t)},dz=Ie("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>J({},t.root,t[`margin${me(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>J({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),gr=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiFormControl"}),{children:i,className:s,color:r="primary",component:I="div",disabled:a=!1,error:c=!1,focused:C,fullWidth:A=!1,hiddenLabel:m=!1,margin:p="none",required:b=!1,size:Z="medium",variant:v="outlined"}=o,f=de(o,cz),G=J({},o,{color:r,component:I,disabled:a,error:c,fullWidth:A,hiddenLabel:m,margin:p,required:b,size:Z,variant:v}),y=Cz(G),[W,V]=B.useState(()=>{let q=!1;return i&&B.Children.forEach(i,j=>{if(!HC(j,["Input","Select"]))return;const ne=HC(j,["Select"])?j.props.input:j;ne&&HM(ne.props)&&(q=!0)}),q}),[X,R]=B.useState(()=>{let q=!1;return i&&B.Children.forEach(i,j=>{HC(j,["Input","Select"])&&(Jd(j.props,!0)||Jd(j.props.inputProps,!0))&&(q=!0)}),q}),[k,F]=B.useState(!1);a&&k&&F(!1);const x=C!==void 0&&!a?C:k;let M;const Q=B.useMemo(()=>({adornedStart:W,setAdornedStart:V,color:r,disabled:a,error:c,filled:X,focused:x,fullWidth:A,hiddenLabel:m,size:Z,onBlur:()=>{F(!1)},onEmpty:()=>{R(!1)},onFilled:()=>{R(!0)},onFocus:()=>{F(!0)},registerEffect:M,required:b,variant:v}),[W,r,a,c,X,x,A,m,M,b,Z,v]);return d.jsx(sA.Provider,{value:Q,children:d.jsx(dz,J({as:I,ownerState:G,className:fe(y.root,s),ref:n},f,{children:i}))})}),uz=Z3({createStyledComponent:Ie("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>ze({props:e,name:"MuiStack"})});function Az(e){return Xe("MuiFormControlLabel",e)}const Ta=we("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),mz=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],hz=e=>{const{classes:t,disabled:n,labelPlacement:o,error:i,required:s}=e,r={root:["root",n&&"disabled",`labelPlacement${me(o)}`,i&&"error",s&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return Fe(r,Az,t)},pz=Ie("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Ta.label}`]:t.label},t.root,t[`labelPlacement${me(n.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>J({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Ta.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Ta.label}`]:{[`&.${Ta.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),bz=Ie("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Ta.error}`]:{color:(e.vars||e).palette.error.main}})),Vl=B.forwardRef(function(t,n){var o,i;const s=ze({props:t,name:"MuiFormControlLabel"}),{className:r,componentsProps:I={},control:a,disabled:c,disableTypography:C,label:A,labelPlacement:m="end",required:p,slotProps:b={}}=s,Z=de(s,mz),v=Mi(),f=(o=c??a.props.disabled)!=null?o:v==null?void 0:v.disabled,G=p??a.props.required,y={disabled:f,required:G};["checked","name","onChange","value","inputRef"].forEach(F=>{typeof a.props[F]>"u"&&typeof s[F]<"u"&&(y[F]=s[F])});const W=is({props:s,muiFormControl:v,states:["error"]}),V=J({},s,{disabled:f,labelPlacement:m,required:G,error:W.error}),X=hz(V),R=(i=b.typography)!=null?i:I.typography;let k=A;return k!=null&&k.type!==io&&!C&&(k=d.jsx(io,J({component:"span"},R,{className:fe(X.label,R==null?void 0:R.className),children:k}))),d.jsxs(pz,J({className:fe(X.root,r),ownerState:V,ref:n},Z,{children:[B.cloneElement(a,y),G?d.jsxs(uz,{display:"block",children:[k,d.jsxs(bz,{ownerState:V,"aria-hidden":!0,className:X.asterisk,children:[" ","*"]})]}):k]}))});function fz(e){return Xe("MuiFormGroup",e)}we("MuiFormGroup",["root","row","error"]);const Zz=["className","row"],yz=e=>{const{classes:t,row:n,error:o}=e;return Fe({root:["root",n&&"row",o&&"error"]},fz,t)},Gz=Ie("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.row&&t.row]}})(({ownerState:e})=>J({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),Bz=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiFormGroup"}),{className:i,row:s=!1}=o,r=de(o,Zz),I=Mi(),a=is({props:o,muiFormControl:I,states:["error"]}),c=J({},o,{row:s,error:a.error}),C=yz(c);return d.jsx(Gz,J({className:fe(C.root,i),ownerState:c,ref:n},r))});function Sz(e){return Xe("MuiFormHelperText",e)}const RB=we("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var kB;const vz=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Wz=e=>{const{classes:t,contained:n,size:o,disabled:i,error:s,filled:r,focused:I,required:a}=e,c={root:["root",i&&"disabled",s&&"error",o&&`size${me(o)}`,n&&"contained",I&&"focused",r&&"filled",a&&"required"]};return Fe(c,Sz,t)},Vz=Ie("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${me(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(({theme:e,ownerState:t})=>J({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${RB.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${RB.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),Rz=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiFormHelperText"}),{children:i,className:s,component:r="p"}=o,I=de(o,vz),a=Mi(),c=is({props:o,muiFormControl:a,states:["variant","size","disabled","error","filled","focused","required"]}),C=J({},o,{component:r,contained:c.variant==="filled"||c.variant==="outlined",variant:c.variant,size:c.size,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),A=Wz(C);return d.jsx(Vz,J({as:r,ownerState:C,className:fe(A.root,s),ref:n},I,{children:i===" "?kB||(kB=d.jsx("span",{className:"notranslate",children:"​"})):i}))});function kz(e){return Xe("MuiFormLabel",e)}const gI=we("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),wz=["children","className","color","component","disabled","error","filled","focused","required"],Xz=e=>{const{classes:t,color:n,focused:o,disabled:i,error:s,filled:r,required:I}=e,a={root:["root",`color${me(n)}`,i&&"disabled",s&&"error",r&&"filled",o&&"focused",I&&"required"],asterisk:["asterisk",s&&"error"]};return Fe(a,kz,t)},Jz=Ie("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>J({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>J({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${gI.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${gI.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${gI.error}`]:{color:(e.vars||e).palette.error.main}})),Yz=Ie("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${gI.error}`]:{color:(e.vars||e).palette.error.main}})),cA=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiFormLabel"}),{children:i,className:s,component:r="label"}=o,I=de(o,wz),a=Mi(),c=is({props:o,muiFormControl:a,states:["color","required","focused","disabled","error","filled"]}),C=J({},o,{color:c.color||"primary",component:r,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),A=Xz(C);return d.jsxs(Jz,J({as:r,ownerState:C,className:fe(A.root,s),ref:n},I,{children:[i,c.required&&d.jsxs(Yz,{ownerState:C,"aria-hidden":!0,className:A.asterisk,children:[" ","*"]})]}))}),wB=B.createContext();function Hz(e){return Xe("MuiGrid",e)}const xz=[0,1,2,3,4,5,6,7,8,9,10],Nz=["column-reverse","column","row-reverse","row"],Fz=["nowrap","wrap-reverse","wrap"],wa=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],xI=we("MuiGrid",["root","container","item","zeroMinWidth",...xz.map(e=>`spacing-xs-${e}`),...Nz.map(e=>`direction-xs-${e}`),...Fz.map(e=>`wrap-xs-${e}`),...wa.map(e=>`grid-xs-${e}`),...wa.map(e=>`grid-sm-${e}`),...wa.map(e=>`grid-md-${e}`),...wa.map(e=>`grid-lg-${e}`),...wa.map(e=>`grid-xl-${e}`)]),Kz=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function cl(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function Ez({theme:e,ownerState:t}){let n;return e.breakpoints.keys.reduce((o,i)=>{let s={};if(t[i]&&(n=t[i]),!n)return o;if(n===!0)s={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const r=Ns({values:t.columns,breakpoints:e.breakpoints.values}),I=typeof r=="object"?r[i]:r;if(I==null)return o;const a=`${Math.round(n/I*1e8)/1e6}%`;let c={};if(t.container&&t.item&&t.columnSpacing!==0){const C=e.spacing(t.columnSpacing);if(C!=="0px"){const A=`calc(${a} + ${cl(C)})`;c={flexBasis:A,maxWidth:A}}}s=J({flexBasis:a,flexGrow:0,maxWidth:a},c)}return e.breakpoints.values[i]===0?Object.assign(o,s):o[e.breakpoints.up(i)]=s,o},{})}function Mz({theme:e,ownerState:t}){const n=Ns({values:t.direction,breakpoints:e.breakpoints.values});return Ao({theme:e},n,o=>{const i={flexDirection:o};return o.indexOf("column")===0&&(i[`& > .${xI.item}`]={maxWidth:"none"}),i})}function uk({breakpoints:e,values:t}){let n="";Object.keys(t).forEach(i=>{n===""&&t[i]!==0&&(n=i)});const o=Object.keys(e).sort((i,s)=>e[i]-e[s]);return o.slice(0,o.indexOf(n))}function Lz({theme:e,ownerState:t}){const{container:n,rowSpacing:o}=t;let i={};if(n&&o!==0){const s=Ns({values:o,breakpoints:e.breakpoints.values});let r;typeof s=="object"&&(r=uk({breakpoints:e.breakpoints.values,values:s})),i=Ao({theme:e},s,(I,a)=>{var c;const C=e.spacing(I);return C!=="0px"?{marginTop:`-${cl(C)}`,[`& > .${xI.item}`]:{paddingTop:cl(C)}}:(c=r)!=null&&c.includes(a)?{}:{marginTop:0,[`& > .${xI.item}`]:{paddingTop:0}}})}return i}function zz({theme:e,ownerState:t}){const{container:n,columnSpacing:o}=t;let i={};if(n&&o!==0){const s=Ns({values:o,breakpoints:e.breakpoints.values});let r;typeof s=="object"&&(r=uk({breakpoints:e.breakpoints.values,values:s})),i=Ao({theme:e},s,(I,a)=>{var c;const C=e.spacing(I);return C!=="0px"?{width:`calc(100% + ${cl(C)})`,marginLeft:`-${cl(C)}`,[`& > .${xI.item}`]:{paddingLeft:cl(C)}}:(c=r)!=null&&c.includes(a)?{}:{width:"100%",marginLeft:0,[`& > .${xI.item}`]:{paddingLeft:0}}})}return i}function Tz(e,t,n={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[n[`spacing-xs-${String(e)}`]];const o=[];return t.forEach(i=>{const s=e[i];Number(s)>0&&o.push(n[`spacing-${i}-${String(s)}`])}),o}const Uz=Ie("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:o,direction:i,item:s,spacing:r,wrap:I,zeroMinWidth:a,breakpoints:c}=n;let C=[];o&&(C=Tz(r,c,t));const A=[];return c.forEach(m=>{const p=n[m];p&&A.push(t[`grid-${m}-${String(p)}`])}),[t.root,o&&t.container,s&&t.item,a&&t.zeroMinWidth,...C,i!=="row"&&t[`direction-xs-${String(i)}`],I!=="wrap"&&t[`wrap-xs-${String(I)}`],...A]}})(({ownerState:e})=>J({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),Mz,Lz,zz,Ez);function Dz(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const n=[];return t.forEach(o=>{const i=e[o];if(Number(i)>0){const s=`spacing-${o}-${String(i)}`;n.push(s)}}),n}const Qz=e=>{const{classes:t,container:n,direction:o,item:i,spacing:s,wrap:r,zeroMinWidth:I,breakpoints:a}=e;let c=[];n&&(c=Dz(s,a));const C=[];a.forEach(m=>{const p=e[m];p&&C.push(`grid-${m}-${String(p)}`)});const A={root:["root",n&&"container",i&&"item",I&&"zeroMinWidth",...c,o!=="row"&&`direction-xs-${String(o)}`,r!=="wrap"&&`wrap-xs-${String(r)}`,...C]};return Fe(A,Hz,t)},Pz=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiGrid"}),{breakpoints:i}=Of(),s=sc(o),{className:r,columns:I,columnSpacing:a,component:c="div",container:C=!1,direction:A="row",item:m=!1,rowSpacing:p,spacing:b=0,wrap:Z="wrap",zeroMinWidth:v=!1}=s,f=de(s,Kz),G=p||b,y=a||b,W=B.useContext(wB),V=C?I||12:W,X={},R=J({},f);i.keys.forEach(x=>{f[x]!=null&&(X[x]=f[x],delete R[x])});const k=J({},s,{columns:V,container:C,direction:A,item:m,rowSpacing:G,columnSpacing:y,wrap:Z,zeroMinWidth:v,spacing:b},X,{breakpoints:i.keys}),F=Qz(k);return d.jsx(wB.Provider,{value:V,children:d.jsx(Uz,J({ownerState:k,className:fe(F.root,r),as:c,ref:n},R))})}),jz=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Kp(e){return`scale(${e}, ${e**2})`}const _z={entering:{opacity:1,transform:Kp(1)},entered:{opacity:1,transform:"none"}},ih=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Ak=B.forwardRef(function(t,n){const{addEndListener:o,appear:i=!0,children:s,easing:r,in:I,onEnter:a,onEntered:c,onEntering:C,onExit:A,onExited:m,onExiting:p,style:b,timeout:Z="auto",TransitionComponent:v=Ei}=t,f=de(t,jz),G=T2(),y=B.useRef(),W=Of(),V=B.useRef(null),X=Vn(V,s.ref,n),R=ne=>ee=>{if(ne){const te=V.current;ee===void 0?ne(te):ne(te,ee)}},k=R(C),F=R((ne,ee)=>{ck(ne);const{duration:te,delay:N,easing:_}=Xd({style:b,timeout:Z,easing:r},{mode:"enter"});let P;Z==="auto"?(P=W.transitions.getAutoHeightDuration(ne.clientHeight),y.current=P):P=te,ne.style.transition=[W.transitions.create("opacity",{duration:P,delay:N}),W.transitions.create("transform",{duration:ih?P:P*.666,delay:N,easing:_})].join(","),a&&a(ne,ee)}),x=R(c),M=R(p),Q=R(ne=>{const{duration:ee,delay:te,easing:N}=Xd({style:b,timeout:Z,easing:r},{mode:"exit"});let _;Z==="auto"?(_=W.transitions.getAutoHeightDuration(ne.clientHeight),y.current=_):_=ee,ne.style.transition=[W.transitions.create("opacity",{duration:_,delay:te}),W.transitions.create("transform",{duration:ih?_:_*.666,delay:ih?te:te||_*.333,easing:N})].join(","),ne.style.opacity=0,ne.style.transform=Kp(.75),A&&A(ne)}),q=R(m),j=ne=>{Z==="auto"&&G.start(y.current||0,ne),o&&o(V.current,ne)};return d.jsx(v,J({appear:i,in:I,nodeRef:V,onEnter:F,onEntered:x,onEntering:k,onExit:Q,onExited:q,onExiting:M,addEndListener:j,timeout:Z==="auto"?null:Z},f,{children:(ne,ee)=>B.cloneElement(s,J({style:J({opacity:0,transform:Kp(.75),visibility:ne==="exited"&&!I?"hidden":void 0},_z[ne],b,s.props.style),ref:X},ee))}))});Ak.muiSupportAuto=!0;const Oz=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],qz=e=>{const{classes:t,disableUnderline:n}=e,i=Fe({root:["root",!n&&"underline"],input:["input"]},EM,t);return J({},t,i)},$z=Ie(aA,{shouldForwardProp:e=>Mn(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...rA(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let o=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(o=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),J({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ka.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ka.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${o}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ka.disabled}, .${ka.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${o}`}},[`&.${ka.disabled}:before`]:{borderBottomStyle:"dotted"}})}),eT=Ie(IA,{name:"MuiInput",slot:"Input",overridesResolver:lA})({}),i0=B.forwardRef(function(t,n){var o,i,s,r;const I=ze({props:t,name:"MuiInput"}),{disableUnderline:a,components:c={},componentsProps:C,fullWidth:A=!1,inputComponent:m="input",multiline:p=!1,slotProps:b,slots:Z={},type:v="text"}=I,f=de(I,Oz),G=qz(I),W={root:{ownerState:{disableUnderline:a}}},V=b??C?jn(b??C,W):W,X=(o=(i=Z.root)!=null?i:c.Root)!=null?o:$z,R=(s=(r=Z.input)!=null?r:c.Input)!=null?s:eT;return d.jsx(t0,J({slots:{root:X,input:R},slotProps:V,fullWidth:A,inputComponent:m,multiline:p,ref:n,type:v},f,{classes:G}))});i0.muiName="Input";function tT(e){return Xe("MuiInputAdornment",e)}const XB=we("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var JB;const nT=["children","className","component","disablePointerEvents","disableTypography","position","variant"],oT=(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${me(n.position)}`],n.disablePointerEvents===!0&&t.disablePointerEvents,t[n.variant]]},iT=e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:o,position:i,size:s,variant:r}=e,I={root:["root",n&&"disablePointerEvents",i&&`position${me(i)}`,r,o&&"hiddenLabel",s&&`size${me(s)}`]};return Fe(I,tT,t)},gT=Ie("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:oT})(({theme:e,ownerState:t})=>J({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},t.variant==="filled"&&{[`&.${XB.positionStart}&:not(.${XB.hiddenLabel})`]:{marginTop:16}},t.position==="start"&&{marginRight:8},t.position==="end"&&{marginLeft:8},t.disablePointerEvents===!0&&{pointerEvents:"none"})),sT=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiInputAdornment"}),{children:i,className:s,component:r="div",disablePointerEvents:I=!1,disableTypography:a=!1,position:c,variant:C}=o,A=de(o,nT),m=Mi()||{};let p=C;C&&m.variant,m&&!p&&(p=m.variant);const b=J({},o,{hiddenLabel:m.hiddenLabel,size:m.size,disablePointerEvents:I,position:c,variant:p}),Z=iT(b);return d.jsx(sA.Provider,{value:null,children:d.jsx(gT,J({as:r,ownerState:b,className:fe(Z.root,s),ref:n},A,{children:typeof i=="string"&&!a?d.jsx(io,{color:"text.secondary",children:i}):d.jsxs(B.Fragment,{children:[c==="start"?JB||(JB=d.jsx("span",{className:"notranslate",children:"​"})):null,i]})}))})});function rT(e){return Xe("MuiInputLabel",e)}we("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const lT=["disableAnimation","margin","shrink","variant","className"],aT=e=>{const{classes:t,formControl:n,size:o,shrink:i,disableAnimation:s,variant:r,required:I}=e,a={root:["root",n&&"formControl",!s&&"animated",i&&"shrink",o&&o!=="normal"&&`size${me(o)}`,r],asterisk:[I&&"asterisk"]},c=Fe(a,rT,t);return J({},t,c)},IT=Ie(cA,{shouldForwardProp:e=>Mn(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${gI.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(({theme:e,ownerState:t})=>J({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&J({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&J({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&J({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),CA=B.forwardRef(function(t,n){const o=ze({name:"MuiInputLabel",props:t}),{disableAnimation:i=!1,shrink:s,className:r}=o,I=de(o,lT),a=Mi();let c=s;typeof c>"u"&&a&&(c=a.filled||a.focused||a.adornedStart);const C=is({props:o,muiFormControl:a,states:["size","variant","required","focused"]}),A=J({},o,{disableAnimation:i,formControl:a,shrink:c,size:C.size,variant:C.variant,required:C.required,focused:C.focused}),m=aT(A);return d.jsx(IT,J({"data-shrink":c,ownerState:A,ref:n,className:fe(m.root,r)},I,{classes:m}))}),Ep=B.createContext({});function cT(e){return Xe("MuiList",e)}we("MuiList",["root","padding","dense","subheader"]);const CT=["children","className","component","dense","disablePadding","subheader"],dT=e=>{const{classes:t,disablePadding:n,dense:o,subheader:i}=e;return Fe({root:["root",!n&&"padding",o&&"dense",i&&"subheader"]},cT,t)},uT=Ie("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(({ownerState:e})=>J({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),AT=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiList"}),{children:i,className:s,component:r="ul",dense:I=!1,disablePadding:a=!1,subheader:c}=o,C=de(o,CT),A=B.useMemo(()=>({dense:I}),[I]),m=J({},o,{component:r,dense:I,disablePadding:a}),p=dT(m);return d.jsx(Ep.Provider,{value:A,children:d.jsxs(uT,J({as:r,className:fe(p.root,s),ref:n,ownerState:m},C,{children:[c,i]}))})}),YB=we("MuiListItemIcon",["root","alignItemsFlexStart"]),HB=we("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),mT=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function gh(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function xB(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function mk(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.indexOf(t.keys.join(""))===0}function Xa(e,t,n,o,i,s){let r=!1,I=i(e,t,t?n:!1);for(;I;){if(I===e.firstChild){if(r)return!1;r=!0}const a=o?!1:I.disabled||I.getAttribute("aria-disabled")==="true";if(!I.hasAttribute("tabindex")||!mk(I,s)||a)I=i(e,I,n);else return I.focus(),!0}return!1}const hT=B.forwardRef(function(t,n){const{actions:o,autoFocus:i=!1,autoFocusItem:s=!1,children:r,className:I,disabledItemsFocusable:a=!1,disableListWrap:c=!1,onKeyDown:C,variant:A="selectedMenu"}=t,m=de(t,mT),p=B.useRef(null),b=B.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});dg(()=>{i&&p.current.focus()},[i]),B.useImperativeHandle(o,()=>({adjustStyleForScrollbar:(y,{direction:W})=>{const V=!p.current.style.width;if(y.clientHeight<p.current.clientHeight&&V){const X=`${D2(ao(y))}px`;p.current.style[W==="rtl"?"paddingLeft":"paddingRight"]=X,p.current.style.width=`calc(100% + ${X})`}return p.current}}),[]);const Z=y=>{const W=p.current,V=y.key,X=ao(W).activeElement;if(V==="ArrowDown")y.preventDefault(),Xa(W,X,c,a,gh);else if(V==="ArrowUp")y.preventDefault(),Xa(W,X,c,a,xB);else if(V==="Home")y.preventDefault(),Xa(W,null,c,a,gh);else if(V==="End")y.preventDefault(),Xa(W,null,c,a,xB);else if(V.length===1){const R=b.current,k=V.toLowerCase(),F=performance.now();R.keys.length>0&&(F-R.lastTime>500?(R.keys=[],R.repeating=!0,R.previousKeyMatched=!0):R.repeating&&k!==R.keys[0]&&(R.repeating=!1)),R.lastTime=F,R.keys.push(k);const x=X&&!R.repeating&&mk(X,R);R.previousKeyMatched&&(x||Xa(W,X,!1,a,gh,R))?y.preventDefault():R.previousKeyMatched=!1}C&&C(y)},v=Vn(p,n);let f=-1;B.Children.forEach(r,(y,W)=>{if(!B.isValidElement(y)){f===W&&(f+=1,f>=r.length&&(f=-1));return}y.props.disabled||(A==="selectedMenu"&&y.props.selected||f===-1)&&(f=W),f===W&&(y.props.disabled||y.props.muiSkipListHighlight||y.type.muiSkipListHighlight)&&(f+=1,f>=r.length&&(f=-1))});const G=B.Children.map(r,(y,W)=>{if(W===f){const V={};return s&&(V.autoFocus=!0),y.props.tabIndex===void 0&&A==="selectedMenu"&&(V.tabIndex=0),B.cloneElement(y,V)}return y});return d.jsx(AT,J({role:"menu",ref:v,className:I,onKeyDown:Z,tabIndex:i?0:-1},m,{children:G}))});function pT(e){return Xe("MuiPopover",e)}we("MuiPopover",["root","paper"]);const bT=["onEntering"],fT=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],ZT=["slotProps"];function NB(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function FB(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function KB(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function sh(e){return typeof e=="function"?e():e}const yT=e=>{const{classes:t}=e;return Fe({root:["root"],paper:["paper"]},pT,t)},GT=Ie(n0,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),hk=Ie(e0,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),BT=B.forwardRef(function(t,n){var o,i,s;const r=ze({props:t,name:"MuiPopover"}),{action:I,anchorEl:a,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:C,anchorReference:A="anchorEl",children:m,className:p,container:b,elevation:Z=8,marginThreshold:v=16,open:f,PaperProps:G={},slots:y,slotProps:W,transformOrigin:V={vertical:"top",horizontal:"left"},TransitionComponent:X=Ak,transitionDuration:R="auto",TransitionProps:{onEntering:k}={},disableScrollLock:F=!1}=r,x=de(r.TransitionProps,bT),M=de(r,fT),Q=(o=W==null?void 0:W.paper)!=null?o:G,q=B.useRef(),j=Vn(q,Q.ref),ne=J({},r,{anchorOrigin:c,anchorReference:A,elevation:Z,marginThreshold:v,externalPaperSlotProps:Q,transformOrigin:V,TransitionComponent:X,transitionDuration:R,TransitionProps:x}),ee=yT(ne),te=B.useCallback(()=>{if(A==="anchorPosition")return C;const Ye=sh(a),_e=(Ye&&Ye.nodeType===1?Ye:ao(q.current).body).getBoundingClientRect();return{top:_e.top+NB(_e,c.vertical),left:_e.left+FB(_e,c.horizontal)}},[a,c.horizontal,c.vertical,C,A]),N=B.useCallback(Ye=>({vertical:NB(Ye,V.vertical),horizontal:FB(Ye,V.horizontal)}),[V.horizontal,V.vertical]),_=B.useCallback(Ye=>{const Re={width:Ye.offsetWidth,height:Ye.offsetHeight},_e=N(Re);if(A==="none")return{top:null,left:null,transformOrigin:KB(_e)};const qn=te();let an=qn.top-_e.vertical,Bt=qn.left-_e.horizontal;const Ln=an+Re.height,Zn=Bt+Re.width,rt=Qg(sh(a)),$n=rt.innerHeight-v,gn=rt.innerWidth-v;if(v!==null&&an<v){const At=an-v;an-=At,_e.vertical+=At}else if(v!==null&&Ln>$n){const At=Ln-$n;an-=At,_e.vertical+=At}if(v!==null&&Bt<v){const At=Bt-v;Bt-=At,_e.horizontal+=At}else if(Zn>gn){const At=Zn-gn;Bt-=At,_e.horizontal+=At}return{top:`${Math.round(an)}px`,left:`${Math.round(Bt)}px`,transformOrigin:KB(_e)}},[a,A,te,N,v]),[P,le]=B.useState(f),ae=B.useCallback(()=>{const Ye=q.current;if(!Ye)return;const Re=_(Ye);Re.top!==null&&(Ye.style.top=Re.top),Re.left!==null&&(Ye.style.left=Re.left),Ye.style.transformOrigin=Re.transformOrigin,le(!0)},[_]);B.useEffect(()=>(F&&window.addEventListener("scroll",ae),()=>window.removeEventListener("scroll",ae)),[a,F,ae]);const ye=(Ye,Re)=>{k&&k(Ye,Re),ae()},se=()=>{le(!1)};B.useEffect(()=>{f&&ae()}),B.useImperativeHandle(I,()=>f?{updatePosition:()=>{ae()}}:null,[f,ae]),B.useEffect(()=>{if(!f)return;const Ye=Tf(()=>{ae()}),Re=Qg(a);return Re.addEventListener("resize",Ye),()=>{Ye.clear(),Re.removeEventListener("resize",Ye)}},[a,f,ae]);let ue=R;R==="auto"&&!X.muiSupportAuto&&(ue=void 0);const ie=b||(a?ao(sh(a)).body:void 0),Je=(i=y==null?void 0:y.root)!=null?i:GT,Ue=(s=y==null?void 0:y.paper)!=null?s:hk,je=Bl({elementType:Ue,externalSlotProps:J({},Q,{style:P?Q.style:J({},Q.style,{opacity:0})}),additionalProps:{elevation:Z,ref:j},ownerState:ne,className:fe(ee.paper,Q==null?void 0:Q.className)}),ft=Bl({elementType:Je,externalSlotProps:(W==null?void 0:W.root)||{},externalForwardedProps:M,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:ie,open:f},ownerState:ne,className:fe(ee.root,p)}),{slotProps:Ke}=ft,Me=de(ft,ZT);return d.jsx(Je,J({},Me,!Rd(Je)&&{slotProps:Ke,disableScrollLock:F},{children:d.jsx(X,J({appear:!0,in:f,onEntering:ye,onExited:se,timeout:ue},x,{children:d.jsx(Ue,J({},je,{children:m}))}))}))});function ST(e){return Xe("MuiMenu",e)}we("MuiMenu",["root","paper","list"]);const vT=["onEntering"],WT=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],VT={vertical:"top",horizontal:"right"},RT={vertical:"top",horizontal:"left"},kT=e=>{const{classes:t}=e;return Fe({root:["root"],paper:["paper"],list:["list"]},ST,t)},wT=Ie(BT,{shouldForwardProp:e=>Mn(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),XT=Ie(hk,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),JT=Ie(hT,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),YT=B.forwardRef(function(t,n){var o,i;const s=ze({props:t,name:"MuiMenu"}),{autoFocus:r=!0,children:I,className:a,disableAutoFocusItem:c=!1,MenuListProps:C={},onClose:A,open:m,PaperProps:p={},PopoverClasses:b,transitionDuration:Z="auto",TransitionProps:{onEntering:v}={},variant:f="selectedMenu",slots:G={},slotProps:y={}}=s,W=de(s.TransitionProps,vT),V=de(s,WT),X=t3(),R=J({},s,{autoFocus:r,disableAutoFocusItem:c,MenuListProps:C,onEntering:v,PaperProps:p,transitionDuration:Z,TransitionProps:W,variant:f}),k=kT(R),F=r&&!c&&m,x=B.useRef(null),M=(N,_)=>{x.current&&x.current.adjustStyleForScrollbar(N,{direction:X?"rtl":"ltr"}),v&&v(N,_)},Q=N=>{N.key==="Tab"&&(N.preventDefault(),A&&A(N,"tabKeyDown"))};let q=-1;B.Children.map(I,(N,_)=>{B.isValidElement(N)&&(N.props.disabled||(f==="selectedMenu"&&N.props.selected||q===-1)&&(q=_))});const j=(o=G.paper)!=null?o:XT,ne=(i=y.paper)!=null?i:p,ee=Bl({elementType:G.root,externalSlotProps:y.root,ownerState:R,className:[k.root,a]}),te=Bl({elementType:j,externalSlotProps:ne,ownerState:R,className:k.paper});return d.jsx(wT,J({onClose:A,anchorOrigin:{vertical:"bottom",horizontal:X?"right":"left"},transformOrigin:X?VT:RT,slots:{paper:j,root:G.root},slotProps:{root:ee,paper:te},open:m,ref:n,transitionDuration:Z,TransitionProps:J({onEntering:M},W),ownerState:R},V,{classes:b,children:d.jsx(JT,J({onKeyDown:Q,actions:x,autoFocus:r&&(q===-1||c),autoFocusItem:F,variant:f},C,{className:fe(k.list,C.className),children:I}))}))});function HT(e){return Xe("MuiMenuItem",e)}const Ja=we("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),xT=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],NT=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},FT=e=>{const{disabled:t,dense:n,divider:o,disableGutters:i,selected:s,classes:r}=e,a=Fe({root:["root",n&&"dense",t&&"disabled",!i&&"gutters",o&&"divider",s&&"selected"]},HT,r);return J({},r,a)},KT=Ie(gA,{shouldForwardProp:e=>Mn(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:NT})(({theme:e,ownerState:t})=>J({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ja.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:mn(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Ja.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:mn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Ja.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:mn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:mn(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Ja.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Ja.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${VB.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${VB.inset}`]:{marginLeft:52},[`& .${HB.root}`]:{marginTop:0,marginBottom:0},[`& .${HB.inset}`]:{paddingLeft:36},[`& .${YB.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&J({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${YB.root} svg`]:{fontSize:"1.25rem"}}))),Jn=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:r=!1,divider:I=!1,disableGutters:a=!1,focusVisibleClassName:c,role:C="menuitem",tabIndex:A,className:m}=o,p=de(o,xT),b=B.useContext(Ep),Z=B.useMemo(()=>({dense:r||b.dense||!1,disableGutters:a}),[b.dense,r,a]),v=B.useRef(null);dg(()=>{i&&v.current&&v.current.focus()},[i]);const f=J({},o,{dense:Z.dense,divider:I,disableGutters:a}),G=FT(o),y=Vn(v,n);let W;return o.disabled||(W=A!==void 0?A:-1),d.jsx(Ep.Provider,{value:Z,children:d.jsx(KT,J({ref:y,role:C,tabIndex:W,component:s,focusVisibleClassName:fe(G.focusVisible,c),className:fe(G.root,m)},p,{ownerState:f,classes:G}))})});function ET(e){return Xe("MuiNativeSelect",e)}const g0=we("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),MT=["className","disabled","error","IconComponent","inputRef","variant"],LT=e=>{const{classes:t,variant:n,disabled:o,multiple:i,open:s,error:r}=e,I={select:["select",n,o&&"disabled",i&&"multiple",r&&"error"],icon:["icon",`icon${me(n)}`,s&&"iconOpen",o&&"disabled"]};return Fe(I,ET,t)},pk=({ownerState:e,theme:t})=>J({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":J({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${g0.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),zT=Ie("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Mn,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${g0.multiple}`]:t.multiple}]}})(pk),bk=({ownerState:e,theme:t})=>J({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${g0.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),TT=Ie("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${me(n.variant)}`],n.open&&t.iconOpen]}})(bk),UT=B.forwardRef(function(t,n){const{className:o,disabled:i,error:s,IconComponent:r,inputRef:I,variant:a="standard"}=t,c=de(t,MT),C=J({},t,{disabled:i,variant:a,error:s}),A=LT(C);return d.jsxs(B.Fragment,{children:[d.jsx(zT,J({ownerState:C,className:fe(A.select,o),disabled:i,ref:I||n},c)),t.multiple?null:d.jsx(TT,{as:r,ownerState:C,className:A.icon})]})});var EB;const DT=["children","classes","className","label","notched"],QT=Ie("fieldset",{shouldForwardProp:Mn})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),PT=Ie("legend",{shouldForwardProp:Mn})(({ownerState:e,theme:t})=>J({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&J({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function jT(e){const{className:t,label:n,notched:o}=e,i=de(e,DT),s=n!=null&&n!=="",r=J({},e,{notched:o,withLabel:s});return d.jsx(QT,J({"aria-hidden":!0,className:t,ownerState:r},i,{children:d.jsx(PT,{ownerState:r,children:s?d.jsx("span",{children:n}):EB||(EB=d.jsx("span",{className:"notranslate",children:"​"}))})}))}const _T=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],OT=e=>{const{classes:t}=e,o=Fe({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},MM,t);return J({},t,o)},qT=Ie(aA,{shouldForwardProp:e=>Mn(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:rA})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return J({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${yg.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${yg.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${yg.focused} .${yg.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${yg.error} .${yg.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${yg.disabled} .${yg.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&J({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),$T=Ie(jT,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),eU=Ie(IA,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:lA})(({theme:e,ownerState:t})=>J({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),dA=B.forwardRef(function(t,n){var o,i,s,r,I;const a=ze({props:t,name:"MuiOutlinedInput"}),{components:c={},fullWidth:C=!1,inputComponent:A="input",label:m,multiline:p=!1,notched:b,slots:Z={},type:v="text"}=a,f=de(a,_T),G=OT(a),y=Mi(),W=is({props:a,muiFormControl:y,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),V=J({},a,{color:W.color||"primary",disabled:W.disabled,error:W.error,focused:W.focused,formControl:y,fullWidth:C,hiddenLabel:W.hiddenLabel,multiline:p,size:W.size,type:v}),X=(o=(i=Z.root)!=null?i:c.Root)!=null?o:qT,R=(s=(r=Z.input)!=null?r:c.Input)!=null?s:eU;return d.jsx(t0,J({slots:{root:X,input:R},renderSuffix:k=>d.jsx($T,{ownerState:V,className:G.notchedOutline,label:m!=null&&m!==""&&W.required?I||(I=d.jsxs(B.Fragment,{children:[m," ","*"]})):m,notched:typeof b<"u"?b:!!(k.startAdornment||k.filled||k.focused)}),fullWidth:C,inputComponent:A,multiline:p,ref:n,type:v},f,{classes:J({},G,{notchedOutline:null})}))});dA.muiName="Input";const tU=ir(d.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),nU=ir(d.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),oU=Ie("span",{shouldForwardProp:Mn})({position:"relative",display:"flex"}),iU=Ie(tU)({transform:"scale(1)"}),gU=Ie(nU)(({theme:e,ownerState:t})=>J({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},t.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}));function fk(e){const{checked:t=!1,classes:n={},fontSize:o}=e,i=J({},e,{checked:t});return d.jsxs(oU,{className:n.root,ownerState:i,children:[d.jsx(iU,{fontSize:o,className:n.background,ownerState:i}),d.jsx(gU,{fontSize:o,className:n.dot,ownerState:i})]})}const Zk=B.createContext(void 0);function sU(){return B.useContext(Zk)}function rU(e){return Xe("MuiRadio",e)}const MB=we("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),lU=["checked","checkedIcon","color","icon","name","onChange","size","className"],aU=e=>{const{classes:t,color:n,size:o}=e,i={root:["root",`color${me(n)}`,o!=="medium"&&`size${me(o)}`]};return J({},t,Fe(i,rU,t))},IU=Ie(dk,{shouldForwardProp:e=>Mn(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size!=="medium"&&t[`size${me(n.size)}`],t[`color${me(n.color)}`]]}})(({theme:e,ownerState:t})=>J({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:mn(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${MB.checked}`]:{color:(e.vars||e).palette[t.color].main}},{[`&.${MB.disabled}`]:{color:(e.vars||e).palette.action.disabled}}));function cU(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}const LB=d.jsx(fk,{checked:!0}),zB=d.jsx(fk,{}),Rl=B.forwardRef(function(t,n){var o,i;const s=ze({props:t,name:"MuiRadio"}),{checked:r,checkedIcon:I=LB,color:a="primary",icon:c=zB,name:C,onChange:A,size:m="medium",className:p}=s,b=de(s,lU),Z=J({},s,{color:a,size:m}),v=aU(Z),f=sU();let G=r;const y=Wd(A,f&&f.onChange);let W=C;return f&&(typeof G>"u"&&(G=cU(f.value,s.value)),typeof W>"u"&&(W=f.name)),d.jsx(IU,J({type:"radio",icon:B.cloneElement(c,{fontSize:(o=zB.props.fontSize)!=null?o:m}),checkedIcon:B.cloneElement(I,{fontSize:(i=LB.props.fontSize)!=null?i:m}),ownerState:Z,classes:v,name:W,checked:G,onChange:y,ref:n,className:fe(v.root,p)},b))});function CU(e){return Xe("MuiRadioGroup",e)}we("MuiRadioGroup",["root","row","error"]);const dU=["actions","children","className","defaultValue","name","onChange","value"],uU=e=>{const{classes:t,row:n,error:o}=e;return Fe({root:["root",n&&"row",o&&"error"]},CU,t)},s0=B.forwardRef(function(t,n){const{actions:o,children:i,className:s,defaultValue:r,name:I,onChange:a,value:c}=t,C=de(t,dU),A=B.useRef(null),m=uU(t),[p,b]=JI({controlled:c,default:r,name:"RadioGroup"});B.useImperativeHandle(o,()=>({focus:()=>{let G=A.current.querySelector("input:not(:disabled):checked");G||(G=A.current.querySelector("input:not(:disabled)")),G&&G.focus()}}),[]);const Z=Vn(n,A),v=tA(I),f=B.useMemo(()=>({name:v,onChange(G){b(G.target.value),a&&a(G,G.target.value)},value:p}),[v,a,b,p]);return d.jsx(Zk.Provider,{value:f,children:d.jsx(Bz,J({role:"radiogroup",ref:Z,className:fe(m.root,s)},C,{children:i}))})});function AU(e){return Xe("MuiSelect",e)}const Ya=we("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var TB;const mU=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],hU=Ie("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${Ya.select}`]:t.select},{[`&.${Ya.select}`]:t[n.variant]},{[`&.${Ya.error}`]:t.error},{[`&.${Ya.multiple}`]:t.multiple}]}})(pk,{[`&.${Ya.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),pU=Ie("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${me(n.variant)}`],n.open&&t.iconOpen]}})(bk),bU=Ie("input",{shouldForwardProp:e=>lk(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function UB(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function fU(e){return e==null||typeof e=="string"&&!e.trim()}const ZU=e=>{const{classes:t,variant:n,disabled:o,multiple:i,open:s,error:r}=e,I={select:["select",n,o&&"disabled",i&&"multiple",r&&"error"],icon:["icon",`icon${me(n)}`,s&&"iconOpen",o&&"disabled"],nativeInput:["nativeInput"]};return Fe(I,AU,t)},yU=B.forwardRef(function(t,n){var o;const{"aria-describedby":i,"aria-label":s,autoFocus:r,autoWidth:I,children:a,className:c,defaultOpen:C,defaultValue:A,disabled:m,displayEmpty:p,error:b=!1,IconComponent:Z,inputRef:v,labelId:f,MenuProps:G={},multiple:y,name:W,onBlur:V,onChange:X,onClose:R,onFocus:k,onOpen:F,open:x,readOnly:M,renderValue:Q,SelectDisplayProps:q={},tabIndex:j,value:ne,variant:ee="standard"}=t,te=de(t,mU),[N,_]=JI({controlled:ne,default:A,name:"Select"}),[P,le]=JI({controlled:x,default:C,name:"Select"}),ae=B.useRef(null),ye=B.useRef(null),[se,ue]=B.useState(null),{current:ie}=B.useRef(x!=null),[Je,Ue]=B.useState(),je=Vn(n,v),ft=B.useCallback(Ze=>{ye.current=Ze,Ze&&ue(Ze)},[]),Ke=se==null?void 0:se.parentNode;B.useImperativeHandle(je,()=>({focus:()=>{ye.current.focus()},node:ae.current,value:N}),[N]),B.useEffect(()=>{C&&P&&se&&!ie&&(Ue(I?null:Ke.clientWidth),ye.current.focus())},[se,I]),B.useEffect(()=>{r&&ye.current.focus()},[r]),B.useEffect(()=>{if(!f)return;const Ze=ao(ye.current).getElementById(f);if(Ze){const nt=()=>{getSelection().isCollapsed&&ye.current.focus()};return Ze.addEventListener("click",nt),()=>{Ze.removeEventListener("click",nt)}}},[f]);const Me=(Ze,nt)=>{Ze?F&&F(nt):R&&R(nt),ie||(Ue(I?null:Ke.clientWidth),le(Ze))},Ye=Ze=>{Ze.button===0&&(Ze.preventDefault(),ye.current.focus(),Me(!0,Ze))},Re=Ze=>{Me(!1,Ze)},_e=B.Children.toArray(a),qn=Ze=>{const nt=_e.find(at=>at.props.value===Ze.target.value);nt!==void 0&&(_(nt.props.value),X&&X(Ze,nt))},an=Ze=>nt=>{let at;if(nt.currentTarget.hasAttribute("tabindex")){if(y){at=Array.isArray(N)?N.slice():[];const oi=N.indexOf(Ze.props.value);oi===-1?at.push(Ze.props.value):at.splice(oi,1)}else at=Ze.props.value;if(Ze.props.onClick&&Ze.props.onClick(nt),N!==at&&(_(at),X)){const oi=nt.nativeEvent||nt,ii=new oi.constructor(oi.type,oi);Object.defineProperty(ii,"target",{writable:!0,value:{value:at,name:W}}),X(ii,Ze)}y||Me(!1,nt)}},Bt=Ze=>{M||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Ze.key)!==-1&&(Ze.preventDefault(),Me(!0,Ze))},Ln=se!==null&&P,Zn=Ze=>{!Ln&&V&&(Object.defineProperty(Ze,"target",{writable:!0,value:{value:N,name:W}}),V(Ze))};delete te["aria-invalid"];let rt,$n;const gn=[];let At=!1;(Jd({value:N})||p)&&(Q?rt=Q(N):At=!0);const eo=_e.map(Ze=>{if(!B.isValidElement(Ze))return null;let nt;if(y){if(!Array.isArray(N))throw new Error(js(2));nt=N.some(at=>UB(at,Ze.props.value)),nt&&At&&gn.push(Ze.props.children)}else nt=UB(N,Ze.props.value),nt&&At&&($n=Ze.props.children);return B.cloneElement(Ze,{"aria-selected":nt?"true":"false",onClick:an(Ze),onKeyUp:at=>{at.key===" "&&at.preventDefault(),Ze.props.onKeyUp&&Ze.props.onKeyUp(at)},role:"option",selected:nt,value:void 0,"data-value":Ze.props.value})});At&&(y?gn.length===0?rt=null:rt=gn.reduce((Ze,nt,at)=>(Ze.push(nt),at<gn.length-1&&Ze.push(", "),Ze),[]):rt=$n);let _t=Je;!I&&ie&&se&&(_t=Ke.clientWidth);let In;typeof j<"u"?In=j:In=m?null:0;const et=q.id||(W?`mui-component-select-${W}`:void 0),Ge=J({},t,{variant:ee,value:N,open:Ln,error:b}),Lt=ZU(Ge),cn=J({},G.PaperProps,(o=G.slotProps)==null?void 0:o.paper),bi=tA();return d.jsxs(B.Fragment,{children:[d.jsx(hU,J({ref:ft,tabIndex:In,role:"combobox","aria-controls":bi,"aria-disabled":m?"true":void 0,"aria-expanded":Ln?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[f,et].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:Bt,onMouseDown:m||M?null:Ye,onBlur:Zn,onFocus:k},q,{ownerState:Ge,className:fe(q.className,Lt.select,c),id:et,children:fU(rt)?TB||(TB=d.jsx("span",{className:"notranslate",children:"​"})):rt})),d.jsx(bU,J({"aria-invalid":b,value:Array.isArray(N)?N.join(","):N,name:W,ref:ae,"aria-hidden":!0,onChange:qn,tabIndex:-1,disabled:m,className:Lt.nativeInput,autoFocus:r,ownerState:Ge},te)),d.jsx(pU,{as:Z,className:Lt.icon,ownerState:Ge}),d.jsx(YT,J({id:`menu-${W||""}`,anchorEl:Ke,open:Ln,onClose:Re,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},G,{MenuListProps:J({"aria-labelledby":f,role:"listbox","aria-multiselectable":y?"true":void 0,disableListWrap:!0,id:bi},G.MenuListProps),slotProps:J({},G.slotProps,{paper:J({},cn,{style:J({minWidth:_t},cn!=null?cn.style:null)})}),children:eo}))]})}),GU=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],BU=["root"],SU=e=>{const{classes:t}=e;return t},r0={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Mn(e)&&e!=="variant",slot:"Root"},vU=Ie(i0,r0)(""),WU=Ie(dA,r0)(""),VU=Ie(o0,r0)(""),uA=B.forwardRef(function(t,n){const o=ze({name:"MuiSelect",props:t}),{autoWidth:i=!1,children:s,classes:r={},className:I,defaultOpen:a=!1,displayEmpty:c=!1,IconComponent:C=zM,id:A,input:m,inputProps:p,label:b,labelId:Z,MenuProps:v,multiple:f=!1,native:G=!1,onClose:y,onOpen:W,open:V,renderValue:X,SelectDisplayProps:R,variant:k="outlined"}=o,F=de(o,GU),x=G?UT:yU,M=Mi(),Q=is({props:o,muiFormControl:M,states:["variant","error"]}),q=Q.variant||k,j=J({},o,{variant:q,classes:r}),ne=SU(j),ee=de(ne,BU),te=m||{standard:d.jsx(vU,{ownerState:j}),outlined:d.jsx(WU,{label:b,ownerState:j}),filled:d.jsx(VU,{ownerState:j})}[q],N=Vn(n,te.ref);return d.jsx(B.Fragment,{children:B.cloneElement(te,J({inputComponent:x,inputProps:J({children:s,error:Q.error,IconComponent:C,variant:q,type:void 0,multiple:f},G?{id:A}:{autoWidth:i,defaultOpen:a,displayEmpty:c,labelId:Z,MenuProps:v,onClose:y,onOpen:W,open:V,renderValue:X,SelectDisplayProps:J({id:A},R)},p,{classes:p?jn(ee,p.classes):ee},m?m.props.inputProps:{})},(f&&G||c)&&q==="outlined"?{notched:!0}:{},{ref:N,className:fe(te.props.className,I,ne.root)},!m&&{variant:q},F))})});uA.muiName="Select";const yk=B.createContext();function RU(e){return Xe("MuiTable",e)}we("MuiTable",["root","stickyHeader"]);const kU=["className","component","padding","size","stickyHeader"],wU=e=>{const{classes:t,stickyHeader:n}=e;return Fe({root:["root",n&&"stickyHeader"]},RU,t)},XU=Ie("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>J({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":J({},e.typography.body2,{padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})),DB="table",l0=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiTable"}),{className:i,component:s=DB,padding:r="normal",size:I="medium",stickyHeader:a=!1}=o,c=de(o,kU),C=J({},o,{component:s,padding:r,size:I,stickyHeader:a}),A=wU(C),m=B.useMemo(()=>({padding:r,size:I,stickyHeader:a}),[r,I,a]);return d.jsx(yk.Provider,{value:m,children:d.jsx(XU,J({as:s,role:s===DB?null:"table",ref:n,className:fe(A.root,i),ownerState:C},c))})}),AA=B.createContext();function JU(e){return Xe("MuiTableBody",e)}we("MuiTableBody",["root"]);const YU=["className","component"],HU=e=>{const{classes:t}=e;return Fe({root:["root"]},JU,t)},xU=Ie("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),NU={variant:"body"},QB="tbody",a0=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiTableBody"}),{className:i,component:s=QB}=o,r=de(o,YU),I=J({},o,{component:s}),a=HU(I);return d.jsx(AA.Provider,{value:NU,children:d.jsx(xU,J({className:fe(a.root,i),as:s,ref:n,role:s===QB?null:"rowgroup",ownerState:I},r))})});function FU(e){return Xe("MuiTableCell",e)}const KU=we("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),EU=["align","className","component","padding","scope","size","sortDirection","variant"],MU=e=>{const{classes:t,variant:n,align:o,padding:i,size:s,stickyHeader:r}=e,I={root:["root",n,r&&"stickyHeader",o!=="inherit"&&`align${me(o)}`,i!=="normal"&&`padding${me(i)}`,`size${me(s)}`]};return Fe(I,FU,t)},LU=Ie("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${me(n.size)}`],n.padding!=="normal"&&t[`padding${me(n.padding)}`],n.align!=="inherit"&&t[`align${me(n.align)}`],n.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>J({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?nk(mn(e.palette.divider,1),.88):tk(mn(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},t.variant==="head"&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},t.variant==="body"&&{color:(e.vars||e).palette.text.primary},t.variant==="footer"&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},t.size==="small"&&{padding:"6px 16px",[`&.${KU.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},t.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},t.padding==="none"&&{padding:0},t.align==="left"&&{textAlign:"left"},t.align==="center"&&{textAlign:"center"},t.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},t.align==="justify"&&{textAlign:"justify"},t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default})),Jt=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiTableCell"}),{align:i="inherit",className:s,component:r,padding:I,scope:a,size:c,sortDirection:C,variant:A}=o,m=de(o,EU),p=B.useContext(yk),b=B.useContext(AA),Z=b&&b.variant==="head";let v;r?v=r:v=Z?"th":"td";let f=a;v==="td"?f=void 0:!f&&Z&&(f="col");const G=A||b&&b.variant,y=J({},o,{align:i,component:v,padding:I||(p&&p.padding?p.padding:"normal"),size:c||(p&&p.size?p.size:"medium"),sortDirection:C,stickyHeader:G==="head"&&p&&p.stickyHeader,variant:G}),W=MU(y);let V=null;return C&&(V=C==="asc"?"ascending":"descending"),d.jsx(LU,J({as:v,ref:n,className:fe(W.root,s),"aria-sort":V,scope:f,ownerState:y},m))});function zU(e){return Xe("MuiTableContainer",e)}we("MuiTableContainer",["root"]);const TU=["className","component"],UU=e=>{const{classes:t}=e;return Fe({root:["root"]},zU,t)},DU=Ie("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),I0=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiTableContainer"}),{className:i,component:s="div"}=o,r=de(o,TU),I=J({},o,{component:s}),a=UU(I);return d.jsx(DU,J({ref:n,as:s,className:fe(a.root,i),ownerState:I},r))});function QU(e){return Xe("MuiTableHead",e)}we("MuiTableHead",["root"]);const PU=["className","component"],jU=e=>{const{classes:t}=e;return Fe({root:["root"]},QU,t)},_U=Ie("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),OU={variant:"head"},PB="thead",c0=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiTableHead"}),{className:i,component:s=PB}=o,r=de(o,PU),I=J({},o,{component:s}),a=jU(I);return d.jsx(AA.Provider,{value:OU,children:d.jsx(_U,J({as:s,className:fe(a.root,i),ref:n,role:s===PB?null:"rowgroup",ownerState:I},r))})});function qU(e){return Xe("MuiTableRow",e)}const jB=we("MuiTableRow",["root","selected","hover","head","footer"]),$U=["className","component","hover","selected"],eD=e=>{const{classes:t,selected:n,hover:o,head:i,footer:s}=e;return Fe({root:["root",n&&"selected",o&&"hover",i&&"head",s&&"footer"]},qU,t)},tD=Ie("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.head&&t.head,n.footer&&t.footer]}})(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${jB.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${jB.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:mn(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:mn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}})),_B="tr",Tg=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiTableRow"}),{className:i,component:s=_B,hover:r=!1,selected:I=!1}=o,a=de(o,$U),c=B.useContext(AA),C=J({},o,{component:s,hover:r,selected:I,head:c&&c.variant==="head",footer:c&&c.variant==="footer"}),A=eD(C);return d.jsx(tD,J({as:s,ref:n,className:fe(A.root,i),role:s===_B?null:"row",ownerState:C},a))});function nD(e){return Xe("MuiTextField",e)}we("MuiTextField",["root"]);const oD=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],iD={standard:i0,filled:o0,outlined:dA},gD=e=>{const{classes:t}=e;return Fe({root:["root"]},nD,t)},sD=Ie(gr,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),st=B.forwardRef(function(t,n){const o=ze({props:t,name:"MuiTextField"}),{autoComplete:i,autoFocus:s=!1,children:r,className:I,color:a="primary",defaultValue:c,disabled:C=!1,error:A=!1,FormHelperTextProps:m,fullWidth:p=!1,helperText:b,id:Z,InputLabelProps:v,inputProps:f,InputProps:G,inputRef:y,label:W,maxRows:V,minRows:X,multiline:R=!1,name:k,onBlur:F,onChange:x,onFocus:M,placeholder:Q,required:q=!1,rows:j,select:ne=!1,SelectProps:ee,type:te,value:N,variant:_="outlined"}=o,P=de(o,oD),le=J({},o,{autoFocus:s,color:a,disabled:C,error:A,fullWidth:p,multiline:R,required:q,select:ne,variant:_}),ae=gD(le),ye={};_==="outlined"&&(v&&typeof v.shrink<"u"&&(ye.notched=v.shrink),ye.label=W),ne&&((!ee||!ee.native)&&(ye.id=void 0),ye["aria-describedby"]=void 0);const se=tA(Z),ue=b&&se?`${se}-helper-text`:void 0,ie=W&&se?`${se}-label`:void 0,Je=iD[_],Ue=d.jsx(Je,J({"aria-describedby":ue,autoComplete:i,autoFocus:s,defaultValue:c,fullWidth:p,multiline:R,name:k,rows:j,maxRows:V,minRows:X,type:te,value:N,id:se,inputRef:y,onBlur:F,onChange:x,onFocus:M,placeholder:Q,inputProps:f},ye,G));return d.jsxs(sD,J({className:fe(ae.root,I),disabled:C,error:A,fullWidth:p,ref:n,required:q,color:a,variant:_,ownerState:le},P,{children:[W!=null&&W!==""&&d.jsx(CA,J({htmlFor:se,id:ie},v,{children:W})),ne?d.jsx(uA,J({"aria-describedby":ue,id:se,labelId:ie,value:N,input:Ue},ee,{children:r})):Ue,b&&d.jsx(Rz,J({id:ue},m,{children:b}))]}))});var go=function(){return go=Object.assign||function(t){for(var n,o=1,i=arguments.length;o<i;o++){n=arguments[o];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},go.apply(this,arguments)};function Nd(e,t,n){if(n||arguments.length===2)for(var o=0,i=t.length,s;o<i;o++)(s||!(o in t))&&(s||(s=Array.prototype.slice.call(t,0,o)),s[o]=t[o]);return e.concat(s||Array.prototype.slice.call(t))}var vt="-ms-",sI="-moz-",lt="-webkit-",Gk="comm",mA="rule",C0="decl",rD="@import",Bk="@keyframes",lD="@layer",Sk=Math.abs,d0=String.fromCharCode,Mp=Object.assign;function aD(e,t){return An(e,0)^45?(((t<<2^An(e,0))<<2^An(e,1))<<2^An(e,2))<<2^An(e,3):0}function vk(e){return e.trim()}function Pi(e,t){return(e=t.exec(e))?e[0]:e}function Le(e,t,n){return e.replace(t,n)}function FC(e,t,n){return e.indexOf(t,n)}function An(e,t){return e.charCodeAt(t)|0}function kl(e,t,n){return e.slice(t,n)}function ki(e){return e.length}function Wk(e){return e.length}function Ua(e,t){return t.push(e),e}function ID(e,t){return e.map(t).join("")}function OB(e,t){return e.filter(function(n){return!Pi(n,t)})}var hA=1,wl=1,Vk=0,$o=0,tn=0,jl="";function pA(e,t,n,o,i,s,r,I){return{value:e,root:t,parent:n,type:o,props:i,children:s,line:hA,column:wl,length:r,return:"",siblings:I}}function Sg(e,t){return Mp(pA("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function Xr(e){for(;e.root;)e=Sg(e.root,{children:[e]});Ua(e,e.siblings)}function cD(){return tn}function CD(){return tn=$o>0?An(jl,--$o):0,wl--,tn===10&&(wl=1,hA--),tn}function Ai(){return tn=$o<Vk?An(jl,$o++):0,wl++,tn===10&&(wl=1,hA++),tn}function Fs(){return An(jl,$o)}function KC(){return $o}function bA(e,t){return kl(jl,e,t)}function Lp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function dD(e){return hA=wl=1,Vk=ki(jl=e),$o=0,[]}function uD(e){return jl="",e}function rh(e){return vk(bA($o-1,zp(e===91?e+2:e===40?e+1:e)))}function AD(e){for(;(tn=Fs())&&tn<33;)Ai();return Lp(e)>2||Lp(tn)>3?"":" "}function mD(e,t){for(;--t&&Ai()&&!(tn<48||tn>102||tn>57&&tn<65||tn>70&&tn<97););return bA(e,KC()+(t<6&&Fs()==32&&Ai()==32))}function zp(e){for(;Ai();)switch(tn){case e:return $o;case 34:case 39:e!==34&&e!==39&&zp(tn);break;case 40:e===41&&zp(e);break;case 92:Ai();break}return $o}function hD(e,t){for(;Ai()&&e+tn!==57;)if(e+tn===84&&Fs()===47)break;return"/*"+bA(t,$o-1)+"*"+d0(e===47?e:Ai())}function pD(e){for(;!Lp(Fs());)Ai();return bA(e,$o)}function bD(e){return uD(EC("",null,null,null,[""],e=dD(e),0,[0],e))}function EC(e,t,n,o,i,s,r,I,a){for(var c=0,C=0,A=r,m=0,p=0,b=0,Z=1,v=1,f=1,G=0,y="",W=i,V=s,X=o,R=y;v;)switch(b=G,G=Ai()){case 40:if(b!=108&&An(R,A-1)==58){FC(R+=Le(rh(G),"&","&\f"),"&\f",Sk(c?I[c-1]:0))!=-1&&(f=-1);break}case 34:case 39:case 91:R+=rh(G);break;case 9:case 10:case 13:case 32:R+=AD(b);break;case 92:R+=mD(KC()-1,7);continue;case 47:switch(Fs()){case 42:case 47:Ua(fD(hD(Ai(),KC()),t,n,a),a);break;default:R+="/"}break;case 123*Z:I[c++]=ki(R)*f;case 125*Z:case 59:case 0:switch(G){case 0:case 125:v=0;case 59+C:f==-1&&(R=Le(R,/\f/g,"")),p>0&&ki(R)-A&&Ua(p>32?$B(R+";",o,n,A-1,a):$B(Le(R," ","")+";",o,n,A-2,a),a);break;case 59:R+=";";default:if(Ua(X=qB(R,t,n,c,C,i,I,y,W=[],V=[],A,s),s),G===123)if(C===0)EC(R,t,X,X,W,s,A,I,V);else switch(m===99&&An(R,3)===110?100:m){case 100:case 108:case 109:case 115:EC(e,X,X,o&&Ua(qB(e,X,X,0,0,i,I,y,i,W=[],A,V),V),i,V,A,I,o?W:V);break;default:EC(R,X,X,X,[""],V,0,I,V)}}c=C=p=0,Z=f=1,y=R="",A=r;break;case 58:A=1+ki(R),p=b;default:if(Z<1){if(G==123)--Z;else if(G==125&&Z++==0&&CD()==125)continue}switch(R+=d0(G),G*Z){case 38:f=C>0?1:(R+="\f",-1);break;case 44:I[c++]=(ki(R)-1)*f,f=1;break;case 64:Fs()===45&&(R+=rh(Ai())),m=Fs(),C=A=ki(y=R+=pD(KC())),G++;break;case 45:b===45&&ki(R)==2&&(Z=0)}}return s}function qB(e,t,n,o,i,s,r,I,a,c,C,A){for(var m=i-1,p=i===0?s:[""],b=Wk(p),Z=0,v=0,f=0;Z<o;++Z)for(var G=0,y=kl(e,m+1,m=Sk(v=r[Z])),W=e;G<b;++G)(W=vk(v>0?p[G]+" "+y:Le(y,/&\f/g,p[G])))&&(a[f++]=W);return pA(e,t,n,i===0?mA:I,a,c,C,A)}function fD(e,t,n,o){return pA(e,t,n,Gk,d0(cD()),kl(e,2,-2),0,o)}function $B(e,t,n,o,i){return pA(e,t,n,C0,kl(e,0,o),kl(e,o+1,-1),o,i)}function Rk(e,t,n){switch(aD(e,t)){case 5103:return lt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return lt+e+e;case 4789:return sI+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return lt+e+sI+e+vt+e+e;case 5936:switch(An(e,t+11)){case 114:return lt+e+vt+Le(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return lt+e+vt+Le(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return lt+e+vt+Le(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return lt+e+vt+e+e;case 6165:return lt+e+vt+"flex-"+e+e;case 5187:return lt+e+Le(e,/(\w+).+(:[^]+)/,lt+"box-$1$2"+vt+"flex-$1$2")+e;case 5443:return lt+e+vt+"flex-item-"+Le(e,/flex-|-self/g,"")+(Pi(e,/flex-|baseline/)?"":vt+"grid-row-"+Le(e,/flex-|-self/g,""))+e;case 4675:return lt+e+vt+"flex-line-pack"+Le(e,/align-content|flex-|-self/g,"")+e;case 5548:return lt+e+vt+Le(e,"shrink","negative")+e;case 5292:return lt+e+vt+Le(e,"basis","preferred-size")+e;case 6060:return lt+"box-"+Le(e,"-grow","")+lt+e+vt+Le(e,"grow","positive")+e;case 4554:return lt+Le(e,/([^-])(transform)/g,"$1"+lt+"$2")+e;case 6187:return Le(Le(Le(e,/(zoom-|grab)/,lt+"$1"),/(image-set)/,lt+"$1"),e,"")+e;case 5495:case 3959:return Le(e,/(image-set\([^]*)/,lt+"$1$`$1");case 4968:return Le(Le(e,/(.+:)(flex-)?(.*)/,lt+"box-pack:$3"+vt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+lt+e+e;case 4200:if(!Pi(e,/flex-|baseline/))return vt+"grid-column-align"+kl(e,t)+e;break;case 2592:case 3360:return vt+Le(e,"template-","")+e;case 4384:case 3616:return n&&n.some(function(o,i){return t=i,Pi(o.props,/grid-\w+-end/)})?~FC(e+(n=n[t].value),"span",0)?e:vt+Le(e,"-start","")+e+vt+"grid-row-span:"+(~FC(n,"span",0)?Pi(n,/\d+/):+Pi(n,/\d+/)-+Pi(e,/\d+/))+";":vt+Le(e,"-start","")+e;case 4896:case 4128:return n&&n.some(function(o){return Pi(o.props,/grid-\w+-start/)})?e:vt+Le(Le(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return Le(e,/(.+)-inline(.+)/,lt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ki(e)-1-t>6)switch(An(e,t+1)){case 109:if(An(e,t+4)!==45)break;case 102:return Le(e,/(.+:)(.+)-([^]+)/,"$1"+lt+"$2-$3$1"+sI+(An(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~FC(e,"stretch",0)?Rk(Le(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return Le(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(o,i,s,r,I,a,c){return vt+i+":"+s+c+(r?vt+i+"-span:"+(I?a:+a-+s)+c:"")+e});case 4949:if(An(e,t+6)===121)return Le(e,":",":"+lt)+e;break;case 6444:switch(An(e,An(e,14)===45?18:11)){case 120:return Le(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+lt+(An(e,14)===45?"inline-":"")+"box$3$1"+lt+"$2$3$1"+vt+"$2box$3")+e;case 100:return Le(e,":",":"+vt)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Le(e,"scroll-","scroll-snap-")+e}return e}function Fd(e,t){for(var n="",o=0;o<e.length;o++)n+=t(e[o],o,e,t)||"";return n}function ZD(e,t,n,o){switch(e.type){case lD:if(e.children.length)break;case rD:case C0:return e.return=e.return||e.value;case Gk:return"";case Bk:return e.return=e.value+"{"+Fd(e.children,o)+"}";case mA:if(!ki(e.value=e.props.join(",")))return""}return ki(n=Fd(e.children,o))?e.return=e.value+"{"+n+"}":""}function yD(e){var t=Wk(e);return function(n,o,i,s){for(var r="",I=0;I<t;I++)r+=e[I](n,o,i,s)||"";return r}}function GD(e){return function(t){t.root||(t=t.return)&&e(t)}}function BD(e,t,n,o){if(e.length>-1&&!e.return)switch(e.type){case C0:e.return=Rk(e.value,e.length,n);return;case Bk:return Fd([Sg(e,{value:Le(e.value,"@","@"+lt)})],o);case mA:if(e.length)return ID(n=e.props,function(i){switch(Pi(i,o=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Xr(Sg(e,{props:[Le(i,/:(read-\w+)/,":"+sI+"$1")]})),Xr(Sg(e,{props:[i]})),Mp(e,{props:OB(n,o)});break;case"::placeholder":Xr(Sg(e,{props:[Le(i,/:(plac\w+)/,":"+lt+"input-$1")]})),Xr(Sg(e,{props:[Le(i,/:(plac\w+)/,":"+sI+"$1")]})),Xr(Sg(e,{props:[Le(i,/:(plac\w+)/,vt+"input-$1")]})),Xr(Sg(e,{props:[i]})),Mp(e,{props:OB(n,o)});break}return""})}}var SD={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},bo={},Xl=typeof process<"u"&&bo!==void 0&&(bo.REACT_APP_SC_ATTR||bo.SC_ATTR)||"data-styled",kk="active",wk="data-styled-version",fA="6.1.13",u0=`/*!sc*/
`,Kd=typeof window<"u"&&"HTMLElement"in window,vD=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&bo!==void 0&&bo.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&bo.REACT_APP_SC_DISABLE_SPEEDY!==""?bo.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&bo.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&bo!==void 0&&bo.SC_DISABLE_SPEEDY!==void 0&&bo.SC_DISABLE_SPEEDY!==""&&bo.SC_DISABLE_SPEEDY!=="false"&&bo.SC_DISABLE_SPEEDY),ZA=Object.freeze([]),Jl=Object.freeze({});function WD(e,t,n){return n===void 0&&(n=Jl),e.theme!==n.theme&&e.theme||t||n.theme}var Xk=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),VD=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,RD=/(^-|-$)/g;function eS(e){return e.replace(VD,"-").replace(RD,"")}var kD=/(a)(d)/gi,IC=52,tS=function(e){return String.fromCharCode(e+(e>25?39:97))};function Tp(e){var t,n="";for(t=Math.abs(e);t>IC;t=t/IC|0)n=tS(t%IC)+n;return(tS(t%IC)+n).replace(kD,"$1-$2")}var lh,Jk=5381,jr=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Yk=function(e){return jr(Jk,e)};function wD(e){return Tp(Yk(e)>>>0)}function XD(e){return e.displayName||e.name||"Component"}function ah(e){return typeof e=="string"&&!0}var Hk=typeof Symbol=="function"&&Symbol.for,xk=Hk?Symbol.for("react.memo"):60115,JD=Hk?Symbol.for("react.forward_ref"):60112,YD={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},HD={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Nk={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},xD=((lh={})[JD]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},lh[xk]=Nk,lh);function nS(e){return("type"in(t=e)&&t.type.$$typeof)===xk?Nk:"$$typeof"in e?xD[e.$$typeof]:YD;var t}var ND=Object.defineProperty,FD=Object.getOwnPropertyNames,oS=Object.getOwnPropertySymbols,KD=Object.getOwnPropertyDescriptor,ED=Object.getPrototypeOf,iS=Object.prototype;function Fk(e,t,n){if(typeof t!="string"){if(iS){var o=ED(t);o&&o!==iS&&Fk(e,o,n)}var i=FD(t);oS&&(i=i.concat(oS(t)));for(var s=nS(e),r=nS(t),I=0;I<i.length;++I){var a=i[I];if(!(a in HD||n&&n[a]||r&&a in r||s&&a in s)){var c=KD(t,a);try{ND(e,a,c)}catch{}}}}return e}function Yl(e){return typeof e=="function"}function A0(e){return typeof e=="object"&&"styledComponentId"in e}function Xs(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function gS(e,t){if(e.length===0)return"";for(var n=e[0],o=1;o<e.length;o++)n+=e[o];return n}function NI(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function Up(e,t,n){if(n===void 0&&(n=!1),!n&&!NI(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var o=0;o<t.length;o++)e[o]=Up(e[o],t[o]);else if(NI(t))for(var o in t)e[o]=Up(e[o],t[o]);return e}function m0(e,t){Object.defineProperty(e,"toString",{value:t})}function lc(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var MD=function(){function e(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return e.prototype.indexOfGroup=function(t){for(var n=0,o=0;o<t;o++)n+=this.groupSizes[o];return n},e.prototype.insertRules=function(t,n){if(t>=this.groupSizes.length){for(var o=this.groupSizes,i=o.length,s=i;t>=s;)if((s<<=1)<0)throw lc(16,"".concat(t));this.groupSizes=new Uint32Array(s),this.groupSizes.set(o),this.length=s;for(var r=i;r<s;r++)this.groupSizes[r]=0}for(var I=this.indexOfGroup(t+1),a=(r=0,n.length);r<a;r++)this.tag.insertRule(I,n[r])&&(this.groupSizes[t]++,I++)},e.prototype.clearGroup=function(t){if(t<this.length){var n=this.groupSizes[t],o=this.indexOfGroup(t),i=o+n;this.groupSizes[t]=0;for(var s=o;s<i;s++)this.tag.deleteRule(o)}},e.prototype.getGroup=function(t){var n="";if(t>=this.length||this.groupSizes[t]===0)return n;for(var o=this.groupSizes[t],i=this.indexOfGroup(t),s=i+o,r=i;r<s;r++)n+="".concat(this.tag.getRule(r)).concat(u0);return n},e}(),MC=new Map,Ed=new Map,LC=1,cC=function(e){if(MC.has(e))return MC.get(e);for(;Ed.has(LC);)LC++;var t=LC++;return MC.set(e,t),Ed.set(t,e),t},LD=function(e,t){LC=t+1,MC.set(e,t),Ed.set(t,e)},zD="style[".concat(Xl,"][").concat(wk,'="').concat(fA,'"]'),TD=new RegExp("^".concat(Xl,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),UD=function(e,t,n){for(var o,i=n.split(","),s=0,r=i.length;s<r;s++)(o=i[s])&&e.registerName(t,o)},DD=function(e,t){for(var n,o=((n=t.textContent)!==null&&n!==void 0?n:"").split(u0),i=[],s=0,r=o.length;s<r;s++){var I=o[s].trim();if(I){var a=I.match(TD);if(a){var c=0|parseInt(a[1],10),C=a[2];c!==0&&(LD(C,c),UD(e,C,a[3]),e.getTag().insertRules(c,i)),i.length=0}else i.push(I)}}},sS=function(e){for(var t=document.querySelectorAll(zD),n=0,o=t.length;n<o;n++){var i=t[n];i&&i.getAttribute(Xl)!==kk&&(DD(e,i),i.parentNode&&i.parentNode.removeChild(i))}};function QD(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Kk=function(e){var t=document.head,n=e||t,o=document.createElement("style"),i=function(I){var a=Array.from(I.querySelectorAll("style[".concat(Xl,"]")));return a[a.length-1]}(n),s=i!==void 0?i.nextSibling:null;o.setAttribute(Xl,kk),o.setAttribute(wk,fA);var r=QD();return r&&o.setAttribute("nonce",r),n.insertBefore(o,s),o},PD=function(){function e(t){this.element=Kk(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var o=document.styleSheets,i=0,s=o.length;i<s;i++){var r=o[i];if(r.ownerNode===n)return r}throw lc(17)}(this.element),this.length=0}return e.prototype.insertRule=function(t,n){try{return this.sheet.insertRule(n,t),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.prototype.getRule=function(t){var n=this.sheet.cssRules[t];return n&&n.cssText?n.cssText:""},e}(),jD=function(){function e(t){this.element=Kk(t),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(t,n){if(t<=this.length&&t>=0){var o=document.createTextNode(n);return this.element.insertBefore(o,this.nodes[t]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},e}(),_D=function(){function e(t){this.rules=[],this.length=0}return e.prototype.insertRule=function(t,n){return t<=this.length&&(this.rules.splice(t,0,n),this.length++,!0)},e.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},e}(),rS=Kd,OD={isServer:!Kd,useCSSOMInjection:!vD},Ek=function(){function e(t,n,o){t===void 0&&(t=Jl),n===void 0&&(n={});var i=this;this.options=go(go({},OD),t),this.gs=n,this.names=new Map(o),this.server=!!t.isServer,!this.server&&Kd&&rS&&(rS=!1,sS(this)),m0(this,function(){return function(s){for(var r=s.getTag(),I=r.length,a="",c=function(A){var m=function(f){return Ed.get(f)}(A);if(m===void 0)return"continue";var p=s.names.get(m),b=r.getGroup(A);if(p===void 0||!p.size||b.length===0)return"continue";var Z="".concat(Xl,".g").concat(A,'[id="').concat(m,'"]'),v="";p!==void 0&&p.forEach(function(f){f.length>0&&(v+="".concat(f,","))}),a+="".concat(b).concat(Z,'{content:"').concat(v,'"}').concat(u0)},C=0;C<I;C++)c(C);return a}(i)})}return e.registerId=function(t){return cC(t)},e.prototype.rehydrate=function(){!this.server&&Kd&&sS(this)},e.prototype.reconstructWithOptions=function(t,n){return n===void 0&&(n=!0),new e(go(go({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(t=function(n){var o=n.useCSSOMInjection,i=n.target;return n.isServer?new _D(i):o?new PD(i):new jD(i)}(this.options),new MD(t)));var t},e.prototype.hasNameForId=function(t,n){return this.names.has(t)&&this.names.get(t).has(n)},e.prototype.registerName=function(t,n){if(cC(t),this.names.has(t))this.names.get(t).add(n);else{var o=new Set;o.add(n),this.names.set(t,o)}},e.prototype.insertRules=function(t,n,o){this.registerName(t,n),this.getTag().insertRules(cC(t),o)},e.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.prototype.clearRules=function(t){this.getTag().clearGroup(cC(t)),this.clearNames(t)},e.prototype.clearTag=function(){this.tag=void 0},e}(),qD=/&/g,$D=/^\s*\/\/.*$/gm;function Mk(e,t){return e.map(function(n){return n.type==="rule"&&(n.value="".concat(t," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(t," ")),n.props=n.props.map(function(o){return"".concat(t," ").concat(o)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=Mk(n.children,t)),n})}function eQ(e){var t,n,o,i=Jl,s=i.options,r=s===void 0?Jl:s,I=i.plugins,a=I===void 0?ZA:I,c=function(m,p,b){return b.startsWith(n)&&b.endsWith(n)&&b.replaceAll(n,"").length>0?".".concat(t):m},C=a.slice();C.push(function(m){m.type===mA&&m.value.includes("&")&&(m.props[0]=m.props[0].replace(qD,n).replace(o,c))}),r.prefix&&C.push(BD),C.push(ZD);var A=function(m,p,b,Z){p===void 0&&(p=""),b===void 0&&(b=""),Z===void 0&&(Z="&"),t=Z,n=p,o=new RegExp("\\".concat(n,"\\b"),"g");var v=m.replace($D,""),f=bD(b||p?"".concat(b," ").concat(p," { ").concat(v," }"):v);r.namespace&&(f=Mk(f,r.namespace));var G=[];return Fd(f,yD(C.concat(GD(function(y){return G.push(y)})))),G};return A.hash=a.length?a.reduce(function(m,p){return p.name||lc(15),jr(m,p.name)},Jk).toString():"",A}var tQ=new Ek,Dp=eQ(),Lk=Ee.createContext({shouldForwardProp:void 0,styleSheet:tQ,stylis:Dp});Lk.Consumer;Ee.createContext(void 0);function lS(){return B.useContext(Lk)}var nQ=function(){function e(t,n){var o=this;this.inject=function(i,s){s===void 0&&(s=Dp);var r=o.name+s.hash;i.hasNameForId(o.id,r)||i.insertRules(o.id,r,s(o.rules,r,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=n,m0(this,function(){throw lc(12,String(o.name))})}return e.prototype.getName=function(t){return t===void 0&&(t=Dp),this.name+t.hash},e}(),oQ=function(e){return e>="A"&&e<="Z"};function aS(e){for(var t="",n=0;n<e.length;n++){var o=e[n];if(n===1&&o==="-"&&e[0]==="-")return e;oQ(o)?t+="-"+o.toLowerCase():t+=o}return t.startsWith("ms-")?"-"+t:t}var zk=function(e){return e==null||e===!1||e===""},Tk=function(e){var t,n,o=[];for(var i in e){var s=e[i];e.hasOwnProperty(i)&&!zk(s)&&(Array.isArray(s)&&s.isCss||Yl(s)?o.push("".concat(aS(i),":"),s,";"):NI(s)?o.push.apply(o,Nd(Nd(["".concat(i," {")],Tk(s),!1),["}"],!1)):o.push("".concat(aS(i),": ").concat((t=i,(n=s)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||t in SD||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return o};function Ks(e,t,n,o){if(zk(e))return[];if(A0(e))return[".".concat(e.styledComponentId)];if(Yl(e)){if(!Yl(s=e)||s.prototype&&s.prototype.isReactComponent||!t)return[e];var i=e(t);return Ks(i,t,n,o)}var s;return e instanceof nQ?n?(e.inject(n,o),[e.getName(o)]):[e]:NI(e)?Tk(e):Array.isArray(e)?Array.prototype.concat.apply(ZA,e.map(function(r){return Ks(r,t,n,o)})):[e.toString()]}function iQ(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Yl(n)&&!A0(n))return!1}return!0}var gQ=Yk(fA),sQ=function(){function e(t,n,o){this.rules=t,this.staticRulesId="",this.isStatic=(o===void 0||o.isStatic)&&iQ(t),this.componentId=n,this.baseHash=jr(gQ,n),this.baseStyle=o,Ek.registerId(n)}return e.prototype.generateAndInjectStyles=function(t,n,o){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,n,o):"";if(this.isStatic&&!o.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))i=Xs(i,this.staticRulesId);else{var s=gS(Ks(this.rules,t,n,o)),r=Tp(jr(this.baseHash,s)>>>0);if(!n.hasNameForId(this.componentId,r)){var I=o(s,".".concat(r),void 0,this.componentId);n.insertRules(this.componentId,r,I)}i=Xs(i,r),this.staticRulesId=r}else{for(var a=jr(this.baseHash,o.hash),c="",C=0;C<this.rules.length;C++){var A=this.rules[C];if(typeof A=="string")c+=A;else if(A){var m=gS(Ks(A,t,n,o));a=jr(a,m+C),c+=m}}if(c){var p=Tp(a>>>0);n.hasNameForId(this.componentId,p)||n.insertRules(this.componentId,p,o(c,".".concat(p),void 0,this.componentId)),i=Xs(i,p)}}return i},e}(),Uk=Ee.createContext(void 0);Uk.Consumer;var Ih={};function rQ(e,t,n){var o=A0(e),i=e,s=!ah(e),r=t.attrs,I=r===void 0?ZA:r,a=t.componentId,c=a===void 0?function(W,V){var X=typeof W!="string"?"sc":eS(W);Ih[X]=(Ih[X]||0)+1;var R="".concat(X,"-").concat(wD(fA+X+Ih[X]));return V?"".concat(V,"-").concat(R):R}(t.displayName,t.parentComponentId):a,C=t.displayName,A=C===void 0?function(W){return ah(W)?"styled.".concat(W):"Styled(".concat(XD(W),")")}(e):C,m=t.displayName&&t.componentId?"".concat(eS(t.displayName),"-").concat(t.componentId):t.componentId||c,p=o&&i.attrs?i.attrs.concat(I).filter(Boolean):I,b=t.shouldForwardProp;if(o&&i.shouldForwardProp){var Z=i.shouldForwardProp;if(t.shouldForwardProp){var v=t.shouldForwardProp;b=function(W,V){return Z(W,V)&&v(W,V)}}else b=Z}var f=new sQ(n,m,o?i.componentStyle:void 0);function G(W,V){return function(X,R,k){var F=X.attrs,x=X.componentStyle,M=X.defaultProps,Q=X.foldedComponentIds,q=X.styledComponentId,j=X.target,ne=Ee.useContext(Uk),ee=lS(),te=X.shouldForwardProp||ee.shouldForwardProp,N=WD(R,ne,M)||Jl,_=function(ue,ie,Je){for(var Ue,je=go(go({},ie),{className:void 0,theme:Je}),ft=0;ft<ue.length;ft+=1){var Ke=Yl(Ue=ue[ft])?Ue(je):Ue;for(var Me in Ke)je[Me]=Me==="className"?Xs(je[Me],Ke[Me]):Me==="style"?go(go({},je[Me]),Ke[Me]):Ke[Me]}return ie.className&&(je.className=Xs(je.className,ie.className)),je}(F,R,N),P=_.as||j,le={};for(var ae in _)_[ae]===void 0||ae[0]==="$"||ae==="as"||ae==="theme"&&_.theme===N||(ae==="forwardedAs"?le.as=_.forwardedAs:te&&!te(ae,P)||(le[ae]=_[ae]));var ye=function(ue,ie){var Je=lS(),Ue=ue.generateAndInjectStyles(ie,Je.styleSheet,Je.stylis);return Ue}(x,_),se=Xs(Q,q);return ye&&(se+=" "+ye),_.className&&(se+=" "+_.className),le[ah(P)&&!Xk.has(P)?"class":"className"]=se,le.ref=k,B.createElement(P,le)}(y,W,V)}G.displayName=A;var y=Ee.forwardRef(G);return y.attrs=p,y.componentStyle=f,y.displayName=A,y.shouldForwardProp=b,y.foldedComponentIds=o?Xs(i.foldedComponentIds,i.styledComponentId):"",y.styledComponentId=m,y.target=o?i.target:e,Object.defineProperty(y,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(W){this._foldedDefaultProps=o?function(V){for(var X=[],R=1;R<arguments.length;R++)X[R-1]=arguments[R];for(var k=0,F=X;k<F.length;k++)Up(V,F[k],!0);return V}({},i.defaultProps,W):W}}),m0(y,function(){return".".concat(y.styledComponentId)}),s&&Fk(y,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),y}function IS(e,t){for(var n=[e[0]],o=0,i=t.length;o<i;o+=1)n.push(t[o],e[o+1]);return n}var cS=function(e){return Object.assign(e,{isCss:!0})};function lQ(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Yl(e)||NI(e))return cS(Ks(IS(ZA,Nd([e],t,!0))));var o=e;return t.length===0&&o.length===1&&typeof o[0]=="string"?Ks(o):cS(Ks(IS(o,t)))}function Qp(e,t,n){if(n===void 0&&(n=Jl),!t)throw lc(1,t);var o=function(i){for(var s=[],r=1;r<arguments.length;r++)s[r-1]=arguments[r];return e(t,n,lQ.apply(void 0,Nd([i],s,!1)))};return o.attrs=function(i){return Qp(e,t,go(go({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},o.withConfig=function(i){return Qp(e,t,go(go({},n),i))},o}var Dk=function(e){return Qp(rQ,e)},Vt=Dk;Xk.forEach(function(e){Vt[e]=Dk(e)});function Qk(e){return Ag({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m350.54 148.68-26.62-42.06C318.31 100.08 310.62 96 302 96h-92c-8.62 0-16.31 4.08-21.92 10.62l-26.62 42.06C155.85 155.23 148.62 160 140 160H80a32 32 0 0 0-32 32v192a32 32 0 0 0 32 32h352a32 32 0 0 0 32-32V192a32 32 0 0 0-32-32h-59c-8.65 0-16.85-4.77-22.46-11.32z"},child:[]},{tag:"circle",attr:{cx:"256",cy:"272",r:"80",fill:"none",strokeMiterlimit:"10",strokeWidth:"32"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M124 158v-22h-24v22"},child:[]}]})(e)}/*!
* sweetalert2 v11.14.3
* Released under the MIT License.
*/function Pk(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function aQ(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function CS(e,t){return e.get(Pk(e,t))}function IQ(e,t,n){aQ(e,t),t.set(e,n)}function cQ(e,t,n){return e.set(Pk(e,t),n),n}const CQ=100,Se={},dQ=()=>{Se.previousActiveElement instanceof HTMLElement?(Se.previousActiveElement.focus(),Se.previousActiveElement=null):document.body&&document.body.focus()},uQ=e=>new Promise(t=>{if(!e)return t();const n=window.scrollX,o=window.scrollY;Se.restoreFocusTimeout=setTimeout(()=>{dQ(),t()},CQ),window.scrollTo(n,o)}),jk="swal2-",AQ=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],U=AQ.reduce((e,t)=>(e[t]=jk+t,e),{}),mQ=["success","warning","info","question","error"],Md=mQ.reduce((e,t)=>(e[t]=jk+t,e),{}),_k="SweetAlert2:",h0=e=>e.charAt(0).toUpperCase()+e.slice(1),ho=e=>{console.warn(`${_k} ${typeof e=="object"?e.join(" "):e}`)},sr=e=>{console.error(`${_k} ${e}`)},dS=[],hQ=e=>{dS.includes(e)||(dS.push(e),ho(e))},Ok=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;hQ(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},yA=e=>typeof e=="function"?e():e,p0=e=>e&&typeof e.toPromise=="function",ac=e=>p0(e)?e.toPromise():Promise.resolve(e),b0=e=>e&&Promise.resolve(e)===e,po=()=>document.body.querySelector(`.${U.container}`),Ic=e=>{const t=po();return t?t.querySelector(e):null},Jo=e=>Ic(`.${e}`),Ct=()=>Jo(U.popup),cc=()=>Jo(U.icon),pQ=()=>Jo(U["icon-content"]),qk=()=>Jo(U.title),f0=()=>Jo(U["html-container"]),$k=()=>Jo(U.image),Z0=()=>Jo(U["progress-steps"]),GA=()=>Jo(U["validation-message"]),Ni=()=>Ic(`.${U.actions} .${U.confirm}`),_l=()=>Ic(`.${U.actions} .${U.cancel}`),rr=()=>Ic(`.${U.actions} .${U.deny}`),bQ=()=>Jo(U["input-label"]),Ol=()=>Ic(`.${U.loader}`),Cc=()=>Jo(U.actions),ew=()=>Jo(U.footer),BA=()=>Jo(U["timer-progress-bar"]),y0=()=>Jo(U.close),fQ=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,G0=()=>{const e=Ct();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(t).sort((s,r)=>{const I=parseInt(s.getAttribute("tabindex")||"0"),a=parseInt(r.getAttribute("tabindex")||"0");return I>a?1:I<a?-1:0}),o=e.querySelectorAll(fQ),i=Array.from(o).filter(s=>s.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(i))].filter(s=>Io(s))},B0=()=>og(document.body,U.shown)&&!og(document.body,U["toast-shown"])&&!og(document.body,U["no-backdrop"]),SA=()=>{const e=Ct();return e?og(e,U.toast):!1},ZQ=()=>{const e=Ct();return e?e.hasAttribute("data-loading"):!1},Yo=(e,t)=>{if(e.textContent="",t){const o=new DOMParser().parseFromString(t,"text/html"),i=o.querySelector("head");i&&Array.from(i.childNodes).forEach(r=>{e.appendChild(r)});const s=o.querySelector("body");s&&Array.from(s.childNodes).forEach(r=>{r instanceof HTMLVideoElement||r instanceof HTMLAudioElement?e.appendChild(r.cloneNode(!0)):e.appendChild(r)})}},og=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let o=0;o<n.length;o++)if(!e.classList.contains(n[o]))return!1;return!0},yQ=(e,t)=>{Array.from(e.classList).forEach(n=>{!Object.values(U).includes(n)&&!Object.values(Md).includes(n)&&!Object.values(t.showClass||{}).includes(n)&&e.classList.remove(n)})},Vo=(e,t,n)=>{if(yQ(e,t),!t.customClass)return;const o=t.customClass[n];if(o){if(typeof o!="string"&&!o.forEach){ho(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof o}"`);return}tt(e,o)}},vA=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${U.popup} > .${U[t]}`);case"checkbox":return e.querySelector(`.${U.popup} > .${U.checkbox} input`);case"radio":return e.querySelector(`.${U.popup} > .${U.radio} input:checked`)||e.querySelector(`.${U.popup} > .${U.radio} input:first-child`);case"range":return e.querySelector(`.${U.popup} > .${U.range} input`);default:return e.querySelector(`.${U.popup} > .${U.input}`)}},tw=e=>{if(e.focus(),e.type!=="file"){const t=e.value;e.value="",e.value=t}},nw=(e,t,n)=>{!e||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(o=>{Array.isArray(e)?e.forEach(i=>{n?i.classList.add(o):i.classList.remove(o)}):n?e.classList.add(o):e.classList.remove(o)}))},tt=(e,t)=>{nw(e,t,!0)},Fi=(e,t)=>{nw(e,t,!1)},Yg=(e,t)=>{const n=Array.from(e.children);for(let o=0;o<n.length;o++){const i=n[o];if(i instanceof HTMLElement&&og(i,t))return i}},Es=(e,t,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?e.style.setProperty(t,typeof n=="number"?`${n}px`:n):e.style.removeProperty(t)},pn=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";e&&(e.style.display=t)},Kn=e=>{e&&(e.style.display="none")},S0=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";e&&new MutationObserver(()=>{dc(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},uS=(e,t,n,o)=>{const i=e.querySelector(t);i&&i.style.setProperty(n,o)},dc=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";t?pn(e,n):Kn(e)},Io=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),GQ=()=>!Io(Ni())&&!Io(rr())&&!Io(_l()),AS=e=>e.scrollHeight>e.clientHeight,ow=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),o=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||o>0},v0=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=BA();n&&Io(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${e/1e3}s linear`,n.style.width="0%"},10))},BQ=()=>{const e=BA();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=parseInt(window.getComputedStyle(e).width),o=t/n*100;e.style.width=`${o}%`},SQ=()=>typeof window>"u"||typeof document>"u",vQ=`
 <div aria-labelledby="${U.title}" aria-describedby="${U["html-container"]}" class="${U.popup}" tabindex="-1">
   <button type="button" class="${U.close}"></button>
   <ul class="${U["progress-steps"]}"></ul>
   <div class="${U.icon}"></div>
   <img class="${U.image}" />
   <h2 class="${U.title}" id="${U.title}"></h2>
   <div class="${U["html-container"]}" id="${U["html-container"]}"></div>
   <input class="${U.input}" id="${U.input}" />
   <input type="file" class="${U.file}" />
   <div class="${U.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${U.select}" id="${U.select}"></select>
   <div class="${U.radio}"></div>
   <label class="${U.checkbox}">
     <input type="checkbox" id="${U.checkbox}" />
     <span class="${U.label}"></span>
   </label>
   <textarea class="${U.textarea}" id="${U.textarea}"></textarea>
   <div class="${U["validation-message"]}" id="${U["validation-message"]}"></div>
   <div class="${U.actions}">
     <div class="${U.loader}"></div>
     <button type="button" class="${U.confirm}"></button>
     <button type="button" class="${U.deny}"></button>
     <button type="button" class="${U.cancel}"></button>
   </div>
   <div class="${U.footer}"></div>
   <div class="${U["timer-progress-bar-container"]}">
     <div class="${U["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),WQ=()=>{const e=po();return e?(e.remove(),Fi([document.documentElement,document.body],[U["no-backdrop"],U["toast-shown"],U["has-column"]]),!0):!1},hs=()=>{Se.currentInstance.resetValidationMessage()},VQ=()=>{const e=Ct(),t=Yg(e,U.input),n=Yg(e,U.file),o=e.querySelector(`.${U.range} input`),i=e.querySelector(`.${U.range} output`),s=Yg(e,U.select),r=e.querySelector(`.${U.checkbox} input`),I=Yg(e,U.textarea);t.oninput=hs,n.onchange=hs,s.onchange=hs,r.onchange=hs,I.oninput=hs,o.oninput=()=>{hs(),i.value=o.value},o.onchange=()=>{hs(),i.value=o.value}},RQ=e=>typeof e=="string"?document.querySelector(e):e,kQ=e=>{const t=Ct();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},wQ=e=>{window.getComputedStyle(e).direction==="rtl"&&tt(po(),U.rtl)},XQ=e=>{const t=WQ();if(SQ()){sr("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=U.container,t&&tt(n,U["no-transition"]),Yo(n,vQ);const o=RQ(e.target);o.appendChild(n),kQ(e),wQ(o),VQ()},W0=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):typeof e=="object"?JQ(e,t):e&&Yo(t,e)},JQ=(e,t)=>{e.jquery?YQ(t,e):Yo(t,e.toString())},YQ=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},HQ=(e,t)=>{const n=Cc(),o=Ol();!n||!o||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?Kn(n):pn(n),Vo(n,t,"actions"),xQ(n,o,t),Yo(o,t.loaderHtml||""),Vo(o,t,"loader"))};function xQ(e,t,n){const o=Ni(),i=rr(),s=_l();!o||!i||!s||(ch(o,"confirm",n),ch(i,"deny",n),ch(s,"cancel",n),NQ(o,i,s,n),n.reverseButtons&&(n.toast?(e.insertBefore(s,o),e.insertBefore(i,o)):(e.insertBefore(s,t),e.insertBefore(i,t),e.insertBefore(o,t))))}function NQ(e,t,n,o){if(!o.buttonsStyling){Fi([e,t,n],U.styled);return}tt([e,t,n],U.styled),o.confirmButtonColor&&(e.style.backgroundColor=o.confirmButtonColor,tt(e,U["default-outline"])),o.denyButtonColor&&(t.style.backgroundColor=o.denyButtonColor,tt(t,U["default-outline"])),o.cancelButtonColor&&(n.style.backgroundColor=o.cancelButtonColor,tt(n,U["default-outline"]))}function ch(e,t,n){const o=h0(t);dc(e,n[`show${o}Button`],"inline-block"),Yo(e,n[`${t}ButtonText`]||""),e.setAttribute("aria-label",n[`${t}ButtonAriaLabel`]||""),e.className=U[t],Vo(e,n,`${t}Button`)}const FQ=(e,t)=>{const n=y0();n&&(Yo(n,t.closeButtonHtml||""),Vo(n,t,"closeButton"),dc(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel||""))},KQ=(e,t)=>{const n=po();n&&(EQ(n,t.backdrop),MQ(n,t.position),LQ(n,t.grow),Vo(n,t,"container"))};function EQ(e,t){typeof t=="string"?e.style.background=t:t||tt([document.documentElement,document.body],U["no-backdrop"])}function MQ(e,t){t&&(t in U?tt(e,U[t]):(ho('The "position" parameter is not valid, defaulting to "center"'),tt(e,U.center)))}function LQ(e,t){t&&tt(e,U[`grow-${t}`])}var Gt={innerParams:new WeakMap,domCache:new WeakMap};const zQ=["input","file","range","select","radio","checkbox","textarea"],TQ=(e,t)=>{const n=Ct();if(!n)return;const o=Gt.innerParams.get(e),i=!o||t.input!==o.input;zQ.forEach(s=>{const r=Yg(n,U[s]);r&&(QQ(s,t.inputAttributes),r.className=U[s],i&&Kn(r))}),t.input&&(i&&UQ(t),PQ(t))},UQ=e=>{if(!e.input)return;if(!Ut[e.input]){sr(`Unexpected type of input! Expected ${Object.keys(Ut).join(" | ")}, got "${e.input}"`);return}const t=iw(e.input);if(!t)return;const n=Ut[e.input](t,e);pn(t),e.inputAutoFocus&&setTimeout(()=>{tw(n)})},DQ=e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["id","type","value","style"].includes(n)||e.removeAttribute(n)}},QQ=(e,t)=>{const n=Ct();if(!n)return;const o=vA(n,e);if(o){DQ(o);for(const i in t)o.setAttribute(i,t[i])}},PQ=e=>{if(!e.input)return;const t=iw(e.input);t&&Vo(t,e,"input")},V0=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},uc=(e,t,n)=>{if(n.inputLabel){const o=document.createElement("label"),i=U["input-label"];o.setAttribute("for",e.id),o.className=i,typeof n.customClass=="object"&&tt(o,n.customClass.inputLabel),o.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",o)}},iw=e=>{const t=Ct();if(t)return Yg(t,U[e]||U.input)},Ld=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:b0(t)||ho(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},Ut={};Ut.text=Ut.email=Ut.password=Ut.number=Ut.tel=Ut.url=Ut.search=Ut.date=Ut["datetime-local"]=Ut.time=Ut.week=Ut.month=(e,t)=>(Ld(e,t.inputValue),uc(e,e,t),V0(e,t),e.type=t.input,e);Ut.file=(e,t)=>(uc(e,e,t),V0(e,t),e);Ut.range=(e,t)=>{const n=e.querySelector("input"),o=e.querySelector("output");return Ld(n,t.inputValue),n.type=t.input,Ld(o,t.inputValue),uc(n,e,t),e};Ut.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");Yo(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return uc(e,e,t),e};Ut.radio=e=>(e.textContent="",e);Ut.checkbox=(e,t)=>{const n=vA(Ct(),"checkbox");n.value="1",n.checked=!!t.inputValue;const o=e.querySelector("span");return Yo(o,t.inputPlaceholder||t.inputLabel),n};Ut.textarea=(e,t)=>{Ld(e,t.inputValue),V0(e,t),uc(e,e,t);const n=o=>parseInt(window.getComputedStyle(o).marginLeft)+parseInt(window.getComputedStyle(o).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const o=parseInt(window.getComputedStyle(Ct()).width),i=()=>{if(!document.body.contains(e))return;const s=e.offsetWidth+n(e);s>o?Ct().style.width=`${s}px`:Es(Ct(),"width",t.width)};new MutationObserver(i).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const jQ=(e,t)=>{const n=f0();n&&(S0(n),Vo(n,t,"htmlContainer"),t.html?(W0(t.html,n),pn(n,"block")):t.text?(n.textContent=t.text,pn(n,"block")):Kn(n),TQ(e,t))},_Q=(e,t)=>{const n=ew();n&&(S0(n),dc(n,t.footer,"block"),t.footer&&W0(t.footer,n),Vo(n,t,"footer"))},OQ=(e,t)=>{const n=Gt.innerParams.get(e),o=cc();if(o){if(n&&t.icon===n.icon){hS(o,t),mS(o,t);return}if(!t.icon&&!t.iconHtml){Kn(o);return}if(t.icon&&Object.keys(Md).indexOf(t.icon)===-1){sr(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),Kn(o);return}pn(o),hS(o,t),mS(o,t),tt(o,t.showClass&&t.showClass.icon)}},mS=(e,t)=>{for(const[n,o]of Object.entries(Md))t.icon!==n&&Fi(e,o);tt(e,t.icon&&Md[t.icon]),tP(e,t),qQ(),Vo(e,t,"icon")},qQ=()=>{const e=Ct();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let o=0;o<n.length;o++)n[o].style.backgroundColor=t},$Q=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,eP=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,hS=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let n=e.innerHTML,o="";t.iconHtml?o=pS(t.iconHtml):t.icon==="success"?(o=$Q,n=n.replace(/ style=".*?"/g,"")):t.icon==="error"?o=eP:t.icon&&(o=pS({question:"?",warning:"!",info:"i"}[t.icon])),n.trim()!==o.trim()&&Yo(e,o)},tP=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])uS(e,n,"background-color",t.iconColor);uS(e,".swal2-success-ring","border-color",t.iconColor)}},pS=e=>`<div class="${U["icon-content"]}">${e}</div>`,nP=(e,t)=>{const n=$k();if(n){if(!t.imageUrl){Kn(n);return}pn(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt||""),Es(n,"width",t.imageWidth),Es(n,"height",t.imageHeight),n.className=U.image,Vo(n,t,"image")}},oP=(e,t)=>{const n=po(),o=Ct();if(!(!n||!o)){if(t.toast){Es(n,"width",t.width),o.style.width="100%";const i=Ol();i&&o.insertBefore(i,cc())}else Es(o,"width",t.width);Es(o,"padding",t.padding),t.color&&(o.style.color=t.color),t.background&&(o.style.background=t.background),Kn(GA()),iP(o,t)}},iP=(e,t)=>{const n=t.showClass||{};e.className=`${U.popup} ${Io(e)?n.popup:""}`,t.toast?(tt([document.documentElement,document.body],U["toast-shown"]),tt(e,U.toast)):tt(e,U.modal),Vo(e,t,"popup"),typeof t.customClass=="string"&&tt(e,t.customClass),t.icon&&tt(e,U[`icon-${t.icon}`])},gP=(e,t)=>{const n=Z0();if(!n)return;const{progressSteps:o,currentProgressStep:i}=t;if(!o||o.length===0||i===void 0){Kn(n);return}pn(n),n.textContent="",i>=o.length&&ho("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),o.forEach((s,r)=>{const I=sP(s);if(n.appendChild(I),r===i&&tt(I,U["active-progress-step"]),r!==o.length-1){const a=rP(t);n.appendChild(a)}})},sP=e=>{const t=document.createElement("li");return tt(t,U["progress-step"]),Yo(t,e),t},rP=e=>{const t=document.createElement("li");return tt(t,U["progress-step-line"]),e.progressStepsDistance&&Es(t,"width",e.progressStepsDistance),t},lP=(e,t)=>{const n=qk();n&&(S0(n),dc(n,t.title||t.titleText,"block"),t.title&&W0(t.title,n),t.titleText&&(n.innerText=t.titleText),Vo(n,t,"title"))},gw=(e,t)=>{oP(e,t),KQ(e,t),gP(e,t),OQ(e,t),nP(e,t),lP(e,t),FQ(e,t),jQ(e,t),HQ(e,t),_Q(e,t);const n=Ct();typeof t.didRender=="function"&&n&&t.didRender(n),Se.eventEmitter.emit("didRender",n)},aP=()=>Io(Ct()),sw=()=>{var e;return(e=Ni())===null||e===void 0?void 0:e.click()},IP=()=>{var e;return(e=rr())===null||e===void 0?void 0:e.click()},cP=()=>{var e;return(e=_l())===null||e===void 0?void 0:e.click()},ql=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),rw=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},CP=(e,t,n)=>{rw(e),t.toast||(e.keydownHandler=o=>uP(t,o,n),e.keydownTarget=t.keydownListenerCapture?window:Ct(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},Pp=(e,t)=>{var n;const o=G0();if(o.length){e=e+t,e===o.length?e=0:e===-1&&(e=o.length-1),o[e].focus();return}(n=Ct())===null||n===void 0||n.focus()},lw=["ArrowRight","ArrowDown"],dP=["ArrowLeft","ArrowUp"],uP=(e,t,n)=>{e&&(t.isComposing||t.keyCode===229||(e.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?AP(t,e):t.key==="Tab"?mP(t):[...lw,...dP].includes(t.key)?hP(t.key):t.key==="Escape"&&pP(t,e,n)))},AP=(e,t)=>{if(!yA(t.allowEnterKey))return;const n=vA(Ct(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;sw(),e.preventDefault()}},mP=e=>{const t=e.target,n=G0();let o=-1;for(let i=0;i<n.length;i++)if(t===n[i]){o=i;break}e.shiftKey?Pp(o,-1):Pp(o,1),e.stopPropagation(),e.preventDefault()},hP=e=>{const t=Cc(),n=Ni(),o=rr(),i=_l();if(!t||!n||!o||!i)return;const s=[n,o,i];if(document.activeElement instanceof HTMLElement&&!s.includes(document.activeElement))return;const r=lw.includes(e)?"nextElementSibling":"previousElementSibling";let I=document.activeElement;if(I){for(let a=0;a<t.children.length;a++){if(I=I[r],!I)return;if(I instanceof HTMLButtonElement&&Io(I))break}I instanceof HTMLButtonElement&&I.focus()}},pP=(e,t,n)=>{yA(t.allowEscapeKey)&&(e.preventDefault(),n(ql.esc))};var Hl={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const bP=()=>{const e=po();Array.from(document.body.children).forEach(n=>{n.contains(e)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},aw=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},Iw=typeof window<"u"&&!!window.GestureEvent,fP=()=>{if(Iw&&!og(document.body,U.iosfix)){const e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,tt(document.body,U.iosfix),ZP()}},ZP=()=>{const e=po();if(!e)return;let t;e.ontouchstart=n=>{t=yP(n)},e.ontouchmove=n=>{t&&(n.preventDefault(),n.stopPropagation())}},yP=e=>{const t=e.target,n=po(),o=f0();return!n||!o||GP(e)||BP(e)?!1:t===n||!AS(n)&&t instanceof HTMLElement&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(AS(o)&&o.contains(t))},GP=e=>e.touches&&e.touches.length&&e.touches[0].touchType==="stylus",BP=e=>e.touches&&e.touches.length>1,SP=()=>{if(og(document.body,U.iosfix)){const e=parseInt(document.body.style.top,10);Fi(document.body,U.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},vP=()=>{const e=document.createElement("div");e.className=U["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let Cl=null;const WP=e=>{Cl===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(Cl=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Cl+vP()}px`)},VP=()=>{Cl!==null&&(document.body.style.paddingRight=`${Cl}px`,Cl=null)};function cw(e,t,n,o){SA()?bS(e,o):(uQ(n).then(()=>bS(e,o)),rw(Se)),Iw?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),B0()&&(VP(),SP(),aw()),RP()}function RP(){Fi([document.documentElement,document.body],[U.shown,U["height-auto"],U["no-backdrop"],U["toast-shown"]])}function Hg(e){e=wP(e);const t=Hl.swalPromiseResolve.get(this),n=kP(this);this.isAwaitingPromise?e.isDismissed||(Ac(this),t(e)):n&&t(e)}const kP=e=>{const t=Ct();if(!t)return!1;const n=Gt.innerParams.get(e);if(!n||og(t,n.hideClass.popup))return!1;Fi(t,n.showClass.popup),tt(t,n.hideClass.popup);const o=po();return Fi(o,n.showClass.backdrop),tt(o,n.hideClass.backdrop),XP(e,t,n),!0};function Cw(e){const t=Hl.swalPromiseReject.get(this);Ac(this),t&&t(e)}const Ac=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,Gt.innerParams.get(e)||e._destroy())},wP=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),XP=(e,t,n)=>{const o=po(),i=ow(t);typeof n.willClose=="function"&&n.willClose(t),Se.eventEmitter.emit("willClose",t),i?JP(e,t,o,n.returnFocus,n.didClose):cw(e,o,n.returnFocus,n.didClose)},JP=(e,t,n,o,i)=>{Se.swalCloseEventFinishedCallback=cw.bind(null,e,n,o,i);const s=function(r){r.target===t&&(Se.swalCloseEventFinishedCallback(),delete Se.swalCloseEventFinishedCallback,t.removeEventListener("animationend",s),t.removeEventListener("transitionend",s))};t.addEventListener("animationend",s),t.addEventListener("transitionend",s)},bS=(e,t)=>{setTimeout(()=>{typeof t=="function"&&t.bind(e.params)(),Se.eventEmitter.emit("didClose"),e._destroy&&e._destroy()})},xl=e=>{let t=Ct();if(t||new Qn,t=Ct(),!t)return;const n=Ol();SA()?Kn(cc()):YP(t,e),pn(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},YP=(e,t)=>{const n=Cc(),o=Ol();!n||!o||(!t&&Io(Ni())&&(t=Ni()),pn(n),t&&(Kn(t),o.setAttribute("data-button-to-replace",t.className),n.insertBefore(o,t)),tt([e,n],U.loading))},HP=(e,t)=>{t.input==="select"||t.input==="radio"?EP(e,t):["text","email","number","tel","textarea"].some(n=>n===t.input)&&(p0(t.inputValue)||b0(t.inputValue))&&(xl(Ni()),MP(e,t))},xP=(e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return NP(n);case"radio":return FP(n);case"file":return KP(n);default:return t.inputAutoTrim?n.value.trim():n.value}},NP=e=>e.checked?1:0,FP=e=>e.checked?e.value:null,KP=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,EP=(e,t)=>{const n=Ct();if(!n)return;const o=i=>{t.input==="select"?LP(n,zd(i),t):t.input==="radio"&&zP(n,zd(i),t)};p0(t.inputOptions)||b0(t.inputOptions)?(xl(Ni()),ac(t.inputOptions).then(i=>{e.hideLoading(),o(i)})):typeof t.inputOptions=="object"?o(t.inputOptions):sr(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},MP=(e,t)=>{const n=e.getInput();n&&(Kn(n),ac(t.inputValue).then(o=>{n.value=t.input==="number"?`${parseFloat(o)||0}`:`${o}`,pn(n),n.focus(),e.hideLoading()}).catch(o=>{sr(`Error in inputValue promise: ${o}`),n.value="",pn(n),n.focus(),e.hideLoading()}))};function LP(e,t,n){const o=Yg(e,U.select);if(!o)return;const i=(s,r,I)=>{const a=document.createElement("option");a.value=I,Yo(a,r),a.selected=dw(I,n.inputValue),s.appendChild(a)};t.forEach(s=>{const r=s[0],I=s[1];if(Array.isArray(I)){const a=document.createElement("optgroup");a.label=r,a.disabled=!1,o.appendChild(a),I.forEach(c=>i(a,c[1],c[0]))}else i(o,I,r)}),o.focus()}function zP(e,t,n){const o=Yg(e,U.radio);if(!o)return;t.forEach(s=>{const r=s[0],I=s[1],a=document.createElement("input"),c=document.createElement("label");a.type="radio",a.name=U.radio,a.value=r,dw(r,n.inputValue)&&(a.checked=!0);const C=document.createElement("span");Yo(C,I),C.className=U.label,c.appendChild(a),c.appendChild(C),o.appendChild(c)});const i=o.querySelectorAll("input");i.length&&i[0].focus()}const zd=e=>{const t=[];return e instanceof Map?e.forEach((n,o)=>{let i=n;typeof i=="object"&&(i=zd(i)),t.push([o,i])}):Object.keys(e).forEach(n=>{let o=e[n];typeof o=="object"&&(o=zd(o)),t.push([n,o])}),t},dw=(e,t)=>!!t&&t.toString()===e.toString(),TP=e=>{const t=Gt.innerParams.get(e);e.disableButtons(),t.input?uw(e,"confirm"):k0(e,!0)},UP=e=>{const t=Gt.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?uw(e,"deny"):R0(e,!1)},DP=(e,t)=>{e.disableButtons(),t(ql.cancel)},uw=(e,t)=>{const n=Gt.innerParams.get(e);if(!n.input){sr(`The "input" parameter is needed to be set when using returnInputValueOn${h0(t)}`);return}const o=e.getInput(),i=xP(e,n);n.inputValidator?QP(e,i,t):o&&!o.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||o.validationMessage)):t==="deny"?R0(e,i):k0(e,i)},QP=(e,t,n)=>{const o=Gt.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>ac(o.inputValidator(t,o.validationMessage))).then(s=>{e.enableButtons(),e.enableInput(),s?e.showValidationMessage(s):n==="deny"?R0(e,t):k0(e,t)})},R0=(e,t)=>{const n=Gt.innerParams.get(e||void 0);n.showLoaderOnDeny&&xl(rr()),n.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>ac(n.preDeny(t,n.validationMessage))).then(i=>{i===!1?(e.hideLoading(),Ac(e)):e.close({isDenied:!0,value:typeof i>"u"?t:i})}).catch(i=>Aw(e||void 0,i))):e.close({isDenied:!0,value:t})},fS=(e,t)=>{e.close({isConfirmed:!0,value:t})},Aw=(e,t)=>{e.rejectPromise(t)},k0=(e,t)=>{const n=Gt.innerParams.get(e||void 0);n.showLoaderOnConfirm&&xl(),n.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>ac(n.preConfirm(t,n.validationMessage))).then(i=>{Io(GA())||i===!1?(e.hideLoading(),Ac(e)):fS(e,typeof i>"u"?t:i)}).catch(i=>Aw(e||void 0,i))):fS(e,t)};function Td(){const e=Gt.innerParams.get(this);if(!e)return;const t=Gt.domCache.get(this);Kn(t.loader),SA()?e.icon&&pn(cc()):PP(t),Fi([t.popup,t.actions],U.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const PP=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?pn(t[0],"inline-block"):GQ()&&Kn(e.actions)};function mw(){const e=Gt.innerParams.get(this),t=Gt.domCache.get(this);return t?vA(t.popup,e.input):null}function hw(e,t,n){const o=Gt.domCache.get(e);t.forEach(i=>{o[i].disabled=n})}function pw(e,t){const n=Ct();if(!(!n||!e))if(e.type==="radio"){const o=n.querySelectorAll(`[name="${U.radio}"]`);for(let i=0;i<o.length;i++)o[i].disabled=t}else e.disabled=t}function bw(){hw(this,["confirmButton","denyButton","cancelButton"],!1)}function fw(){hw(this,["confirmButton","denyButton","cancelButton"],!0)}function Zw(){pw(this.getInput(),!1)}function yw(){pw(this.getInput(),!0)}function Gw(e){const t=Gt.domCache.get(this),n=Gt.innerParams.get(this);Yo(t.validationMessage,e),t.validationMessage.className=U["validation-message"],n.customClass&&n.customClass.validationMessage&&tt(t.validationMessage,n.customClass.validationMessage),pn(t.validationMessage);const o=this.getInput();o&&(o.setAttribute("aria-invalid","true"),o.setAttribute("aria-describedby",U["validation-message"]),tw(o),tt(o,U.inputerror))}function Bw(){const e=Gt.domCache.get(this);e.validationMessage&&Kn(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),Fi(t,U.inputerror))}const dl={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},jP=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],_P={allowEnterKey:void 0},OP=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Sw=e=>Object.prototype.hasOwnProperty.call(dl,e),vw=e=>jP.indexOf(e)!==-1,Ww=e=>_P[e],qP=e=>{Sw(e)||ho(`Unknown parameter "${e}"`)},$P=e=>{OP.includes(e)&&ho(`The parameter "${e}" is incompatible with toasts`)},ej=e=>{const t=Ww(e);t&&Ok(e,t)},tj=e=>{e.backdrop===!1&&e.allowOutsideClick&&ho('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in e)qP(t),e.toast&&$P(t),ej(t)};function Vw(e){const t=Ct(),n=Gt.innerParams.get(this);if(!t||og(t,n.hideClass.popup)){ho("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const o=nj(e),i=Object.assign({},n,o);gw(this,i),Gt.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const nj=e=>{const t={};return Object.keys(e).forEach(n=>{vw(n)?t[n]=e[n]:ho(`Invalid parameter to update: ${n}`)}),t};function Rw(){const e=Gt.domCache.get(this),t=Gt.innerParams.get(this);if(!t){kw(this);return}e.popup&&Se.swalCloseEventFinishedCallback&&(Se.swalCloseEventFinishedCallback(),delete Se.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),Se.eventEmitter.emit("didDestroy"),oj(this)}const oj=e=>{kw(e),delete e.params,delete Se.keydownHandler,delete Se.keydownTarget,delete Se.currentInstance},kw=e=>{e.isAwaitingPromise?(Ch(Gt,e),e.isAwaitingPromise=!0):(Ch(Hl,e),Ch(Gt,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},Ch=(e,t)=>{for(const n in e)e[n].delete(t)};var ij=Object.freeze({__proto__:null,_destroy:Rw,close:Hg,closeModal:Hg,closePopup:Hg,closeToast:Hg,disableButtons:fw,disableInput:yw,disableLoading:Td,enableButtons:bw,enableInput:Zw,getInput:mw,handleAwaitingPromise:Ac,hideLoading:Td,rejectPromise:Cw,resetValidationMessage:Bw,showValidationMessage:Gw,update:Vw});const gj=(e,t,n)=>{e.toast?sj(e,t,n):(lj(t),aj(t),Ij(e,t,n))},sj=(e,t,n)=>{t.popup.onclick=()=>{e&&(rj(e)||e.timer||e.input)||n(ql.close)}},rj=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let Ud=!1;const lj=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(Ud=!0)}}},aj=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(n){e.popup.onmouseup=()=>{},(n.target===e.popup||n.target instanceof HTMLElement&&e.popup.contains(n.target))&&(Ud=!0)}}},Ij=(e,t,n)=>{t.container.onclick=o=>{if(Ud){Ud=!1;return}o.target===t.container&&yA(e.allowOutsideClick)&&n(ql.backdrop)}},cj=e=>typeof e=="object"&&e.jquery,ZS=e=>e instanceof Element||cj(e),Cj=e=>{const t={};return typeof e[0]=="object"&&!ZS(e[0])?Object.assign(t,e[0]):["title","html","icon"].forEach((n,o)=>{const i=e[o];typeof i=="string"||ZS(i)?t[n]=i:i!==void 0&&sr(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof i}`)}),t};function dj(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new this(...t)}function uj(e){class t extends this{_main(o,i){return super._main(o,Object.assign({},e,i))}}return t}const Aj=()=>Se.timeout&&Se.timeout.getTimerLeft(),ww=()=>{if(Se.timeout)return BQ(),Se.timeout.stop()},Xw=()=>{if(Se.timeout){const e=Se.timeout.start();return v0(e),e}},mj=()=>{const e=Se.timeout;return e&&(e.running?ww():Xw())},hj=e=>{if(Se.timeout){const t=Se.timeout.increase(e);return v0(t,!0),t}},pj=()=>!!(Se.timeout&&Se.timeout.isRunning());let yS=!1;const jp={};function bj(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";jp[e]=this,yS||(document.body.addEventListener("click",fj),yS=!0)}const fj=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const n in jp){const o=t.getAttribute(n);if(o){jp[n].fire({template:o});return}}};class Zj{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,n){const o=this._getHandlersByEventName(t);o.includes(n)||o.push(n)}once(t,n){var o=this;const i=function(){o.removeListener(t,i);for(var s=arguments.length,r=new Array(s),I=0;I<s;I++)r[I]=arguments[I];n.apply(o,r)};this.on(t,i)}emit(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];this._getHandlersByEventName(t).forEach(s=>{try{s.apply(this,o)}catch(r){console.error(r)}})}removeListener(t,n){const o=this._getHandlersByEventName(t),i=o.indexOf(n);i>-1&&o.splice(i,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}}Se.eventEmitter=new Zj;const yj=(e,t)=>{Se.eventEmitter.on(e,t)},Gj=(e,t)=>{Se.eventEmitter.once(e,t)},Bj=(e,t)=>{if(!e){Se.eventEmitter.reset();return}t?Se.eventEmitter.removeListener(e,t):Se.eventEmitter.removeAllListeners(e)};var Sj=Object.freeze({__proto__:null,argsToParams:Cj,bindClickHandler:bj,clickCancel:cP,clickConfirm:sw,clickDeny:IP,enableLoading:xl,fire:dj,getActions:Cc,getCancelButton:_l,getCloseButton:y0,getConfirmButton:Ni,getContainer:po,getDenyButton:rr,getFocusableElements:G0,getFooter:ew,getHtmlContainer:f0,getIcon:cc,getIconContent:pQ,getImage:$k,getInputLabel:bQ,getLoader:Ol,getPopup:Ct,getProgressSteps:Z0,getTimerLeft:Aj,getTimerProgressBar:BA,getTitle:qk,getValidationMessage:GA,increaseTimer:hj,isDeprecatedParameter:Ww,isLoading:ZQ,isTimerRunning:pj,isUpdatableParameter:vw,isValidParameter:Sw,isVisible:aP,mixin:uj,off:Bj,on:yj,once:Gj,resumeTimer:Xw,showLoading:xl,stopTimer:ww,toggleTimer:mj});class vj{constructor(t,n){this.callback=t,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const n=this.running;return n&&this.stop(),this.remaining+=t,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Jw=["swal-title","swal-html","swal-footer"],Wj=e=>{const t=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return Hj(n),Object.assign(Vj(n),Rj(n),kj(n),wj(n),Xj(n),Jj(n),Yj(n,Jw))},Vj=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(o=>{Os(o,["name","value"]);const i=o.getAttribute("name"),s=o.getAttribute("value");!i||!s||(typeof dl[i]=="boolean"?t[i]=s!=="false":typeof dl[i]=="object"?t[i]=JSON.parse(s):t[i]=s)}),t},Rj=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(o=>{const i=o.getAttribute("name"),s=o.getAttribute("value");!i||!s||(t[i]=new Function(`return ${s}`)())}),t},kj=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(o=>{Os(o,["type","color","aria-label"]);const i=o.getAttribute("type");!i||!["confirm","cancel","deny"].includes(i)||(t[`${i}ButtonText`]=o.innerHTML,t[`show${h0(i)}Button`]=!0,o.hasAttribute("color")&&(t[`${i}ButtonColor`]=o.getAttribute("color")),o.hasAttribute("aria-label")&&(t[`${i}ButtonAriaLabel`]=o.getAttribute("aria-label")))}),t},wj=e=>{const t={},n=e.querySelector("swal-image");return n&&(Os(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt")||void 0)),t},Xj=e=>{const t={},n=e.querySelector("swal-icon");return n&&(Os(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},Jj=e=>{const t={},n=e.querySelector("swal-input");n&&(Os(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));const o=Array.from(e.querySelectorAll("swal-input-option"));return o.length&&(t.inputOptions={},o.forEach(i=>{Os(i,["value"]);const s=i.getAttribute("value");if(!s)return;const r=i.innerHTML;t.inputOptions[s]=r})),t},Yj=(e,t)=>{const n={};for(const o in t){const i=t[o],s=e.querySelector(i);s&&(Os(s,[]),n[i.replace(/^swal-/,"")]=s.innerHTML.trim())}return n},Hj=e=>{const t=Jw.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(n=>{const o=n.tagName.toLowerCase();t.includes(o)||ho(`Unrecognized element <${o}>`)})},Os=(e,t)=>{Array.from(e.attributes).forEach(n=>{t.indexOf(n.name)===-1&&ho([`Unrecognized attribute "${n.name}" on <${e.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},Yw=10,xj=e=>{const t=po(),n=Ct();typeof e.willOpen=="function"&&e.willOpen(n),Se.eventEmitter.emit("willOpen",n);const i=window.getComputedStyle(document.body).overflowY;Kj(t,n,e),setTimeout(()=>{Nj(t,n)},Yw),B0()&&(Fj(t,e.scrollbarPadding,i),bP()),!SA()&&!Se.previousActiveElement&&(Se.previousActiveElement=document.activeElement),typeof e.didOpen=="function"&&setTimeout(()=>e.didOpen(n)),Se.eventEmitter.emit("didOpen",n),Fi(t,U["no-transition"])},Dd=e=>{const t=Ct();if(e.target!==t)return;const n=po();t.removeEventListener("animationend",Dd),t.removeEventListener("transitionend",Dd),n.style.overflowY="auto"},Nj=(e,t)=>{ow(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",Dd),t.addEventListener("transitionend",Dd)):e.style.overflowY="auto"},Fj=(e,t,n)=>{fP(),t&&n!=="hidden"&&WP(n),setTimeout(()=>{e.scrollTop=0})},Kj=(e,t,n)=>{tt(e,n.showClass.backdrop),n.animation?(t.style.setProperty("opacity","0","important"),pn(t,"grid"),setTimeout(()=>{tt(t,n.showClass.popup),t.style.removeProperty("opacity")},Yw)):pn(t,"grid"),tt([document.documentElement,document.body],U.shown),n.heightAuto&&n.backdrop&&!n.toast&&tt([document.documentElement,document.body],U["height-auto"])};var GS={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function Ej(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=GS.email),e.input==="url"&&(e.inputValidator=GS.url))}function Mj(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(ho('Target parameter is not valid, defaulting to "body"'),e.target="body")}function Lj(e){Ej(e),e.showLoaderOnConfirm&&!e.preConfirm&&ho(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),Mj(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),XQ(e)}let Wi;var CC=new WeakMap;class jt{constructor(){if(IQ(this,CC,void 0),typeof window>"u")return;Wi=this;for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];const i=Object.freeze(this.constructor.argsToParams(n));this.params=i,this.isAwaitingPromise=!1,cQ(CC,this,this._main(Wi.params))}_main(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(tj(Object.assign({},n,t)),Se.currentInstance){const s=Hl.swalPromiseResolve.get(Se.currentInstance),{isAwaitingPromise:r}=Se.currentInstance;Se.currentInstance._destroy(),r||s({isDismissed:!0}),B0()&&aw()}Se.currentInstance=Wi;const o=Tj(t,n);Lj(o),Object.freeze(o),Se.timeout&&(Se.timeout.stop(),delete Se.timeout),clearTimeout(Se.restoreFocusTimeout);const i=Uj(Wi);return gw(Wi,o),Gt.innerParams.set(Wi,o),zj(Wi,i,o)}then(t){return CS(CC,this).then(t)}finally(t){return CS(CC,this).finally(t)}}const zj=(e,t,n)=>new Promise((o,i)=>{const s=r=>{e.close({isDismissed:!0,dismiss:r})};Hl.swalPromiseResolve.set(e,o),Hl.swalPromiseReject.set(e,i),t.confirmButton.onclick=()=>{TP(e)},t.denyButton.onclick=()=>{UP(e)},t.cancelButton.onclick=()=>{DP(e,s)},t.closeButton.onclick=()=>{s(ql.close)},gj(n,t,s),CP(Se,n,s),HP(e,n),xj(n),Dj(Se,n,s),Qj(t,n),setTimeout(()=>{t.container.scrollTop=0})}),Tj=(e,t)=>{const n=Wj(e),o=Object.assign({},dl,t,n,e);return o.showClass=Object.assign({},dl.showClass,o.showClass),o.hideClass=Object.assign({},dl.hideClass,o.hideClass),o.animation===!1&&(o.showClass={backdrop:"swal2-noanimation"},o.hideClass={}),o},Uj=e=>{const t={popup:Ct(),container:po(),actions:Cc(),confirmButton:Ni(),denyButton:rr(),cancelButton:_l(),loader:Ol(),closeButton:y0(),validationMessage:GA(),progressSteps:Z0()};return Gt.domCache.set(e,t),t},Dj=(e,t,n)=>{const o=BA();Kn(o),t.timer&&(e.timeout=new vj(()=>{n("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(pn(o),Vo(o,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&v0(t.timer)})))},Qj=(e,t)=>{if(!t.toast){if(!yA(t.allowEnterKey)){Ok("allowEnterKey"),_j();return}Pj(e)||jj(e,t)||Pp(-1,1)}},Pj=e=>{const t=e.popup.querySelectorAll("[autofocus]");for(const n of t)if(n instanceof HTMLElement&&Io(n))return n.focus(),!0;return!1},jj=(e,t)=>t.focusDeny&&Io(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&Io(e.cancelButton)?(e.cancelButton.focus(),!0):t.focusConfirm&&Io(e.confirmButton)?(e.confirmButton.focus(),!0):!1,_j=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem("swal-initiation");t?(e.getTime()-Date.parse(t))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const n=document.createElement("audio");n.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",n.loop=!0,document.body.appendChild(n),setTimeout(()=>{n.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${e}`)}jt.prototype.disableButtons=fw;jt.prototype.enableButtons=bw;jt.prototype.getInput=mw;jt.prototype.disableInput=yw;jt.prototype.enableInput=Zw;jt.prototype.hideLoading=Td;jt.prototype.disableLoading=Td;jt.prototype.showValidationMessage=Gw;jt.prototype.resetValidationMessage=Bw;jt.prototype.close=Hg;jt.prototype.closePopup=Hg;jt.prototype.closeModal=Hg;jt.prototype.closeToast=Hg;jt.prototype.rejectPromise=Cw;jt.prototype.update=Vw;jt.prototype._destroy=Rw;Object.assign(jt,Sj);Object.keys(ij).forEach(e=>{jt[e]=function(){return Wi&&Wi[e]?Wi[e](...arguments):null}});jt.DismissReason=ql;jt.version="11.14.3";const Qn=jt;Qn.default=Qn;typeof document<"u"&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch{n.innerText=t}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}');const Oj=Vt.div`
  position: relative;
  width: 100%;
  max-width: 100vw;
  margin: 0 auto;
`;Vt.button`
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background-color: #fff;
  color: #333;
  border: none;
  border-radius: 20px;
  padding: 10px 20px;
  font-size: 20px;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
`;const qj=Vt.canvas`
  display: none; /* Hide canvas by default */
`,$j=Vt.video`
  width: 100%;
  border-radius: 10px;
  @media (max-width: 767px) {
    height: auto;
    object-fit: cover;
    border-radius: 0;
  }
`,e4=Vt.div`
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  border: 2px dashed #ccc;
  border-radius: 10px;
  cursor: pointer;
  position: relative;
`,t4=Vt(Qk)`
  font-size: 50px;
  color: #026d44;
`,n4=Vt.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
`,o4=Vt.div`
  background: white;
  padding: 20px;
  border-radius: 10px;
  text-align: center;
`,i4=Vt.button`
  margin: 10px;
  padding: 10px 20px;
  background-color: #ffb300;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
`,g4=Vt.button`
  margin: 10px;
  padding: 10px 20px;
  background-color: #558b2f;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
`,s4=Vt.button`
  margin: 10px;
  padding: 10px 20px;
  background-color: red;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  &:hover {
    background-color: darkred; /* Change color on hover */
  }
`,r4=Vt.img`
  width: 100%;
  border-radius: 10px;
  @media (max-width: 767px) {
    height: auto;
    object-fit: cover;
    border-radius: 0;
  }
`,$l=({onCapture:e,ModuleName:t})=>{const n=B.useRef(null),o=B.useRef(null),[i,s]=B.useState(null),[r,I]=B.useState(null),[a,c]=B.useState(!1),C=async()=>{try{const v=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}});n.current&&(n.current.srcObject=v),s(v)}catch(v){console.error("Error accessing webcam",v),Qn.fire({icon:"error",title:"ไม่สามารถเข้าถึงเว็บแคมได้ กรุณาตรวจสอบการตั้งค่าและอนุญาตการเข้าถึง",position:"center",showConfirmButton:!0,confirmButtonText:"ตกลง"})}},A=()=>{i&&(i.getTracks().forEach(v=>{v.stop()}),s(null))},m=()=>{if(n.current&&o.current){const v=n.current,f=o.current,G=f.getContext("2d");G&&v.videoWidth&&v.videoHeight&&(f.width=v.videoWidth,f.height=v.videoHeight,G.drawImage(v,0,0,f.width,f.height),f.toBlob(y=>{if(y){const W=new Date().toLocaleString().replace(/[/,:]/g,"-"),V=`image_${t}_${W}.jpg`,X=new File([y],V,{type:"image/jpeg"});I(URL.createObjectURL(y)),A(),e(X)}},"image/jpeg"))}},p=()=>{Qn.fire({icon:"warning",title:"ฟังก์ชันการอัพโหลดภาพยังไม่ได้เปิดใช้งาน",position:"center",showConfirmButton:!0,confirmButtonText:"ตกลง"})},b=()=>{c(!0),C()},Z=()=>{c(!1),A()};return d.jsx(Oj,{children:r?d.jsx(r4,{src:r,alt:"Captured"}):d.jsxs(d.Fragment,{children:[d.jsx(e4,{onClick:b,children:d.jsx(t4,{})}),a&&d.jsx(n4,{children:d.jsxs(o4,{children:[d.jsx($j,{ref:n,autoPlay:!0,muted:!0}),d.jsx(qj,{ref:o}),d.jsx(i4,{onClick:()=>{m(),Z()},children:"ถ่ายรูป"}),d.jsx(g4,{onClick:()=>{p(),Z()},children:"อัพโหลดภาพ"}),d.jsx(s4,{onClick:()=>{Z()},children:"ปิด"})]})})]})})};function l4(){const e=mg({typography:{fontFamily:"Sarabun"}}),[t,n]=B.useState({username:"",password:"",fullName:"",telNumber:"",gender:"",address:"",cardID:"",photoImage:"",checkedOne:!1}),[o,i]=B.useState(!1),[s,r]=B.useState([]),[I,a]=B.useState(!0),[c,C]=B.useState(null),A=void 0,m="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",p=v=>{const{id:f,name:G,value:y,type:W,checked:V}=v.target;n(X=>({...X,[f||G]:W==="checkbox"?V:y}))};B.useEffect(()=>{const{username:v,password:f,fullName:G,telNumber:y,gender:W,address:V,cardID:X,checkedOne:R}=t;i(v&&f&&G&&y&&W&&V&&X&&R)},[t]);const b=async v=>{v.preventDefault()};B.useEffect(()=>{(async()=>{try{a(!0);const f=await Gu(A,m);r(f),a(!1)}catch(f){console.error("Error fetching user data:",f),C(f.message),a(!1)}})()},[A,m]);const Z=v=>{n(f=>({...f,photoImage:v}))};return I?d.jsx("p",{children:"Loading..."}):c?d.jsxs("p",{children:["Error: ",c]}):d.jsxs(or,{theme:e,children:[d.jsx(En,{}),d.jsx(_f,{}),d.jsxs("h1",{children:[" Hello, ",s.username]}),d.jsxs("form",{onSubmit:b,children:[d.jsx("div",{className:"container mx-auto px-4 py-8",children:d.jsxs("div",{className:"flex flex-wrap -mx-2",children:[d.jsx("div",{className:"w-full md:w-1/2 px-2",children:d.jsx(st,{id:"username",label:"ชื่อผู้ใช้",variant:"outlined",className:"w-full bg-white",required:!0,value:t.username,onChange:p})}),d.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4 md:mt-0",children:d.jsx(st,{id:"password",label:"รหัสผ่าน",type:"password",variant:"outlined",className:"w-full bg-white",required:!0,value:t.password,onChange:p})}),d.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:d.jsx(st,{id:"fullName",label:"ชื่อ-นามสกุล",variant:"outlined",className:"w-full bg-white",required:!0,value:t.fullName,onChange:p})}),d.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:d.jsx(st,{id:"telNumber",label:"เบอร์โทร",variant:"outlined",className:"w-full bg-white",required:!0,value:t.telNumber,onChange:p})}),d.jsx("div",{className:"w-full px-2 mt-4",children:d.jsxs(gr,{children:[d.jsx(cA,{children:"เพศ"}),d.jsxs(s0,{row:!0,name:"gender",value:t.gender,onChange:p,children:[d.jsx(Vl,{value:"ชาย",control:d.jsx(Rl,{}),label:"ชาย"}),d.jsx(Vl,{value:"หญิง",control:d.jsx(Rl,{}),label:"หญิง"})]})]})}),d.jsx("div",{className:"w-full px-2 mt-4",children:d.jsx(st,{id:"address",placeholder:"ที่อยู่",multiline:!0,rows:4,className:"w-full bg-white",required:!0,value:t.address,onChange:p})}),d.jsx("div",{className:"w-full px-2 mt-4",children:d.jsx(st,{id:"cardID",label:"หมายเลขบัตรประจำตัวประชาชน",variant:"outlined",className:"w-full bg-white",required:!0,value:t.cardID,onChange:p})}),d.jsx("div",{className:"w-full px-2 mt-4",children:d.jsx($l,{onCapture:Z})})]})}),d.jsxs("div",{className:"container mx-auto px-4 mt-10 mb-5",children:[d.jsx(Pl,{id:"checkedOne",checked:t.checkedOne,onChange:p,required:!0,sx:{"& .MuiSvgIcon-root":{fontSize:30}}}),d.jsxs("span",{children:[d.jsx("strong",{children:"กุ๊ก"}),"ให้ความสำคัญเกี่ยวกับความปลอดภัยข้อมูลของคุณ"," ",d.jsx("span",{className:"text-left leading-loose",children:"และเพื่อให้คุณมั่นใจว่า กุ๊กมีความมุ่งมั่นที่จะให้ความคุ้มครองและดำเนินการด้วยความรับผิดชอบต่อการเก็บรวบรวม ใช้ เปิดเผย และโอนข้อมูลของคุณ กุ๊กจึงขอความยินยอมจากคุณ"})]})]}),d.jsx("div",{className:"container mx-auto px-4",children:d.jsx("button",{type:"submit",disabled:!o,className:`w-full h-12 mb-10 flex justify-center rounded-xl items-center text-white ${o?"bg-green-500":"bg-slate-300"}`,children:"บันทึกข้อมูล"})})]})]})}var dC={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var BS;function Hw(){return BS||(BS=1,function(e,t){(function(n,o){o(t)})(fW,function(n){var o="1.9.4";function i(g){var l,u,h,S;for(u=1,h=arguments.length;u<h;u++){S=arguments[u];for(l in S)g[l]=S[l]}return g}var s=Object.create||function(){function g(){}return function(l){return g.prototype=l,new g}}();function r(g,l){var u=Array.prototype.slice;if(g.bind)return g.bind.apply(g,u.call(arguments,1));var h=u.call(arguments,2);return function(){return g.apply(l,h.length?h.concat(u.call(arguments)):arguments)}}var I=0;function a(g){return"_leaflet_id"in g||(g._leaflet_id=++I),g._leaflet_id}function c(g,l,u){var h,S,w,H;return H=function(){h=!1,S&&(w.apply(u,S),S=!1)},w=function(){h?S=arguments:(g.apply(u,arguments),setTimeout(H,l),h=!0)},w}function C(g,l,u){var h=l[1],S=l[0],w=h-S;return g===h&&u?g:((g-S)%w+w)%w+S}function A(){return!1}function m(g,l){if(l===!1)return g;var u=Math.pow(10,l===void 0?6:l);return Math.round(g*u)/u}function p(g){return g.trim?g.trim():g.replace(/^\s+|\s+$/g,"")}function b(g){return p(g).split(/\s+/)}function Z(g,l){Object.prototype.hasOwnProperty.call(g,"options")||(g.options=g.options?s(g.options):{});for(var u in l)g.options[u]=l[u];return g.options}function v(g,l,u){var h=[];for(var S in g)h.push(encodeURIComponent(u?S.toUpperCase():S)+"="+encodeURIComponent(g[S]));return(!l||l.indexOf("?")===-1?"?":"&")+h.join("&")}var f=/\{ *([\w_ -]+) *\}/g;function G(g,l){return g.replace(f,function(u,h){var S=l[h];if(S===void 0)throw new Error("No value provided for variable "+u);return typeof S=="function"&&(S=S(l)),S})}var y=Array.isArray||function(g){return Object.prototype.toString.call(g)==="[object Array]"};function W(g,l){for(var u=0;u<g.length;u++)if(g[u]===l)return u;return-1}var V="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function X(g){return window["webkit"+g]||window["moz"+g]||window["ms"+g]}var R=0;function k(g){var l=+new Date,u=Math.max(0,16-(l-R));return R=l+u,window.setTimeout(g,u)}var F=window.requestAnimationFrame||X("RequestAnimationFrame")||k,x=window.cancelAnimationFrame||X("CancelAnimationFrame")||X("CancelRequestAnimationFrame")||function(g){window.clearTimeout(g)};function M(g,l,u){if(u&&F===k)g.call(l);else return F.call(window,r(g,l))}function Q(g){g&&x.call(window,g)}var q={__proto__:null,extend:i,create:s,bind:r,get lastId(){return I},stamp:a,throttle:c,wrapNum:C,falseFn:A,formatNum:m,trim:p,splitWords:b,setOptions:Z,getParamString:v,template:G,isArray:y,indexOf:W,emptyImageUrl:V,requestFn:F,cancelFn:x,requestAnimFrame:M,cancelAnimFrame:Q};function j(){}j.extend=function(g){var l=function(){Z(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=l.__super__=this.prototype,h=s(u);h.constructor=l,l.prototype=h;for(var S in this)Object.prototype.hasOwnProperty.call(this,S)&&S!=="prototype"&&S!=="__super__"&&(l[S]=this[S]);return g.statics&&i(l,g.statics),g.includes&&(ne(g.includes),i.apply(null,[h].concat(g.includes))),i(h,g),delete h.statics,delete h.includes,h.options&&(h.options=u.options?s(u.options):{},i(h.options,g.options)),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,H=h._initHooks.length;w<H;w++)h._initHooks[w].call(this)}},l},j.include=function(g){var l=this.prototype.options;return i(this.prototype,g),g.options&&(this.prototype.options=l,this.mergeOptions(g.options)),this},j.mergeOptions=function(g){return i(this.prototype.options,g),this},j.addInitHook=function(g){var l=Array.prototype.slice.call(arguments,1),u=typeof g=="function"?g:function(){this[g].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function ne(g){if(!(typeof L>"u"||!L||!L.Mixin)){g=y(g)?g:[g];for(var l=0;l<g.length;l++)g[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ee={on:function(g,l,u){if(typeof g=="object")for(var h in g)this._on(h,g[h],l);else{g=b(g);for(var S=0,w=g.length;S<w;S++)this._on(g[S],l,u)}return this},off:function(g,l,u){if(!arguments.length)delete this._events;else if(typeof g=="object")for(var h in g)this._off(h,g[h],l);else{g=b(g);for(var S=arguments.length===1,w=0,H=g.length;w<H;w++)S?this._off(g[w]):this._off(g[w],l,u)}return this},_on:function(g,l,u,h){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(g,l,u)===!1){u===this&&(u=void 0);var S={fn:l,ctx:u};h&&(S.once=!0),this._events=this._events||{},this._events[g]=this._events[g]||[],this._events[g].push(S)}},_off:function(g,l,u){var h,S,w;if(this._events&&(h=this._events[g],!!h)){if(arguments.length===1){if(this._firingCount)for(S=0,w=h.length;S<w;S++)h[S].fn=A;delete this._events[g];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var H=this._listens(g,l,u);if(H!==!1){var E=h[H];this._firingCount&&(E.fn=A,this._events[g]=h=h.slice()),h.splice(H,1)}}},fire:function(g,l,u){if(!this.listens(g,u))return this;var h=i({},l,{type:g,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var S=this._events[g];if(S){this._firingCount=this._firingCount+1||1;for(var w=0,H=S.length;w<H;w++){var E=S[w],T=E.fn;E.once&&this.off(g,T,E.ctx),T.call(E.ctx||this,h)}this._firingCount--}}return u&&this._propagateEvent(h),this},listens:function(g,l,u,h){typeof g!="string"&&console.warn('"string" type argument expected');var S=l;typeof l!="function"&&(h=!!l,S=void 0,u=void 0);var w=this._events&&this._events[g];if(w&&w.length&&this._listens(g,S,u)!==!1)return!0;if(h){for(var H in this._eventParents)if(this._eventParents[H].listens(g,l,u,h))return!0}return!1},_listens:function(g,l,u){if(!this._events)return!1;var h=this._events[g]||[];if(!l)return!!h.length;u===this&&(u=void 0);for(var S=0,w=h.length;S<w;S++)if(h[S].fn===l&&h[S].ctx===u)return S;return!1},once:function(g,l,u){if(typeof g=="object")for(var h in g)this._on(h,g[h],l,!0);else{g=b(g);for(var S=0,w=g.length;S<w;S++)this._on(g[S],l,u,!0)}return this},addEventParent:function(g){return this._eventParents=this._eventParents||{},this._eventParents[a(g)]=g,this},removeEventParent:function(g){return this._eventParents&&delete this._eventParents[a(g)],this},_propagateEvent:function(g){for(var l in this._eventParents)this._eventParents[l].fire(g.type,i({layer:g.target,propagatedFrom:g.target},g),!0)}};ee.addEventListener=ee.on,ee.removeEventListener=ee.clearAllEventListeners=ee.off,ee.addOneTimeEventListener=ee.once,ee.fireEvent=ee.fire,ee.hasEventListeners=ee.listens;var te=j.extend(ee);function N(g,l,u){this.x=u?Math.round(g):g,this.y=u?Math.round(l):l}var _=Math.trunc||function(g){return g>0?Math.floor(g):Math.ceil(g)};N.prototype={clone:function(){return new N(this.x,this.y)},add:function(g){return this.clone()._add(P(g))},_add:function(g){return this.x+=g.x,this.y+=g.y,this},subtract:function(g){return this.clone()._subtract(P(g))},_subtract:function(g){return this.x-=g.x,this.y-=g.y,this},divideBy:function(g){return this.clone()._divideBy(g)},_divideBy:function(g){return this.x/=g,this.y/=g,this},multiplyBy:function(g){return this.clone()._multiplyBy(g)},_multiplyBy:function(g){return this.x*=g,this.y*=g,this},scaleBy:function(g){return new N(this.x*g.x,this.y*g.y)},unscaleBy:function(g){return new N(this.x/g.x,this.y/g.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_(this.x),this.y=_(this.y),this},distanceTo:function(g){g=P(g);var l=g.x-this.x,u=g.y-this.y;return Math.sqrt(l*l+u*u)},equals:function(g){return g=P(g),g.x===this.x&&g.y===this.y},contains:function(g){return g=P(g),Math.abs(g.x)<=Math.abs(this.x)&&Math.abs(g.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function P(g,l,u){return g instanceof N?g:y(g)?new N(g[0],g[1]):g==null?g:typeof g=="object"&&"x"in g&&"y"in g?new N(g.x,g.y):new N(g,l,u)}function le(g,l){if(g)for(var u=l?[g,l]:g,h=0,S=u.length;h<S;h++)this.extend(u[h])}le.prototype={extend:function(g){var l,u;if(!g)return this;if(g instanceof N||typeof g[0]=="number"||"x"in g)l=u=P(g);else if(g=ae(g),l=g.min,u=g.max,!l||!u)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=u.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(g){return P((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,g)},getBottomLeft:function(){return P(this.min.x,this.max.y)},getTopRight:function(){return P(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(g){var l,u;return typeof g[0]=="number"||g instanceof N?g=P(g):g=ae(g),g instanceof le?(l=g.min,u=g.max):l=u=g,l.x>=this.min.x&&u.x<=this.max.x&&l.y>=this.min.y&&u.y<=this.max.y},intersects:function(g){g=ae(g);var l=this.min,u=this.max,h=g.min,S=g.max,w=S.x>=l.x&&h.x<=u.x,H=S.y>=l.y&&h.y<=u.y;return w&&H},overlaps:function(g){g=ae(g);var l=this.min,u=this.max,h=g.min,S=g.max,w=S.x>l.x&&h.x<u.x,H=S.y>l.y&&h.y<u.y;return w&&H},isValid:function(){return!!(this.min&&this.max)},pad:function(g){var l=this.min,u=this.max,h=Math.abs(l.x-u.x)*g,S=Math.abs(l.y-u.y)*g;return ae(P(l.x-h,l.y-S),P(u.x+h,u.y+S))},equals:function(g){return g?(g=ae(g),this.min.equals(g.getTopLeft())&&this.max.equals(g.getBottomRight())):!1}};function ae(g,l){return!g||g instanceof le?g:new le(g,l)}function ye(g,l){if(g)for(var u=l?[g,l]:g,h=0,S=u.length;h<S;h++)this.extend(u[h])}ye.prototype={extend:function(g){var l=this._southWest,u=this._northEast,h,S;if(g instanceof ue)h=g,S=g;else if(g instanceof ye){if(h=g._southWest,S=g._northEast,!h||!S)return this}else return g?this.extend(ie(g)||se(g)):this;return!l&&!u?(this._southWest=new ue(h.lat,h.lng),this._northEast=new ue(S.lat,S.lng)):(l.lat=Math.min(h.lat,l.lat),l.lng=Math.min(h.lng,l.lng),u.lat=Math.max(S.lat,u.lat),u.lng=Math.max(S.lng,u.lng)),this},pad:function(g){var l=this._southWest,u=this._northEast,h=Math.abs(l.lat-u.lat)*g,S=Math.abs(l.lng-u.lng)*g;return new ye(new ue(l.lat-h,l.lng-S),new ue(u.lat+h,u.lng+S))},getCenter:function(){return new ue((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ue(this.getNorth(),this.getWest())},getSouthEast:function(){return new ue(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(g){typeof g[0]=="number"||g instanceof ue||"lat"in g?g=ie(g):g=se(g);var l=this._southWest,u=this._northEast,h,S;return g instanceof ye?(h=g.getSouthWest(),S=g.getNorthEast()):h=S=g,h.lat>=l.lat&&S.lat<=u.lat&&h.lng>=l.lng&&S.lng<=u.lng},intersects:function(g){g=se(g);var l=this._southWest,u=this._northEast,h=g.getSouthWest(),S=g.getNorthEast(),w=S.lat>=l.lat&&h.lat<=u.lat,H=S.lng>=l.lng&&h.lng<=u.lng;return w&&H},overlaps:function(g){g=se(g);var l=this._southWest,u=this._northEast,h=g.getSouthWest(),S=g.getNorthEast(),w=S.lat>l.lat&&h.lat<u.lat,H=S.lng>l.lng&&h.lng<u.lng;return w&&H},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(g,l){return g?(g=se(g),this._southWest.equals(g.getSouthWest(),l)&&this._northEast.equals(g.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function se(g,l){return g instanceof ye?g:new ye(g,l)}function ue(g,l,u){if(isNaN(g)||isNaN(l))throw new Error("Invalid LatLng object: ("+g+", "+l+")");this.lat=+g,this.lng=+l,u!==void 0&&(this.alt=+u)}ue.prototype={equals:function(g,l){if(!g)return!1;g=ie(g);var u=Math.max(Math.abs(this.lat-g.lat),Math.abs(this.lng-g.lng));return u<=(l===void 0?1e-9:l)},toString:function(g){return"LatLng("+m(this.lat,g)+", "+m(this.lng,g)+")"},distanceTo:function(g){return Ue.distance(this,ie(g))},wrap:function(){return Ue.wrapLatLng(this)},toBounds:function(g){var l=180*g/40075017,u=l/Math.cos(Math.PI/180*this.lat);return se([this.lat-l,this.lng-u],[this.lat+l,this.lng+u])},clone:function(){return new ue(this.lat,this.lng,this.alt)}};function ie(g,l,u){return g instanceof ue?g:y(g)&&typeof g[0]!="object"?g.length===3?new ue(g[0],g[1],g[2]):g.length===2?new ue(g[0],g[1]):null:g==null?g:typeof g=="object"&&"lat"in g?new ue(g.lat,"lng"in g?g.lng:g.lon,g.alt):l===void 0?null:new ue(g,l,u)}var Je={latLngToPoint:function(g,l){var u=this.projection.project(g),h=this.scale(l);return this.transformation._transform(u,h)},pointToLatLng:function(g,l){var u=this.scale(l),h=this.transformation.untransform(g,u);return this.projection.unproject(h)},project:function(g){return this.projection.project(g)},unproject:function(g){return this.projection.unproject(g)},scale:function(g){return 256*Math.pow(2,g)},zoom:function(g){return Math.log(g/256)/Math.LN2},getProjectedBounds:function(g){if(this.infinite)return null;var l=this.projection.bounds,u=this.scale(g),h=this.transformation.transform(l.min,u),S=this.transformation.transform(l.max,u);return new le(h,S)},infinite:!1,wrapLatLng:function(g){var l=this.wrapLng?C(g.lng,this.wrapLng,!0):g.lng,u=this.wrapLat?C(g.lat,this.wrapLat,!0):g.lat,h=g.alt;return new ue(u,l,h)},wrapLatLngBounds:function(g){var l=g.getCenter(),u=this.wrapLatLng(l),h=l.lat-u.lat,S=l.lng-u.lng;if(h===0&&S===0)return g;var w=g.getSouthWest(),H=g.getNorthEast(),E=new ue(w.lat-h,w.lng-S),T=new ue(H.lat-h,H.lng-S);return new ye(E,T)}},Ue=i({},Je,{wrapLng:[-180,180],R:6371e3,distance:function(g,l){var u=Math.PI/180,h=g.lat*u,S=l.lat*u,w=Math.sin((l.lat-g.lat)*u/2),H=Math.sin((l.lng-g.lng)*u/2),E=w*w+Math.cos(h)*Math.cos(S)*H*H,T=2*Math.atan2(Math.sqrt(E),Math.sqrt(1-E));return this.R*T}}),je=6378137,ft={R:je,MAX_LATITUDE:85.0511287798,project:function(g){var l=Math.PI/180,u=this.MAX_LATITUDE,h=Math.max(Math.min(u,g.lat),-u),S=Math.sin(h*l);return new N(this.R*g.lng*l,this.R*Math.log((1+S)/(1-S))/2)},unproject:function(g){var l=180/Math.PI;return new ue((2*Math.atan(Math.exp(g.y/this.R))-Math.PI/2)*l,g.x*l/this.R)},bounds:function(){var g=je*Math.PI;return new le([-g,-g],[g,g])}()};function Ke(g,l,u,h){if(y(g)){this._a=g[0],this._b=g[1],this._c=g[2],this._d=g[3];return}this._a=g,this._b=l,this._c=u,this._d=h}Ke.prototype={transform:function(g,l){return this._transform(g.clone(),l)},_transform:function(g,l){return l=l||1,g.x=l*(this._a*g.x+this._b),g.y=l*(this._c*g.y+this._d),g},untransform:function(g,l){return l=l||1,new N((g.x/l-this._b)/this._a,(g.y/l-this._d)/this._c)}};function Me(g,l,u,h){return new Ke(g,l,u,h)}var Ye=i({},Ue,{code:"EPSG:3857",projection:ft,transformation:function(){var g=.5/(Math.PI*ft.R);return Me(g,.5,-g,.5)}()}),Re=i({},Ye,{code:"EPSG:900913"});function _e(g){return document.createElementNS("http://www.w3.org/2000/svg",g)}function qn(g,l){var u="",h,S,w,H,E,T;for(h=0,w=g.length;h<w;h++){for(E=g[h],S=0,H=E.length;S<H;S++)T=E[S],u+=(S?"L":"M")+T.x+" "+T.y;u+=l?Y.svg?"z":"x":""}return u||"M0 0"}var an=document.documentElement.style,Bt="ActiveXObject"in window,Ln=Bt&&!document.addEventListener,Zn="msLaunchUri"in navigator&&!("documentMode"in document),rt=xo("webkit"),$n=xo("android"),gn=xo("android 2")||xo("android 3"),At=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),eo=$n&&xo("Google")&&At<537&&!("AudioNode"in window),_t=!!window.opera,In=!Zn&&xo("chrome"),et=xo("gecko")&&!rt&&!_t&&!Bt,Ge=!In&&xo("safari"),Lt=xo("phantom"),cn="OTransition"in an,bi=navigator.platform.indexOf("Win")===0,Ze=Bt&&"transition"in an,nt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!gn,at="MozPerspective"in an,oi=!window.L_DISABLE_3D&&(Ze||nt||at)&&!cn&&!Lt,ii=typeof orientation<"u"||xo("mobile"),yc=ii&&rt,jA=ii&&nt,oa=!window.PointerEvent&&window.MSPointerEvent,rs=!!(window.PointerEvent||oa),ia="ontouchstart"in window||!!window.TouchEvent,ga=!window.L_NO_TOUCH&&(ia||rs),Cr=ii&&_t,sa=ii&&et,_A=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Gc=function(){var g=!1;try{var l=Object.defineProperty({},"passive",{get:function(){g=!0}});window.addEventListener("testPassiveEventSupport",A,l),window.removeEventListener("testPassiveEventSupport",A,l)}catch{}return g}(),OA=function(){return!!document.createElement("canvas").getContext}(),dr=!!(document.createElementNS&&_e("svg").createSVGRect),ur=!!dr&&function(){var g=document.createElement("div");return g.innerHTML="<svg/>",(g.firstChild&&g.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ar=!dr&&function(){try{var g=document.createElement("div");g.innerHTML='<v:shape adj="1"/>';var l=g.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Bc=navigator.platform.indexOf("Mac")===0,qA=navigator.platform.indexOf("Linux")===0;function xo(g){return navigator.userAgent.toLowerCase().indexOf(g)>=0}var Y={ie:Bt,ielt9:Ln,edge:Zn,webkit:rt,android:$n,android23:gn,androidStock:eo,opera:_t,chrome:In,gecko:et,safari:Ge,phantom:Lt,opera12:cn,win:bi,ie3d:Ze,webkit3d:nt,gecko3d:at,any3d:oi,mobile:ii,mobileWebkit:yc,mobileWebkit3d:jA,msPointer:oa,pointer:rs,touch:ga,touchNative:ia,mobileOpera:Cr,mobileGecko:sa,retina:_A,passiveEvents:Gc,canvas:OA,svg:dr,vml:Ar,inlineSvg:ur,mac:Bc,linux:qA},K=Y.msPointer?"MSPointerDown":"pointerdown",z=Y.msPointer?"MSPointerMove":"pointermove",O=Y.msPointer?"MSPointerUp":"pointerup",ce=Y.msPointer?"MSPointerCancel":"pointercancel",be={touchstart:K,touchmove:z,touchend:O,touchcancel:ce},Ve={touchstart:Ft,touchmove:wt,touchend:wt,touchcancel:wt},ge={},Be=!1;function he(g,l,u){return l==="touchstart"&&Pe(),Ve[l]?(u=Ve[l].bind(this,u),g.addEventListener(be[l],u,!1),u):(console.warn("wrong event specified:",l),A)}function pe(g,l,u){if(!be[l]){console.warn("wrong event specified:",l);return}g.removeEventListener(be[l],u,!1)}function qe(g){ge[g.pointerId]=g}function ot(g){ge[g.pointerId]&&(ge[g.pointerId]=g)}function mt(g){delete ge[g.pointerId]}function Pe(){Be||(document.addEventListener(K,qe,!0),document.addEventListener(z,ot,!0),document.addEventListener(O,mt,!0),document.addEventListener(ce,mt,!0),Be=!0)}function wt(g,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var u in ge)l.touches.push(ge[u]);l.changedTouches=[l],g(l)}}function Ft(g,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&yn(l),wt(g,l)}function ls(g){var l={},u,h;for(h in g)u=g[h],l[h]=u&&u.bind?u.bind(g):u;return g=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var gi=200;function hg(g,l){g.addEventListener("dblclick",l);var u=0,h;function S(w){if(w.detail!==1){h=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var H=RZ(w);if(!(H.some(function(T){return T instanceof HTMLLabelElement&&T.attributes.for})&&!H.some(function(T){return T instanceof HTMLInputElement||T instanceof HTMLSelectElement}))){var E=Date.now();E-u<=gi?(h++,h===2&&l(ls(w))):h=1,u=E}}}return g.addEventListener("click",S),{dblclick:l,simDblclick:S}}function fi(g,l){g.removeEventListener("dblclick",l.dblclick),g.removeEventListener("click",l.simDblclick)}var pg=vc(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),zn=vc(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),as=zn==="webkitTransition"||zn==="OTransition"?zn+"End":"transitionend";function Is(g){return typeof g=="string"?document.getElementById(g):g}function Zi(g,l){var u=g.style[l]||g.currentStyle&&g.currentStyle[l];if((!u||u==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(g,null);u=h?h[l]:null}return u==="auto"?null:u}function re(g,l,u){var h=document.createElement(g);return h.className=l||"",u&&u.appendChild(h),h}function ke(g){var l=g.parentNode;l&&l.removeChild(g)}function Cn(g){for(;g.firstChild;)g.removeChild(g.firstChild)}function It(g){var l=g.parentNode;l&&l.lastChild!==g&&l.appendChild(g)}function Rn(g){var l=g.parentNode;l&&l.firstChild!==g&&l.insertBefore(g,l.firstChild)}function mr(g,l){if(g.classList!==void 0)return g.classList.contains(l);var u=Sc(g);return u.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(u)}function He(g,l){if(g.classList!==void 0)for(var u=b(l),h=0,S=u.length;h<S;h++)g.classList.add(u[h]);else if(!mr(g,l)){var w=Sc(g);$A(g,(w?w+" ":"")+l)}}function zt(g,l){g.classList!==void 0?g.classList.remove(l):$A(g,p((" "+Sc(g)+" ").replace(" "+l+" "," ")))}function $A(g,l){g.className.baseVal===void 0?g.className=l:g.className.baseVal=l}function Sc(g){return g.correspondingElement&&(g=g.correspondingElement),g.className.baseVal===void 0?g.className:g.className.baseVal}function No(g,l){"opacity"in g.style?g.style.opacity=l:"filter"in g.style&&AY(g,l)}function AY(g,l){var u=!1,h="DXImageTransform.Microsoft.Alpha";try{u=g.filters.item(h)}catch{if(l===1)return}l=Math.round(l*100),u?(u.Enabled=l!==100,u.Opacity=l):g.style.filter+=" progid:"+h+"(opacity="+l+")"}function vc(g){for(var l=document.documentElement.style,u=0;u<g.length;u++)if(g[u]in l)return g[u];return!1}function cs(g,l,u){var h=l||new N(0,0);g.style[pg]=(Y.ie3d?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(u?" scale("+u+")":"")}function Ot(g,l){g._leaflet_pos=l,Y.any3d?cs(g,l):(g.style.left=l.x+"px",g.style.top=l.y+"px")}function Cs(g){return g._leaflet_pos||new N(0,0)}var ra,la,em;if("onselectstart"in document)ra=function(){xe(window,"selectstart",yn)},la=function(){Zt(window,"selectstart",yn)};else{var aa=vc(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ra=function(){if(aa){var g=document.documentElement.style;em=g[aa],g[aa]="none"}},la=function(){aa&&(document.documentElement.style[aa]=em,em=void 0)}}function tm(){xe(window,"dragstart",yn)}function nm(){Zt(window,"dragstart",yn)}var Wc,om;function im(g){for(;g.tabIndex===-1;)g=g.parentNode;g.style&&(Vc(),Wc=g,om=g.style.outlineStyle,g.style.outlineStyle="none",xe(window,"keydown",Vc))}function Vc(){Wc&&(Wc.style.outlineStyle=om,Wc=void 0,om=void 0,Zt(window,"keydown",Vc))}function WZ(g){do g=g.parentNode;while((!g.offsetWidth||!g.offsetHeight)&&g!==document.body);return g}function gm(g){var l=g.getBoundingClientRect();return{x:l.width/g.offsetWidth||1,y:l.height/g.offsetHeight||1,boundingClientRect:l}}var mY={__proto__:null,TRANSFORM:pg,TRANSITION:zn,TRANSITION_END:as,get:Is,getStyle:Zi,create:re,remove:ke,empty:Cn,toFront:It,toBack:Rn,hasClass:mr,addClass:He,removeClass:zt,setClass:$A,getClass:Sc,setOpacity:No,testProp:vc,setTransform:cs,setPosition:Ot,getPosition:Cs,get disableTextSelection(){return ra},get enableTextSelection(){return la},disableImageDrag:tm,enableImageDrag:nm,preventOutline:im,restoreOutline:Vc,getSizedParentNode:WZ,getScale:gm};function xe(g,l,u,h){if(l&&typeof l=="object")for(var S in l)rm(g,S,l[S],u);else{l=b(l);for(var w=0,H=l.length;w<H;w++)rm(g,l[w],u,h)}return this}var yi="_leaflet_events";function Zt(g,l,u,h){if(arguments.length===1)VZ(g),delete g[yi];else if(l&&typeof l=="object")for(var S in l)lm(g,S,l[S],u);else if(l=b(l),arguments.length===2)VZ(g,function(E){return W(l,E)!==-1});else for(var w=0,H=l.length;w<H;w++)lm(g,l[w],u,h);return this}function VZ(g,l){for(var u in g[yi]){var h=u.split(/\d/)[0];(!l||l(h))&&lm(g,h,null,null,u)}}var sm={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function rm(g,l,u,h){var S=l+a(u)+(h?"_"+a(h):"");if(g[yi]&&g[yi][S])return this;var w=function(E){return u.call(h||g,E||window.event)},H=w;!Y.touchNative&&Y.pointer&&l.indexOf("touch")===0?w=he(g,l,w):Y.touch&&l==="dblclick"?w=hg(g,w):"addEventListener"in g?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?g.addEventListener(sm[l]||l,w,Y.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(w=function(E){E=E||window.event,Im(g,E)&&H(E)},g.addEventListener(sm[l],w,!1)):g.addEventListener(l,H,!1):g.attachEvent("on"+l,w),g[yi]=g[yi]||{},g[yi][S]=w}function lm(g,l,u,h,S){S=S||l+a(u)+(h?"_"+a(h):"");var w=g[yi]&&g[yi][S];if(!w)return this;!Y.touchNative&&Y.pointer&&l.indexOf("touch")===0?pe(g,l,w):Y.touch&&l==="dblclick"?fi(g,w):"removeEventListener"in g?g.removeEventListener(sm[l]||l,w,!1):g.detachEvent("on"+l,w),g[yi][S]=null}function ds(g){return g.stopPropagation?g.stopPropagation():g.originalEvent?g.originalEvent._stopped=!0:g.cancelBubble=!0,this}function am(g){return rm(g,"wheel",ds),this}function Ia(g){return xe(g,"mousedown touchstart dblclick contextmenu",ds),g._leaflet_disable_click=!0,this}function yn(g){return g.preventDefault?g.preventDefault():g.returnValue=!1,this}function us(g){return yn(g),ds(g),this}function RZ(g){if(g.composedPath)return g.composedPath();for(var l=[],u=g.target;u;)l.push(u),u=u.parentNode;return l}function kZ(g,l){if(!l)return new N(g.clientX,g.clientY);var u=gm(l),h=u.boundingClientRect;return new N((g.clientX-h.left)/u.x-l.clientLeft,(g.clientY-h.top)/u.y-l.clientTop)}var hY=Y.linux&&Y.chrome?window.devicePixelRatio:Y.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function wZ(g){return Y.edge?g.wheelDeltaY/2:g.deltaY&&g.deltaMode===0?-g.deltaY/hY:g.deltaY&&g.deltaMode===1?-g.deltaY*20:g.deltaY&&g.deltaMode===2?-g.deltaY*60:g.deltaX||g.deltaZ?0:g.wheelDelta?(g.wheelDeltaY||g.wheelDelta)/2:g.detail&&Math.abs(g.detail)<32765?-g.detail*20:g.detail?g.detail/-32765*60:0}function Im(g,l){var u=l.relatedTarget;if(!u)return!0;try{for(;u&&u!==g;)u=u.parentNode}catch{return!1}return u!==g}var pY={__proto__:null,on:xe,off:Zt,stopPropagation:ds,disableScrollPropagation:am,disableClickPropagation:Ia,preventDefault:yn,stop:us,getPropagationPath:RZ,getMousePosition:kZ,getWheelDelta:wZ,isExternalTarget:Im,addListener:xe,removeListener:Zt},XZ=te.extend({run:function(g,l,u,h){this.stop(),this._el=g,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=Cs(g),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(g){var l=+new Date-this._startTime,u=this._duration*1e3;l<u?this._runFrame(this._easeOut(l/u),g):(this._runFrame(1),this._complete())},_runFrame:function(g,l){var u=this._startPos.add(this._offset.multiplyBy(g));l&&u._round(),Ot(this._el,u),this.fire("step")},_complete:function(){Q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(g){return 1-Math.pow(1-g,this._easeOutPower)}}),Oe=te.extend({options:{crs:Ye,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(g,l){l=Z(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(g),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ie(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=zn&&Y.any3d&&!Y.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),xe(this._proxy,as,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(g,l,u){if(l=l===void 0?this._zoom:this._limitZoom(l),g=this._limitCenter(ie(g),l,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=i({animate:u.animate},u.zoom),u.pan=i({animate:u.animate,duration:u.duration},u.pan));var h=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(g,l,u.zoom):this._tryAnimatedPan(g,u.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(g,l,u.pan&&u.pan.noMoveStart),this},setZoom:function(g,l){return this._loaded?this.setView(this.getCenter(),g,{zoom:l}):(this._zoom=g,this)},zoomIn:function(g,l){return g=g||(Y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+g,l)},zoomOut:function(g,l){return g=g||(Y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-g,l)},setZoomAround:function(g,l,u){var h=this.getZoomScale(l),S=this.getSize().divideBy(2),w=g instanceof N?g:this.latLngToContainerPoint(g),H=w.subtract(S).multiplyBy(1-1/h),E=this.containerPointToLatLng(S.add(H));return this.setView(E,l,{zoom:u})},_getBoundsCenterZoom:function(g,l){l=l||{},g=g.getBounds?g.getBounds():se(g);var u=P(l.paddingTopLeft||l.padding||[0,0]),h=P(l.paddingBottomRight||l.padding||[0,0]),S=this.getBoundsZoom(g,!1,u.add(h));if(S=typeof l.maxZoom=="number"?Math.min(l.maxZoom,S):S,S===1/0)return{center:g.getCenter(),zoom:S};var w=h.subtract(u).divideBy(2),H=this.project(g.getSouthWest(),S),E=this.project(g.getNorthEast(),S),T=this.unproject(H.add(E).divideBy(2).add(w),S);return{center:T,zoom:S}},fitBounds:function(g,l){if(g=se(g),!g.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(g,l);return this.setView(u.center,u.zoom,l)},fitWorld:function(g){return this.fitBounds([[-90,-180],[90,180]],g)},panTo:function(g,l){return this.setView(g,this._zoom,{pan:l})},panBy:function(g,l){if(g=P(g).round(),l=l||{},!g.x&&!g.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(g))return this._resetView(this.unproject(this.project(this.getCenter()).add(g)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new XZ,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){He(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(g).round();this._panAnim.run(this._mapPane,u,l.duration||.25,l.easeLinearity)}else this._rawPanBy(g),this.fire("move").fire("moveend");return this},flyTo:function(g,l,u){if(u=u||{},u.animate===!1||!Y.any3d)return this.setView(g,l,u);this._stop();var h=this.project(this.getCenter()),S=this.project(g),w=this.getSize(),H=this._zoom;g=ie(g),l=l===void 0?H:l;var E=Math.max(w.x,w.y),T=E*this.getZoomScale(H,l),$=S.distanceTo(h)||1,Ce=1.42,We=Ce*Ce;function De(qt){var Ec=qt?-1:1,s1=qt?T:E,r1=T*T-E*E+Ec*We*We*$*$,l1=2*s1*We*$,Zm=r1/l1,Cy=Math.sqrt(Zm*Zm+1)-Zm,a1=Cy<1e-9?-18:Math.log(Cy);return a1}function Tn(qt){return(Math.exp(qt)-Math.exp(-qt))/2}function dn(qt){return(Math.exp(qt)+Math.exp(-qt))/2}function Ko(qt){return Tn(qt)/dn(qt)}var to=De(0);function yr(qt){return E*(dn(to)/dn(to+Ce*qt))}function n1(qt){return E*(dn(to)*Ko(to+Ce*qt)-Tn(to))/We}function o1(qt){return 1-Math.pow(1-qt,1.5)}var i1=Date.now(),Iy=(De(1)-to)/Ce,g1=u.duration?1e3*u.duration:1e3*Iy*.8;function cy(){var qt=(Date.now()-i1)/g1,Ec=o1(qt)*Iy;qt<=1?(this._flyToFrame=M(cy,this),this._move(this.unproject(h.add(S.subtract(h).multiplyBy(n1(Ec)/$)),H),this.getScaleZoom(E/yr(Ec),H),{flyTo:!0})):this._move(g,l)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),cy.call(this),this},flyToBounds:function(g,l){var u=this._getBoundsCenterZoom(g,l);return this.flyTo(u.center,u.zoom,l)},setMaxBounds:function(g){return g=se(g),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),g.isValid()?(this.options.maxBounds=g,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(g){var l=this.options.minZoom;return this.options.minZoom=g,this._loaded&&l!==g&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(g):this},setMaxZoom:function(g){var l=this.options.maxZoom;return this.options.maxZoom=g,this._loaded&&l!==g&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(g):this},panInsideBounds:function(g,l){this._enforcingBounds=!0;var u=this.getCenter(),h=this._limitCenter(u,this._zoom,se(g));return u.equals(h)||this.panTo(h,l),this._enforcingBounds=!1,this},panInside:function(g,l){l=l||{};var u=P(l.paddingTopLeft||l.padding||[0,0]),h=P(l.paddingBottomRight||l.padding||[0,0]),S=this.project(this.getCenter()),w=this.project(g),H=this.getPixelBounds(),E=ae([H.min.add(u),H.max.subtract(h)]),T=E.getSize();if(!E.contains(w)){this._enforcingBounds=!0;var $=w.subtract(E.getCenter()),Ce=E.extend(w).getSize().subtract(T);S.x+=$.x<0?-Ce.x:Ce.x,S.y+=$.y<0?-Ce.y:Ce.y,this.panTo(this.unproject(S),l),this._enforcingBounds=!1}return this},invalidateSize:function(g){if(!this._loaded)return this;g=i({animate:!1,pan:!0},g===!0?{animate:!0}:g);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),h=l.divideBy(2).round(),S=u.divideBy(2).round(),w=h.subtract(S);return!w.x&&!w.y?this:(g.animate&&g.pan?this.panBy(w):(g.pan&&this._rawPanBy(w),this.fire("move"),g.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(g){if(g=this._locateOptions=i({timeout:1e4,watch:!1},g),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=r(this._handleGeolocationResponse,this),u=r(this._handleGeolocationError,this);return g.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,u,g):navigator.geolocation.getCurrentPosition(l,u,g),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(g){if(this._container._leaflet_id){var l=g.code,u=g.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(g){if(this._container._leaflet_id){var l=g.coords.latitude,u=g.coords.longitude,h=new ue(l,u),S=h.toBounds(g.coords.accuracy*2),w=this._locateOptions;if(w.setView){var H=this.getBoundsZoom(S);this.setView(h,w.maxZoom?Math.min(H,w.maxZoom):H)}var E={latlng:h,bounds:S,timestamp:g.timestamp};for(var T in g.coords)typeof g.coords[T]=="number"&&(E[T]=g.coords[T]);this.fire("locationfound",E)}},addHandler:function(g,l){if(!l)return this;var u=this[g]=new l(this);return this._handlers.push(u),this.options[g]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ke(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var g;for(g in this._layers)this._layers[g].remove();for(g in this._panes)ke(this._panes[g]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(g,l){var u="leaflet-pane"+(g?" leaflet-"+g.replace("Pane","")+"-pane":""),h=re("div",u,l||this._mapPane);return g&&(this._panes[g]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var g=this.getPixelBounds(),l=this.unproject(g.getBottomLeft()),u=this.unproject(g.getTopRight());return new ye(l,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(g,l,u){g=se(g),u=P(u||[0,0]);var h=this.getZoom()||0,S=this.getMinZoom(),w=this.getMaxZoom(),H=g.getNorthWest(),E=g.getSouthEast(),T=this.getSize().subtract(u),$=ae(this.project(E,h),this.project(H,h)).getSize(),Ce=Y.any3d?this.options.zoomSnap:1,We=T.x/$.x,De=T.y/$.y,Tn=l?Math.max(We,De):Math.min(We,De);return h=this.getScaleZoom(Tn,h),Ce&&(h=Math.round(h/(Ce/100))*(Ce/100),h=l?Math.ceil(h/Ce)*Ce:Math.floor(h/Ce)*Ce),Math.max(S,Math.min(w,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new N(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(g,l){var u=this._getTopLeftPoint(g,l);return new le(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(g){return this.options.crs.getProjectedBounds(g===void 0?this.getZoom():g)},getPane:function(g){return typeof g=="string"?this._panes[g]:g},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(g,l){var u=this.options.crs;return l=l===void 0?this._zoom:l,u.scale(g)/u.scale(l)},getScaleZoom:function(g,l){var u=this.options.crs;l=l===void 0?this._zoom:l;var h=u.zoom(g*u.scale(l));return isNaN(h)?1/0:h},project:function(g,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ie(g),l)},unproject:function(g,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(P(g),l)},layerPointToLatLng:function(g){var l=P(g).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(g){var l=this.project(ie(g))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(g){return this.options.crs.wrapLatLng(ie(g))},wrapLatLngBounds:function(g){return this.options.crs.wrapLatLngBounds(se(g))},distance:function(g,l){return this.options.crs.distance(ie(g),ie(l))},containerPointToLayerPoint:function(g){return P(g).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(g){return P(g).add(this._getMapPanePos())},containerPointToLatLng:function(g){var l=this.containerPointToLayerPoint(P(g));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(g){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ie(g)))},mouseEventToContainerPoint:function(g){return kZ(g,this._container)},mouseEventToLayerPoint:function(g){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(g))},mouseEventToLatLng:function(g){return this.layerPointToLatLng(this.mouseEventToLayerPoint(g))},_initContainer:function(g){var l=this._container=Is(g);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");xe(l,"scroll",this._onScroll,this),this._containerId=a(l)},_initLayout:function(){var g=this._container;this._fadeAnimated=this.options.fadeAnimation&&Y.any3d,He(g,"leaflet-container"+(Y.touch?" leaflet-touch":"")+(Y.retina?" leaflet-retina":"")+(Y.ielt9?" leaflet-oldie":"")+(Y.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Zi(g,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(g.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var g=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ot(this._mapPane,new N(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(He(g.markerPane,"leaflet-zoom-hide"),He(g.shadowPane,"leaflet-zoom-hide"))},_resetView:function(g,l,u){Ot(this._mapPane,new N(0,0));var h=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var S=this._zoom!==l;this._moveStart(S,u)._move(g,l)._moveEnd(S),this.fire("viewreset"),h&&this.fire("load")},_moveStart:function(g,l){return g&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(g,l,u,h){l===void 0&&(l=this._zoom);var S=this._zoom!==l;return this._zoom=l,this._lastCenter=g,this._pixelOrigin=this._getNewPixelOrigin(g),h?u&&u.pinch&&this.fire("zoom",u):((S||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(g){return g&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(g){Ot(this._mapPane,this._getMapPanePos().subtract(g))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(g){this._targets={},this._targets[a(this._container)]=this;var l=g?Zt:xe;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),Y.any3d&&this.options.transform3DLimit&&(g?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Q(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var g=this._getMapPanePos();Math.max(Math.abs(g.x),Math.abs(g.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(g,l){for(var u=[],h,S=l==="mouseout"||l==="mouseover",w=g.target||g.srcElement,H=!1;w;){if(h=this._targets[a(w)],h&&(l==="click"||l==="preclick")&&this._draggableMoved(h)){H=!0;break}if(h&&h.listens(l,!0)&&(S&&!Im(w,g)||(u.push(h),S))||w===this._container)break;w=w.parentNode}return!u.length&&!H&&!S&&this.listens(l,!0)&&(u=[this]),u},_isClickDisabled:function(g){for(;g&&g!==this._container;){if(g._leaflet_disable_click)return!0;g=g.parentNode}},_handleDOMEvent:function(g){var l=g.target||g.srcElement;if(!(!this._loaded||l._leaflet_disable_events||g.type==="click"&&this._isClickDisabled(l))){var u=g.type;u==="mousedown"&&im(l),this._fireDOMEvent(g,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(g,l,u){if(g.type==="click"){var h=i({},g);h.type="preclick",this._fireDOMEvent(h,h.type,u)}var S=this._findEventTargets(g,l);if(u){for(var w=[],H=0;H<u.length;H++)u[H].listens(l,!0)&&w.push(u[H]);S=w.concat(S)}if(S.length){l==="contextmenu"&&yn(g);var E=S[0],T={originalEvent:g};if(g.type!=="keypress"&&g.type!=="keydown"&&g.type!=="keyup"){var $=E.getLatLng&&(!E._radius||E._radius<=10);T.containerPoint=$?this.latLngToContainerPoint(E.getLatLng()):this.mouseEventToContainerPoint(g),T.layerPoint=this.containerPointToLayerPoint(T.containerPoint),T.latlng=$?E.getLatLng():this.layerPointToLatLng(T.layerPoint)}for(H=0;H<S.length;H++)if(S[H].fire(l,T,!0),T.originalEvent._stopped||S[H].options.bubblingMouseEvents===!1&&W(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(g){return g=g.dragging&&g.dragging.enabled()?g:this,g.dragging&&g.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var g=0,l=this._handlers.length;g<l;g++)this._handlers[g].disable()},whenReady:function(g,l){return this._loaded?g.call(l||this,{target:this}):this.on("load",g,l),this},_getMapPanePos:function(){return Cs(this._mapPane)||new N(0,0)},_moved:function(){var g=this._getMapPanePos();return g&&!g.equals([0,0])},_getTopLeftPoint:function(g,l){var u=g&&l!==void 0?this._getNewPixelOrigin(g,l):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(g,l){var u=this.getSize()._divideBy(2);return this.project(g,l)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(g,l,u){var h=this._getNewPixelOrigin(u,l);return this.project(g,l)._subtract(h)},_latLngBoundsToNewLayerBounds:function(g,l,u){var h=this._getNewPixelOrigin(u,l);return ae([this.project(g.getSouthWest(),l)._subtract(h),this.project(g.getNorthWest(),l)._subtract(h),this.project(g.getSouthEast(),l)._subtract(h),this.project(g.getNorthEast(),l)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(g){return this.latLngToLayerPoint(g).subtract(this._getCenterLayerPoint())},_limitCenter:function(g,l,u){if(!u)return g;var h=this.project(g,l),S=this.getSize().divideBy(2),w=new le(h.subtract(S),h.add(S)),H=this._getBoundsOffset(w,u,l);return Math.abs(H.x)<=1&&Math.abs(H.y)<=1?g:this.unproject(h.add(H),l)},_limitOffset:function(g,l){if(!l)return g;var u=this.getPixelBounds(),h=new le(u.min.add(g),u.max.add(g));return g.add(this._getBoundsOffset(h,l))},_getBoundsOffset:function(g,l,u){var h=ae(this.project(l.getNorthEast(),u),this.project(l.getSouthWest(),u)),S=h.min.subtract(g.min),w=h.max.subtract(g.max),H=this._rebound(S.x,-w.x),E=this._rebound(S.y,-w.y);return new N(H,E)},_rebound:function(g,l){return g+l>0?Math.round(g-l)/2:Math.max(0,Math.ceil(g))-Math.max(0,Math.floor(l))},_limitZoom:function(g){var l=this.getMinZoom(),u=this.getMaxZoom(),h=Y.any3d?this.options.zoomSnap:1;return h&&(g=Math.round(g/h)*h),Math.max(l,Math.min(u,g))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){zt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(g,l){var u=this._getCenterOffset(g)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,l),!0)},_createAnimProxy:function(){var g=this._proxy=re("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(g),this.on("zoomanim",function(l){var u=pg,h=this._proxy.style[u];cs(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),h===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ke(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var g=this.getCenter(),l=this.getZoom();cs(this._proxy,this.project(g,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(g){this._animatingZoom&&g.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(g,l,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(l),S=this._getCenterOffset(g)._divideBy(1-1/h);return u.animate!==!0&&!this.getSize().contains(S)?!1:(M(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(g,l,!0)},this),!0)},_animateZoom:function(g,l,u,h){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=g,this._animateToZoom=l,He(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:g,zoom:l,noUpdate:h}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&zt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function bY(g,l){return new Oe(g,l)}var si=j.extend({options:{position:"topright"},initialize:function(g){Z(this,g)},getPosition:function(){return this.options.position},setPosition:function(g){var l=this._map;return l&&l.removeControl(this),this.options.position=g,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(g){this.remove(),this._map=g;var l=this._container=this.onAdd(g),u=this.getPosition(),h=g._controlCorners[u];return He(l,"leaflet-control"),u.indexOf("bottom")!==-1?h.insertBefore(l,h.firstChild):h.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ke(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(g){this._map&&g&&g.screenX>0&&g.screenY>0&&this._map.getContainer().focus()}}),ca=function(g){return new si(g)};Oe.include({addControl:function(g){return g.addTo(this),this},removeControl:function(g){return g.remove(),this},_initControlPos:function(){var g=this._controlCorners={},l="leaflet-",u=this._controlContainer=re("div",l+"control-container",this._container);function h(S,w){var H=l+S+" "+l+w;g[S+w]=re("div",H,u)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var g in this._controlCorners)ke(this._controlCorners[g]);ke(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var JZ=si.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(g,l,u,h){return u<h?-1:h<u?1:0}},initialize:function(g,l,u){Z(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var h in g)this._addLayer(g[h],h);for(h in l)this._addLayer(l[h],h,!0)},onAdd:function(g){this._initLayout(),this._update(),this._map=g,g.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(g){return si.prototype.addTo.call(this,g),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var g=0;g<this._layers.length;g++)this._layers[g].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(g,l){return this._addLayer(g,l),this._map?this._update():this},addOverlay:function(g,l){return this._addLayer(g,l,!0),this._map?this._update():this},removeLayer:function(g){g.off("add remove",this._onLayerChange,this);var l=this._getLayer(a(g));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){He(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var g=this._map.getSize().y-(this._container.offsetTop+50);return g<this._section.clientHeight?(He(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=g+"px"):zt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return zt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var g="leaflet-control-layers",l=this._container=re("div",g),u=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Ia(l),am(l);var h=this._section=re("section",g+"-list");u&&(this._map.on("click",this.collapse,this),xe(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var S=this._layersLink=re("a",g+"-toggle",l);S.href="#",S.title="Layers",S.setAttribute("role","button"),xe(S,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){yn(w),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=re("div",g+"-base",h),this._separator=re("div",g+"-separator",h),this._overlaysList=re("div",g+"-overlays",h),l.appendChild(h)},_getLayer:function(g){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&a(this._layers[l].layer)===g)return this._layers[l]},_addLayer:function(g,l,u){this._map&&g.on("add remove",this._onLayerChange,this),this._layers.push({layer:g,name:l,overlay:u}),this.options.sortLayers&&this._layers.sort(r(function(h,S){return this.options.sortFunction(h.layer,S.layer,h.name,S.name)},this)),this.options.autoZIndex&&g.setZIndex&&(this._lastZIndex++,g.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Cn(this._baseLayersList),Cn(this._overlaysList),this._layerControlInputs=[];var g,l,u,h,S=0;for(u=0;u<this._layers.length;u++)h=this._layers[u],this._addItem(h),l=l||h.overlay,g=g||!h.overlay,S+=h.overlay?0:1;return this.options.hideSingleBase&&(g=g&&S>1,this._baseLayersList.style.display=g?"":"none"),this._separator.style.display=l&&g?"":"none",this},_onLayerChange:function(g){this._handlingClick||this._update();var l=this._getLayer(a(g.target)),u=l.overlay?g.type==="add"?"overlayadd":"overlayremove":g.type==="add"?"baselayerchange":null;u&&this._map.fire(u,l)},_createRadioElement:function(g,l){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+g+'"'+(l?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=u,h.firstChild},_addItem:function(g){var l=document.createElement("label"),u=this._map.hasLayer(g.layer),h;g.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=u):h=this._createRadioElement("leaflet-base-layers_"+a(this),u),this._layerControlInputs.push(h),h.layerId=a(g.layer),xe(h,"click",this._onInputClick,this);var S=document.createElement("span");S.innerHTML=" "+g.name;var w=document.createElement("span");l.appendChild(w),w.appendChild(h),w.appendChild(S);var H=g.overlay?this._overlaysList:this._baseLayersList;return H.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var g=this._layerControlInputs,l,u,h=[],S=[];this._handlingClick=!0;for(var w=g.length-1;w>=0;w--)l=g[w],u=this._getLayer(l.layerId).layer,l.checked?h.push(u):l.checked||S.push(u);for(w=0;w<S.length;w++)this._map.hasLayer(S[w])&&this._map.removeLayer(S[w]);for(w=0;w<h.length;w++)this._map.hasLayer(h[w])||this._map.addLayer(h[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var g=this._layerControlInputs,l,u,h=this._map.getZoom(),S=g.length-1;S>=0;S--)l=g[S],u=this._getLayer(l.layerId).layer,l.disabled=u.options.minZoom!==void 0&&h<u.options.minZoom||u.options.maxZoom!==void 0&&h>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var g=this._section;this._preventClick=!0,xe(g,"click",yn),this.expand();var l=this;setTimeout(function(){Zt(g,"click",yn),l._preventClick=!1})}}),fY=function(g,l,u){return new JZ(g,l,u)},cm=si.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(g){var l="leaflet-control-zoom",u=re("div",l+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,l+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,l+"-out",u,this._zoomOut),this._updateDisabled(),g.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(g){g.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(g){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(g.shiftKey?3:1))},_zoomOut:function(g){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(g.shiftKey?3:1))},_createButton:function(g,l,u,h,S){var w=re("a",u,h);return w.innerHTML=g,w.href="#",w.title=l,w.setAttribute("role","button"),w.setAttribute("aria-label",l),Ia(w),xe(w,"click",us),xe(w,"click",S,this),xe(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var g=this._map,l="leaflet-disabled";zt(this._zoomInButton,l),zt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||g._zoom===g.getMinZoom())&&(He(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||g._zoom===g.getMaxZoom())&&(He(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Oe.mergeOptions({zoomControl:!0}),Oe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new cm,this.addControl(this.zoomControl))});var ZY=function(g){return new cm(g)},YZ=si.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(g){var l="leaflet-control-scale",u=re("div",l),h=this.options;return this._addScales(h,l+"-line",u),g.on(h.updateWhenIdle?"moveend":"move",this._update,this),g.whenReady(this._update,this),u},onRemove:function(g){g.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(g,l,u){g.metric&&(this._mScale=re("div",l,u)),g.imperial&&(this._iScale=re("div",l,u))},_update:function(){var g=this._map,l=g.getSize().y/2,u=g.distance(g.containerPointToLatLng([0,l]),g.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(u)},_updateScales:function(g){this.options.metric&&g&&this._updateMetric(g),this.options.imperial&&g&&this._updateImperial(g)},_updateMetric:function(g){var l=this._getRoundNum(g),u=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,u,l/g)},_updateImperial:function(g){var l=g*3.2808399,u,h,S;l>5280?(u=l/5280,h=this._getRoundNum(u),this._updateScale(this._iScale,h+" mi",h/u)):(S=this._getRoundNum(l),this._updateScale(this._iScale,S+" ft",S/l))},_updateScale:function(g,l,u){g.style.width=Math.round(this.options.maxWidth*u)+"px",g.innerHTML=l},_getRoundNum:function(g){var l=Math.pow(10,(Math.floor(g)+"").length-1),u=g/l;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,l*u}}),yY=function(g){return new YZ(g)},GY='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Cm=si.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Y.inlineSvg?GY+" ":"")+"Leaflet</a>"},initialize:function(g){Z(this,g),this._attributions={}},onAdd:function(g){g.attributionControl=this,this._container=re("div","leaflet-control-attribution"),Ia(this._container);for(var l in g._layers)g._layers[l].getAttribution&&this.addAttribution(g._layers[l].getAttribution());return this._update(),g.on("layeradd",this._addAttribution,this),this._container},onRemove:function(g){g.off("layeradd",this._addAttribution,this)},_addAttribution:function(g){g.layer.getAttribution&&(this.addAttribution(g.layer.getAttribution()),g.layer.once("remove",function(){this.removeAttribution(g.layer.getAttribution())},this))},setPrefix:function(g){return this.options.prefix=g,this._update(),this},addAttribution:function(g){return g?(this._attributions[g]||(this._attributions[g]=0),this._attributions[g]++,this._update(),this):this},removeAttribution:function(g){return g?(this._attributions[g]&&(this._attributions[g]--,this._update()),this):this},_update:function(){if(this._map){var g=[];for(var l in this._attributions)this._attributions[l]&&g.push(l);var u=[];this.options.prefix&&u.push(this.options.prefix),g.length&&u.push(g.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});Oe.mergeOptions({attributionControl:!0}),Oe.addInitHook(function(){this.options.attributionControl&&new Cm().addTo(this)});var BY=function(g){return new Cm(g)};si.Layers=JZ,si.Zoom=cm,si.Scale=YZ,si.Attribution=Cm,ca.layers=fY,ca.zoom=ZY,ca.scale=yY,ca.attribution=BY;var Gi=j.extend({initialize:function(g){this._map=g},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Gi.addTo=function(g,l){return g.addHandler(l,this),this};var SY={Events:ee},HZ=Y.touch?"touchstart mousedown":"mousedown",bg=te.extend({options:{clickTolerance:3},initialize:function(g,l,u,h){Z(this,h),this._element=g,this._dragStartTarget=l||g,this._preventOutline=u},enable:function(){this._enabled||(xe(this._dragStartTarget,HZ,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(bg._dragging===this&&this.finishDrag(!0),Zt(this._dragStartTarget,HZ,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(g){if(this._enabled&&(this._moved=!1,!mr(this._element,"leaflet-zoom-anim"))){if(g.touches&&g.touches.length!==1){bg._dragging===this&&this.finishDrag();return}if(!(bg._dragging||g.shiftKey||g.which!==1&&g.button!==1&&!g.touches)&&(bg._dragging=this,this._preventOutline&&im(this._element),tm(),ra(),!this._moving)){this.fire("down");var l=g.touches?g.touches[0]:g,u=WZ(this._element);this._startPoint=new N(l.clientX,l.clientY),this._startPos=Cs(this._element),this._parentScale=gm(u);var h=g.type==="mousedown";xe(document,h?"mousemove":"touchmove",this._onMove,this),xe(document,h?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(g){if(this._enabled){if(g.touches&&g.touches.length>1){this._moved=!0;return}var l=g.touches&&g.touches.length===1?g.touches[0]:g,u=new N(l.clientX,l.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,yn(g),this._moved||(this.fire("dragstart"),this._moved=!0,He(document.body,"leaflet-dragging"),this._lastTarget=g.target||g.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),He(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=g,this._updatePosition())}},_updatePosition:function(){var g={originalEvent:this._lastEvent};this.fire("predrag",g),Ot(this._element,this._newPos),this.fire("drag",g)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(g){zt(document.body,"leaflet-dragging"),this._lastTarget&&(zt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Zt(document,"mousemove touchmove",this._onMove,this),Zt(document,"mouseup touchend touchcancel",this._onUp,this),nm(),la();var l=this._moved&&this._moving;this._moving=!1,bg._dragging=!1,l&&this.fire("dragend",{noInertia:g,distance:this._newPos.distanceTo(this._startPos)})}});function xZ(g,l,u){var h,S=[1,4,2,8],w,H,E,T,$,Ce,We,De;for(w=0,Ce=g.length;w<Ce;w++)g[w]._code=As(g[w],l);for(E=0;E<4;E++){for(We=S[E],h=[],w=0,Ce=g.length,H=Ce-1;w<Ce;H=w++)T=g[w],$=g[H],T._code&We?$._code&We||(De=Rc($,T,We,l,u),De._code=As(De,l),h.push(De)):($._code&We&&(De=Rc($,T,We,l,u),De._code=As(De,l),h.push(De)),h.push(T));g=h}return g}function NZ(g,l){var u,h,S,w,H,E,T,$,Ce;if(!g||g.length===0)throw new Error("latlngs not passed");Fo(g)||(console.warn("latlngs are not flat! Only the first ring will be used"),g=g[0]);var We=ie([0,0]),De=se(g),Tn=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());Tn<1700&&(We=dm(g));var dn=g.length,Ko=[];for(u=0;u<dn;u++){var to=ie(g[u]);Ko.push(l.project(ie([to.lat-We.lat,to.lng-We.lng])))}for(E=T=$=0,u=0,h=dn-1;u<dn;h=u++)S=Ko[u],w=Ko[h],H=S.y*w.x-w.y*S.x,T+=(S.x+w.x)*H,$+=(S.y+w.y)*H,E+=H*3;E===0?Ce=Ko[0]:Ce=[T/E,$/E];var yr=l.unproject(P(Ce));return ie([yr.lat+We.lat,yr.lng+We.lng])}function dm(g){for(var l=0,u=0,h=0,S=0;S<g.length;S++){var w=ie(g[S]);l+=w.lat,u+=w.lng,h++}return ie([l/h,u/h])}var vY={__proto__:null,clipPolygon:xZ,polygonCenter:NZ,centroid:dm};function FZ(g,l){if(!l||!g.length)return g.slice();var u=l*l;return g=RY(g,u),g=VY(g,u),g}function KZ(g,l,u){return Math.sqrt(Ca(g,l,u,!0))}function WY(g,l,u){return Ca(g,l,u)}function VY(g,l){var u=g.length,h=typeof Uint8Array<"u"?Uint8Array:Array,S=new h(u);S[0]=S[u-1]=1,um(g,S,l,0,u-1);var w,H=[];for(w=0;w<u;w++)S[w]&&H.push(g[w]);return H}function um(g,l,u,h,S){var w=0,H,E,T;for(E=h+1;E<=S-1;E++)T=Ca(g[E],g[h],g[S],!0),T>w&&(H=E,w=T);w>u&&(l[H]=1,um(g,l,u,h,H),um(g,l,u,H,S))}function RY(g,l){for(var u=[g[0]],h=1,S=0,w=g.length;h<w;h++)kY(g[h],g[S])>l&&(u.push(g[h]),S=h);return S<w-1&&u.push(g[w-1]),u}var EZ;function MZ(g,l,u,h,S){var w=h?EZ:As(g,u),H=As(l,u),E,T,$;for(EZ=H;;){if(!(w|H))return[g,l];if(w&H)return!1;E=w||H,T=Rc(g,l,E,u,S),$=As(T,u),E===w?(g=T,w=$):(l=T,H=$)}}function Rc(g,l,u,h,S){var w=l.x-g.x,H=l.y-g.y,E=h.min,T=h.max,$,Ce;return u&8?($=g.x+w*(T.y-g.y)/H,Ce=T.y):u&4?($=g.x+w*(E.y-g.y)/H,Ce=E.y):u&2?($=T.x,Ce=g.y+H*(T.x-g.x)/w):u&1&&($=E.x,Ce=g.y+H*(E.x-g.x)/w),new N($,Ce,S)}function As(g,l){var u=0;return g.x<l.min.x?u|=1:g.x>l.max.x&&(u|=2),g.y<l.min.y?u|=4:g.y>l.max.y&&(u|=8),u}function kY(g,l){var u=l.x-g.x,h=l.y-g.y;return u*u+h*h}function Ca(g,l,u,h){var S=l.x,w=l.y,H=u.x-S,E=u.y-w,T=H*H+E*E,$;return T>0&&($=((g.x-S)*H+(g.y-w)*E)/T,$>1?(S=u.x,w=u.y):$>0&&(S+=H*$,w+=E*$)),H=g.x-S,E=g.y-w,h?H*H+E*E:new N(S,w)}function Fo(g){return!y(g[0])||typeof g[0][0]!="object"&&typeof g[0][0]<"u"}function LZ(g){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Fo(g)}function zZ(g,l){var u,h,S,w,H,E,T,$;if(!g||g.length===0)throw new Error("latlngs not passed");Fo(g)||(console.warn("latlngs are not flat! Only the first ring will be used"),g=g[0]);var Ce=ie([0,0]),We=se(g),De=We.getNorthWest().distanceTo(We.getSouthWest())*We.getNorthEast().distanceTo(We.getNorthWest());De<1700&&(Ce=dm(g));var Tn=g.length,dn=[];for(u=0;u<Tn;u++){var Ko=ie(g[u]);dn.push(l.project(ie([Ko.lat-Ce.lat,Ko.lng-Ce.lng])))}for(u=0,h=0;u<Tn-1;u++)h+=dn[u].distanceTo(dn[u+1])/2;if(h===0)$=dn[0];else for(u=0,w=0;u<Tn-1;u++)if(H=dn[u],E=dn[u+1],S=H.distanceTo(E),w+=S,w>h){T=(w-h)/S,$=[E.x-T*(E.x-H.x),E.y-T*(E.y-H.y)];break}var to=l.unproject(P($));return ie([to.lat+Ce.lat,to.lng+Ce.lng])}var wY={__proto__:null,simplify:FZ,pointToSegmentDistance:KZ,closestPointOnSegment:WY,clipSegment:MZ,_getEdgeIntersection:Rc,_getBitCode:As,_sqClosestPointOnSegment:Ca,isFlat:Fo,_flat:LZ,polylineCenter:zZ},Am={project:function(g){return new N(g.lng,g.lat)},unproject:function(g){return new ue(g.y,g.x)},bounds:new le([-180,-90],[180,90])},mm={R:6378137,R_MINOR:6356752314245179e-9,bounds:new le([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(g){var l=Math.PI/180,u=this.R,h=g.lat*l,S=this.R_MINOR/u,w=Math.sqrt(1-S*S),H=w*Math.sin(h),E=Math.tan(Math.PI/4-h/2)/Math.pow((1-H)/(1+H),w/2);return h=-u*Math.log(Math.max(E,1e-10)),new N(g.lng*l*u,h)},unproject:function(g){for(var l=180/Math.PI,u=this.R,h=this.R_MINOR/u,S=Math.sqrt(1-h*h),w=Math.exp(-g.y/u),H=Math.PI/2-2*Math.atan(w),E=0,T=.1,$;E<15&&Math.abs(T)>1e-7;E++)$=S*Math.sin(H),$=Math.pow((1-$)/(1+$),S/2),T=Math.PI/2-2*Math.atan(w*$)-H,H+=T;return new ue(H*l,g.x*l/u)}},XY={__proto__:null,LonLat:Am,Mercator:mm,SphericalMercator:ft},JY=i({},Ue,{code:"EPSG:3395",projection:mm,transformation:function(){var g=.5/(Math.PI*mm.R);return Me(g,.5,-g,.5)}()}),TZ=i({},Ue,{code:"EPSG:4326",projection:Am,transformation:Me(1/180,1,-1/180,.5)}),YY=i({},Je,{projection:Am,transformation:Me(1,0,-1,0),scale:function(g){return Math.pow(2,g)},zoom:function(g){return Math.log(g)/Math.LN2},distance:function(g,l){var u=l.lng-g.lng,h=l.lat-g.lat;return Math.sqrt(u*u+h*h)},infinite:!0});Je.Earth=Ue,Je.EPSG3395=JY,Je.EPSG3857=Ye,Je.EPSG900913=Re,Je.EPSG4326=TZ,Je.Simple=YY;var ri=te.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(g){return g.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(g){return g&&g.removeLayer(this),this},getPane:function(g){return this._map.getPane(g?this.options[g]||g:this.options.pane)},addInteractiveTarget:function(g){return this._map._targets[a(g)]=this,this},removeInteractiveTarget:function(g){return delete this._map._targets[a(g)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(g){var l=g.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var u=this.getEvents();l.on(u,this),this.once("remove",function(){l.off(u,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Oe.include({addLayer:function(g){if(!g._layerAdd)throw new Error("The provided object is not a Layer.");var l=a(g);return this._layers[l]?this:(this._layers[l]=g,g._mapToAdd=this,g.beforeAdd&&g.beforeAdd(this),this.whenReady(g._layerAdd,g),this)},removeLayer:function(g){var l=a(g);return this._layers[l]?(this._loaded&&g.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:g}),g.fire("remove")),g._map=g._mapToAdd=null,this):this},hasLayer:function(g){return a(g)in this._layers},eachLayer:function(g,l){for(var u in this._layers)g.call(l,this._layers[u]);return this},_addLayers:function(g){g=g?y(g)?g:[g]:[];for(var l=0,u=g.length;l<u;l++)this.addLayer(g[l])},_addZoomLimit:function(g){(!isNaN(g.options.maxZoom)||!isNaN(g.options.minZoom))&&(this._zoomBoundLayers[a(g)]=g,this._updateZoomLevels())},_removeZoomLimit:function(g){var l=a(g);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var g=1/0,l=-1/0,u=this._getZoomSpan();for(var h in this._zoomBoundLayers){var S=this._zoomBoundLayers[h].options;g=S.minZoom===void 0?g:Math.min(g,S.minZoom),l=S.maxZoom===void 0?l:Math.max(l,S.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=g===1/0?void 0:g,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var hr=ri.extend({initialize:function(g,l){Z(this,l),this._layers={};var u,h;if(g)for(u=0,h=g.length;u<h;u++)this.addLayer(g[u])},addLayer:function(g){var l=this.getLayerId(g);return this._layers[l]=g,this._map&&this._map.addLayer(g),this},removeLayer:function(g){var l=g in this._layers?g:this.getLayerId(g);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(g){var l=typeof g=="number"?g:this.getLayerId(g);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(g){var l=Array.prototype.slice.call(arguments,1),u,h;for(u in this._layers)h=this._layers[u],h[g]&&h[g].apply(h,l);return this},onAdd:function(g){this.eachLayer(g.addLayer,g)},onRemove:function(g){this.eachLayer(g.removeLayer,g)},eachLayer:function(g,l){for(var u in this._layers)g.call(l,this._layers[u]);return this},getLayer:function(g){return this._layers[g]},getLayers:function(){var g=[];return this.eachLayer(g.push,g),g},setZIndex:function(g){return this.invoke("setZIndex",g)},getLayerId:function(g){return a(g)}}),HY=function(g,l){return new hr(g,l)},Li=hr.extend({addLayer:function(g){return this.hasLayer(g)?this:(g.addEventParent(this),hr.prototype.addLayer.call(this,g),this.fire("layeradd",{layer:g}))},removeLayer:function(g){return this.hasLayer(g)?(g in this._layers&&(g=this._layers[g]),g.removeEventParent(this),hr.prototype.removeLayer.call(this,g),this.fire("layerremove",{layer:g})):this},setStyle:function(g){return this.invoke("setStyle",g)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var g=new ye;for(var l in this._layers){var u=this._layers[l];g.extend(u.getBounds?u.getBounds():u.getLatLng())}return g}}),xY=function(g,l){return new Li(g,l)},pr=j.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(g){Z(this,g)},createIcon:function(g){return this._createIcon("icon",g)},createShadow:function(g){return this._createIcon("shadow",g)},_createIcon:function(g,l){var u=this._getIconUrl(g);if(!u){if(g==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(u,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(h,g),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),h},_setIconStyles:function(g,l){var u=this.options,h=u[l+"Size"];typeof h=="number"&&(h=[h,h]);var S=P(h),w=P(l==="shadow"&&u.shadowAnchor||u.iconAnchor||S&&S.divideBy(2,!0));g.className="leaflet-marker-"+l+" "+(u.className||""),w&&(g.style.marginLeft=-w.x+"px",g.style.marginTop=-w.y+"px"),S&&(g.style.width=S.x+"px",g.style.height=S.y+"px")},_createImg:function(g,l){return l=l||document.createElement("img"),l.src=g,l},_getIconUrl:function(g){return Y.retina&&this.options[g+"RetinaUrl"]||this.options[g+"Url"]}});function NY(g){return new pr(g)}var da=pr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(g){return typeof da.imagePath!="string"&&(da.imagePath=this._detectIconPath()),(this.options.imagePath||da.imagePath)+pr.prototype._getIconUrl.call(this,g)},_stripUrl:function(g){var l=function(u,h,S){var w=h.exec(u);return w&&w[S]};return g=l(g,/^url\((['"])?(.+)\1\)$/,2),g&&l(g,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var g=re("div","leaflet-default-icon-path",document.body),l=Zi(g,"background-image")||Zi(g,"backgroundImage");if(document.body.removeChild(g),l=this._stripUrl(l),l)return l;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),UZ=Gi.extend({initialize:function(g){this._marker=g},addHooks:function(){var g=this._marker._icon;this._draggable||(this._draggable=new bg(g,g,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),He(g,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&zt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(g){var l=this._marker,u=l._map,h=this._marker.options.autoPanSpeed,S=this._marker.options.autoPanPadding,w=Cs(l._icon),H=u.getPixelBounds(),E=u.getPixelOrigin(),T=ae(H.min._subtract(E).add(S),H.max._subtract(E).subtract(S));if(!T.contains(w)){var $=P((Math.max(T.max.x,w.x)-T.max.x)/(H.max.x-T.max.x)-(Math.min(T.min.x,w.x)-T.min.x)/(H.min.x-T.min.x),(Math.max(T.max.y,w.y)-T.max.y)/(H.max.y-T.max.y)-(Math.min(T.min.y,w.y)-T.min.y)/(H.min.y-T.min.y)).multiplyBy(h);u.panBy($,{animate:!1}),this._draggable._newPos._add($),this._draggable._startPos._add($),Ot(l._icon,this._draggable._newPos),this._onDrag(g),this._panRequest=M(this._adjustPan.bind(this,g))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(g){this._marker.options.autoPan&&(Q(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,g)))},_onDrag:function(g){var l=this._marker,u=l._shadow,h=Cs(l._icon),S=l._map.layerPointToLatLng(h);u&&Ot(u,h),l._latlng=S,g.latlng=S,g.oldLatLng=this._oldLatLng,l.fire("move",g).fire("drag",g)},_onDragEnd:function(g){Q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",g)}}),kc=ri.extend({options:{icon:new da,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(g,l){Z(this,l),this._latlng=ie(g)},onAdd:function(g){this._zoomAnimated=this._zoomAnimated&&g.options.markerZoomAnimation,this._zoomAnimated&&g.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(g){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&g.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(g){var l=this._latlng;return this._latlng=ie(g),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(g){return this.options.zIndexOffset=g,this.update()},getIcon:function(){return this.options.icon},setIcon:function(g){return this.options.icon=g,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var g=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(g)}return this},_initIcon:function(){var g=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=g.icon.createIcon(this._icon),h=!1;u!==this._icon&&(this._icon&&this._removeIcon(),h=!0,g.title&&(u.title=g.title),u.tagName==="IMG"&&(u.alt=g.alt||"")),He(u,l),g.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,g.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&xe(u,"focus",this._panOnFocus,this);var S=g.icon.createShadow(this._shadow),w=!1;S!==this._shadow&&(this._removeShadow(),w=!0),S&&(He(S,l),S.alt=""),this._shadow=S,g.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),S&&w&&this.getPane(g.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Zt(this._icon,"focus",this._panOnFocus,this),ke(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ke(this._shadow),this._shadow=null},_setPos:function(g){this._icon&&Ot(this._icon,g),this._shadow&&Ot(this._shadow,g),this._zIndex=g.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(g){this._icon&&(this._icon.style.zIndex=this._zIndex+g)},_animateZoom:function(g){var l=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(He(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),UZ)){var g=this.options.draggable;this.dragging&&(g=this.dragging.enabled(),this.dragging.disable()),this.dragging=new UZ(this),g&&this.dragging.enable()}},setOpacity:function(g){return this.options.opacity=g,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var g=this.options.opacity;this._icon&&No(this._icon,g),this._shadow&&No(this._shadow,g)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var g=this._map;if(g){var l=this.options.icon.options,u=l.iconSize?P(l.iconSize):P(0,0),h=l.iconAnchor?P(l.iconAnchor):P(0,0);g.panInside(this._latlng,{paddingTopLeft:h,paddingBottomRight:u.subtract(h)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function FY(g,l){return new kc(g,l)}var fg=ri.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(g){this._renderer=g.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(g){return Z(this,g),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&g&&Object.prototype.hasOwnProperty.call(g,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),wc=fg.extend({options:{fill:!0,radius:10},initialize:function(g,l){Z(this,l),this._latlng=ie(g),this._radius=this.options.radius},setLatLng:function(g){var l=this._latlng;return this._latlng=ie(g),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(g){return this.options.radius=this._radius=g,this.redraw()},getRadius:function(){return this._radius},setStyle:function(g){var l=g&&g.radius||this._radius;return fg.prototype.setStyle.call(this,g),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var g=this._radius,l=this._radiusY||g,u=this._clickTolerance(),h=[g+u,l+u];this._pxBounds=new le(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(g){return g.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function KY(g,l){return new wc(g,l)}var hm=wc.extend({initialize:function(g,l,u){if(typeof l=="number"&&(l=i({},u,{radius:l})),Z(this,l),this._latlng=ie(g),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(g){return this._mRadius=g,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var g=[this._radius,this._radiusY||this._radius];return new ye(this._map.layerPointToLatLng(this._point.subtract(g)),this._map.layerPointToLatLng(this._point.add(g)))},setStyle:fg.prototype.setStyle,_project:function(){var g=this._latlng.lng,l=this._latlng.lat,u=this._map,h=u.options.crs;if(h.distance===Ue.distance){var S=Math.PI/180,w=this._mRadius/Ue.R/S,H=u.project([l+w,g]),E=u.project([l-w,g]),T=H.add(E).divideBy(2),$=u.unproject(T).lat,Ce=Math.acos((Math.cos(w*S)-Math.sin(l*S)*Math.sin($*S))/(Math.cos(l*S)*Math.cos($*S)))/S;(isNaN(Ce)||Ce===0)&&(Ce=w/Math.cos(Math.PI/180*l)),this._point=T.subtract(u.getPixelOrigin()),this._radius=isNaN(Ce)?0:T.x-u.project([$,g-Ce]).x,this._radiusY=T.y-H.y}else{var We=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(We).x}this._updateBounds()}});function EY(g,l,u){return new hm(g,l,u)}var zi=fg.extend({options:{smoothFactor:1,noClip:!1},initialize:function(g,l){Z(this,l),this._setLatLngs(g)},getLatLngs:function(){return this._latlngs},setLatLngs:function(g){return this._setLatLngs(g),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(g){for(var l=1/0,u=null,h=Ca,S,w,H=0,E=this._parts.length;H<E;H++)for(var T=this._parts[H],$=1,Ce=T.length;$<Ce;$++){S=T[$-1],w=T[$];var We=h(g,S,w,!0);We<l&&(l=We,u=h(g,S,w))}return u&&(u.distance=Math.sqrt(l)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zZ(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(g,l){return l=l||this._defaultShape(),g=ie(g),l.push(g),this._bounds.extend(g),this.redraw()},_setLatLngs:function(g){this._bounds=new ye,this._latlngs=this._convertLatLngs(g)},_defaultShape:function(){return Fo(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(g){for(var l=[],u=Fo(g),h=0,S=g.length;h<S;h++)u?(l[h]=ie(g[h]),this._bounds.extend(l[h])):l[h]=this._convertLatLngs(g[h]);return l},_project:function(){var g=new le;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,g),this._bounds.isValid()&&g.isValid()&&(this._rawPxBounds=g,this._updateBounds())},_updateBounds:function(){var g=this._clickTolerance(),l=new N(g,g);this._rawPxBounds&&(this._pxBounds=new le([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(g,l,u){var h=g[0]instanceof ue,S=g.length,w,H;if(h){for(H=[],w=0;w<S;w++)H[w]=this._map.latLngToLayerPoint(g[w]),u.extend(H[w]);l.push(H)}else for(w=0;w<S;w++)this._projectLatlngs(g[w],l,u)},_clipPoints:function(){var g=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(g))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,u,h,S,w,H,E,T;for(u=0,S=0,w=this._rings.length;u<w;u++)for(T=this._rings[u],h=0,H=T.length;h<H-1;h++)E=MZ(T[h],T[h+1],g,h,!0),E&&(l[S]=l[S]||[],l[S].push(E[0]),(E[1]!==T[h+1]||h===H-2)&&(l[S].push(E[1]),S++))}},_simplifyPoints:function(){for(var g=this._parts,l=this.options.smoothFactor,u=0,h=g.length;u<h;u++)g[u]=FZ(g[u],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(g,l){var u,h,S,w,H,E,T=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(g))return!1;for(u=0,w=this._parts.length;u<w;u++)for(E=this._parts[u],h=0,H=E.length,S=H-1;h<H;S=h++)if(!(!l&&h===0)&&KZ(g,E[S],E[h])<=T)return!0;return!1}});function MY(g,l){return new zi(g,l)}zi._flat=LZ;var br=zi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return NZ(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(g){var l=zi.prototype._convertLatLngs.call(this,g),u=l.length;return u>=2&&l[0]instanceof ue&&l[0].equals(l[u-1])&&l.pop(),l},_setLatLngs:function(g){zi.prototype._setLatLngs.call(this,g),Fo(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Fo(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var g=this._renderer._bounds,l=this.options.weight,u=new N(l,l);if(g=new le(g.min.subtract(u),g.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(g))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,S=this._rings.length,w;h<S;h++)w=xZ(this._rings[h],g,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(g){var l=!1,u,h,S,w,H,E,T,$;if(!this._pxBounds||!this._pxBounds.contains(g))return!1;for(w=0,T=this._parts.length;w<T;w++)for(u=this._parts[w],H=0,$=u.length,E=$-1;H<$;E=H++)h=u[H],S=u[E],h.y>g.y!=S.y>g.y&&g.x<(S.x-h.x)*(g.y-h.y)/(S.y-h.y)+h.x&&(l=!l);return l||zi.prototype._containsPoint.call(this,g,!0)}});function LY(g,l){return new br(g,l)}var Ti=Li.extend({initialize:function(g,l){Z(this,l),this._layers={},g&&this.addData(g)},addData:function(g){var l=y(g)?g:g.features,u,h,S;if(l){for(u=0,h=l.length;u<h;u++)S=l[u],(S.geometries||S.geometry||S.features||S.coordinates)&&this.addData(S);return this}var w=this.options;if(w.filter&&!w.filter(g))return this;var H=Xc(g,w);return H?(H.feature=Hc(g),H.defaultOptions=H.options,this.resetStyle(H),w.onEachFeature&&w.onEachFeature(g,H),this.addLayer(H)):this},resetStyle:function(g){return g===void 0?this.eachLayer(this.resetStyle,this):(g.options=i({},g.defaultOptions),this._setLayerStyle(g,this.options.style),this)},setStyle:function(g){return this.eachLayer(function(l){this._setLayerStyle(l,g)},this)},_setLayerStyle:function(g,l){g.setStyle&&(typeof l=="function"&&(l=l(g.feature)),g.setStyle(l))}});function Xc(g,l){var u=g.type==="Feature"?g.geometry:g,h=u?u.coordinates:null,S=[],w=l&&l.pointToLayer,H=l&&l.coordsToLatLng||pm,E,T,$,Ce;if(!h&&!u)return null;switch(u.type){case"Point":return E=H(h),DZ(w,g,E,l);case"MultiPoint":for($=0,Ce=h.length;$<Ce;$++)E=H(h[$]),S.push(DZ(w,g,E,l));return new Li(S);case"LineString":case"MultiLineString":return T=Jc(h,u.type==="LineString"?0:1,H),new zi(T,l);case"Polygon":case"MultiPolygon":return T=Jc(h,u.type==="Polygon"?1:2,H),new br(T,l);case"GeometryCollection":for($=0,Ce=u.geometries.length;$<Ce;$++){var We=Xc({geometry:u.geometries[$],type:"Feature",properties:g.properties},l);We&&S.push(We)}return new Li(S);case"FeatureCollection":for($=0,Ce=u.features.length;$<Ce;$++){var De=Xc(u.features[$],l);De&&S.push(De)}return new Li(S);default:throw new Error("Invalid GeoJSON object.")}}function DZ(g,l,u,h){return g?g(l,u):new kc(u,h&&h.markersInheritOptions&&h)}function pm(g){return new ue(g[1],g[0],g[2])}function Jc(g,l,u){for(var h=[],S=0,w=g.length,H;S<w;S++)H=l?Jc(g[S],l-1,u):(u||pm)(g[S]),h.push(H);return h}function bm(g,l){return g=ie(g),g.alt!==void 0?[m(g.lng,l),m(g.lat,l),m(g.alt,l)]:[m(g.lng,l),m(g.lat,l)]}function Yc(g,l,u,h){for(var S=[],w=0,H=g.length;w<H;w++)S.push(l?Yc(g[w],Fo(g[w])?0:l-1,u,h):bm(g[w],h));return!l&&u&&S.length>0&&S.push(S[0].slice()),S}function fr(g,l){return g.feature?i({},g.feature,{geometry:l}):Hc(l)}function Hc(g){return g.type==="Feature"||g.type==="FeatureCollection"?g:{type:"Feature",properties:{},geometry:g}}var fm={toGeoJSON:function(g){return fr(this,{type:"Point",coordinates:bm(this.getLatLng(),g)})}};kc.include(fm),hm.include(fm),wc.include(fm),zi.include({toGeoJSON:function(g){var l=!Fo(this._latlngs),u=Yc(this._latlngs,l?1:0,!1,g);return fr(this,{type:(l?"Multi":"")+"LineString",coordinates:u})}}),br.include({toGeoJSON:function(g){var l=!Fo(this._latlngs),u=l&&!Fo(this._latlngs[0]),h=Yc(this._latlngs,u?2:l?1:0,!0,g);return l||(h=[h]),fr(this,{type:(u?"Multi":"")+"Polygon",coordinates:h})}}),hr.include({toMultiPoint:function(g){var l=[];return this.eachLayer(function(u){l.push(u.toGeoJSON(g).geometry.coordinates)}),fr(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(g){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(g);var u=l==="GeometryCollection",h=[];return this.eachLayer(function(S){if(S.toGeoJSON){var w=S.toGeoJSON(g);if(u)h.push(w.geometry);else{var H=Hc(w);H.type==="FeatureCollection"?h.push.apply(h,H.features):h.push(H)}}}),u?fr(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function QZ(g,l){return new Ti(g,l)}var zY=QZ,xc=ri.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(g,l,u){this._url=g,this._bounds=se(l),Z(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(He(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ke(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(g){return this.options.opacity=g,this._image&&this._updateOpacity(),this},setStyle:function(g){return g.opacity&&this.setOpacity(g.opacity),this},bringToFront:function(){return this._map&&It(this._image),this},bringToBack:function(){return this._map&&Rn(this._image),this},setUrl:function(g){return this._url=g,this._image&&(this._image.src=g),this},setBounds:function(g){return this._bounds=se(g),this._map&&this._reset(),this},getEvents:function(){var g={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(g.zoomanim=this._animateZoom),g},setZIndex:function(g){return this.options.zIndex=g,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var g=this._url.tagName==="IMG",l=this._image=g?this._url:re("img");if(He(l,"leaflet-image-layer"),this._zoomAnimated&&He(l,"leaflet-zoom-animated"),this.options.className&&He(l,this.options.className),l.onselectstart=A,l.onmousemove=A,l.onload=r(this.fire,this,"load"),l.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),g){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(g){var l=this._map.getZoomScale(g.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,g.zoom,g.center).min;cs(this._image,u,l)},_reset:function(){var g=this._image,l=new le(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=l.getSize();Ot(g,l.min),g.style.width=u.x+"px",g.style.height=u.y+"px"},_updateOpacity:function(){No(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var g=this.options.errorOverlayUrl;g&&this._url!==g&&(this._url=g,this._image.src=g)},getCenter:function(){return this._bounds.getCenter()}}),TY=function(g,l,u){return new xc(g,l,u)},PZ=xc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var g=this._url.tagName==="VIDEO",l=this._image=g?this._url:re("video");if(He(l,"leaflet-image-layer"),this._zoomAnimated&&He(l,"leaflet-zoom-animated"),this.options.className&&He(l,this.options.className),l.onselectstart=A,l.onmousemove=A,l.onloadeddata=r(this.fire,this,"load"),g){for(var u=l.getElementsByTagName("source"),h=[],S=0;S<u.length;S++)h.push(u[S].src);this._url=u.length>0?h:[l.src];return}y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var H=re("source");H.src=this._url[w],l.appendChild(H)}}});function UY(g,l,u){return new PZ(g,l,u)}var jZ=xc.extend({_initImage:function(){var g=this._image=this._url;He(g,"leaflet-image-layer"),this._zoomAnimated&&He(g,"leaflet-zoom-animated"),this.options.className&&He(g,this.options.className),g.onselectstart=A,g.onmousemove=A}});function DY(g,l,u){return new jZ(g,l,u)}var Bi=ri.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(g,l){g&&(g instanceof ue||y(g))?(this._latlng=ie(g),Z(this,l)):(Z(this,g),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(g){return g=arguments.length?g:this._source._map,g.hasLayer(this)||g.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(g){return this._map?this.close():(arguments.length?this._source=g:g=this._source,this._prepareOpen(),this.openOn(g._map)),this},onAdd:function(g){this._zoomAnimated=g._zoomAnimated,this._container||this._initLayout(),g._fadeAnimated&&No(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),g._fadeAnimated&&No(this._container,1),this.bringToFront(),this.options.interactive&&(He(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(g){g._fadeAnimated?(No(this._container,0),this._removeTimeout=setTimeout(r(ke,void 0,this._container),200)):ke(this._container),this.options.interactive&&(zt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(g){return this._latlng=ie(g),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(g){return this._content=g,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var g={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(g.zoomanim=this._animateZoom),g},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&It(this._container),this},bringToBack:function(){return this._map&&Rn(this._container),this},_prepareOpen:function(g){var l=this._source;if(!l._map)return!1;if(l instanceof Li){l=null;var u=this._source._layers;for(var h in u)if(u[h]._map){l=u[h];break}if(!l)return!1;this._source=l}if(!g)if(l.getCenter)g=l.getCenter();else if(l.getLatLng)g=l.getLatLng();else if(l.getBounds)g=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(g),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var g=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")g.innerHTML=l;else{for(;g.hasChildNodes();)g.removeChild(g.firstChild);g.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var g=this._map.latLngToLayerPoint(this._latlng),l=P(this.options.offset),u=this._getAnchor();this._zoomAnimated?Ot(this._container,g.add(u)):l=l.add(g).add(u);var h=this._containerBottom=-l.y,S=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=h+"px",this._container.style.left=S+"px"}},_getAnchor:function(){return[0,0]}});Oe.include({_initOverlay:function(g,l,u,h){var S=l;return S instanceof g||(S=new g(h).setContent(l)),u&&S.setLatLng(u),S}}),ri.include({_initOverlay:function(g,l,u,h){var S=u;return S instanceof g?(Z(S,h),S._source=this):(S=l&&!h?l:new g(h,this),S.setContent(u)),S}});var Nc=Bi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(g){return g=arguments.length?g:this._source._map,!g.hasLayer(this)&&g._popup&&g._popup.options.autoClose&&g.removeLayer(g._popup),g._popup=this,Bi.prototype.openOn.call(this,g)},onAdd:function(g){Bi.prototype.onAdd.call(this,g),g.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof fg||this._source.on("preclick",ds))},onRemove:function(g){Bi.prototype.onRemove.call(this,g),g.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof fg||this._source.off("preclick",ds))},getEvents:function(){var g=Bi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(g.preclick=this.close),this.options.keepInView&&(g.moveend=this._adjustPan),g},_initLayout:function(){var g="leaflet-popup",l=this._container=re("div",g+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=re("div",g+"-content-wrapper",l);if(this._contentNode=re("div",g+"-content",u),Ia(l),am(this._contentNode),xe(l,"contextmenu",ds),this._tipContainer=re("div",g+"-tip-container",l),this._tip=re("div",g+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=re("a",g+"-close-button",l);h.setAttribute("role","button"),h.setAttribute("aria-label","Close popup"),h.href="#close",h.innerHTML='<span aria-hidden="true">&#215;</span>',xe(h,"click",function(S){yn(S),this.close()},this)}},_updateLayout:function(){var g=this._contentNode,l=g.style;l.width="",l.whiteSpace="nowrap";var u=g.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),l.width=u+1+"px",l.whiteSpace="",l.height="";var h=g.offsetHeight,S=this.options.maxHeight,w="leaflet-popup-scrolled";S&&h>S?(l.height=S+"px",He(g,w)):zt(g,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(g){var l=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center),u=this._getAnchor();Ot(this._container,l.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var g=this._map,l=parseInt(Zi(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+l,h=this._containerWidth,S=new N(this._containerLeft,-u-this._containerBottom);S._add(Cs(this._container));var w=g.layerPointToContainerPoint(S),H=P(this.options.autoPanPadding),E=P(this.options.autoPanPaddingTopLeft||H),T=P(this.options.autoPanPaddingBottomRight||H),$=g.getSize(),Ce=0,We=0;w.x+h+T.x>$.x&&(Ce=w.x+h-$.x+T.x),w.x-Ce-E.x<0&&(Ce=w.x-E.x),w.y+u+T.y>$.y&&(We=w.y+u-$.y+T.y),w.y-We-E.y<0&&(We=w.y-E.y),(Ce||We)&&(this.options.keepInView&&(this._autopanning=!0),g.fire("autopanstart").panBy([Ce,We]))}},_getAnchor:function(){return P(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),QY=function(g,l){return new Nc(g,l)};Oe.mergeOptions({closePopupOnClick:!0}),Oe.include({openPopup:function(g,l,u){return this._initOverlay(Nc,g,l,u).openOn(this),this},closePopup:function(g){return g=arguments.length?g:this._popup,g&&g.close(),this}}),ri.include({bindPopup:function(g,l){return this._popup=this._initOverlay(Nc,this._popup,g,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(g){return this._popup&&(this instanceof Li||(this._popup._source=this),this._popup._prepareOpen(g||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(g){return this._popup&&this._popup.setContent(g),this},getPopup:function(){return this._popup},_openPopup:function(g){if(!(!this._popup||!this._map)){us(g);var l=g.layer||g.target;if(this._popup._source===l&&!(l instanceof fg)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(g.latlng);return}this._popup._source=l,this.openPopup(g.latlng)}},_movePopup:function(g){this._popup.setLatLng(g.latlng)},_onKeyPress:function(g){g.originalEvent.keyCode===13&&this._openPopup(g)}});var Fc=Bi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(g){Bi.prototype.onAdd.call(this,g),this.setOpacity(this.options.opacity),g.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(g){Bi.prototype.onRemove.call(this,g),g.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var g=Bi.prototype.getEvents.call(this);return this.options.permanent||(g.preclick=this.close),g},_initLayout:function(){var g="leaflet-tooltip",l=g+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=re("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(g){var l,u,h=this._map,S=this._container,w=h.latLngToContainerPoint(h.getCenter()),H=h.layerPointToContainerPoint(g),E=this.options.direction,T=S.offsetWidth,$=S.offsetHeight,Ce=P(this.options.offset),We=this._getAnchor();E==="top"?(l=T/2,u=$):E==="bottom"?(l=T/2,u=0):E==="center"?(l=T/2,u=$/2):E==="right"?(l=0,u=$/2):E==="left"?(l=T,u=$/2):H.x<w.x?(E="right",l=0,u=$/2):(E="left",l=T+(Ce.x+We.x)*2,u=$/2),g=g.subtract(P(l,u,!0)).add(Ce).add(We),zt(S,"leaflet-tooltip-right"),zt(S,"leaflet-tooltip-left"),zt(S,"leaflet-tooltip-top"),zt(S,"leaflet-tooltip-bottom"),He(S,"leaflet-tooltip-"+E),Ot(S,g)},_updatePosition:function(){var g=this._map.latLngToLayerPoint(this._latlng);this._setPosition(g)},setOpacity:function(g){this.options.opacity=g,this._container&&No(this._container,g)},_animateZoom:function(g){var l=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center);this._setPosition(l)},_getAnchor:function(){return P(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),PY=function(g,l){return new Fc(g,l)};Oe.include({openTooltip:function(g,l,u){return this._initOverlay(Fc,g,l,u).openOn(this),this},closeTooltip:function(g){return g.close(),this}}),ri.include({bindTooltip:function(g,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Fc,this._tooltip,g,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(g){if(!(!g&&this._tooltipHandlersAdded)){var l=g?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[l](u),this._tooltipHandlersAdded=!g}},openTooltip:function(g){return this._tooltip&&(this instanceof Li||(this._tooltip._source=this),this._tooltip._prepareOpen(g)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(g){return this._tooltip&&this._tooltip.setContent(g),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(g){var l=typeof g.getElement=="function"&&g.getElement();l&&(xe(l,"focus",function(){this._tooltip._source=g,this.openTooltip()},this),xe(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(g){var l=typeof g.getElement=="function"&&g.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(g){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(g)});return}this._tooltip._source=g.layer||g.target,this.openTooltip(this._tooltip.options.sticky?g.latlng:void 0)}},_moveTooltip:function(g){var l=g.latlng,u,h;this._tooltip.options.sticky&&g.originalEvent&&(u=this._map.mouseEventToContainerPoint(g.originalEvent),h=this._map.containerPointToLayerPoint(u),l=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(l)}});var _Z=pr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(g){var l=g&&g.tagName==="DIV"?g:document.createElement("div"),u=this.options;if(u.html instanceof Element?(Cn(l),l.appendChild(u.html)):l.innerHTML=u.html!==!1?u.html:"",u.bgPos){var h=P(u.bgPos);l.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function jY(g){return new _Z(g)}pr.Default=da;var ua=ri.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Y.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(g){Z(this,g)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(g){g._addZoomLimit(this)},onRemove:function(g){this._removeAllTiles(),ke(this._container),g._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(It(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Rn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(g){return this.options.opacity=g,this._updateOpacity(),this},setZIndex:function(g){return this.options.zIndex=g,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var g=this._clampZoom(this._map.getZoom());g!==this._tileZoom&&(this._tileZoom=g,this._updateLevels()),this._update()}return this},getEvents:function(){var g={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),g.move=this._onMove),this._zoomAnimated&&(g.zoomanim=this._animateZoom),g},createTile:function(){return document.createElement("div")},getTileSize:function(){var g=this.options.tileSize;return g instanceof N?g:new N(g,g)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(g){for(var l=this.getPane().children,u=-g(-1/0,1/0),h=0,S=l.length,w;h<S;h++)w=l[h].style.zIndex,l[h]!==this._container&&w&&(u=g(u,+w));isFinite(u)&&(this.options.zIndex=u+g(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Y.ielt9){No(this._container,this.options.opacity);var g=+new Date,l=!1,u=!1;for(var h in this._tiles){var S=this._tiles[h];if(!(!S.current||!S.loaded)){var w=Math.min(1,(g-S.loaded)/200);No(S.el,w),w<1?l=!0:(S.active?u=!0:this._onOpaqueTile(S),S.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),l&&(Q(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:A,_initContainer:function(){this._container||(this._container=re("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var g=this._tileZoom,l=this.options.maxZoom;if(g!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===g?(this._levels[u].el.style.zIndex=l-Math.abs(g-u),this._onUpdateLevel(u)):(ke(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var h=this._levels[g],S=this._map;return h||(h=this._levels[g]={},h.el=re("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=l,h.origin=S.project(S.unproject(S.getPixelOrigin()),g).round(),h.zoom=g,this._setZoomTransform(h,S.getCenter(),S.getZoom()),A(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:A,_onRemoveLevel:A,_onCreateLevel:A,_pruneTiles:function(){if(this._map){var g,l,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(g in this._tiles)l=this._tiles[g],l.retain=l.current;for(g in this._tiles)if(l=this._tiles[g],l.current&&!l.active){var h=l.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(g in this._tiles)this._tiles[g].retain||this._removeTile(g)}},_removeTilesAtZoom:function(g){for(var l in this._tiles)this._tiles[l].coords.z===g&&this._removeTile(l)},_removeAllTiles:function(){for(var g in this._tiles)this._removeTile(g)},_invalidateAll:function(){for(var g in this._levels)ke(this._levels[g].el),this._onRemoveLevel(Number(g)),delete this._levels[g];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(g,l,u,h){var S=Math.floor(g/2),w=Math.floor(l/2),H=u-1,E=new N(+S,+w);E.z=+H;var T=this._tileCoordsToKey(E),$=this._tiles[T];return $&&$.active?($.retain=!0,!0):($&&$.loaded&&($.retain=!0),H>h?this._retainParent(S,w,H,h):!1)},_retainChildren:function(g,l,u,h){for(var S=2*g;S<2*g+2;S++)for(var w=2*l;w<2*l+2;w++){var H=new N(S,w);H.z=u+1;var E=this._tileCoordsToKey(H),T=this._tiles[E];if(T&&T.active){T.retain=!0;continue}else T&&T.loaded&&(T.retain=!0);u+1<h&&this._retainChildren(S,w,u+1,h)}},_resetView:function(g){var l=g&&(g.pinch||g.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(g){this._setView(g.center,g.zoom,!0,g.noUpdate)},_clampZoom:function(g){var l=this.options;return l.minNativeZoom!==void 0&&g<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<g?l.maxNativeZoom:g},_setView:function(g,l,u,h){var S=Math.round(l);this.options.maxZoom!==void 0&&S>this.options.maxZoom||this.options.minZoom!==void 0&&S<this.options.minZoom?S=void 0:S=this._clampZoom(S);var w=this.options.updateWhenZooming&&S!==this._tileZoom;(!h||w)&&(this._tileZoom=S,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),S!==void 0&&this._update(g),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(g,l)},_setZoomTransforms:function(g,l){for(var u in this._levels)this._setZoomTransform(this._levels[u],g,l)},_setZoomTransform:function(g,l,u){var h=this._map.getZoomScale(u,g.zoom),S=g.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(l,u)).round();Y.any3d?cs(g.el,S,h):Ot(g.el,S)},_resetGrid:function(){var g=this._map,l=g.options.crs,u=this._tileSize=this.getTileSize(),h=this._tileZoom,S=this._map.getPixelWorldBounds(this._tileZoom);S&&(this._globalTileRange=this._pxBoundsToTileRange(S)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(g.project([0,l.wrapLng[0]],h).x/u.x),Math.ceil(g.project([0,l.wrapLng[1]],h).x/u.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(g.project([l.wrapLat[0],0],h).y/u.x),Math.ceil(g.project([l.wrapLat[1],0],h).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(g){var l=this._map,u=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),h=l.getZoomScale(u,this._tileZoom),S=l.project(g,this._tileZoom).floor(),w=l.getSize().divideBy(h*2);return new le(S.subtract(w),S.add(w))},_update:function(g){var l=this._map;if(l){var u=this._clampZoom(l.getZoom());if(g===void 0&&(g=l.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(g),S=this._pxBoundsToTileRange(h),w=S.getCenter(),H=[],E=this.options.keepBuffer,T=new le(S.getBottomLeft().subtract([E,-E]),S.getTopRight().add([E,-E]));if(!(isFinite(S.min.x)&&isFinite(S.min.y)&&isFinite(S.max.x)&&isFinite(S.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var $ in this._tiles){var Ce=this._tiles[$].coords;(Ce.z!==this._tileZoom||!T.contains(new N(Ce.x,Ce.y)))&&(this._tiles[$].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(g,u);return}for(var We=S.min.y;We<=S.max.y;We++)for(var De=S.min.x;De<=S.max.x;De++){var Tn=new N(De,We);if(Tn.z=this._tileZoom,!!this._isValidTile(Tn)){var dn=this._tiles[this._tileCoordsToKey(Tn)];dn?dn.current=!0:H.push(Tn)}}if(H.sort(function(to,yr){return to.distanceTo(w)-yr.distanceTo(w)}),H.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ko=document.createDocumentFragment();for(De=0;De<H.length;De++)this._addTile(H[De],Ko);this._level.el.appendChild(Ko)}}}},_isValidTile:function(g){var l=this._map.options.crs;if(!l.infinite){var u=this._globalTileRange;if(!l.wrapLng&&(g.x<u.min.x||g.x>u.max.x)||!l.wrapLat&&(g.y<u.min.y||g.y>u.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(g);return se(this.options.bounds).overlaps(h)},_keyToBounds:function(g){return this._tileCoordsToBounds(this._keyToTileCoords(g))},_tileCoordsToNwSe:function(g){var l=this._map,u=this.getTileSize(),h=g.scaleBy(u),S=h.add(u),w=l.unproject(h,g.z),H=l.unproject(S,g.z);return[w,H]},_tileCoordsToBounds:function(g){var l=this._tileCoordsToNwSe(g),u=new ye(l[0],l[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(g){return g.x+":"+g.y+":"+g.z},_keyToTileCoords:function(g){var l=g.split(":"),u=new N(+l[0],+l[1]);return u.z=+l[2],u},_removeTile:function(g){var l=this._tiles[g];l&&(ke(l.el),delete this._tiles[g],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(g)}))},_initTile:function(g){He(g,"leaflet-tile");var l=this.getTileSize();g.style.width=l.x+"px",g.style.height=l.y+"px",g.onselectstart=A,g.onmousemove=A,Y.ielt9&&this.options.opacity<1&&No(g,this.options.opacity)},_addTile:function(g,l){var u=this._getTilePos(g),h=this._tileCoordsToKey(g),S=this.createTile(this._wrapCoords(g),r(this._tileReady,this,g));this._initTile(S),this.createTile.length<2&&M(r(this._tileReady,this,g,null,S)),Ot(S,u),this._tiles[h]={el:S,coords:g,current:!0},l.appendChild(S),this.fire("tileloadstart",{tile:S,coords:g})},_tileReady:function(g,l,u){l&&this.fire("tileerror",{error:l,tile:u,coords:g});var h=this._tileCoordsToKey(g);u=this._tiles[h],u&&(u.loaded=+new Date,this._map._fadeAnimated?(No(u.el,0),Q(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),l||(He(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:g})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Y.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(g){return g.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(g){var l=new N(this._wrapX?C(g.x,this._wrapX):g.x,this._wrapY?C(g.y,this._wrapY):g.y);return l.z=g.z,l},_pxBoundsToTileRange:function(g){var l=this.getTileSize();return new le(g.min.unscaleBy(l).floor(),g.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var g in this._tiles)if(!this._tiles[g].loaded)return!1;return!0}});function _Y(g){return new ua(g)}var Zr=ua.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(g,l){this._url=g,l=Z(this,l),l.detectRetina&&Y.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(g,l){return this._url===g&&l===void 0&&(l=!0),this._url=g,l||this.redraw(),this},createTile:function(g,l){var u=document.createElement("img");return xe(u,"load",r(this._tileOnLoad,this,l,u)),xe(u,"error",r(this._tileOnError,this,l,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(g),u},getTileUrl:function(g){var l={r:Y.retina?"@2x":"",s:this._getSubdomain(g),x:g.x,y:g.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-g.y;this.options.tms&&(l.y=u),l["-y"]=u}return G(this._url,i(l,this.options))},_tileOnLoad:function(g,l){Y.ielt9?setTimeout(r(g,this,null,l),0):g(null,l)},_tileOnError:function(g,l,u){var h=this.options.errorTileUrl;h&&l.getAttribute("src")!==h&&(l.src=h),g(u,l)},_onTileRemove:function(g){g.tile.onload=null},_getZoomForUrl:function(){var g=this._tileZoom,l=this.options.maxZoom,u=this.options.zoomReverse,h=this.options.zoomOffset;return u&&(g=l-g),g+h},_getSubdomain:function(g){var l=Math.abs(g.x+g.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var g,l;for(g in this._tiles)if(this._tiles[g].coords.z!==this._tileZoom&&(l=this._tiles[g].el,l.onload=A,l.onerror=A,!l.complete)){l.src=V;var u=this._tiles[g].coords;ke(l),delete this._tiles[g],this.fire("tileabort",{tile:l,coords:u})}},_removeTile:function(g){var l=this._tiles[g];if(l)return l.el.setAttribute("src",V),ua.prototype._removeTile.call(this,g)},_tileReady:function(g,l,u){if(!(!this._map||u&&u.getAttribute("src")===V))return ua.prototype._tileReady.call(this,g,l,u)}});function OZ(g,l){return new Zr(g,l)}var qZ=Zr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(g,l){this._url=g;var u=i({},this.defaultWmsParams);for(var h in l)h in this.options||(u[h]=l[h]);l=Z(this,l);var S=l.detectRetina&&Y.retina?2:1,w=this.getTileSize();u.width=w.x*S,u.height=w.y*S,this.wmsParams=u},onAdd:function(g){this._crs=this.options.crs||g.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Zr.prototype.onAdd.call(this,g)},getTileUrl:function(g){var l=this._tileCoordsToNwSe(g),u=this._crs,h=ae(u.project(l[0]),u.project(l[1])),S=h.min,w=h.max,H=(this._wmsVersion>=1.3&&this._crs===TZ?[S.y,S.x,w.y,w.x]:[S.x,S.y,w.x,w.y]).join(","),E=Zr.prototype.getTileUrl.call(this,g);return E+v(this.wmsParams,E,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+H},setParams:function(g,l){return i(this.wmsParams,g),l||this.redraw(),this}});function OY(g,l){return new qZ(g,l)}Zr.WMS=qZ,OZ.wms=OY;var Ui=ri.extend({options:{padding:.1},initialize:function(g){Z(this,g),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),He(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var g={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(g.zoomanim=this._onAnimZoom),g},_onAnimZoom:function(g){this._updateTransform(g.center,g.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(g,l){var u=this._map.getZoomScale(l,this._zoom),h=this._map.getSize().multiplyBy(.5+this.options.padding),S=this._map.project(this._center,l),w=h.multiplyBy(-u).add(S).subtract(this._map._getNewPixelOrigin(g,l));Y.any3d?cs(this._container,w,u):Ot(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var g in this._layers)this._layers[g]._reset()},_onZoomEnd:function(){for(var g in this._layers)this._layers[g]._project()},_updatePaths:function(){for(var g in this._layers)this._layers[g]._update()},_update:function(){var g=this.options.padding,l=this._map.getSize(),u=this._map.containerPointToLayerPoint(l.multiplyBy(-g)).round();this._bounds=new le(u,u.add(l.multiplyBy(1+g*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),$Z=Ui.extend({options:{tolerance:0},getEvents:function(){var g=Ui.prototype.getEvents.call(this);return g.viewprereset=this._onViewPreReset,g},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ui.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var g=this._container=document.createElement("canvas");xe(g,"mousemove",this._onMouseMove,this),xe(g,"click dblclick mousedown mouseup contextmenu",this._onClick,this),xe(g,"mouseout",this._handleMouseOut,this),g._leaflet_disable_events=!0,this._ctx=g.getContext("2d")},_destroyContainer:function(){Q(this._redrawRequest),delete this._ctx,ke(this._container),Zt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var g;this._redrawBounds=null;for(var l in this._layers)g=this._layers[l],g._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ui.prototype._update.call(this);var g=this._bounds,l=this._container,u=g.getSize(),h=Y.retina?2:1;Ot(l,g.min),l.width=h*u.x,l.height=h*u.y,l.style.width=u.x+"px",l.style.height=u.y+"px",Y.retina&&this._ctx.scale(2,2),this._ctx.translate(-g.min.x,-g.min.y),this.fire("update")}},_reset:function(){Ui.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(g){this._updateDashArray(g),this._layers[a(g)]=g;var l=g._order={layer:g,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(g){this._requestRedraw(g)},_removePath:function(g){var l=g._order,u=l.next,h=l.prev;u?u.prev=h:this._drawLast=h,h?h.next=u:this._drawFirst=u,delete g._order,delete this._layers[a(g)],this._requestRedraw(g)},_updatePath:function(g){this._extendRedrawBounds(g),g._project(),g._update(),this._requestRedraw(g)},_updateStyle:function(g){this._updateDashArray(g),this._requestRedraw(g)},_updateDashArray:function(g){if(typeof g.options.dashArray=="string"){var l=g.options.dashArray.split(/[, ]+/),u=[],h,S;for(S=0;S<l.length;S++){if(h=Number(l[S]),isNaN(h))return;u.push(h)}g.options._dashArray=u}else g.options._dashArray=g.options.dashArray},_requestRedraw:function(g){this._map&&(this._extendRedrawBounds(g),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(g){if(g._pxBounds){var l=(g.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new le,this._redrawBounds.extend(g._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(g._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var g=this._redrawBounds;if(g){var l=g.getSize();this._ctx.clearRect(g.min.x,g.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var g,l=this._redrawBounds;if(this._ctx.save(),l){var u=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)g=h.layer,(!l||g._pxBounds&&g._pxBounds.intersects(l))&&g._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(g,l){if(this._drawing){var u,h,S,w,H=g._parts,E=H.length,T=this._ctx;if(E){for(T.beginPath(),u=0;u<E;u++){for(h=0,S=H[u].length;h<S;h++)w=H[u][h],T[h?"lineTo":"moveTo"](w.x,w.y);l&&T.closePath()}this._fillStroke(T,g)}}},_updateCircle:function(g){if(!(!this._drawing||g._empty())){var l=g._point,u=this._ctx,h=Math.max(Math.round(g._radius),1),S=(Math.max(Math.round(g._radiusY),1)||h)/h;S!==1&&(u.save(),u.scale(1,S)),u.beginPath(),u.arc(l.x,l.y/S,h,0,Math.PI*2,!1),S!==1&&u.restore(),this._fillStroke(u,g)}},_fillStroke:function(g,l){var u=l.options;u.fill&&(g.globalAlpha=u.fillOpacity,g.fillStyle=u.fillColor||u.color,g.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(g.setLineDash&&g.setLineDash(l.options&&l.options._dashArray||[]),g.globalAlpha=u.opacity,g.lineWidth=u.weight,g.strokeStyle=u.color,g.lineCap=u.lineCap,g.lineJoin=u.lineJoin,g.stroke())},_onClick:function(g){for(var l=this._map.mouseEventToLayerPoint(g),u,h,S=this._drawFirst;S;S=S.next)u=S.layer,u.options.interactive&&u._containsPoint(l)&&(!(g.type==="click"||g.type==="preclick")||!this._map._draggableMoved(u))&&(h=u);this._fireEvent(h?[h]:!1,g)},_onMouseMove:function(g){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(g);this._handleMouseHover(g,l)}},_handleMouseOut:function(g){var l=this._hoveredLayer;l&&(zt(this._container,"leaflet-interactive"),this._fireEvent([l],g,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(g,l){if(!this._mouseHoverThrottled){for(var u,h,S=this._drawFirst;S;S=S.next)u=S.layer,u.options.interactive&&u._containsPoint(l)&&(h=u);h!==this._hoveredLayer&&(this._handleMouseOut(g),h&&(He(this._container,"leaflet-interactive"),this._fireEvent([h],g,"mouseover"),this._hoveredLayer=h)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,g),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(g,l,u){this._map._fireDOMEvent(l,u||l.type,g)},_bringToFront:function(g){var l=g._order;if(l){var u=l.next,h=l.prev;if(u)u.prev=h;else return;h?h.next=u:u&&(this._drawFirst=u),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(g)}},_bringToBack:function(g){var l=g._order;if(l){var u=l.next,h=l.prev;if(h)h.next=u;else return;u?u.prev=h:h&&(this._drawLast=h),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(g)}}});function ey(g){return Y.canvas?new $Z(g):null}var Aa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(g){return document.createElement("<lvml:"+g+' class="lvml">')}}catch{}return function(g){return document.createElement("<"+g+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),qY={_initContainer:function(){this._container=re("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ui.prototype._update.call(this),this.fire("update"))},_initPath:function(g){var l=g._container=Aa("shape");He(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",g._path=Aa("path"),l.appendChild(g._path),this._updateStyle(g),this._layers[a(g)]=g},_addPath:function(g){var l=g._container;this._container.appendChild(l),g.options.interactive&&g.addInteractiveTarget(l)},_removePath:function(g){var l=g._container;ke(l),g.removeInteractiveTarget(l),delete this._layers[a(g)]},_updateStyle:function(g){var l=g._stroke,u=g._fill,h=g.options,S=g._container;S.stroked=!!h.stroke,S.filled=!!h.fill,h.stroke?(l||(l=g._stroke=Aa("stroke")),S.appendChild(l),l.weight=h.weight+"px",l.color=h.color,l.opacity=h.opacity,h.dashArray?l.dashStyle=y(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=h.lineCap.replace("butt","flat"),l.joinstyle=h.lineJoin):l&&(S.removeChild(l),g._stroke=null),h.fill?(u||(u=g._fill=Aa("fill")),S.appendChild(u),u.color=h.fillColor||h.color,u.opacity=h.fillOpacity):u&&(S.removeChild(u),g._fill=null)},_updateCircle:function(g){var l=g._point.round(),u=Math.round(g._radius),h=Math.round(g._radiusY||u);this._setPath(g,g._empty()?"M0 0":"AL "+l.x+","+l.y+" "+u+","+h+" 0,"+65535*360)},_setPath:function(g,l){g._path.v=l},_bringToFront:function(g){It(g._container)},_bringToBack:function(g){Rn(g._container)}},Kc=Y.vml?Aa:_e,ma=Ui.extend({_initContainer:function(){this._container=Kc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Kc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ke(this._container),Zt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ui.prototype._update.call(this);var g=this._bounds,l=g.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,u.setAttribute("width",l.x),u.setAttribute("height",l.y)),Ot(u,g.min),u.setAttribute("viewBox",[g.min.x,g.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(g){var l=g._path=Kc("path");g.options.className&&He(l,g.options.className),g.options.interactive&&He(l,"leaflet-interactive"),this._updateStyle(g),this._layers[a(g)]=g},_addPath:function(g){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(g._path),g.addInteractiveTarget(g._path)},_removePath:function(g){ke(g._path),g.removeInteractiveTarget(g._path),delete this._layers[a(g)]},_updatePath:function(g){g._project(),g._update()},_updateStyle:function(g){var l=g._path,u=g.options;l&&(u.stroke?(l.setAttribute("stroke",u.color),l.setAttribute("stroke-opacity",u.opacity),l.setAttribute("stroke-width",u.weight),l.setAttribute("stroke-linecap",u.lineCap),l.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?l.setAttribute("stroke-dasharray",u.dashArray):l.removeAttribute("stroke-dasharray"),u.dashOffset?l.setAttribute("stroke-dashoffset",u.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),u.fill?(l.setAttribute("fill",u.fillColor||u.color),l.setAttribute("fill-opacity",u.fillOpacity),l.setAttribute("fill-rule",u.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(g,l){this._setPath(g,qn(g._parts,l))},_updateCircle:function(g){var l=g._point,u=Math.max(Math.round(g._radius),1),h=Math.max(Math.round(g._radiusY),1)||u,S="a"+u+","+h+" 0 1,0 ",w=g._empty()?"M0 0":"M"+(l.x-u)+","+l.y+S+u*2+",0 "+S+-u*2+",0 ";this._setPath(g,w)},_setPath:function(g,l){g._path.setAttribute("d",l)},_bringToFront:function(g){It(g._path)},_bringToBack:function(g){Rn(g._path)}});Y.vml&&ma.include(qY);function ty(g){return Y.svg||Y.vml?new ma(g):null}Oe.include({getRenderer:function(g){var l=g.options.renderer||this._getPaneRenderer(g.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(g){if(g==="overlayPane"||g===void 0)return!1;var l=this._paneRenderers[g];return l===void 0&&(l=this._createRenderer({pane:g}),this._paneRenderers[g]=l),l},_createRenderer:function(g){return this.options.preferCanvas&&ey(g)||ty(g)}});var ny=br.extend({initialize:function(g,l){br.prototype.initialize.call(this,this._boundsToLatLngs(g),l)},setBounds:function(g){return this.setLatLngs(this._boundsToLatLngs(g))},_boundsToLatLngs:function(g){return g=se(g),[g.getSouthWest(),g.getNorthWest(),g.getNorthEast(),g.getSouthEast()]}});function $Y(g,l){return new ny(g,l)}ma.create=Kc,ma.pointsToPath=qn,Ti.geometryToLayer=Xc,Ti.coordsToLatLng=pm,Ti.coordsToLatLngs=Jc,Ti.latLngToCoords=bm,Ti.latLngsToCoords=Yc,Ti.getFeature=fr,Ti.asFeature=Hc,Oe.mergeOptions({boxZoom:!0});var oy=Gi.extend({initialize:function(g){this._map=g,this._container=g._container,this._pane=g._panes.overlayPane,this._resetStateTimeout=0,g.on("unload",this._destroy,this)},addHooks:function(){xe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Zt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ke(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(g){if(!g.shiftKey||g.which!==1&&g.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ra(),tm(),this._startPoint=this._map.mouseEventToContainerPoint(g),xe(document,{contextmenu:us,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(g){this._moved||(this._moved=!0,this._box=re("div","leaflet-zoom-box",this._container),He(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(g);var l=new le(this._point,this._startPoint),u=l.getSize();Ot(this._box,l.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(ke(this._box),zt(this._container,"leaflet-crosshair")),la(),nm(),Zt(document,{contextmenu:us,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(g){if(!(g.which!==1&&g.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var l=new ye(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(g){g.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Oe.addInitHook("addHandler","boxZoom",oy),Oe.mergeOptions({doubleClickZoom:!0});var iy=Gi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(g){var l=this._map,u=l.getZoom(),h=l.options.zoomDelta,S=g.originalEvent.shiftKey?u-h:u+h;l.options.doubleClickZoom==="center"?l.setZoom(S):l.setZoomAround(g.containerPoint,S)}});Oe.addInitHook("addHandler","doubleClickZoom",iy),Oe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gy=Gi.extend({addHooks:function(){if(!this._draggable){var g=this._map;this._draggable=new bg(g._mapPane,g._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),g.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),g.on("zoomend",this._onZoomEnd,this),g.whenReady(this._onZoomEnd,this))}He(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){zt(this._map._container,"leaflet-grab"),zt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var g=this._map;if(g._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=se(this._map.options.maxBounds);this._offsetLimit=ae(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;g.fire("movestart").fire("dragstart"),g.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(g){if(this._map.options.inertia){var l=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(l),this._prunePositions(l)}this._map.fire("move",g).fire("drag",g)},_prunePositions:function(g){for(;this._positions.length>1&&g-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var g=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(g).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(g,l){return g-(g-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var g=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;g.x<l.min.x&&(g.x=this._viscousLimit(g.x,l.min.x)),g.y<l.min.y&&(g.y=this._viscousLimit(g.y,l.min.y)),g.x>l.max.x&&(g.x=this._viscousLimit(g.x,l.max.x)),g.y>l.max.y&&(g.y=this._viscousLimit(g.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(g)}},_onPreDragWrap:function(){var g=this._worldWidth,l=Math.round(g/2),u=this._initialWorldOffset,h=this._draggable._newPos.x,S=(h-l+u)%g+l-u,w=(h+l+u)%g-l-u,H=Math.abs(S+u)<Math.abs(w+u)?S:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=H},_onDragEnd:function(g){var l=this._map,u=l.options,h=!u.inertia||g.noInertia||this._times.length<2;if(l.fire("dragend",g),h)l.fire("moveend");else{this._prunePositions(+new Date);var S=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,H=u.easeLinearity,E=S.multiplyBy(H/w),T=E.distanceTo([0,0]),$=Math.min(u.inertiaMaxSpeed,T),Ce=E.multiplyBy($/T),We=$/(u.inertiaDeceleration*H),De=Ce.multiplyBy(-We/2).round();!De.x&&!De.y?l.fire("moveend"):(De=l._limitOffset(De,l.options.maxBounds),M(function(){l.panBy(De,{duration:We,easeLinearity:H,noMoveStart:!0,animate:!0})}))}}});Oe.addInitHook("addHandler","dragging",gy),Oe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var sy=Gi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(g){this._map=g,this._setPanDelta(g.options.keyboardPanDelta),this._setZoomDelta(g.options.zoomDelta)},addHooks:function(){var g=this._map._container;g.tabIndex<=0&&(g.tabIndex="0"),xe(g,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Zt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var g=document.body,l=document.documentElement,u=g.scrollTop||l.scrollTop,h=g.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(h,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(g){var l=this._panKeys={},u=this.keyCodes,h,S;for(h=0,S=u.left.length;h<S;h++)l[u.left[h]]=[-1*g,0];for(h=0,S=u.right.length;h<S;h++)l[u.right[h]]=[g,0];for(h=0,S=u.down.length;h<S;h++)l[u.down[h]]=[0,g];for(h=0,S=u.up.length;h<S;h++)l[u.up[h]]=[0,-1*g]},_setZoomDelta:function(g){var l=this._zoomKeys={},u=this.keyCodes,h,S;for(h=0,S=u.zoomIn.length;h<S;h++)l[u.zoomIn[h]]=g;for(h=0,S=u.zoomOut.length;h<S;h++)l[u.zoomOut[h]]=-g},_addHooks:function(){xe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Zt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(g){if(!(g.altKey||g.ctrlKey||g.metaKey)){var l=g.keyCode,u=this._map,h;if(l in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(h=this._panKeys[l],g.shiftKey&&(h=P(h).multiplyBy(3)),u.options.maxBounds&&(h=u._limitOffset(P(h),u.options.maxBounds)),u.options.worldCopyJump){var S=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(h)));u.panTo(S)}else u.panBy(h)}else if(l in this._zoomKeys)u.setZoom(u.getZoom()+(g.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;us(g)}}});Oe.addInitHook("addHandler","keyboard",sy),Oe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ry=Gi.extend({addHooks:function(){xe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Zt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(g){var l=wZ(g),u=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(g),this._startTime||(this._startTime=+new Date);var h=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),h),us(g)},_performZoom:function(){var g=this._map,l=g.getZoom(),u=this._map.options.zoomSnap||0;g._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),S=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,w=u?Math.ceil(S/u)*u:S,H=g._limitZoom(l+(this._delta>0?w:-w))-l;this._delta=0,this._startTime=null,H&&(g.options.scrollWheelZoom==="center"?g.setZoom(l+H):g.setZoomAround(this._lastMousePos,l+H))}});Oe.addInitHook("addHandler","scrollWheelZoom",ry);var e1=600;Oe.mergeOptions({tapHold:Y.touchNative&&Y.safari&&Y.mobile,tapTolerance:15});var ly=Gi.extend({addHooks:function(){xe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Zt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(g){if(clearTimeout(this._holdTimeout),g.touches.length===1){var l=g.touches[0];this._startPos=this._newPos=new N(l.clientX,l.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(xe(document,"touchend",yn),xe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),e1),xe(document,"touchend touchcancel contextmenu",this._cancel,this),xe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function g(){Zt(document,"touchend",yn),Zt(document,"touchend touchcancel",g)},_cancel:function(){clearTimeout(this._holdTimeout),Zt(document,"touchend touchcancel contextmenu",this._cancel,this),Zt(document,"touchmove",this._onMove,this)},_onMove:function(g){var l=g.touches[0];this._newPos=new N(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(g,l){var u=new MouseEvent(g,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});u._simulated=!0,l.target.dispatchEvent(u)}});Oe.addInitHook("addHandler","tapHold",ly),Oe.mergeOptions({touchZoom:Y.touch,bounceAtZoomLimits:!0});var ay=Gi.extend({addHooks:function(){He(this._map._container,"leaflet-touch-zoom"),xe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){zt(this._map._container,"leaflet-touch-zoom"),Zt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(g){var l=this._map;if(!(!g.touches||g.touches.length!==2||l._animatingZoom||this._zooming)){var u=l.mouseEventToContainerPoint(g.touches[0]),h=l.mouseEventToContainerPoint(g.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(u.add(h)._divideBy(2))),this._startDist=u.distanceTo(h),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),xe(document,"touchmove",this._onTouchMove,this),xe(document,"touchend touchcancel",this._onTouchEnd,this),yn(g)}},_onTouchMove:function(g){if(!(!g.touches||g.touches.length!==2||!this._zooming)){var l=this._map,u=l.mouseEventToContainerPoint(g.touches[0]),h=l.mouseEventToContainerPoint(g.touches[1]),S=u.distanceTo(h)/this._startDist;if(this._zoom=l.getScaleZoom(S,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&S<1||this._zoom>l.getMaxZoom()&&S>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,S===1)return}else{var w=u._add(h)._divideBy(2)._subtract(this._centerPoint);if(S===1&&w.x===0&&w.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),Q(this._animRequest);var H=r(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(H,this,!0),yn(g)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Q(this._animRequest),Zt(document,"touchmove",this._onTouchMove,this),Zt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Oe.addInitHook("addHandler","touchZoom",ay),Oe.BoxZoom=oy,Oe.DoubleClickZoom=iy,Oe.Drag=gy,Oe.Keyboard=sy,Oe.ScrollWheelZoom=ry,Oe.TapHold=ly,Oe.TouchZoom=ay,n.Bounds=le,n.Browser=Y,n.CRS=Je,n.Canvas=$Z,n.Circle=hm,n.CircleMarker=wc,n.Class=j,n.Control=si,n.DivIcon=_Z,n.DivOverlay=Bi,n.DomEvent=pY,n.DomUtil=mY,n.Draggable=bg,n.Evented=te,n.FeatureGroup=Li,n.GeoJSON=Ti,n.GridLayer=ua,n.Handler=Gi,n.Icon=pr,n.ImageOverlay=xc,n.LatLng=ue,n.LatLngBounds=ye,n.Layer=ri,n.LayerGroup=hr,n.LineUtil=wY,n.Map=Oe,n.Marker=kc,n.Mixin=SY,n.Path=fg,n.Point=N,n.PolyUtil=vY,n.Polygon=br,n.Polyline=zi,n.Popup=Nc,n.PosAnimation=XZ,n.Projection=XY,n.Rectangle=ny,n.Renderer=Ui,n.SVG=ma,n.SVGOverlay=jZ,n.TileLayer=Zr,n.Tooltip=Fc,n.Transformation=Ke,n.Util=q,n.VideoOverlay=PZ,n.bind=r,n.bounds=ae,n.canvas=ey,n.circle=EY,n.circleMarker=KY,n.control=ca,n.divIcon=jY,n.extend=i,n.featureGroup=xY,n.geoJSON=QZ,n.geoJson=zY,n.gridLayer=_Y,n.icon=NY,n.imageOverlay=TY,n.latLng=ie,n.latLngBounds=se,n.layerGroup=HY,n.map=bY,n.marker=FY,n.point=P,n.polygon=LY,n.polyline=MY,n.popup=QY,n.rectangle=$Y,n.setOptions=Z,n.stamp=a,n.svg=ty,n.svgOverlay=DY,n.tileLayer=OZ,n.tooltip=PY,n.transformation=Me,n.version=o,n.videoOverlay=UY;var t1=window.L;n.noConflict=function(){return window.L=t1,this},window.L=n})}(dC,dC.exports)),dC.exports}(function(e,t){(function(n,o){o(Hw())})(fW,function(n){n.Icon.Default.mergeOptions({iconUrl:null,iconRetinaUrl:null,shadowUrl:null,iconSize:null,iconAnchor:null,popupAnchor:null,tooltipAnchor:null,shadowSize:null,classNamePrefix:"leaflet-default-icon-"}),n.Icon.Default.include({_needsInit:!0,_getIconUrl:function(A){var m=this.options.imagePath||n.Icon.Default.imagePath||"";return this._needsInit&&this._initializeOptions(m),m+n.Icon.prototype._getIconUrl.call(this,A)},_initializeOptions:function(A){this._setOptions("icon",o,A),this._setOptions("shadow",o,A),this._setOptions("popup",i),this._setOptions("tooltip",i),this._needsInit=!1},_setOptions:function(A,m,p){var b=this.options,Z=b.classNamePrefix,v=m(Z+A,p);for(var f in v)b[A+f]=b[A+f]||v[f]}});function o(A,m){var p=n.DomUtil.create("div",A,document.body),b=c(p),Z=s(b,m),v=I(p,"width"),f=I(p,"height"),G=I(p,"margin-left"),y=I(p,"margin-top");return p.parentNode.removeChild(p),{Url:Z[0],RetinaUrl:Z[1],Size:[v,f],Anchor:[-G,-y]}}function i(A){var m=n.DomUtil.create("div",A,document.body),p=I(m,"margin-left"),b=I(m,"margin-top");return m.parentNode.removeChild(m),{Anchor:[p,b]}}function s(A,m){for(var p=/url\(['"]?([^"']*?)['"]?\)/gi,b=[],Z=p.exec(A);Z;)b.push(m?r(Z[1]):Z[1]),Z=p.exec(A);return b}function r(A){return A.substr(A.lastIndexOf("/")+1)}function I(A,m){return parseInt(a(A,m),10)}function a(A,m){return n.DomUtil.getStyle(A,m)||n.DomUtil.getStyle(A,C(m))}function c(A){var m=a(A,"background-image");return m&&m!=="none"?m:a(A,"cursor")}function C(A){return A.replace(/-(\w)/g,function(m,p){return p.toUpperCase()})}})})();var ln=Hw();ln.Icon.Default.mergeOptions({iconUrl:null,iconRetinaUrl:null,shadowUrl:null,iconSize:null,iconAnchor:null,popupAnchor:null,tooltipAnchor:null,shadowSize:null,classNamePrefix:"leaflet-default-icon-"});ln.Icon.Default.include({_needsInit:!0,_getIconUrl:function(e){var t=this.options.imagePath||ln.Icon.Default.imagePath||"";return this._needsInit&&this._initializeOptions(t),t+ln.Icon.prototype._getIconUrl.call(this,e)},_initializeOptions:function(e){this._setOptions("icon",SS,e),this._setOptions("shadow",SS,e),this._setOptions("popup",vS),this._setOptions("tooltip",vS),this._needsInit=!1},_setOptions:function(e,t,n){var o=this.options,i=o.classNamePrefix,s=t(i+e,n);for(var r in s)o[e+r]=o[e+r]||s[r]}});function SS(e,t){var n=ln.DomUtil.create("div",e,document.body),o=c4(n),i=a4(o,t),s=_r(n,"width"),r=_r(n,"height"),I=_r(n,"margin-left"),a=_r(n,"margin-top");return n.parentNode.removeChild(n),{Url:i[0],RetinaUrl:i[1],Size:[s,r],Anchor:[-I,-a]}}function vS(e){var t=ln.DomUtil.create("div",e,document.body),n=_r(t,"margin-left"),o=_r(t,"margin-top");return t.parentNode.removeChild(t),{Anchor:[n,o]}}function a4(e,t){for(var n=/url\(['"]?([^"']*?)['"]?\)/gi,o=[],i=n.exec(e);i;)o.push(t?I4(i[1]):i[1]),i=n.exec(e);return o}function I4(e){return e.substr(e.lastIndexOf("/")+1)}function _r(e,t){return parseInt(_p(e,t),10)}function _p(e,t){return ln.DomUtil.getStyle(e,t)||ln.DomUtil.getStyle(e,C4(t))}function c4(e){var t=_p(e,"background-image");return t&&t!=="none"?t:_p(e,"cursor")}function C4(e){return e.replace(/-(\w)/g,function(t,n){return n.toUpperCase()})}function xw(e,t){const n=B.useRef(t);B.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}const d4=1;function u4(e){return Object.freeze({__version:d4,map:e})}function A4(e,t){return Object.freeze({...e,...t})}const Nw=B.createContext(null),Fw=Nw.Provider;function Kw(){const e=B.useContext(Nw);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function m4(e){function t(n,o){const{instance:i,context:s}=e(n).current;return B.useImperativeHandle(o,()=>i),n.children==null?null:Ee.createElement(Fw,{value:s},n.children)}return B.forwardRef(t)}function h4(e){function t(n,o){const[i,s]=B.useState(!1),{instance:r}=e(n,s).current;B.useImperativeHandle(o,()=>r),B.useEffect(function(){i&&r.update()},[r,i,n.children]);const I=r._contentNode;return I?qI.createPortal(n.children,I):null}return B.forwardRef(t)}function p4(e){function t(n,o){const{instance:i}=e(n).current;return B.useImperativeHandle(o,()=>i),null}return B.forwardRef(t)}function Ew(e,t){const n=B.useRef();B.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function w0(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function b4(e,t){return function(o,i){const s=Kw(),r=e(w0(o,s),s);return xw(s.map,o.attribution),Ew(r.current,o.eventHandlers),t(r.current,s,o,i),r}}function X0(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function J0(e,t){return t==null?function(o,i){const s=B.useRef();return s.current||(s.current=e(o,i)),s}:function(o,i){const s=B.useRef();s.current||(s.current=e(o,i));const r=B.useRef(o),{instance:I}=s.current;return B.useEffect(function(){r.current!==o&&(t(I,o,r.current),r.current=o)},[I,o,i]),s}}function f4(e,t){B.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var s;(s=t.layerContainer)==null||s.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function Mw(e){return function(n){const o=Kw(),i=e(w0(n,o),o);return xw(o.map,n.attribution),Ew(i.current,n.eventHandlers),f4(i.current,o),i}}function Z4(e,t){const n=J0(e,t),o=Mw(n);return m4(o)}function y4(e,t){const n=J0(e),o=b4(n,t);return h4(o)}function G4(e,t){const n=J0(e,t),o=Mw(n);return p4(o)}function B4(e,t,n){const{opacity:o,zIndex:i}=t;o!=null&&o!==n.opacity&&e.setOpacity(o),i!=null&&i!==n.zIndex&&e.setZIndex(i)}function Op(){return Op=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Op.apply(this,arguments)}function S4({bounds:e,boundsOptions:t,center:n,children:o,className:i,id:s,placeholder:r,style:I,whenReady:a,zoom:c,...C},A){const[m]=B.useState({className:i,id:s,style:I}),[p,b]=B.useState(null);B.useImperativeHandle(A,()=>(p==null?void 0:p.map)??null,[p]);const Z=B.useCallback(f=>{if(f!==null&&p===null){const G=new ln.Map(f,C);n!=null&&c!=null?G.setView(n,c):e!=null&&G.fitBounds(e,t),a!=null&&G.whenReady(a),b(u4(G))}},[]);B.useEffect(()=>()=>{p==null||p.map.remove()},[p]);const v=p?Ee.createElement(Fw,{value:p},o):r??null;return Ee.createElement("div",Op({},m,{ref:Z}),v)}const lr=B.forwardRef(S4),ar=Z4(function({position:t,...n},o){const i=new ln.Marker(t,n);return X0(i,A4(o,{overlayContainer:i}))},function(t,n,o){n.position!==o.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==o.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==o.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==o.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==o.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),Ir=y4(function(t,n){const o=new ln.Popup(t,n.overlayContainer);return X0(o,n)},function(t,n,{position:o},i){B.useEffect(function(){const{instance:r}=t;function I(c){c.popup===r&&(r.update(),i(!0))}function a(c){c.popup===r&&i(!1)}return n.map.on({popupopen:I,popupclose:a}),n.overlayContainer==null?(o!=null&&r.setLatLng(o),r.openOn(n.map)):n.overlayContainer.bindPopup(r),function(){var C;n.map.off({popupopen:I,popupclose:a}),(C=n.overlayContainer)==null||C.unbindPopup(),n.map.removeLayer(r)}},[t,n,i,o])}),cr=G4(function({url:t,...n},o){const i=new ln.TileLayer(t,w0(n,o));return X0(i,o)},function(t,n,o){B4(t,n,o);const{url:i}=n;i!=null&&i!==o.url&&t.setUrl(i)});function v4(){const e=new ln.Icon({iconUrl:"https://cdn.pixabay.com/photo/2014/04/03/10/03/google-309740_1280.png",iconSize:[35,35]}),t=[13.90661863070067,100.52568870594502];return d.jsxs("div",{style:{width:"100%",height:"100%",aspectRatio:.5},children:[d.jsx(En,{}),d.jsxs(lr,{style:{width:"100%",height:"100%"},center:t,zoom:13,scrollWheelZoom:!1,children:[d.jsx(cr,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),d.jsx(ar,{position:[13.90661863070067,100.52568870594502],icon:e,children:d.jsx(Ir,{children:"ร้านผักคุณนายวิมล"})})]}),","]})}function W4(){const e=new ln.Icon({iconUrl:"https://cdn.pixabay.com/photo/2014/04/03/10/03/google-309740_1280.png",iconSize:[35,35]}),t=[13.745972896168352,100.53439096546253];return d.jsxs("div",{style:{width:"100%",height:"100%",aspectRatio:.5},children:[d.jsx(En,{}),d.jsxs(lr,{style:{width:"100%",height:"100%"},center:t,zoom:13,scrollWheelZoom:!1,children:[d.jsx(cr,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),d.jsx(ar,{position:[13.745972896168352,100.53439096546253],icon:e,children:d.jsx(Ir,{children:"ร้านผลไม้นายต้นไม้"})})]}),","]})}function V4(){const e=new ln.Icon({iconUrl:"https://cdn.pixabay.com/photo/2014/04/03/10/03/google-309740_1280.png",iconSize:[35,35]}),t=[13.769107994163104,100.64155345474909];return d.jsxs("div",{style:{width:"100%",height:"100%",aspectRatio:.5},children:[d.jsx(En,{}),d.jsxs(lr,{style:{width:"100%",height:"100%"},center:t,zoom:13,scrollWheelZoom:!1,children:[d.jsx(cr,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),d.jsx(ar,{position:[13.769107994163104,100.64155345474909],icon:e,children:d.jsx(Ir,{children:"ร้านไข่ไก่ปารณีย์"})})]}),","]})}function R4(){const e=new ln.Icon({iconUrl:"https://cdn.pixabay.com/photo/2014/04/03/10/03/google-309740_1280.png",iconSize:[35,35]}),t=[13.768441080022008,100.63468699994466];return d.jsxs("div",{style:{width:"100%",height:"100%",aspectRatio:.5},children:[d.jsx(En,{}),d.jsxs(lr,{style:{width:"100%",height:"100%"},center:t,zoom:13,scrollWheelZoom:!1,children:[d.jsx(cr,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),d.jsx(ar,{position:[13.768441080022008,100.63468699994466],icon:e,children:d.jsx(Ir,{children:"ร้านไข่เป็ดนายกรุง"})})]}),","]})}function k4(){const e=new ln.Icon({iconUrl:"https://cdn.pixabay.com/photo/2014/04/03/10/03/google-309740_1280.png",iconSize:[35,35]}),t=[13.751238283332075,100.66766414555302];return d.jsxs("div",{style:{width:"100%",height:"100%",aspectRatio:.5},children:[d.jsx(En,{}),d.jsxs(lr,{style:{width:"100%",height:"100%"},center:t,zoom:13,scrollWheelZoom:!1,children:[d.jsx(cr,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),d.jsx(ar,{position:[13.751238283332075,100.66766414555302],icon:e,children:d.jsx(Ir,{children:"ร้านผลไม้นางกมลาสน์"})})]}),","]})}var w4=Object.defineProperty,Qd=Object.getOwnPropertySymbols,Lw=Object.prototype.hasOwnProperty,zw=Object.prototype.propertyIsEnumerable,WS=(e,t,n)=>t in e?w4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FI=(e,t)=>{for(var n in t||(t={}))Lw.call(t,n)&&WS(e,n,t[n]);if(Qd)for(var n of Qd(t))zw.call(t,n)&&WS(e,n,t[n]);return e},Y0=(e,t)=>{var n={};for(var o in e)Lw.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Qd)for(var o of Qd(e))t.indexOf(o)<0&&zw.call(e,o)&&(n[o]=e[o]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var qs;(e=>{const t=class{constructor(a,c,C,A){if(this.version=a,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],a<t.MIN_VERSION||a>t.MAX_VERSION)throw new RangeError("Version value out of range");if(A<-1||A>7)throw new RangeError("Mask value out of range");this.size=a*4+17;let m=[];for(let b=0;b<this.size;b++)m.push(!1);for(let b=0;b<this.size;b++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const p=this.addEccAndInterleave(C);if(this.drawCodewords(p),A==-1){let b=1e9;for(let Z=0;Z<8;Z++){this.applyMask(Z),this.drawFormatBits(Z);const v=this.getPenaltyScore();v<b&&(A=Z,b=v),this.applyMask(Z)}}s(0<=A&&A<=7),this.mask=A,this.applyMask(A),this.drawFormatBits(A),this.isFunction=[]}static encodeText(a,c){const C=e.QrSegment.makeSegments(a);return t.encodeSegments(C,c)}static encodeBinary(a,c){const C=e.QrSegment.makeBytes(a);return t.encodeSegments([C],c)}static encodeSegments(a,c,C=1,A=40,m=-1,p=!0){if(!(t.MIN_VERSION<=C&&C<=A&&A<=t.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let b,Z;for(b=C;;b++){const y=t.getNumDataCodewords(b,c)*8,W=I.getTotalBits(a,b);if(W<=y){Z=W;break}if(b>=A)throw new RangeError("Data too long")}for(const y of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])p&&Z<=t.getNumDataCodewords(b,y)*8&&(c=y);let v=[];for(const y of a){o(y.mode.modeBits,4,v),o(y.numChars,y.mode.numCharCountBits(b),v);for(const W of y.getData())v.push(W)}s(v.length==Z);const f=t.getNumDataCodewords(b,c)*8;s(v.length<=f),o(0,Math.min(4,f-v.length),v),o(0,(8-v.length%8)%8,v),s(v.length%8==0);for(let y=236;v.length<f;y^=253)o(y,8,v);let G=[];for(;G.length*8<v.length;)G.push(0);return v.forEach((y,W)=>G[W>>>3]|=y<<7-(W&7)),new t(b,c,G,m)}getModule(a,c){return 0<=a&&a<this.size&&0<=c&&c<this.size&&this.modules[c][a]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const a=this.getAlignmentPatternPositions(),c=a.length;for(let C=0;C<c;C++)for(let A=0;A<c;A++)C==0&&A==0||C==0&&A==c-1||C==c-1&&A==0||this.drawAlignmentPattern(a[C],a[A]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(a){const c=this.errorCorrectionLevel.formatBits<<3|a;let C=c;for(let m=0;m<10;m++)C=C<<1^(C>>>9)*1335;const A=(c<<10|C)^21522;s(A>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,i(A,m));this.setFunctionModule(8,7,i(A,6)),this.setFunctionModule(8,8,i(A,7)),this.setFunctionModule(7,8,i(A,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,i(A,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,i(A,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,i(A,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let a=this.version;for(let C=0;C<12;C++)a=a<<1^(a>>>11)*7973;const c=this.version<<12|a;s(c>>>18==0);for(let C=0;C<18;C++){const A=i(c,C),m=this.size-11+C%3,p=Math.floor(C/3);this.setFunctionModule(m,p,A),this.setFunctionModule(p,m,A)}}drawFinderPattern(a,c){for(let C=-4;C<=4;C++)for(let A=-4;A<=4;A++){const m=Math.max(Math.abs(A),Math.abs(C)),p=a+A,b=c+C;0<=p&&p<this.size&&0<=b&&b<this.size&&this.setFunctionModule(p,b,m!=2&&m!=4)}}drawAlignmentPattern(a,c){for(let C=-2;C<=2;C++)for(let A=-2;A<=2;A++)this.setFunctionModule(a+A,c+C,Math.max(Math.abs(A),Math.abs(C))!=1)}setFunctionModule(a,c,C){this.modules[c][a]=C,this.isFunction[c][a]=!0}addEccAndInterleave(a){const c=this.version,C=this.errorCorrectionLevel;if(a.length!=t.getNumDataCodewords(c,C))throw new RangeError("Invalid argument");const A=t.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][c],m=t.ECC_CODEWORDS_PER_BLOCK[C.ordinal][c],p=Math.floor(t.getNumRawDataModules(c)/8),b=A-p%A,Z=Math.floor(p/A);let v=[];const f=t.reedSolomonComputeDivisor(m);for(let y=0,W=0;y<A;y++){let V=a.slice(W,W+Z-m+(y<b?0:1));W+=V.length;const X=t.reedSolomonComputeRemainder(V,f);y<b&&V.push(0),v.push(V.concat(X))}let G=[];for(let y=0;y<v[0].length;y++)v.forEach((W,V)=>{(y!=Z-m||V>=b)&&G.push(W[y])});return s(G.length==p),G}drawCodewords(a){if(a.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let A=0;A<this.size;A++)for(let m=0;m<2;m++){const p=C-m,Z=(C+1&2)==0?this.size-1-A:A;!this.isFunction[Z][p]&&c<a.length*8&&(this.modules[Z][p]=i(a[c>>>3],7-(c&7)),c++)}}s(c==a.length*8)}applyMask(a){if(a<0||a>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let C=0;C<this.size;C++){let A;switch(a){case 0:A=(C+c)%2==0;break;case 1:A=c%2==0;break;case 2:A=C%3==0;break;case 3:A=(C+c)%3==0;break;case 4:A=(Math.floor(C/3)+Math.floor(c/2))%2==0;break;case 5:A=C*c%2+C*c%3==0;break;case 6:A=(C*c%2+C*c%3)%2==0;break;case 7:A=((C+c)%2+C*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][C]&&A&&(this.modules[c][C]=!this.modules[c][C])}}getPenaltyScore(){let a=0;for(let m=0;m<this.size;m++){let p=!1,b=0,Z=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[m][v]==p?(b++,b==5?a+=t.PENALTY_N1:b>5&&a++):(this.finderPenaltyAddHistory(b,Z),p||(a+=this.finderPenaltyCountPatterns(Z)*t.PENALTY_N3),p=this.modules[m][v],b=1);a+=this.finderPenaltyTerminateAndCount(p,b,Z)*t.PENALTY_N3}for(let m=0;m<this.size;m++){let p=!1,b=0,Z=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[v][m]==p?(b++,b==5?a+=t.PENALTY_N1:b>5&&a++):(this.finderPenaltyAddHistory(b,Z),p||(a+=this.finderPenaltyCountPatterns(Z)*t.PENALTY_N3),p=this.modules[v][m],b=1);a+=this.finderPenaltyTerminateAndCount(p,b,Z)*t.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let p=0;p<this.size-1;p++){const b=this.modules[m][p];b==this.modules[m][p+1]&&b==this.modules[m+1][p]&&b==this.modules[m+1][p+1]&&(a+=t.PENALTY_N2)}let c=0;for(const m of this.modules)c=m.reduce((p,b)=>p+(b?1:0),c);const C=this.size*this.size,A=Math.ceil(Math.abs(c*20-C*10)/C)-1;return s(0<=A&&A<=9),a+=A*t.PENALTY_N4,s(0<=a&&a<=2568888),a}getAlignmentPatternPositions(){if(this.version==1)return[];{const a=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(a*2-2))*2;let C=[6];for(let A=this.size-7;C.length<a;A-=c)C.splice(1,0,A);return C}}static getNumRawDataModules(a){if(a<t.MIN_VERSION||a>t.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*a+128)*a+64;if(a>=2){const C=Math.floor(a/7)+2;c-=(25*C-10)*C-55,a>=7&&(c-=36)}return s(208<=c&&c<=29648),c}static getNumDataCodewords(a,c){return Math.floor(t.getNumRawDataModules(a)/8)-t.ECC_CODEWORDS_PER_BLOCK[c.ordinal][a]*t.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][a]}static reedSolomonComputeDivisor(a){if(a<1||a>255)throw new RangeError("Degree out of range");let c=[];for(let A=0;A<a-1;A++)c.push(0);c.push(1);let C=1;for(let A=0;A<a;A++){for(let m=0;m<c.length;m++)c[m]=t.reedSolomonMultiply(c[m],C),m+1<c.length&&(c[m]^=c[m+1]);C=t.reedSolomonMultiply(C,2)}return c}static reedSolomonComputeRemainder(a,c){let C=c.map(A=>0);for(const A of a){const m=A^C.shift();C.push(0),c.forEach((p,b)=>C[b]^=t.reedSolomonMultiply(p,m))}return C}static reedSolomonMultiply(a,c){if(a>>>8||c>>>8)throw new RangeError("Byte out of range");let C=0;for(let A=7;A>=0;A--)C=C<<1^(C>>>7)*285,C^=(c>>>A&1)*a;return s(C>>>8==0),C}finderPenaltyCountPatterns(a){const c=a[1];s(c<=this.size*3);const C=c>0&&a[2]==c&&a[3]==c*3&&a[4]==c&&a[5]==c;return(C&&a[0]>=c*4&&a[6]>=c?1:0)+(C&&a[6]>=c*4&&a[0]>=c?1:0)}finderPenaltyTerminateAndCount(a,c,C){return a&&(this.finderPenaltyAddHistory(c,C),c=0),c+=this.size,this.finderPenaltyAddHistory(c,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(a,c){c[0]==0&&(a+=this.size),c.pop(),c.unshift(a)}};let n=t;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=n;function o(a,c,C){if(c<0||c>31||a>>>c)throw new RangeError("Value out of range");for(let A=c-1;A>=0;A--)C.push(a>>>A&1)}function i(a,c){return(a>>>c&1)!=0}function s(a){if(!a)throw new Error("Assertion error")}const r=class{constructor(a,c,C){if(this.mode=a,this.numChars=c,this.bitData=C,c<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(a){let c=[];for(const C of a)o(C,8,c);return new r(r.Mode.BYTE,a.length,c)}static makeNumeric(a){if(!r.isNumeric(a))throw new RangeError("String contains non-numeric characters");let c=[];for(let C=0;C<a.length;){const A=Math.min(a.length-C,3);o(parseInt(a.substr(C,A),10),A*3+1,c),C+=A}return new r(r.Mode.NUMERIC,a.length,c)}static makeAlphanumeric(a){if(!r.isAlphanumeric(a))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],C;for(C=0;C+2<=a.length;C+=2){let A=r.ALPHANUMERIC_CHARSET.indexOf(a.charAt(C))*45;A+=r.ALPHANUMERIC_CHARSET.indexOf(a.charAt(C+1)),o(A,11,c)}return C<a.length&&o(r.ALPHANUMERIC_CHARSET.indexOf(a.charAt(C)),6,c),new r(r.Mode.ALPHANUMERIC,a.length,c)}static makeSegments(a){return a==""?[]:r.isNumeric(a)?[r.makeNumeric(a)]:r.isAlphanumeric(a)?[r.makeAlphanumeric(a)]:[r.makeBytes(r.toUtf8ByteArray(a))]}static makeEci(a){let c=[];if(a<0)throw new RangeError("ECI assignment value out of range");if(a<128)o(a,8,c);else if(a<16384)o(2,2,c),o(a,14,c);else if(a<1e6)o(6,3,c),o(a,21,c);else throw new RangeError("ECI assignment value out of range");return new r(r.Mode.ECI,0,c)}static isNumeric(a){return r.NUMERIC_REGEX.test(a)}static isAlphanumeric(a){return r.ALPHANUMERIC_REGEX.test(a)}getData(){return this.bitData.slice()}static getTotalBits(a,c){let C=0;for(const A of a){const m=A.mode.numCharCountBits(c);if(A.numChars>=1<<m)return 1/0;C+=4+m+A.bitData.length}return C}static toUtf8ByteArray(a){a=encodeURI(a);let c=[];for(let C=0;C<a.length;C++)a.charAt(C)!="%"?c.push(a.charCodeAt(C)):(c.push(parseInt(a.substr(C+1,2),16)),C+=2);return c}};let I=r;I.NUMERIC_REGEX=/^[0-9]*$/,I.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,I.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=I})(qs||(qs={}));(e=>{(t=>{const n=class{constructor(i,s){this.ordinal=i,this.formatBits=s}};let o=n;o.LOW=new n(0,1),o.MEDIUM=new n(1,0),o.QUARTILE=new n(2,3),o.HIGH=new n(3,2),t.Ecc=o})(e.QrCode||(e.QrCode={}))})(qs||(qs={}));(e=>{(t=>{const n=class{constructor(i,s){this.modeBits=i,this.numBitsCharCount=s}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};let o=n;o.NUMERIC=new n(1,[10,12,14]),o.ALPHANUMERIC=new n(2,[9,11,13]),o.BYTE=new n(4,[8,16,16]),o.KANJI=new n(8,[8,10,12]),o.ECI=new n(7,[0,0,0]),t.Mode=o})(e.QrSegment||(e.QrSegment={}))})(qs||(qs={}));var Or=qs;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Tw={L:Or.QrCode.Ecc.LOW,M:Or.QrCode.Ecc.MEDIUM,Q:Or.QrCode.Ecc.QUARTILE,H:Or.QrCode.Ecc.HIGH},Uw=128,Dw="L",Qw="#FFFFFF",Pw="#000000",jw=!1,H0=4,X4=.1;function _w(e,t=0){const n=[];return e.forEach(function(o,i){let s=null;o.forEach(function(r,I){if(!r&&s!==null){n.push(`M${s+t} ${i+t}h${I-s}v1H${s+t}z`),s=null;return}if(I===o.length-1){if(!r)return;s===null?n.push(`M${I+t},${i+t} h1v1H${I+t}z`):n.push(`M${s+t},${i+t} h${I+1-s}v1H${s+t}z`);return}r&&s===null&&(s=I)})}),n.join("")}function Ow(e,t){return e.slice().map((n,o)=>o<t.y||o>=t.y+t.h?n:n.map((i,s)=>s<t.x||s>=t.x+t.w?i:!1))}function qw(e,t,n,o){if(o==null)return null;const i=n?H0:0,s=e.length+i*2,r=Math.floor(t*X4),I=s/t,a=(o.width||r)*I,c=(o.height||r)*I,C=o.x==null?e.length/2-a/2:o.x*I,A=o.y==null?e.length/2-c/2:o.y*I;let m=null;if(o.excavate){let p=Math.floor(C),b=Math.floor(A),Z=Math.ceil(a+C-p),v=Math.ceil(c+A-b);m={x:p,y:b,w:Z,h:v}}return{x:C,y:A,h:c,w:a,excavation:m}}var J4=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function Y4(e){const t=e,{value:n,size:o=Uw,level:i=Dw,bgColor:s=Qw,fgColor:r=Pw,includeMargin:I=jw,style:a,imageSettings:c}=t,C=Y0(t,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),A=c==null?void 0:c.src,m=Ee.useRef(null),p=Ee.useRef(null),[b,Z]=Ee.useState(!1);Ee.useEffect(()=>{if(m.current!=null){const G=m.current,y=G.getContext("2d");if(!y)return;let W=Or.QrCode.encodeText(n,Tw[i]).getModules();const V=I?H0:0,X=W.length+V*2,R=qw(W,o,I,c),k=p.current,F=R!=null&&k!==null&&k.complete&&k.naturalHeight!==0&&k.naturalWidth!==0;F&&R.excavation!=null&&(W=Ow(W,R.excavation));const x=window.devicePixelRatio||1;G.height=G.width=o*x;const M=o/X*x;y.scale(M,M),y.fillStyle=s,y.fillRect(0,0,X,X),y.fillStyle=r,J4?y.fill(new Path2D(_w(W,V))):W.forEach(function(Q,q){Q.forEach(function(j,ne){j&&y.fillRect(ne+V,q+V,1,1)})}),F&&y.drawImage(k,R.x+V,R.y+V,R.w,R.h)}}),Ee.useEffect(()=>{Z(!1)},[A]);const v=FI({height:o,width:o},a);let f=null;return A!=null&&(f=Ee.createElement("img",{src:A,key:A,style:{display:"none"},onLoad:()=>{Z(!0)},ref:p})),Ee.createElement(Ee.Fragment,null,Ee.createElement("canvas",FI({style:v,height:o,width:o,ref:m},C)),f)}function H4(e){const t=e,{value:n,size:o=Uw,level:i=Dw,bgColor:s=Qw,fgColor:r=Pw,includeMargin:I=jw,imageSettings:a}=t,c=Y0(t,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let C=Or.QrCode.encodeText(n,Tw[i]).getModules();const A=I?H0:0,m=C.length+A*2,p=qw(C,o,I,a);let b=null;a!=null&&p!=null&&(p.excavation!=null&&(C=Ow(C,p.excavation)),b=Ee.createElement("image",{xlinkHref:a.src,height:p.h,width:p.w,x:p.x+A,y:p.y+A,preserveAspectRatio:"none"}));const Z=_w(C,A);return Ee.createElement("svg",FI({height:o,width:o,viewBox:`0 0 ${m} ${m}`},c),Ee.createElement("path",{fill:s,d:`M0,0 h${m}v${m}H0z`,shapeRendering:"crispEdges"}),Ee.createElement("path",{fill:r,d:Z,shapeRendering:"crispEdges"}),b)}var $w=e=>{const t=e,{renderAs:n}=t,o=Y0(t,["renderAs"]);return n==="svg"?Ee.createElement(H4,FI({},o)):Ee.createElement(Y4,FI({},o))};function x4(){const[e,t]=B.useState(!1),n=()=>{t(!e)};return d.jsxs(d.Fragment,{children:[d.jsx(En,{}),d.jsxs(ni,{maxWidth:"sm",children:[d.jsxs("div",{className:"w-full height-bg bg-grey-bg mt-10 rounded-s-md",children:[d.jsx("p",{className:"text-center pt-10 text-2xl",children:"รายการที่เลือก"}),d.jsxs("div",{className:"grid grid-cols-4 mt-10",children:[d.jsx("p",{className:"relative left-14",children:"1"}),d.jsx("p",{children:"บรอคโคลี"}),d.jsx("p",{className:"relative left-14",children:"1"}),d.jsx("p",{children:"รายการ"})]}),d.jsxs("div",{className:"grid grid-cols-4 mt-10",children:[d.jsx("p",{className:"relative left-14"}),d.jsx("p",{children:"ใช้แต้มไป"}),d.jsx("p",{className:"relative left-14",children:"70"}),d.jsx("p",{children:"แต้ม"})]}),d.jsxs("div",{className:"grid grid-cols-4 mt-10",children:[d.jsx("p",{className:"relative left-14",children:"2"}),d.jsx("p",{children:"แตงกวา"}),d.jsx("p",{className:"relative left-14",children:"2"}),d.jsx("p",{children:"รายการ"})]}),d.jsxs("div",{className:"grid grid-cols-4 mt-10",children:[d.jsx("p",{className:"relative left-14"}),d.jsx("p",{children:"ใช้แต้มไป"}),d.jsx("p",{className:"relative left-14",children:"160"}),d.jsx("p",{children:"แต้ม"})]}),d.jsxs("div",{className:"grid grid-cols-4 mt-10",children:[d.jsx("p",{className:"relative left-14",children:"รวมทั้งหมด"}),d.jsx("p",{}),d.jsx("p",{className:"relative left-14",children:"230"}),d.jsx("p",{children:"แต้ม"})]}),d.jsx("div",{className:"h-10"})]}),d.jsx("p",{className:"text-center pt-10 text-2xl",children:"สร้าง QR Code"}),d.jsx("div",{className:"mt-10 flex justify-center",children:d.jsx("div",{className:`slider-container ${e?"on":""}`,onClick:n,children:d.jsx("div",{className:"slider",children:d.jsx("div",{className:"slider-button"})})})}),e&&d.jsx("div",{className:"mt-10 flex justify-center",children:d.jsx($w,{value:"https://google.com"})})]})]})}const N4="https://cookbstaging.careervio.com",F4=async()=>{try{const e=`${N4}/api/recycle-machines`,t=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok){const i=await t.json();throw console.error("Error fetching recycle machines:",i),new Error(`Request failed with status ${t.status}`)}return(await t.json()).data.filter(i=>i.attributes.status==="active").map(i=>({id:i.id,location:i.attributes.location,latitude:i.attributes.latitude,longitude:i.attributes.longitude,status:i.attributes.status,createdAt:i.attributes.createdAt,updatedAt:i.attributes.updatedAt,publishedAt:i.attributes.publishedAt}))}catch(e){throw console.error("Error fetching recycle machines:",e.message),e}},K4={width:"100%",height:"400px"},E4={lat:13.7563,lng:100.5018},M4=new ln.Icon({iconUrl:"https://cdn.pixabay.com/photo/2014/04/03/10/03/google-309740_1280.png",iconSize:[35,35]}),eX=()=>{const[e,t]=B.useState([]),[n,o]=B.useState(!0),[i,s]=B.useState(null),r="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=";return B.useEffect(()=>{(async()=>{try{o(!0);const a=await F4(r);t(a),o(!1)}catch(a){console.error("Error fetching Recycle Machines:",a),s(a.message),o(!1)}})()},[r]),n?d.jsx("p",{children:"Loading..."}):i?d.jsxs("p",{children:["Error: ",i]}):d.jsx(d.Fragment,{children:d.jsxs(lr,{style:K4,center:E4,zoom:12,children:[d.jsx(cr,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),e.map(I=>d.jsx(d.Fragment,{children:d.jsx(ar,{position:[I.latitude,I.longitude],icon:M4,children:d.jsxs(Ir,{children:[I.location,d.jsx("br",{}),d.jsx("a",{href:`https://www.google.com/maps?q=${I.latitude},${I.longitude}`,target:"_blank",rel:"noopener noreferrer",children:"เปิดใน Google Maps"})]})},I.id)}))]})})},L4="https://cookbstaging.careervio.com",z4=async()=>{try{const e=`${L4}/api/oil-machines`,t=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok){const i=await t.json();throw console.error("Error fetching oil machines:",i),new Error(`Request failed with status ${t.status}`)}return(await t.json()).data.filter(i=>i.attributes.status==="active").map(i=>({id:i.id,location:i.attributes.location,latitude:i.attributes.latitude,longitude:i.attributes.longitude,status:i.attributes.status,createdAt:i.attributes.createdAt,updatedAt:i.attributes.updatedAt,publishedAt:i.attributes.publishedAt}))}catch(e){throw console.error("Error fetching oil machines:",e.message),e}},T4={width:"100%",height:"400px"},U4={lat:13.7563,lng:100.5018},D4=new ln.Icon({iconUrl:"https://cdn.pixabay.com/photo/2014/04/03/10/03/google-309740_1280.png",iconSize:[35,35]}),tX=()=>{const[e,t]=B.useState([]),[n,o]=B.useState(!0),[i,s]=B.useState(null),r="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=";return B.useEffect(()=>{(async()=>{try{o(!0);const a=await z4(r);t(a),o(!1)}catch(a){console.error("Error fetching Oil Machines:",a),s(a.message),o(!1)}})()},[r]),n?d.jsx("p",{children:"Loading..."}):i?d.jsxs("p",{children:["Error: ",i]}):d.jsx(d.Fragment,{children:d.jsxs(lr,{style:T4,center:U4,zoom:12,children:[d.jsx(cr,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),e.map(I=>d.jsx(d.Fragment,{children:d.jsx(ar,{position:[I.latitude,I.longitude],icon:D4,children:d.jsxs(Ir,{children:[I.location,d.jsx("br",{}),d.jsx("a",{href:`https://www.google.com/maps?q=${I.latitude},${I.longitude}`,target:"_blank",rel:"noopener noreferrer",children:"เปิดใน Google Maps"})]})},I.id)}))]})})};function Q4(){const[e,t]=B.useState("ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม"),n=o=>{t(o)};return d.jsxs(d.Fragment,{children:[d.jsx(En,{}),d.jsxs(ni,{maxWidth:"sm",children:[d.jsx("div",{className:"text-2xl text-center mt-10",children:"ตำแหน่งตู้"}),d.jsxs("div",{className:"bg-grey-bg mt-10 grid grid-cols-2 rounded-t-lg",children:[d.jsxs("button",{className:` tablink h-40 pt-5 text-xs  rounded-t-lg ${e==="ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม"?"w3-green":""}`,onClick:()=>n("ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม"),children:["ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม",d.jsxs("div",{className:"mt-5 grid grid-cols-2 ",children:[d.jsx("img",{src:Jp,alt:"can",width:"70",className:"ml-5"}),d.jsx("img",{src:Yp,alt:"bottle",width:"40",className:"ml-5"})]})]}),d.jsxs("button",{className:`tablink text-xs  rounded-t-lg ${e==="ตู้รับน้ำมันพืชใช้แล้ว"?"w3-green":""}`,onClick:()=>n("ตู้รับน้ำมันพืชใช้แล้ว"),children:[d.jsx("p",{className:"text-center",children:"ตู้รับน้ำมันพืชใช้แล้ว"}),d.jsx("div",{className:"flex justify-center",children:d.jsx("img",{src:jf,alt:"logo",width:"70",className:"mt-5"})})]})]}),d.jsx("div",{className:"w-full h-full bg-white shadow-md shadow-inner rounded-b-lg",children:d.jsx("div",{style:{width:"100%",height:"100%",aspectRatio:.5},children:e==="ตู้รับทิ้งขวดพลาสติกและกระป๋องอลูมิเนียม"?d.jsx(eX,{}):d.jsx(tX,{})})})]})]})}const nX="/assets/building-DgCujXOt.png",oX="/assets/mail-C8f8mahp.png",iX="/assets/smartphone-BNSZHNAZ.png";function P4(){return d.jsxs(d.Fragment,{children:[d.jsx(En,{}),d.jsxs(ni,{maxWidth:"sm",children:[d.jsx("p",{className:"text-center mt-16 text-2xl",children:"ติดต่อเรา"}),d.jsxs("div",{className:"w-full h-96 bg-white rounded-md inner-shadow mt-10 p-5",children:[d.jsxs("div",{className:"grid grid-cols-2",children:[d.jsx("div",{children:d.jsx("img",{src:nX,alt:"building",width:"50",className:"ml-8"})}),d.jsx("div",{children:d.jsx("p",{className:"contact-text mt-10",children:"บริษัท ไมโครกรีนเทค จำกัด"})})]}),d.jsxs("div",{className:"grid grid-cols-2",children:[d.jsx("div",{children:d.jsx("img",{src:oX,alt:"mail",width:"80",className:"mt-8 ml-3"})}),d.jsx("div",{children:d.jsxs("p",{className:"contact-text mt-10",children:["support@microgreen ",d.jsx("br",{})," tech.net"]})})]}),d.jsxs("div",{className:"grid grid-cols-2",children:[d.jsx("div",{children:d.jsx("img",{src:iX,alt:"smartphone",width:"100",className:"mt-5"})}),d.jsx("div",{children:d.jsx("p",{className:"contact-text mt-12",children:"0875585454"})})]})]})]})]})}var x0={},dh={};const j4=Ki(UE);var VS;function mc(){return VS||(VS=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=j4}(dh)),dh}var _4=nr;Object.defineProperty(x0,"__esModule",{value:!0});var gX=x0.default=void 0,O4=_4(mc()),q4=d;gX=x0.default=(0,O4.default)((0,q4.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu");var N0={},$4=nr;Object.defineProperty(N0,"__esModule",{value:!0});var sX=N0.default=void 0,e_=$4(mc()),t_=d;sX=N0.default=(0,e_.default)((0,t_.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos");var F0={},n_=nr;Object.defineProperty(F0,"__esModule",{value:!0});var rX=F0.default=void 0,o_=n_(mc()),i_=d;rX=F0.default=(0,o_.default)((0,i_.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout");const hi=()=>{const[e,t]=B.useState(!1),[n,o]=B.useState(""),i=mo(),{isLoggedIn:s,liff:r}=hf();B.useEffect(()=>{(async()=>{if(r&&r.isLoggedIn()){const C=await r.getProfile();o(C.displayName)}})()},[r]);const I=()=>{t(!e)},a=()=>{r&&r.logout(),localStorage.removeItem("accessToken"),localStorage.removeItem("user"),Qn.fire({icon:"success",title:"ออกจากระบบสำเร็จ!",showConfirmButton:!0}).then(()=>{i("/")})};return d.jsxs(d.Fragment,{children:[d.jsxs("nav",{className:"flex items-center justify-between p-2 pr-5 bg-white",children:[d.jsx(Qo,{to:"/partner/shopHome",style:{color:"#000000",textDecoration:"none"},children:d.jsx("img",{src:jf,alt:"Logo",width:50})}),d.jsxs("div",{className:"flex items-center",children:[s&&d.jsx("div",{className:"flex items-center"}),d.jsxs(vl,{onClick:I,children:[d.jsx(gX,{className:"hover:text-yellow-hard"})," "]})]})]}),e&&d.jsx(ng,{sx:{position:"fixed",top:0,right:0,height:"100%",width:"30%",bgcolor:"white",boxShadow:3,zIndex:1e3,transition:"transform 0.3s ease",transform:e?"translateX(0)":"translateX(100%)"},children:d.jsxs(ng,{p:2,children:[d.jsx(vl,{onClick:I,sx:{color:"#000000"},children:d.jsx(sX,{})}),s&&d.jsx(ng,{sx:{position:"absolute",bottom:0,width:"100%",p:2,bgcolor:"white",display:"flex",justifyContent:"center"},children:d.jsx(lL,{variant:"contained",color:"error",startIcon:d.jsx(rX,{}),onClick:a,fullWidth:!0,sx:{maxWidth:"300px"},children:"Logout"})})]})})]})};function g_(){const[e,t]=B.useState(!1),n=()=>{t(!e)};return d.jsxs(d.Fragment,{children:[d.jsx(hi,{}),d.jsxs(ni,{maxWidth:"sm",children:[d.jsxs("div",{className:"w-full height-bg bg-grey-bg mt-10 rounded-s-md",children:[d.jsx("p",{className:"text-center pt-10 text-2xl",children:"รายการที่เลือก"}),d.jsxs("div",{className:"grid grid-cols-4 mt-10",children:[d.jsx("p",{className:"relative left-14",children:"1"}),d.jsx("p",{children:"บรอคโคลี"}),d.jsx("p",{className:"relative left-14",children:"1"}),d.jsx("p",{children:"รายการ"})]}),d.jsxs("div",{className:"grid grid-cols-4 mt-10",children:[d.jsx("p",{className:"relative left-14"}),d.jsx("p",{children:"ใช้แต้มไป"}),d.jsx("p",{className:"relative left-14",children:"70"}),d.jsx("p",{children:"แต้ม"})]}),d.jsxs("div",{className:"grid grid-cols-4 mt-10",children:[d.jsx("p",{className:"relative left-14",children:"2"}),d.jsx("p",{children:"แตงกวา"}),d.jsx("p",{className:"relative left-14",children:"2"}),d.jsx("p",{children:"รายการ"})]}),d.jsxs("div",{className:"grid grid-cols-4 mt-10",children:[d.jsx("p",{className:"relative left-14"}),d.jsx("p",{children:"ใช้แต้มไป"}),d.jsx("p",{className:"relative left-14",children:"160"}),d.jsx("p",{children:"แต้ม"})]}),d.jsxs("div",{className:"grid grid-cols-4 mt-10",children:[d.jsx("p",{className:"relative left-14",children:"รวมทั้งหมด"}),d.jsx("p",{}),d.jsx("p",{className:"relative left-14",children:"230"}),d.jsx("p",{children:"แต้ม"})]}),d.jsx("div",{className:"h-10"})]}),d.jsx("p",{className:"text-center pt-10 text-2xl",children:"ยืนยันการส่งสินค้า"}),d.jsx("div",{className:"mt-10 flex justify-center",children:d.jsx("div",{className:`slider-container ${e?"on":""}`,onClick:n,children:d.jsx("div",{className:"slider",children:d.jsx("div",{className:"slider-button"})})})})]})]})}const s_=Vt.div`
  position: relative;
  width: 100%;
  max-width: 100vw;
  margin: 0 auto;
`;Vt.button`
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background-color: #fff;
  color: #333;
  border: none;
  border-radius: 20px;
  padding: 10px 20px;
  font-size: 20px;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
`;const r_=Vt.canvas`
  display: none; /* Hide canvas by default */
`,l_=Vt.video`
  width: 100%;
  border-radius: 10px;
  @media (max-width: 767px) {
    height: auto;
    object-fit: cover;
    border-radius: 0;
  }
`,a_=Vt.div`
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  border: 2px dashed #ccc;
  border-radius: 10px;
  cursor: pointer;
  position: relative;
`,I_=Vt(Qk)`
  font-size: 50px;
  color: #026d44;
`,c_=Vt.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
`,C_=Vt.div`
  background: white;
  padding: 20px;
  border-radius: 10px;
  text-align: center;
`,d_=Vt.button`
  margin: 10px;
  padding: 10px 20px;
  background-color: #ffb300;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
`,u_=Vt.button`
  margin: 10px;
  padding: 10px 20px;
  background-color: #558b2f;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
`,A_=Vt.button`
  margin: 10px;
  padding: 10px 20px;
  background-color: red;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  &:hover {
    background-color: darkred; /* Change color on hover */
  }
`,m_=Vt.img`
  width: 100%;
  border-radius: 10px;
  @media (max-width: 767px) {
    height: auto;
    object-fit: cover;
    border-radius: 0;
  }
`,lX=({onCapture:e,ModuleName:t})=>{const n=B.useRef(null),o=B.useRef(null),[i,s]=B.useState(null),[r,I]=B.useState(null),[a,c]=B.useState(!1),C=async()=>{try{const v=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}});n.current&&(n.current.srcObject=v),s(v)}catch(v){console.error("Error accessing webcam",v),Qn.fire({icon:"error",title:"ไม่สามารถเข้าถึงเว็บแคมได้ กรุณาตรวจสอบการตั้งค่าและอนุญาตการเข้าถึง",position:"center",showConfirmButton:!0,confirmButtonText:"ตกลง"})}},A=()=>{i&&(i.getTracks().forEach(v=>{v.stop()}),s(null))},m=()=>{if(n.current&&o.current){const v=n.current,f=o.current,G=f.getContext("2d");G&&v.videoWidth&&v.videoHeight&&(f.width=v.videoWidth,f.height=v.videoHeight,G.drawImage(v,0,0,f.width,f.height),f.toBlob(y=>{if(y){const W=new Date().toLocaleString().replace(/[/,:]/g,"-"),V=`image_${t}_${W}.jpg`,X=new File([y],V,{type:"image/jpeg"});I(URL.createObjectURL(y)),A(),e(X)}},"image/jpeg"))}},p=()=>{Qn.fire({icon:"warning",title:"ฟังก์ชันการอัพโหลดภาพยังไม่ได้เปิดใช้งาน",position:"center",showConfirmButton:!0,confirmButtonText:"ตกลง"})},b=()=>{c(!0),C()},Z=()=>{c(!1),A()};return d.jsx(s_,{children:r?d.jsx(m_,{src:r,alt:"Captured"}):d.jsxs(d.Fragment,{children:[d.jsx(a_,{onClick:b,children:d.jsx(I_,{})}),a&&d.jsx(c_,{children:d.jsxs(C_,{children:[d.jsx(l_,{ref:n,autoPlay:!0,muted:!0}),d.jsx(r_,{ref:o}),d.jsx(d_,{onClick:()=>{m(),Z()},children:"ถ่ายรูป"}),d.jsx(u_,{onClick:()=>{p(),Z()},children:"อัพโหลดภาพ"}),d.jsx(A_,{onClick:()=>{Z()},children:"ปิด"})]})})]})})},h_="https://cookbstaging.careervio.com",KI=async e=>new Promise((t,n)=>{const o=`${h_}/api/upload`,i=new FormData;i.append("files",e),fetch(o,{method:"POST",body:i}).then(s=>s.ok?s.json():s.json().then(r=>{n(r)})).then(s=>{t(s[0])}).catch(s=>{n(s)})});function RS(){const e=mg({typography:{fontFamily:"Sarabun !important"}}),[t,n]=B.useState({name:"",fullName:"",location:"",cardID:"",bookBankNumber:"",bank:"",image:"",bookBankImage:"",checkedOne:!1}),[o,i]=B.useState(!1),s=mo(),r=localStorage.getItem("accessToken"),I=JSON.parse(localStorage.getItem("user")||"{}"),a=I.id;I.fullName;const[c,C]=B.useState([]),[A,m]=B.useState(!0);console.log("Front : ",I);const p=G=>{const{id:y,name:W,value:V,type:X,checked:R}=G.target;n(k=>({...k,[y||W]:X==="checkbox"?R:V}))},b=G=>{G&&n(y=>({...y,image:G}))};B.useEffect(()=>{(async()=>{try{const y=await TF(r);C(y)}catch(y){console.error("Error fetching banks:",y)}finally{m(!1)}})()},[]),B.useEffect(()=>{},[c]),console.log("Bank",c);const Z=G=>{G&&n(y=>({...y,bookBankImage:G}))},v=G=>{n(y=>({...y,bank:G.target.value}))};B.useEffect(()=>{const{name:G,fullName:y,location:W,cardID:V,bookBankNumber:X,bank:R,image:k,bookBankImage:F,checkedOne:x}=t;i(G&&y&&W&&V&&X&&R&&k&&F&&x)},[t]);const f=async G=>{G.preventDefault();let y=null,W=null;try{t.image&&(y=(await KI(t.image)).id),t.bookBankImage&&(W=(await KI(t.bookBankImage)).id);const V={fullName:t.fullName,cardID:t.cardID,address:t.location};console.log("Sending user data:",V);const X=await zF(r,a,V);console.log("Response from updateUserFromShop:",X),(!X||X.error)&&console.error("Error updating user:",X);const R={name:t.name,location:t.location,latitude:t.latitude,longitude:t.longitude,image:y,bookBankNumber:t.bookBankNumber,bookBankImage:W,bank:t.bank,user:a,checkedOne:t.checkedOne};if(await LF(r,R))Qn.fire({position:"center",icon:"success",title:"ลงทะเบียนร้านค้าเรียบร้อย",showConfirmButton:!0,confirmButtonText:"ตกลง"}).then(F=>{F.isConfirmed&&s("/shopHome")});else throw new Error("Shop registration failed.")}catch(V){console.error("Error during submission:",V),Qn.fire({icon:"error",title:"พบข้อผิดพลาดระหว่างลงทะเบียน",position:"center",text:V.message||"เกิดข้อผิดพลาด กรุณาลองใหม่อีกครั้ง",confirmButtonText:"ตกลง"})}};return d.jsxs(or,{theme:e,children:[d.jsx(hi,{}),d.jsxs("form",{onSubmit:f,children:[d.jsx("div",{className:"container mx-auto px-4 py-8",children:d.jsxs("div",{className:"flex flex-wrap -mx-2",children:[d.jsx("div",{className:"w-full md:w-1/2 px-2",children:d.jsx(st,{id:"name",label:"ชื่อร้านค้า",variant:"outlined",className:"w-full bg-white",required:!0,value:t.name,onChange:p})}),d.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4 md:mt-0",children:d.jsx(st,{id:"fullName",label:"ชื่อ-นามสกุล",type:"text",variant:"outlined",className:"w-full bg-white",required:!0,value:t.fullName,onChange:p})}),d.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:d.jsx(st,{id:"cardID",label:"หมายเลขบัตรประจำตัวประชาชน",variant:"outlined",className:"w-full bg-white",required:!0,value:t.cardID,onChange:p})}),d.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:d.jsx(st,{id:"bookBankNumber",label:"หมายเลขบัญชีธนาคาร",variant:"outlined",className:"w-full bg-white",required:!0,value:t.bookBankNumber,onChange:p})}),d.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:d.jsxs(gr,{fullWidth:!0,children:[d.jsx(CA,{id:"bank-select-label",children:"ธนาคาร"}),d.jsxs(uA,{className:"bg-white",labelId:"bank-select-label",id:"bankChoose",value:t.bank,label:"ธนาคาร",onChange:v,children:[d.jsx(Jn,{value:"3",children:"ธนาคารกรุงเทพ จำกัด (มหาชน) (Bangkok Bank Public Company Limited)"}),d.jsx(Jn,{value:"4",children:"ธนาคารกรุงไทย จำกัด (มหาชน) (Krungthai Bank Public Company Limited)"}),d.jsx(Jn,{value:"5",children:"ธนาคารกรุงศรีอยุธยา จำกัด (มหาชน) (Bank of Ayudhya Public Company Limited - Krungsri)"}),d.jsx(Jn,{value:"6",children:"ธนาคารกสิกรไทย จำกัด (มหาชน) (Kasikornbank Public Company Limited)"}),d.jsx(Jn,{value:"7",children:"ธนาคารซีไอเอ็มบี ไทย จำกัด (มหาชน) (CIMB Thai Bank Public Company Limited)"}),d.jsx(Jn,{value:"8",children:"ธนาคารทหารไทยธนชาต จำกัด (มหาชน) (TMBThanachart Bank Public Company Limited - TTB Bank)"}),d.jsx(Jn,{value:"9",children:"ธนาคารทิสโก้ จำกัด (มหาชน) (TISCO Bank Public Company Limited)"}),d.jsx(Jn,{value:"10",children:"ธนาคารไทยเครดิต จำกัด (มหาชน) (Thai Credit Retail Bank Public Company Limited)"}),d.jsx(Jn,{value:"11",children:"ธนาคารไทยพาณิชย์ จำกัด (มหาชน) (Siam Commercial Bank Public Company Limited - SCB)"}),d.jsx(Jn,{value:"12",children:"ธนาคารยูโอบี จำกัด (มหาชน) (United Overseas Bank - Thai - Public Company Limited - UOB)"}),d.jsx(Jn,{value:"13",children:"ธนาคารแลนด์ แอนด์ เฮ้าส์ จำกัด (มหาชน) (Land and Houses Bank Public Company Limited)"}),d.jsx(Jn,{value:"14",children:"ธนาคารสแตนดาร์ดชาร์เตอร์ด (ไทย) จำกัด (มหาชน) (Standard Chartered Bank - Thai - Public Company Limited)"}),d.jsx(Jn,{value:"15",children:"ธนาคารไอซีบีซี (ไทย) จำกัด (มหาชน) (Industrial and Commercial Bank of China - Thai - Public Company Limited - ICBC)"}),d.jsx(Jn,{value:"16",children:"ธนาคารแห่งประเทศจีน (ไทย) จำกัด (มหาชน) (Bank of China - Thai - Public Company Limited)"})]})]})}),d.jsxs("div",{className:"w-full px-2 mt-4",children:[d.jsx("div",{children:d.jsx("label",{children:"ถ่ายรูปตนเองพร้อมถือบัตรประจำตัวประชาชน"})}),d.jsx($l,{className:"bg-white",id:"image",onCapture:b,ModuleName:"IDCard"})]}),d.jsxs("div",{className:"w-full px-2 mt-4",children:[d.jsx("label",{children:"ถ่ายหน้าบุ๊คแบงก์"}),d.jsx(lX,{className:"bg-white",id:"bookBankImage",onCapture:Z,ModuleName:"BookBank"})]}),d.jsx("div",{className:"w-full px-2 mt-4",children:d.jsx(st,{label:"ที่อยู่",placeholder:"ที่อยู่",id:"location",multiline:!0,minRows:3,maxRows:10,fullWidth:!0,className:"w-full bg-white",required:!0,value:t.location,onChange:p})})]})}),d.jsxs("div",{className:"container mx-auto px-4 mt-10 mb-5",children:[d.jsx(Pl,{id:"checkedOne",checked:t.checkedOne,onChange:p,required:!0,sx:{"& .MuiSvgIcon-root":{fontSize:30}}}),d.jsxs("span",{children:[d.jsx("strong",{children:"ยอมรับเงื่อนไข"})," "]})]}),d.jsx("div",{className:"container mx-auto px-4",children:d.jsx("button",{type:"submit",disabled:!o,className:`w-full h-12 mb-10 flex justify-center rounded-xl items-center text-white ${o?"bg-green-500":"bg-slate-300"}`,children:"บันทึกข้อมูล"})})]})]})}function p_(){return d.jsxs(d.Fragment,{children:[d.jsx(hi,{}),d.jsxs(ni,{maxWidth:"sm",children:[d.jsx("p",{className:"text-center mt-16 text-2xl",children:"ติดต่อเรา"}),d.jsxs("div",{className:"w-full h-96 bg-white rounded-md inner-shadow mt-10 p-5",children:[d.jsxs("div",{className:"grid grid-cols-2",children:[d.jsx("div",{children:d.jsx("img",{src:nX,alt:"building",width:"50",className:"ml-8"})}),d.jsx("div",{children:d.jsx("p",{className:"contact-text mt-10",children:"บริษัท ไมโครกรีนเทค จำกัด"})})]}),d.jsxs("div",{className:"grid grid-cols-2",children:[d.jsx("div",{children:d.jsx("img",{src:oX,alt:"mail",width:"80",className:"mt-8 ml-3"})}),d.jsx("div",{children:d.jsxs("p",{className:"contact-text mt-10",children:["support@microgreen ",d.jsx("br",{})," tech.net"]})})]}),d.jsxs("div",{className:"grid grid-cols-2",children:[d.jsx("div",{children:d.jsx("img",{src:iX,alt:"smartphone",width:"100",className:"mt-5"})}),d.jsx("div",{children:d.jsx("p",{className:"contact-text mt-12",children:"0875585454"})})]})]})]})]})}function b_(){const[e,t]=B.useState(!1),n=o=>{t(o.target.checked)};return d.jsxs(d.Fragment,{children:[d.jsx(hi,{}),d.jsxs(ni,{maxWidth:"sm",children:[d.jsx("div",{className:"w-full h-auto bg-white rounded-md p-5 mt-10 text-justify leading-loose",children:d.jsx("p",{children:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting , remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lor em Ipsum.Why do we use it?It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like)."})}),d.jsxs("div",{className:"mt-4",children:[d.jsx(Pl,{id:"checkedOne",value:"check",required:!0,sx:{"& .MuiSvgIcon-root":{fontSize:30}},checked:e,onChange:n}),d.jsxs("span",{className:"pb-14",children:[d.jsx("strong",{children:"กุ๊ก"}),"ให้ความสำคัญเกี่ยวกับความปลอดภัยข้อมูลของคุณ"," ",d.jsx("span",{className:"text-justify leading-loose",children:"และเพื่อให้คุณมั่นใจว่า กุ๊กมีความมุ่งมั่นที่จะให้ความคุ้มครองและดำเนินการด้วยความรับผิดชอบต่อการเก็บรวบรวม ใช้ เปิดเผย และโอนข้อมูลของคุณ กุ๊กจึงขอความยินยอมจากคุณ"})]})]}),d.jsx(Qo,{to:"/partner/Profilestore",children:d.jsx("button",{className:`w-full h-10 mt-4 mb-4 rounded-md ${e?"bg-yellow-hard-bg":"bg-zinc-400"}`,disabled:!e,children:"ต่อไป"})})]})]})}function f_(e){return Ag({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}const Z_={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,height:600,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function y_(){const[e,t]=Ee.useState(!1),n=()=>t(!0),o=()=>t(!1),i=mg({typography:{fontFamily:"Sarabun !important"}});return d.jsx(d.Fragment,{children:d.jsxs(or,{theme:i,children:[d.jsx(hi,{}),d.jsxs(ni,{maxWidth:"sm",children:[d.jsxs(gr,{fullWidth:!0,className:"bg-white",children:[d.jsx(CA,{htmlFor:"outlined-adornment-amount",children:"ค้นหาตามวันที่..."}),d.jsx(dA,{id:"outlined-adornment-amount",endAdornment:d.jsx(sT,{position:"end",children:d.jsx(YE,{})}),label:"Amount"})]}),d.jsxs("div",{className:"w-full h-42 bg-white mt-10 rounded-lg shadow-md p-5 leading-loose",children:[d.jsx("p",{children:"เลขที่ใบรายการรับเงิน : P0001"}),d.jsx("p",{children:"ชื่อ: Christian นามสกุล: Walton"}),d.jsx("div",{children:d.jsx("p",{children:"วันที่ 7 สิงหาคม 2567 เวลา 18:35 น."})}),d.jsxs("div",{className:"flex",children:[d.jsx("div",{className:"flex-none w-14"}),d.jsx("div",{className:"flex-auto w-64"}),d.jsxs("div",{className:"flex-auto",children:[d.jsx("button",{onClick:n,className:"bg-yellow-hard-bg rouded-md px-4 py-2 rounded-md mt-2 w-32",children:"ดูใบเสร็จ"}),d.jsx(n0,{open:e,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:d.jsxs(ng,{sx:Z_,children:[d.jsx("div",{className:"w-full h-20 bg-red-600 border-none flex items-center justify-end px-3",children:d.jsx(f_,{className:"text-5xl text-white cursor-pointer",onClick:o})}),d.jsx(I0,{component:e0,className:"mt-10 px-6",children:d.jsxs(l0,{sx:{minWidth:300},"aria-label":"simple table",children:[d.jsx(c0,{children:d.jsxs(Tg,{children:[d.jsx(Jt,{children:"รายการสินค้า"}),d.jsx(Jt,{align:"right",children:"จำนวน"}),d.jsx(Jt,{align:"right",children:"มูลค่า (บาท)"})]})}),d.jsxs(a0,{children:[d.jsxs(Tg,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[d.jsx(Jt,{align:"center",children:"หัวไชเท้า"}),d.jsx(Jt,{align:"right",children:"1"}),d.jsx(Jt,{align:"right",children:"10"})]}),d.jsxs(Tg,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[d.jsx(Jt,{align:"center",children:"หอมหัวใหญ่"}),d.jsx(Jt,{align:"right",children:"2"}),d.jsx(Jt,{align:"right",children:"10"})]})]})]})}),d.jsx("div",{className:"px-7",children:d.jsx("div",{className:" border-t-2 border-slate-200"})}),d.jsxs("div",{className:"flex mt-3  px-11",children:[d.jsx("div",{className:"flex-none w-40",children:"รวมเป็นมูลค่า"}),d.jsx("div",{className:"flex-none w-20 text-center",children:"20"}),d.jsx("div",{className:"flex-none w-40 text-center",children:"บาท"})]})]})})]})]})]})]})]})})}const G_="/assets/onion-hun9la0h.png";function aX(e,t){return function(){return e.apply(t,arguments)}}const{toString:B_}=Object.prototype,{getPrototypeOf:K0}=Object,WA=(e=>t=>{const n=B_.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),pi=e=>(e=e.toLowerCase(),t=>WA(t)===e),VA=e=>t=>typeof t===e,{isArray:ea}=Array,EI=VA("undefined");function S_(e){return e!==null&&!EI(e)&&e.constructor!==null&&!EI(e.constructor)&&vo(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const IX=pi("ArrayBuffer");function v_(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&IX(e.buffer),t}const W_=VA("string"),vo=VA("function"),cX=VA("number"),RA=e=>e!==null&&typeof e=="object",V_=e=>e===!0||e===!1,zC=e=>{if(WA(e)!=="object")return!1;const t=K0(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},R_=pi("Date"),k_=pi("File"),w_=pi("Blob"),X_=pi("FileList"),J_=e=>RA(e)&&vo(e.pipe),Y_=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||vo(e.append)&&((t=WA(e))==="formdata"||t==="object"&&vo(e.toString)&&e.toString()==="[object FormData]"))},H_=pi("URLSearchParams"),[x_,N_,F_,K_]=["ReadableStream","Request","Response","Headers"].map(pi),E_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function hc(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let o,i;if(typeof e!="object"&&(e=[e]),ea(e))for(o=0,i=e.length;o<i;o++)t.call(null,e[o],o,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),r=s.length;let I;for(o=0;o<r;o++)I=s[o],t.call(null,e[I],I,e)}}function CX(e,t){t=t.toLowerCase();const n=Object.keys(e);let o=n.length,i;for(;o-- >0;)if(i=n[o],t===i.toLowerCase())return i;return null}const Js=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,dX=e=>!EI(e)&&e!==Js;function qp(){const{caseless:e}=dX(this)&&this||{},t={},n=(o,i)=>{const s=e&&CX(t,i)||i;zC(t[s])&&zC(o)?t[s]=qp(t[s],o):zC(o)?t[s]=qp({},o):ea(o)?t[s]=o.slice():t[s]=o};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&hc(arguments[o],n);return t}const M_=(e,t,n,{allOwnKeys:o}={})=>(hc(t,(i,s)=>{n&&vo(i)?e[s]=aX(i,n):e[s]=i},{allOwnKeys:o}),e),L_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),z_=(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},T_=(e,t,n,o)=>{let i,s,r;const I={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)r=i[s],(!o||o(r,e,t))&&!I[r]&&(t[r]=e[r],I[r]=!0);e=n!==!1&&K0(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},U_=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return o!==-1&&o===n},D_=e=>{if(!e)return null;if(ea(e))return e;let t=e.length;if(!cX(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Q_=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&K0(Uint8Array)),P_=(e,t)=>{const o=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=o.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},j_=(e,t)=>{let n;const o=[];for(;(n=e.exec(t))!==null;)o.push(n);return o},__=pi("HTMLFormElement"),O_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,i){return o.toUpperCase()+i}),kS=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),q_=pi("RegExp"),uX=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};hc(n,(i,s)=>{let r;(r=t(i,s,e))!==!1&&(o[s]=r||i)}),Object.defineProperties(e,o)},$_=e=>{uX(e,(t,n)=>{if(vo(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=e[n];if(vo(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},eO=(e,t)=>{const n={},o=i=>{i.forEach(s=>{n[s]=!0})};return ea(e)?o(e):o(String(e).split(t)),n},tO=()=>{},nO=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,uh="abcdefghijklmnopqrstuvwxyz",wS="0123456789",AX={DIGIT:wS,ALPHA:uh,ALPHA_DIGIT:uh+uh.toUpperCase()+wS},oO=(e=16,t=AX.ALPHA_DIGIT)=>{let n="";const{length:o}=t;for(;e--;)n+=t[Math.random()*o|0];return n};function iO(e){return!!(e&&vo(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const gO=e=>{const t=new Array(10),n=(o,i)=>{if(RA(o)){if(t.indexOf(o)>=0)return;if(!("toJSON"in o)){t[i]=o;const s=ea(o)?[]:{};return hc(o,(r,I)=>{const a=n(r,i+1);!EI(a)&&(s[I]=a)}),t[i]=void 0,s}}return o};return n(e,0)},sO=pi("AsyncFunction"),rO=e=>e&&(RA(e)||vo(e))&&vo(e.then)&&vo(e.catch),mX=((e,t)=>e?setImmediate:t?((n,o)=>(Js.addEventListener("message",({source:i,data:s})=>{i===Js&&s===n&&o.length&&o.shift()()},!1),i=>{o.push(i),Js.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",vo(Js.postMessage)),lO=typeof queueMicrotask<"u"?queueMicrotask.bind(Js):typeof process<"u"&&process.nextTick||mX,D={isArray:ea,isArrayBuffer:IX,isBuffer:S_,isFormData:Y_,isArrayBufferView:v_,isString:W_,isNumber:cX,isBoolean:V_,isObject:RA,isPlainObject:zC,isReadableStream:x_,isRequest:N_,isResponse:F_,isHeaders:K_,isUndefined:EI,isDate:R_,isFile:k_,isBlob:w_,isRegExp:q_,isFunction:vo,isStream:J_,isURLSearchParams:H_,isTypedArray:Q_,isFileList:X_,forEach:hc,merge:qp,extend:M_,trim:E_,stripBOM:L_,inherits:z_,toFlatObject:T_,kindOf:WA,kindOfTest:pi,endsWith:U_,toArray:D_,forEachEntry:P_,matchAll:j_,isHTMLForm:__,hasOwnProperty:kS,hasOwnProp:kS,reduceDescriptors:uX,freezeMethods:$_,toObjectSet:eO,toCamelCase:O_,noop:tO,toFiniteNumber:nO,findKey:CX,global:Js,isContextDefined:dX,ALPHABET:AX,generateString:oO,isSpecCompliantForm:iO,toJSONObject:gO,isAsyncFn:sO,isThenable:rO,setImmediate:mX,asap:lO};function Ne(e,t,n,o,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),i&&(this.response=i,this.status=i.status?i.status:null)}D.inherits(Ne,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.status}}});const hX=Ne.prototype,pX={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{pX[e]={value:e}});Object.defineProperties(Ne,pX);Object.defineProperty(hX,"isAxiosError",{value:!0});Ne.from=(e,t,n,o,i,s)=>{const r=Object.create(hX);return D.toFlatObject(e,r,function(a){return a!==Error.prototype},I=>I!=="isAxiosError"),Ne.call(r,e.message,t,n,o,i),r.cause=e,r.name=e.name,s&&Object.assign(r,s),r};const aO=null;function $p(e){return D.isPlainObject(e)||D.isArray(e)}function bX(e){return D.endsWith(e,"[]")?e.slice(0,-2):e}function XS(e,t,n){return e?e.concat(t).map(function(i,s){return i=bX(i),!n&&s?"["+i+"]":i}).join(n?".":""):t}function IO(e){return D.isArray(e)&&!e.some($p)}const cO=D.toFlatObject(D,{},null,function(t){return/^is[A-Z]/.test(t)});function kA(e,t,n){if(!D.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=D.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Z,v){return!D.isUndefined(v[Z])});const o=n.metaTokens,i=n.visitor||C,s=n.dots,r=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&D.isSpecCompliantForm(t);if(!D.isFunction(i))throw new TypeError("visitor must be a function");function c(b){if(b===null)return"";if(D.isDate(b))return b.toISOString();if(!a&&D.isBlob(b))throw new Ne("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(b)||D.isTypedArray(b)?a&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function C(b,Z,v){let f=b;if(b&&!v&&typeof b=="object"){if(D.endsWith(Z,"{}"))Z=o?Z:Z.slice(0,-2),b=JSON.stringify(b);else if(D.isArray(b)&&IO(b)||(D.isFileList(b)||D.endsWith(Z,"[]"))&&(f=D.toArray(b)))return Z=bX(Z),f.forEach(function(y,W){!(D.isUndefined(y)||y===null)&&t.append(r===!0?XS([Z],W,s):r===null?Z:Z+"[]",c(y))}),!1}return $p(b)?!0:(t.append(XS(v,Z,s),c(b)),!1)}const A=[],m=Object.assign(cO,{defaultVisitor:C,convertValue:c,isVisitable:$p});function p(b,Z){if(!D.isUndefined(b)){if(A.indexOf(b)!==-1)throw Error("Circular reference detected in "+Z.join("."));A.push(b),D.forEach(b,function(f,G){(!(D.isUndefined(f)||f===null)&&i.call(t,f,D.isString(G)?G.trim():G,Z,m))===!0&&p(f,Z?Z.concat(G):[G])}),A.pop()}}if(!D.isObject(e))throw new TypeError("data must be an object");return p(e),t}function JS(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function E0(e,t){this._pairs=[],e&&kA(e,this,t)}const fX=E0.prototype;fX.append=function(t,n){this._pairs.push([t,n])};fX.toString=function(t){const n=t?function(o){return t.call(this,o,JS)}:JS;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function CO(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ZX(e,t,n){if(!t)return e;const o=n&&n.encode||CO,i=n&&n.serialize;let s;if(i?s=i(t,n):s=D.isURLSearchParams(t)?t.toString():new E0(t,n).toString(o),s){const r=e.indexOf("#");r!==-1&&(e=e.slice(0,r)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class YS{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){D.forEach(this.handlers,function(o){o!==null&&t(o)})}}const yX={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dO=typeof URLSearchParams<"u"?URLSearchParams:E0,uO=typeof FormData<"u"?FormData:null,AO=typeof Blob<"u"?Blob:null,mO={isBrowser:!0,classes:{URLSearchParams:dO,FormData:uO,Blob:AO},protocols:["http","https","file","blob","url","data"]},M0=typeof window<"u"&&typeof document<"u",eb=typeof navigator=="object"&&navigator||void 0,hO=M0&&(!eb||["ReactNative","NativeScript","NS"].indexOf(eb.product)<0),pO=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",bO=M0&&window.location.href||"http://localhost",fO=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:M0,hasStandardBrowserEnv:hO,hasStandardBrowserWebWorkerEnv:pO,navigator:eb,origin:bO},Symbol.toStringTag,{value:"Module"})),co={...fO,...mO};function ZO(e,t){return kA(e,new co.classes.URLSearchParams,Object.assign({visitor:function(n,o,i,s){return co.isNode&&D.isBuffer(n)?(this.append(o,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function yO(e){return D.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function GO(e){const t={},n=Object.keys(e);let o;const i=n.length;let s;for(o=0;o<i;o++)s=n[o],t[s]=e[s];return t}function GX(e){function t(n,o,i,s){let r=n[s++];if(r==="__proto__")return!0;const I=Number.isFinite(+r),a=s>=n.length;return r=!r&&D.isArray(i)?i.length:r,a?(D.hasOwnProp(i,r)?i[r]=[i[r],o]:i[r]=o,!I):((!i[r]||!D.isObject(i[r]))&&(i[r]=[]),t(n,o,i[r],s)&&D.isArray(i[r])&&(i[r]=GO(i[r])),!I)}if(D.isFormData(e)&&D.isFunction(e.entries)){const n={};return D.forEachEntry(e,(o,i)=>{t(yO(o),i,n,0)}),n}return null}function BO(e,t,n){if(D.isString(e))try{return(t||JSON.parse)(e),D.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(0,JSON.stringify)(e)}const pc={transitional:yX,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const o=n.getContentType()||"",i=o.indexOf("application/json")>-1,s=D.isObject(t);if(s&&D.isHTMLForm(t)&&(t=new FormData(t)),D.isFormData(t))return i?JSON.stringify(GX(t)):t;if(D.isArrayBuffer(t)||D.isBuffer(t)||D.isStream(t)||D.isFile(t)||D.isBlob(t)||D.isReadableStream(t))return t;if(D.isArrayBufferView(t))return t.buffer;if(D.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let I;if(s){if(o.indexOf("application/x-www-form-urlencoded")>-1)return ZO(t,this.formSerializer).toString();if((I=D.isFileList(t))||o.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return kA(I?{"files[]":t}:t,a&&new a,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),BO(t)):t}],transformResponse:[function(t){const n=this.transitional||pc.transitional,o=n&&n.forcedJSONParsing,i=this.responseType==="json";if(D.isResponse(t)||D.isReadableStream(t))return t;if(t&&D.isString(t)&&(o&&!this.responseType||i)){const r=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(I){if(r)throw I.name==="SyntaxError"?Ne.from(I,Ne.ERR_BAD_RESPONSE,this,null,this.response):I}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:co.classes.FormData,Blob:co.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],e=>{pc.headers[e]={}});const SO=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),vO=e=>{const t={};let n,o,i;return e&&e.split(`
`).forEach(function(r){i=r.indexOf(":"),n=r.substring(0,i).trim().toLowerCase(),o=r.substring(i+1).trim(),!(!n||t[n]&&SO[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},HS=Symbol("internals");function Ha(e){return e&&String(e).trim().toLowerCase()}function TC(e){return e===!1||e==null?e:D.isArray(e)?e.map(TC):String(e)}function WO(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}const VO=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ah(e,t,n,o,i){if(D.isFunction(o))return o.call(this,t,n);if(i&&(t=n),!!D.isString(t)){if(D.isString(o))return t.indexOf(o)!==-1;if(D.isRegExp(o))return o.test(t)}}function RO(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function kO(e,t){const n=D.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(i,s,r){return this[o].call(this,t,i,s,r)},configurable:!0})})}class Co{constructor(t){t&&this.set(t)}set(t,n,o){const i=this;function s(I,a,c){const C=Ha(a);if(!C)throw new Error("header name must be a non-empty string");const A=D.findKey(i,C);(!A||i[A]===void 0||c===!0||c===void 0&&i[A]!==!1)&&(i[A||a]=TC(I))}const r=(I,a)=>D.forEach(I,(c,C)=>s(c,C,a));if(D.isPlainObject(t)||t instanceof this.constructor)r(t,n);else if(D.isString(t)&&(t=t.trim())&&!VO(t))r(vO(t),n);else if(D.isHeaders(t))for(const[I,a]of t.entries())s(a,I,o);else t!=null&&s(n,t,o);return this}get(t,n){if(t=Ha(t),t){const o=D.findKey(this,t);if(o){const i=this[o];if(!n)return i;if(n===!0)return WO(i);if(D.isFunction(n))return n.call(this,i,o);if(D.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ha(t),t){const o=D.findKey(this,t);return!!(o&&this[o]!==void 0&&(!n||Ah(this,this[o],o,n)))}return!1}delete(t,n){const o=this;let i=!1;function s(r){if(r=Ha(r),r){const I=D.findKey(o,r);I&&(!n||Ah(o,o[I],I,n))&&(delete o[I],i=!0)}}return D.isArray(t)?t.forEach(s):s(t),i}clear(t){const n=Object.keys(this);let o=n.length,i=!1;for(;o--;){const s=n[o];(!t||Ah(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const n=this,o={};return D.forEach(this,(i,s)=>{const r=D.findKey(o,s);if(r){n[r]=TC(i),delete n[s];return}const I=t?RO(s):String(s).trim();I!==s&&delete n[s],n[I]=TC(i),o[I]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return D.forEach(this,(o,i)=>{o!=null&&o!==!1&&(n[i]=t&&D.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const o=new this(t);return n.forEach(i=>o.set(i)),o}static accessor(t){const o=(this[HS]=this[HS]={accessors:{}}).accessors,i=this.prototype;function s(r){const I=Ha(r);o[I]||(kO(i,r),o[I]=!0)}return D.isArray(t)?t.forEach(s):s(t),this}}Co.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);D.reduceDescriptors(Co.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[n]=o}}});D.freezeMethods(Co);function mh(e,t){const n=this||pc,o=t||n,i=Co.from(o.headers);let s=o.data;return D.forEach(e,function(I){s=I.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function BX(e){return!!(e&&e.__CANCEL__)}function ta(e,t,n){Ne.call(this,e??"canceled",Ne.ERR_CANCELED,t,n),this.name="CanceledError"}D.inherits(ta,Ne,{__CANCEL__:!0});function SX(e,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(new Ne("Request failed with status code "+n.status,[Ne.ERR_BAD_REQUEST,Ne.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function wO(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function XO(e,t){e=e||10;const n=new Array(e),o=new Array(e);let i=0,s=0,r;return t=t!==void 0?t:1e3,function(a){const c=Date.now(),C=o[s];r||(r=c),n[i]=a,o[i]=c;let A=s,m=0;for(;A!==i;)m+=n[A++],A=A%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),c-r<t)return;const p=C&&c-C;return p?Math.round(m*1e3/p):void 0}}function JO(e,t){let n=0,o=1e3/t,i,s;const r=(c,C=Date.now())=>{n=C,i=null,s&&(clearTimeout(s),s=null),e.apply(null,c)};return[(...c)=>{const C=Date.now(),A=C-n;A>=o?r(c,C):(i=c,s||(s=setTimeout(()=>{s=null,r(i)},o-A)))},()=>i&&r(i)]}const Pd=(e,t,n=3)=>{let o=0;const i=XO(50,250);return JO(s=>{const r=s.loaded,I=s.lengthComputable?s.total:void 0,a=r-o,c=i(a),C=r<=I;o=r;const A={loaded:r,total:I,progress:I?r/I:void 0,bytes:a,rate:c||void 0,estimated:c&&I&&C?(I-r)/c:void 0,event:s,lengthComputable:I!=null,[t?"download":"upload"]:!0};e(A)},n)},xS=(e,t)=>{const n=e!=null;return[o=>t[0]({lengthComputable:n,total:e,loaded:o}),t[1]]},NS=e=>(...t)=>D.asap(()=>e(...t)),YO=co.hasStandardBrowserEnv?function(){const t=co.navigator&&/(msie|trident)/i.test(co.navigator.userAgent),n=document.createElement("a");let o;function i(s){let r=s;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return o=i(window.location.href),function(r){const I=D.isString(r)?i(r):r;return I.protocol===o.protocol&&I.host===o.host}}():function(){return function(){return!0}}(),HO=co.hasStandardBrowserEnv?{write(e,t,n,o,i,s){const r=[e+"="+encodeURIComponent(t)];D.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),D.isString(o)&&r.push("path="+o),D.isString(i)&&r.push("domain="+i),s===!0&&r.push("secure"),document.cookie=r.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function xO(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function NO(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function vX(e,t){return e&&!xO(t)?NO(e,t):t}const FS=e=>e instanceof Co?{...e}:e;function $s(e,t){t=t||{};const n={};function o(c,C,A){return D.isPlainObject(c)&&D.isPlainObject(C)?D.merge.call({caseless:A},c,C):D.isPlainObject(C)?D.merge({},C):D.isArray(C)?C.slice():C}function i(c,C,A){if(D.isUndefined(C)){if(!D.isUndefined(c))return o(void 0,c,A)}else return o(c,C,A)}function s(c,C){if(!D.isUndefined(C))return o(void 0,C)}function r(c,C){if(D.isUndefined(C)){if(!D.isUndefined(c))return o(void 0,c)}else return o(void 0,C)}function I(c,C,A){if(A in t)return o(c,C);if(A in e)return o(void 0,c)}const a={url:s,method:s,data:s,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:I,headers:(c,C)=>i(FS(c),FS(C),!0)};return D.forEach(Object.keys(Object.assign({},e,t)),function(C){const A=a[C]||i,m=A(e[C],t[C],C);D.isUndefined(m)&&A!==I||(n[C]=m)}),n}const WX=e=>{const t=$s({},e);let{data:n,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:s,headers:r,auth:I}=t;t.headers=r=Co.from(r),t.url=ZX(vX(t.baseURL,t.url),e.params,e.paramsSerializer),I&&r.set("Authorization","Basic "+btoa((I.username||"")+":"+(I.password?unescape(encodeURIComponent(I.password)):"")));let a;if(D.isFormData(n)){if(co.hasStandardBrowserEnv||co.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if((a=r.getContentType())!==!1){const[c,...C]=a?a.split(";").map(A=>A.trim()).filter(Boolean):[];r.setContentType([c||"multipart/form-data",...C].join("; "))}}if(co.hasStandardBrowserEnv&&(o&&D.isFunction(o)&&(o=o(t)),o||o!==!1&&YO(t.url))){const c=i&&s&&HO.read(s);c&&r.set(i,c)}return t},FO=typeof XMLHttpRequest<"u",KO=FO&&function(e){return new Promise(function(n,o){const i=WX(e);let s=i.data;const r=Co.from(i.headers).normalize();let{responseType:I,onUploadProgress:a,onDownloadProgress:c}=i,C,A,m,p,b;function Z(){p&&p(),b&&b(),i.cancelToken&&i.cancelToken.unsubscribe(C),i.signal&&i.signal.removeEventListener("abort",C)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function f(){if(!v)return;const y=Co.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),V={data:!I||I==="text"||I==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:y,config:e,request:v};SX(function(R){n(R),Z()},function(R){o(R),Z()},V),v=null}"onloadend"in v?v.onloadend=f:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(f)},v.onabort=function(){v&&(o(new Ne("Request aborted",Ne.ECONNABORTED,e,v)),v=null)},v.onerror=function(){o(new Ne("Network Error",Ne.ERR_NETWORK,e,v)),v=null},v.ontimeout=function(){let W=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const V=i.transitional||yX;i.timeoutErrorMessage&&(W=i.timeoutErrorMessage),o(new Ne(W,V.clarifyTimeoutError?Ne.ETIMEDOUT:Ne.ECONNABORTED,e,v)),v=null},s===void 0&&r.setContentType(null),"setRequestHeader"in v&&D.forEach(r.toJSON(),function(W,V){v.setRequestHeader(V,W)}),D.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),I&&I!=="json"&&(v.responseType=i.responseType),c&&([m,b]=Pd(c,!0),v.addEventListener("progress",m)),a&&v.upload&&([A,p]=Pd(a),v.upload.addEventListener("progress",A),v.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(C=y=>{v&&(o(!y||y.type?new ta(null,e,v):y),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(C),i.signal&&(i.signal.aborted?C():i.signal.addEventListener("abort",C)));const G=wO(i.url);if(G&&co.protocols.indexOf(G)===-1){o(new Ne("Unsupported protocol "+G+":",Ne.ERR_BAD_REQUEST,e));return}v.send(s||null)})},EO=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let o=new AbortController,i;const s=function(c){if(!i){i=!0,I();const C=c instanceof Error?c:this.reason;o.abort(C instanceof Ne?C:new ta(C instanceof Error?C.message:C))}};let r=t&&setTimeout(()=>{r=null,s(new Ne(`timeout ${t} of ms exceeded`,Ne.ETIMEDOUT))},t);const I=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),e=null)};e.forEach(c=>c.addEventListener("abort",s));const{signal:a}=o;return a.unsubscribe=()=>D.asap(I),a}},MO=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let o=0,i;for(;o<n;)i=o+t,yield e.slice(o,i),o=i},LO=async function*(e,t){for await(const n of zO(e))yield*MO(n,t)},zO=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:o}=await t.read();if(n)break;yield o}}finally{await t.cancel()}},KS=(e,t,n,o)=>{const i=LO(e,t);let s=0,r,I=a=>{r||(r=!0,o&&o(a))};return new ReadableStream({async pull(a){try{const{done:c,value:C}=await i.next();if(c){I(),a.close();return}let A=C.byteLength;if(n){let m=s+=A;n(m)}a.enqueue(new Uint8Array(C))}catch(c){throw I(c),c}},cancel(a){return I(a),i.return()}},{highWaterMark:2})},wA=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",VX=wA&&typeof ReadableStream=="function",TO=wA&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),RX=(e,...t)=>{try{return!!e(...t)}catch{return!1}},UO=VX&&RX(()=>{let e=!1;const t=new Request(co.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),ES=64*1024,tb=VX&&RX(()=>D.isReadableStream(new Response("").body)),jd={stream:tb&&(e=>e.body)};wA&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!jd[t]&&(jd[t]=D.isFunction(e[t])?n=>n[t]():(n,o)=>{throw new Ne(`Response type '${t}' is not supported`,Ne.ERR_NOT_SUPPORT,o)})})})(new Response);const DO=async e=>{if(e==null)return 0;if(D.isBlob(e))return e.size;if(D.isSpecCompliantForm(e))return(await new Request(co.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(D.isArrayBufferView(e)||D.isArrayBuffer(e))return e.byteLength;if(D.isURLSearchParams(e)&&(e=e+""),D.isString(e))return(await TO(e)).byteLength},QO=async(e,t)=>{const n=D.toFiniteNumber(e.getContentLength());return n??DO(t)},PO=wA&&(async e=>{let{url:t,method:n,data:o,signal:i,cancelToken:s,timeout:r,onDownloadProgress:I,onUploadProgress:a,responseType:c,headers:C,withCredentials:A="same-origin",fetchOptions:m}=WX(e);c=c?(c+"").toLowerCase():"text";let p=EO([i,s&&s.toAbortSignal()],r),b;const Z=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let v;try{if(a&&UO&&n!=="get"&&n!=="head"&&(v=await QO(C,o))!==0){let V=new Request(t,{method:"POST",body:o,duplex:"half"}),X;if(D.isFormData(o)&&(X=V.headers.get("content-type"))&&C.setContentType(X),V.body){const[R,k]=xS(v,Pd(NS(a)));o=KS(V.body,ES,R,k)}}D.isString(A)||(A=A?"include":"omit");const f="credentials"in Request.prototype;b=new Request(t,{...m,signal:p,method:n.toUpperCase(),headers:C.normalize().toJSON(),body:o,duplex:"half",credentials:f?A:void 0});let G=await fetch(b);const y=tb&&(c==="stream"||c==="response");if(tb&&(I||y&&Z)){const V={};["status","statusText","headers"].forEach(F=>{V[F]=G[F]});const X=D.toFiniteNumber(G.headers.get("content-length")),[R,k]=I&&xS(X,Pd(NS(I),!0))||[];G=new Response(KS(G.body,ES,R,()=>{k&&k(),Z&&Z()}),V)}c=c||"text";let W=await jd[D.findKey(jd,c)||"text"](G,e);return!y&&Z&&Z(),await new Promise((V,X)=>{SX(V,X,{data:W,headers:Co.from(G.headers),status:G.status,statusText:G.statusText,config:e,request:b})})}catch(f){throw Z&&Z(),f&&f.name==="TypeError"&&/fetch/i.test(f.message)?Object.assign(new Ne("Network Error",Ne.ERR_NETWORK,e,b),{cause:f.cause||f}):Ne.from(f,f&&f.code,e,b)}}),nb={http:aO,xhr:KO,fetch:PO};D.forEach(nb,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const MS=e=>`- ${e}`,jO=e=>D.isFunction(e)||e===null||e===!1,kX={getAdapter:e=>{e=D.isArray(e)?e:[e];const{length:t}=e;let n,o;const i={};for(let s=0;s<t;s++){n=e[s];let r;if(o=n,!jO(n)&&(o=nb[(r=String(n)).toLowerCase()],o===void 0))throw new Ne(`Unknown adapter '${r}'`);if(o)break;i[r||"#"+s]=o}if(!o){const s=Object.entries(i).map(([I,a])=>`adapter ${I} `+(a===!1?"is not supported by the environment":"is not available in the build"));let r=t?s.length>1?`since :
`+s.map(MS).join(`
`):" "+MS(s[0]):"as no adapter specified";throw new Ne("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return o},adapters:nb};function hh(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ta(null,e)}function LS(e){return hh(e),e.headers=Co.from(e.headers),e.data=mh.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),kX.getAdapter(e.adapter||pc.adapter)(e).then(function(o){return hh(e),o.data=mh.call(e,e.transformResponse,o),o.headers=Co.from(o.headers),o},function(o){return BX(o)||(hh(e),o&&o.response&&(o.response.data=mh.call(e,e.transformResponse,o.response),o.response.headers=Co.from(o.response.headers))),Promise.reject(o)})}const wX="1.7.7",L0={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{L0[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const zS={};L0.transitional=function(t,n,o){function i(s,r){return"[Axios v"+wX+"] Transitional option '"+s+"'"+r+(o?". "+o:"")}return(s,r,I)=>{if(t===!1)throw new Ne(i(r," has been removed"+(n?" in "+n:"")),Ne.ERR_DEPRECATED);return n&&!zS[r]&&(zS[r]=!0,console.warn(i(r," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,r,I):!0}};function _O(e,t,n){if(typeof e!="object")throw new Ne("options must be an object",Ne.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let i=o.length;for(;i-- >0;){const s=o[i],r=t[s];if(r){const I=e[s],a=I===void 0||r(I,s,e);if(a!==!0)throw new Ne("option "+s+" must be "+a,Ne.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ne("Unknown option "+s,Ne.ERR_BAD_OPTION)}}const ob={assertOptions:_O,validators:L0},Gg=ob.validators;class Ms{constructor(t){this.defaults=t,this.interceptors={request:new YS,response:new YS}}async request(t,n){try{return await this._request(t,n)}catch(o){if(o instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{o.stack?s&&!String(o.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+s):o.stack=s}catch{}}throw o}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=$s(this.defaults,n);const{transitional:o,paramsSerializer:i,headers:s}=n;o!==void 0&&ob.assertOptions(o,{silentJSONParsing:Gg.transitional(Gg.boolean),forcedJSONParsing:Gg.transitional(Gg.boolean),clarifyTimeoutError:Gg.transitional(Gg.boolean)},!1),i!=null&&(D.isFunction(i)?n.paramsSerializer={serialize:i}:ob.assertOptions(i,{encode:Gg.function,serialize:Gg.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let r=s&&D.merge(s.common,s[n.method]);s&&D.forEach(["delete","get","head","post","put","patch","common"],b=>{delete s[b]}),n.headers=Co.concat(r,s);const I=[];let a=!0;this.interceptors.request.forEach(function(Z){typeof Z.runWhen=="function"&&Z.runWhen(n)===!1||(a=a&&Z.synchronous,I.unshift(Z.fulfilled,Z.rejected))});const c=[];this.interceptors.response.forEach(function(Z){c.push(Z.fulfilled,Z.rejected)});let C,A=0,m;if(!a){const b=[LS.bind(this),void 0];for(b.unshift.apply(b,I),b.push.apply(b,c),m=b.length,C=Promise.resolve(n);A<m;)C=C.then(b[A++],b[A++]);return C}m=I.length;let p=n;for(A=0;A<m;){const b=I[A++],Z=I[A++];try{p=b(p)}catch(v){Z.call(this,v);break}}try{C=LS.call(this,p)}catch(b){return Promise.reject(b)}for(A=0,m=c.length;A<m;)C=C.then(c[A++],c[A++]);return C}getUri(t){t=$s(this.defaults,t);const n=vX(t.baseURL,t.url);return ZX(n,t.params,t.paramsSerializer)}}D.forEach(["delete","get","head","options"],function(t){Ms.prototype[t]=function(n,o){return this.request($s(o||{},{method:t,url:n,data:(o||{}).data}))}});D.forEach(["post","put","patch"],function(t){function n(o){return function(s,r,I){return this.request($s(I||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:s,data:r}))}}Ms.prototype[t]=n(),Ms.prototype[t+"Form"]=n(!0)});class z0{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const o=this;this.promise.then(i=>{if(!o._listeners)return;let s=o._listeners.length;for(;s-- >0;)o._listeners[s](i);o._listeners=null}),this.promise.then=i=>{let s;const r=new Promise(I=>{o.subscribe(I),s=I}).then(i);return r.cancel=function(){o.unsubscribe(s)},r},t(function(s,r,I){o.reason||(o.reason=new ta(s,r,I),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=o=>{t.abort(o)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new z0(function(i){t=i}),cancel:t}}}function OO(e){return function(n){return e.apply(null,n)}}function qO(e){return D.isObject(e)&&e.isAxiosError===!0}const ib={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ib).forEach(([e,t])=>{ib[t]=e});function XX(e){const t=new Ms(e),n=aX(Ms.prototype.request,t);return D.extend(n,Ms.prototype,t,{allOwnKeys:!0}),D.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return XX($s(e,i))},n}const on=XX(pc);on.Axios=Ms;on.CanceledError=ta;on.CancelToken=z0;on.isCancel=BX;on.VERSION=wX;on.toFormData=kA;on.AxiosError=Ne;on.Cancel=on.CanceledError;on.all=function(t){return Promise.all(t)};on.spread=OO;on.isAxiosError=qO;on.mergeConfig=$s;on.AxiosHeaders=Co;on.formToJSON=e=>GX(D.isHTMLForm(e)?new FormData(e):e);on.getAdapter=kX.getAdapter;on.HttpStatusCode=ib;on.default=on;const $O="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",JX=async e=>{var t;try{const n=await on.post("/api",{to:e,messages:[{type:"text",text:"ส่งสินค้าเพื่อรออนุมัติ"}]},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${$O}`}});console.log("Success:",n.data)}catch(n){console.error("Error:",((t=n.response)==null?void 0:t.data)||n.message),n.response&&n.response.data&&n.response.data.message.includes("Authentication failed")&&console.error("Token is invalid or expired. Please refresh your token.")}},XA="https://cookbstaging.careervio.com",YX=async(e,t)=>{try{console.log("Fetching products for shop ID:",t);const n=`${XA}/api/products?populate[image]=true&populate[shop]=true&filters[shop][$eq]=${t}`;console.log("GET Request URL:",n);const o=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok){const r=await o.json();throw console.error("Error fetching products:",r),new Error(`Request failed with status ${o.status}: ${r.message||"Unauthorized"}`)}const i=await o.json();if(console.log("Fetched Products Data:",i),!i.data||!Array.isArray(i.data))throw console.error("Fetched data is not an array:",i),new Error("Invalid data format");const s=i.data.map((r,I)=>{if(console.log(`Processing product ${I}:`,r),!r||typeof r!="object")throw console.error(`Invalid product at index ${I}:`,r),new Error(`Invalid product data at index ${I}`);return{id:r.id,name:r.attributes.name,description:r.attributes.description,price:r.attributes.price,point:r.attributes.point,approved:r.attributes.approved,createdAt:r.attributes.createdAt,updatedAt:r.attributes.updatedAt,publishedAt:r.attributes.publishedAt,image:r.attributes.image||null,shop:{id:r.attributes.shop.id,name:r.attributes.shop.name,location:r.attributes.shop.location,latitude:r.attributes.shop.latitude,longitude:r.attributes.shop.longitude,createdAt:r.attributes.shop.createdAt,updatedAt:r.attributes.shop.updatedAt,publishedAt:r.attributes.shop.publishedAt},numStock:r.attributes.numStock||0}});return console.log("Parsed Products:",s),s}catch(n){throw console.error("Error fetching products:",n.message),n}},e8=async(e,t,n)=>{try{const o=`${XA}/api/products`,i=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:n})});if(!i.ok){const r=await i.json();throw console.error("Error adding product:",r),new Error(`Request failed with status ${i.status}`)}const s=await i.json();return JX(t),s}catch(o){throw console.error("Error in addProduct function:",o),o}},t8=async(e,t,n,o)=>{try{const i=`${XA}/api/products/${n}`,s=await fetch(i,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{name:o.name,description:o.description||"",price:parseFloat(o.price),point:o.point||0,approved:o.approved||!1,numStock:parseInt(o.numStock,10),type:o.type,shop:{id:o.shopId},image:o.image?[{id:o.image}]:[]}})});if(!s.ok){const I=await s.json();throw console.error("Error updating Product:",I),new Error(`Request failed with status ${s.status}`)}const r=await s.json();return console.log("Updated Product Data:",r),JX(t),r}catch(i){throw console.error("Error updating Product:",i.message),i}},n8=async(e,t,n,o)=>{try{console.log("getProductByID",n);const i=`${XA}/api/products/${n}`,s=await fetch(i,{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok){const I=await s.json();throw console.error("Error fetching ProductByID ID:",I),new Error(`Request failed with status ${s.status}: ${I.message||"Unauthorized"}`)}const r=await s.json();if(console.log("Response:",r),r.data){const I=r.data,a=I.attributes||{},c=I.id||"ID ไม่ระบุ",C=a.name||"ชื่อไม่ระบุ",A=a.description||"ไม่มีคำอธิบาย",m=a.price!==void 0?a.price:"ไม่มีราคา",p=a.numStock!==void 0?a.numStock:"ไม่มีข้อมูลจำนวนในสต็อก",b=a.approved!==void 0?a.approved:"สถานะไม่ระบุ";return console.log(`Product ID: ${c}`),console.log(`Product Name: ${C}`),console.log(`Description: ${A}`),console.log(`Price: ${m}`),console.log(`Number in Stock: ${p}`),console.log(`Approved: ${b}`),{id:c,name:C,description:A,price:m,numStock:p,approved:b}}else return console.warn("No ProductByID found with the provided ID."),null}catch(i){throw console.error("Error fetching ProductByID:",i.message),i}},o8={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",p:4},i8="https://cookbstaging.careervio.com",Jr="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",T0=JSON.parse(localStorage.getItem("user")||"{}");console.log(T0);const TS=T0.id,US=T0.lineId;function g8(){const[e,t]=B.useState(!1),[n,o]=B.useState(!1),[i,s]=B.useState(null),[r,I]=B.useState([]),[a,c]=B.useState(!0),[C,A]=B.useState(null),[m,p]=B.useState({name:"",numStock:"",type:"",price:"",description:"",image:null}),b=async()=>{try{const R=await yu(Jr,TS);R&&typeof R=="object"&&A(R.shop.id)}catch(R){console.error("เกิดข้อผิดพลาดในการดึงข้อมูลร้านค้า:",R)}finally{c(!1)}};B.useEffect(()=>{b()},[Jr,TS]);const Z=async()=>{try{const R=await YX(Jr,C);I(R)}catch(R){console.error("เกิดข้อผิดพลาดในการดึงข้อมูลสินค้า:",R)}};B.useEffect(()=>{C&&Z()},[C,Jr]);const v=R=>{const{id:k,value:F}=R.target;p({...m,[k]:F})},f=R=>{R?p(k=>({...k,image:R})):Qn.fire({icon:"warning",title:"กรุณาเลือกภาพ",text:"กรุณาเพิ่มรูปสินค้าก่อนทำการบันทึก"})},G=async()=>{try{if(!m.name||!m.numStock||!m.price||!m.type){Qn.fire({icon:"warning",title:"ข้อมูลไม่ครบ",text:"กรุณาตรวจสอบข้อมูลอีกครั้ง",position:"center",showConfirmButton:!0,confirmButtonText:"ตกลง"});return}if(m.numStock<0||m.price<0){Qn.fire({icon:"warning",title:"ค่าติดลบไม่ถูกต้อง",text:"จำนวนและมูลค่าต้องเป็นค่าบวก",position:"center",showConfirmButton:!0,confirmButtonText:"ตกลง"});return}let R=null;if(m.image){const x=await KI(m.image);console.log("Uploaded Image:",x),R=x.id}const k={name:m.name,description:m.description,price:parseFloat(m.price),numStock:parseFloat(m.numStock),type:m.type,shop:C,image:R,approved:!1};let F;n?(F=await t8(Jr,US,i,k),I(x=>x.map(M=>M.id===i?F.data.data:M))):(F=await e8(Jr,US,k),I(x=>[...x,F.data.data]),V()),Qn.fire({icon:"success",title:n?"สินค้าถูกแก้ไขเรียบร้อยแล้ว":"สินค้าถูกเพิ่มเรียบร้อยแล้ว",position:"center",showConfirmButton:!0,confirmButtonText:"ตกลง"}).then(()=>{V(),Z()})}catch(R){console.error("เกิดข้อผิดพลาดในการเพิ่ม/แก้ไขสินค้า:",R),Qn.fire({icon:"error",title:"Oops...",text:"เกิดข้อผิดพลาดในการเพิ่ม/แก้ไขสินค้า!",position:"center",showConfirmButton:!0,confirmButtonText:"ตกลง"}).then(()=>{V()})}},y=R=>{o(!0),s(R.id),p({name:R.name,numStock:R.numStock,type:R.type,price:R.price,description:R.description,image:null}),t(!0)},W=()=>t(!0),V=()=>{t(!1),o(!1),p({name:"",numStock:"",type:"",price:"",description:"",image:null})},X=mg({typography:{fontFamily:"Sarabun !important"}});return a?d.jsx("div",{children:"Loading..."}):d.jsx(d.Fragment,{children:d.jsxs(or,{theme:X,children:[d.jsx(hi,{}),d.jsxs(ni,{maxWidth:"sm",children:[d.jsxs("div",{className:"flex flex-row",children:[d.jsx("div",{className:"basis-6/12"}),d.jsxs("div",{onClick:W,className:"basis-6/12 bg-green-hard-bg w-36 h-12 flex justify-center items-center rounded-md mt-5 ml-10 cursor-pointer",children:[d.jsx(JE,{className:"text-2xl text-white"}),d.jsx("span",{className:"text-white pl-3",children:"เพิ่มสินค้า"})]})]}),d.jsx(n0,{open:e,onClose:V,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",sx:{zIndex:1e3},children:d.jsxs(ng,{sx:{...o8,border:"0.1px solid #ccc",borderRadius:"8px",boxShadow:2,pointerEvents:e?"auto":"none"},tabIndex:e?0:-1,children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"ชื่อสินค้า"}),d.jsx(st,{fullWidth:!0,id:"name",variant:"outlined",value:m.name||"",onChange:v,sx:{mb:2}}),d.jsx("label",{htmlFor:"numStock",className:"block text-sm font-medium text-gray-700",children:"จำนวน"}),d.jsx(st,{fullWidth:!0,id:"numStock",variant:"outlined",value:m.numStock||"",onChange:v,type:"number",sx:{mb:2}}),d.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700",children:"ประเภทสินค้า"}),d.jsx(st,{fullWidth:!0,id:"type",variant:"outlined",value:m.type||"",onChange:v,sx:{mb:2}}),d.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:"มูลค่าต่อชิ้น"}),d.jsx(st,{fullWidth:!0,id:"price",variant:"outlined",value:m.price||"",onChange:v,type:"number",step:"0.01",sx:{mb:2}}),d.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"รายละเอียดสินค้า"}),d.jsx(st,{fullWidth:!0,id:"description",variant:"outlined",value:m.description||"",onChange:v,multiline:!0,rows:4,sx:{mb:2}}),d.jsxs(Pz,{item:!0,xs:12,sx:{mb:2},children:[" ",d.jsx($l,{className:"bg-white",id:"image",onCapture:f,ModuleName:"Product"})]}),d.jsx("div",{className:"flex justify-end mt-5",children:d.jsxs("button",{onClick:G,className:"bg-blue-500 text-white px-4 py-2 rounded-md flex items-center",children:[d.jsx(HE,{className:"mr-1"}),"บันทึก"]})})]})}),r.map(R=>!R||typeof R.approved>"u"?null:d.jsxs("div",{className:"relative w-full h-auto bg-white rounded-md inner-shadow p-5 mt-10",children:[d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsx("div",{className:`absolute top-2 right-2 px-3 py-1 text-white font-bold rounded-md ${R.approved?"bg-green-500":"bg-yellow-500"}`,title:R.approved?"อนุมัติแล้ว":"รออนุมัติ",children:R.approved?"อนุมัติแล้ว":"รออนุมัติ"}),d.jsx("button",{className:"absolute top-2 right-28 px-3 py-1 text-white bg-blue-500 rounded-md hover:bg-blue-700",onClick:()=>y(R),title:"แก้ไขสินค้า",children:"แก้ไข"}),d.jsx("div",{children:R.image&&R.image.data&&R.image.data.attributes&&R.image.data.attributes.url?d.jsx("img",{src:`${i8}${R.image.data.attributes.url}`,alt:R.name||"No Name",className:"w-full h-auto"}):d.jsx("img",{src:G_,alt:"default",className:"w-full h-auto"})}),d.jsx("p",{className:"col-span-2 text-2xl mt-8",children:R.name||"No Name"})]}),d.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-10",children:[d.jsx("p",{className:"col-span-2",children:"จำนวนสินค้าในสต็อก"}),d.jsx("p",{className:"text-center",children:R.numStock||0}),d.jsx("p",{className:"text-right",children:"ชิ้น"})]}),d.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-10",children:[d.jsx("p",{className:"col-span-2",children:"ราคาต่อชิ้น"}),d.jsx("p",{className:"text-center",children:R.price||0}),d.jsx("p",{className:"text-right",children:"บาท"})]}),d.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-10",children:[d.jsx("p",{className:"col-span-2",children:"จำนวนเงินทั้งหมด"}),d.jsx("p",{className:"text-center",children:R.price*R.numStock||0}),d.jsx("p",{className:"text-right",children:"บาท"})]})]},R.id))]})]})})}function s8(){var f,G;const[e,t]=B.useState([]),[n,o]=B.useState(!0),[i,s]=B.useState(null),{id:r}=fu(),[I,a]=B.useState(()=>(localStorage.removeItem("cart"),{})),c="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",C="https://cookbstaging.careervio.com",A=mo(),{addToCart:m,removeFromCart:p}=B.useContext(pf);B.useEffect(()=>{(async()=>{try{o(!0);const W=await YX(c,r);t(W),o(!1),W.length===0&&(alert("No product for this shop"),A("/home"))}catch(W){console.error("Error fetching products:",W),s(W.message),o(!1)}})()},[r,c,A]);const b=(y,W)=>{console.log("productId: ",y,"quantity: ",W),console.log("counts in update: ",I);const V={...I,[y]:(I[y]||0)+W};a(V),localStorage.setItem("cart",JSON.stringify(V)),console.log("updatedCounts in update: ",V)},Z=y=>{console.log("In CountsById[",y.id,"] : ",y),m(y),b(y.id,1)},v=y=>{console.log("De CountsById[",y,"] : ",I[y]),I[y]>0&&(p(y),b(y,-1))};return console.log("products: ",e),n?d.jsx("p",{children:"Loading..."}):i?d.jsxs("p",{children:["Error: ",i]}):d.jsxs(d.Fragment,{children:[d.jsx(En,{}),d.jsxs(ni,{maxWidth:"sm",children:[e.length>0&&d.jsx("p",{className:"text-3xl text-center pt-10",children:(G=(f=e[0])==null?void 0:f.shop)==null?void 0:G.name}),e.map(y=>{var W,V,X;return d.jsxs("div",{children:[d.jsxs("div",{className:"w-full h-60 bg-white mt-10 rounded-s-md",children:[d.jsx("div",{className:"flex justify-center",children:d.jsx("span",{className:"circle",style:{backgroundImage:(X=(V=(W=y.image)==null?void 0:W.data)==null?void 0:V.attributes)!=null&&X.url?`url(${C}${y.image.data.attributes.url})`:"url(https://cdn.britannica.com/70/234870-050-D4D024BB/Orange-colored-cat-yawns-displaying-teeth.jpg)",backgroundSize:"cover",backgroundPosition:"center",width:"100%",maxWidth:"150px",height:"150px",borderRadius:"50%"}})}),d.jsxs("div",{className:"flex flex-row",children:[d.jsx("button",{className:"basis-1/4 rounded-bl-md bg-red-hard-bg text-white font-bold text-3xl pb-3 width-button-inandde",style:{height:"2.9rem"},onClick:()=>v(y.id),children:"-"}),d.jsx("button",{className:"basis-1/2 col-start-2 col-span-4 bg-yellow-hard-bg font-bold width-button-count",style:{height:"2.9rem"},children:I[y.id]||0}),d.jsx("button",{className:"basis-1/4 bg-green-hard-bg text-white font-bold text-3xl pb-3 rounded-br-md width-button-inandde",style:{height:"2.9rem"},onClick:()=>Z(y),children:"+"})]})]}),d.jsx("p",{className:"text-center text-2xl mt-10",children:y.name}),d.jsxs("p",{className:"text-center text-2xl mt-3 pb-10",children:[y.point||0," แต้ม"]})]},y.id)})]})]})}function r8(){const[e,t]=B.useState(0),n=()=>{t(e+1)},o=()=>{e>0&&t(e-1)},[i,s]=B.useState(!1),r=()=>{s(I=>!I)};return d.jsxs(d.Fragment,{children:[d.jsxs("nav",{className:"flex items-center justify-between p-5 pr-20 bg-white",children:[d.jsx(Qo,{to:"/",children:d.jsx("img",{src:t2,alt:"Logo",width:50})}),d.jsxs(Qo,{to:"/conclusion",children:[d.jsx(i2,{className:"w-10 h-10 text-green-700 ml-10 relative top-4"}),e>=0&&d.jsx("span",{className:"relative number-basket  inline-flex items-center justify-center w-6 h-6 text-xs font-bold text-white bg-red-500 rounded-full",children:e})]}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx(g2,{className:"w-7 h-7 text-yellow-hard ml-8 "}),d.jsx("p",{className:"ml-6 mt-2",children:d.jsx("strong",{children:"32000"})})]}),d.jsx("div",{children:d.jsxs("ul",{id:"navbar",className:i?"#navbar open":"#navbar",children:[d.jsx("li",{children:d.jsx(Qo,{className:"font-semibold hover:text-yellow-hard",to:"/UserProfile",style:({isActive:I})=>({color:I?"yellow-hard":""}),children:"ข้อมูลส่วนตัว/ลงทะเบียน"})}),d.jsx("li",{children:d.jsx(Qo,{className:"font-semibold hover:text-yellow-hard",to:"/history-point",style:({isActive:I})=>({color:I?"yellow-hard":""}),children:"คะแนนสะสมและประวัติการแลกแต้ม"})}),d.jsx("li",{children:d.jsx(Qo,{className:"font-semibold hover:text-yellow-hard",to:"/history-service-machine",style:({isActive:I})=>({color:I?"yellow-hard":""}),children:"ประวัติการใช้บริการตู้"})})]})}),d.jsx("div",{id:"mobile",onClick:r,children:d.jsx("i",{id:"bar",className:i?"fas fa-times":"fas fa-bars"})})]}),d.jsxs(ni,{maxWidth:"sm",children:[d.jsxs("div",{className:"w-full h-60 bg-grey-bg mt-10 rounded-md",children:[d.jsx("div",{className:"flex justify-center ",children:d.jsx("div",{className:"background w-40 h-40 "})}),d.jsxs("div",{className:"flex flex-row mt-10",children:[d.jsx("button",{className:"basis-1/4 rounded-bl-md bg-red-hard-bg text-white font-bold text-3xl pb-3 width-button-inandde",style:{height:"2.9rem"},onClick:o,children:"-"}),d.jsx("button",{className:"basis-1/2 col-start-2 col-span-4 bg-yellow-hard-bg  font-bold width-button-count",style:{height:"2.9rem"},children:e}),d.jsx("button",{className:"basis-1/4 bg-green-hard-bg text-white font-bold text-3xl pb-3 rounded-br-md width-button-inandde",style:{height:"2.9rem"},onClick:n,children:"+"})]})]}),d.jsx("p",{className:"text-center text-2xl mt-3",children:"บร็อคโคลี"}),d.jsx("p",{className:"text-center text-2xl mt-3 pb-10",children:"35 แต้ม"}),d.jsxs("div",{className:"w-full h-60 bg-grey-bg mt-10 rounded-s-md",children:[d.jsx("div",{className:"flex justify-center ",children:d.jsx("div",{className:"background-2 w-40 h-40 relative top-10 left-5"})}),d.jsxs("div",{className:"flex flex-row mt-10",children:[d.jsx("button",{className:"basis-1/4 rounded-bl-md bg-red-hard-bg text-white font-bold text-3xl pb-3 width-button-inandde",style:{height:"2.9rem"},onClick:o,children:"-"}),d.jsx("button",{className:"basis-1/2 col-start-2 col-span-4 bg-yellow-hard-bg  font-bold width-button-count",style:{height:"2.9rem"},children:e}),d.jsx("button",{className:"basis-1/4 bg-green-hard-bg text-white font-bold text-3xl pb-3 rounded-br-md width-button-inandde",style:{height:"2.9rem"},onClick:n,children:"+"})]})]}),d.jsx("p",{className:"text-center text-2xl mt-3",children:"แตงกวา"}),d.jsx("p",{className:"text-center text-2xl mt-3 pb-10",children:"50 แต้ม"}),d.jsxs("div",{className:"w-full h-60 bg-grey-bg mt-10 rounded-s-md",children:[d.jsx("div",{className:"flex justify-center ",children:d.jsx("div",{className:"background-3 w-40 h-40 relative top-10 left-5"})}),d.jsxs("div",{className:"flex flex-row mt-10",children:[d.jsx("button",{className:"basis-1/4 rounded-bl-md bg-red-hard-bg text-white font-bold text-3xl pb-3 width-button-inandde",style:{height:"2.9rem"},onClick:o,children:"-"}),d.jsx("button",{className:"basis-1/2 col-start-2 col-span-4 bg-yellow-hard-bg  font-bold width-button-count",style:{height:"2.9rem"},children:e}),d.jsx("button",{className:"basis-1/4 bg-green-hard-bg text-white font-bold text-3xl pb-3 rounded-br-md width-button-inandde",style:{height:"2.9rem"},onClick:n,children:"+"})]})]}),d.jsx("p",{className:"text-center text-2xl mt-3",children:"พริกหยวก"}),d.jsx("p",{className:"text-center text-2xl mt-3 pb-10",children:"50 แต้ม"})]})]})}function DS(){const e="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",{userId:t}=fu(),n=mg({typography:{fontFamily:"Sarabun"}}),[o,i]=B.useState({username:"",password:"",fullName:"",telNumber:"",gender:"",address:"",cardID:"",photoImage:"",checkedOne:!1}),s=mo(),[r,I]=B.useState(!1),[a,c]=B.useState(!1),[C,A]=B.useState(null),m=f=>{i(G=>({...G,photoImage:f}))},p=f=>{const{id:G,name:y,value:W,type:V,checked:X}=f.target;i(R=>({...R,[G||y]:V==="checkbox"?X:W}))};B.useEffect(()=>{const{username:f,fullName:G,telNumber:y,gender:W,address:V,cardID:X,checkedOne:R}=o;I(f&&G&&y&&W&&V&&X&&R)},[o]);const b=f=>({id:f.id,name:f.name,alternativeText:f.alternativeText||null,caption:f.caption||null,width:f.width,height:f.height,formats:f.formats,hash:f.hash,ext:f.ext,mime:f.mime,size:f.size,url:f.url,provider:f.provider,createdAt:f.createdAt,updatedAt:f.updatedAt}),Z=async f=>{f.preventDefault();let G=null;if(o.photoImage){const V=await KI(o.photoImage);G=b(V)}const y={username:o.username||"cook"+t,email:"cook"+t+"@cook.com",password:"cookcook",lineId:t,userType:"customer",photoImage:G||null,fullName:o.fullName,telNumber:o.telNumber,gender:"Null",address:o.address,cardID:o.cardID};console.log("userData before: ",y),console.log("token before: ",e);const W=await s2(y);if(console.log("response: ",W),W)alert("User registered successfully!"),s("/home");else throw new Error("User registration failed.")},v=f=>{i(G=>({...G,photoImage:f}))};return a?d.jsx("p",{children:"Loading..."}):C?d.jsxs("p",{children:["Error: ",C]}):d.jsxs(or,{theme:n,children:[d.jsx(En,{}),d.jsx(_f,{photoImage:o.photoImage,onFileChange:m}),d.jsxs("form",{onSubmit:Z,children:[d.jsx("div",{className:"container mx-auto px-4 py-8",children:d.jsxs("div",{className:"flex flex-wrap -mx-2",children:[d.jsx("div",{className:"w-full md:w-1/2 px-2",children:d.jsx(st,{id:"username",label:"ชื่อผู้ใช้",variant:"outlined",className:"w-full bg-white",required:!0,value:o.username,onChange:p})}),d.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:d.jsx(st,{id:"fullName",label:"ชื่อ-นามสกุล",variant:"outlined",className:"w-full bg-white",required:!0,value:o.fullName,onChange:p})}),d.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:d.jsx(st,{id:"telNumber",label:"เบอร์โทร",variant:"outlined",className:"w-full bg-white",required:!0,value:o.telNumber,onChange:p})}),d.jsx("div",{className:"w-full px-2 mt-4",children:d.jsxs(gr,{children:[d.jsx(cA,{children:"เพศ"}),d.jsxs(s0,{row:!0,name:"gender",value:"Null",onChange:p,children:[d.jsx(Vl,{value:"Male",control:d.jsx(Rl,{}),label:"ชาย"}),d.jsx(Vl,{value:"Female",control:d.jsx(Rl,{}),label:"หญิง"})]})]})}),d.jsx("div",{className:"w-full px-2 mt-4",children:d.jsx(st,{id:"address",label:"ที่อยู่",placeholder:"ที่อยู่",multiline:!0,rows:4,className:"w-full bg-white",required:!0,value:o.address,onChange:p})}),d.jsx("div",{className:"w-full px-2 mt-4",children:d.jsx(st,{id:"cardID",label:"หมายเลขบัตรประจำตัวประชาชน",variant:"outlined",className:"w-full bg-white",required:!0,value:o.cardID,onChange:p})}),d.jsx("div",{className:"w-full px-2 mt-4",children:d.jsx($l,{onCapture:v})})]})}),d.jsxs("div",{className:"container mx-auto px-4 mt-10 mb-5",children:[d.jsx(Pl,{id:"checkedOne",checked:o.checkedOne,onChange:p,required:!0,sx:{"& .MuiSvgIcon-root":{fontSize:30}}}),d.jsxs("span",{children:[d.jsx("strong",{children:"กุ๊ก"}),"ให้ความสำคัญเกี่ยวกับความปลอดภัยข้อมูลของคุณ"," ",d.jsx("span",{className:"text-left leading-loose",children:"และเพื่อให้คุณมั่นใจว่า กุ๊กมีความมุ่งมั่นที่จะให้ความคุ้มครองและดำเนินการด้วยความรับผิดชอบต่อการเก็บรวบรวม ใช้ เปิดเผย และโอนข้อมูลของคุณ กุ๊กจึงขอความยินยอมจากคุณ"})]})]}),d.jsx("div",{className:"container mx-auto px-4",children:d.jsx("button",{type:"submit",disabled:!r,className:`w-full h-12 mb-10 flex justify-center rounded-xl items-center text-white ${r?"bg-green-500":"bg-slate-300"}`,children:"ลงทะเบียน"})})]})]})}const l8=()=>{const e=mo(),t=()=>{e("/register")},n=()=>{e("/Login")};return d.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4",children:[d.jsx("h1",{className:"text-4xl font-semibold text-gray-800 mb-6 text-center",children:"Welcome to Cook Project"}),d.jsxs("p",{className:"text-lg text-gray-600 mb-10 text-center max-w-2xl leading-relaxed",children:["Here’s a platform where you can bring your bottles or cans, collect points, and exchange them for exciting rewards from our partner stores. ",d.jsx("br",{}),"It’s not just recycling—it’s rewarding sustainability with endless possibilities!"]}),d.jsxs("div",{className:"flex space-x-6",children:[d.jsx("button",{className:"bg-[#FBB615] text-white font-medium py-2 px-6 rounded-lg shadow-lg hover:bg-yellow-600 transition duration-200 ease-in-out",onClick:t,children:"Register"}),d.jsx("button",{className:"bg-[#15803d] text-white font-medium py-2 px-6 rounded-lg shadow-lg hover:bg-green-600 transition duration-200 ease-in-out",onClick:n,children:"Login with Line"})]})]})},a8=()=>{const[e,t]=B.useState(null),[n,o]=B.useState(""),[i,s]=B.useState(null),[r,I]=B.useState(""),{isReady:a,liff:c,error:C}=hf(),A=mo();B.useEffect(()=>{a&&(async()=>{try{if(await c.init({liffId:"2006448899-kaB4QBVr"}),c.isLoggedIn()){const Z=c.getAccessToken();o(Z);const v=await c.getProfile();t(v);const f=await p(Z);s(f);const G=await m(f);A(G?"/partner/shopHome":"/partner/Profilestore")}else c.login()}catch{I("Initialization failed. Please try again.")}})()},[a,c,A]);const m=async b=>{try{console.log(b);let Z;try{Z=await Gu(b.userId,n)}catch{console.log("User not found, proceeding to register.")}if(Z){const v=await vp(b.userId);if(v)return localStorage.setItem("accessToken",v.jwt),localStorage.setItem("user",JSON.stringify(v.user)),!0}else{const v=await s2({username:`cook${b.userId}`,email:`cook${b.userId}@cook.com`,password:"cookcook",lineId:b.userId,userType:"shop",fullName:b.displayName,telNumber:b.telNumber||"",gender:"Null",address:b.address||"",cardID:b.cardID||""});if(console.log("Registration response:",v),v){const f=await vp(b.userId);if(f)return localStorage.setItem("accessToken",f.jwt),localStorage.setItem("user",JSON.stringify(f.user)),!0}}return!1}catch(Z){return console.error("Error handling LINE login:",Z.message),I("Login failed. Please try again."),!1}},p=async b=>{try{const Z=await fetch("https://api.line.me/v2/profile",{method:"GET",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});if(!Z.ok){const f=await Z.json();throw console.error("Error fetching profile:",f),new Error(f.message||"Failed to fetch profile")}const v=await Z.json();return console.log("Profile Data:",v),v}catch(Z){throw console.error("Error:",Z.message),I("Failed to fetch profile. Please try again."),Z}}},I8=()=>{const[e,t]=B.useState([]),[n,o]=B.useState(null),i="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=";return B.useEffect(()=>{(async()=>{try{const r=await e2(i);t(r)}catch(r){o(r.message)}})()},[i]),n?d.jsxs("div",{children:["Error: ",n]}):d.jsxs("div",{className:"p-4",children:[d.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Shop List"}),d.jsx("ul",{className:"space-y-4",children:e.map(s=>d.jsxs("li",{className:"border p-4 rounded shadow",children:[d.jsx("h2",{className:"text-xl font-semibold",children:s.name}),d.jsxs("p",{children:["Location: ",s.location]}),d.jsxs("p",{children:["Latitude: ",s.latitude]}),d.jsxs("p",{children:["Longitude: ",s.longitude]}),d.jsxs("p",{children:["Book Bank Number: ",s.bookBankNumber]}),d.jsxs("p",{children:["Created At: ",new Date(s.createdAt).toLocaleString()]}),d.jsxs("p",{children:["Updated At: ",new Date(s.updatedAt).toLocaleString()]}),d.jsxs("p",{children:["Published At: ",new Date(s.publishedAt).toLocaleString()]})]},s.id))})]})};function c8(){return d.jsxs("div",{className:"App",children:[d.jsx("h1",{children:"Reclcle Locations"}),d.jsx(eX,{}),d.jsx("h1",{children:"Oil Locations"}),d.jsx(tX,{})]})}function C8(){var y;const t="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",n="https://cookbstaging.careervio.com",o=mg({typography:{fontFamily:"Sarabun"}}),[i,s]=B.useState({username:"",password:"",fullName:"",telNumber:"",gender:"",address:"",cardID:"",photoImage:"",checkedOne:!1});mo();const[r,I]=B.useState(!1),[a,c]=B.useState(null),[C,A]=B.useState(!0),[m,p]=B.useState(null),b=W=>{s(V=>({...V,photoImage:W}))},Z=W=>{const{id:V,name:X,value:R,type:k,checked:F}=W.target;s(x=>({...x,[V||X]:k==="checkbox"?F:R}))};B.useEffect(()=>{const{username:W,fullName:V,telNumber:X,gender:R,address:k,cardID:F,checkedOne:x}=i;I(W&&V&&X&&R&&k&&F&&x)},[i]),B.useEffect(()=>{(async()=>{try{A(!0);const V=await Gu(void 0,t);c(V),s({username:V.username||"",fullName:V.fullName||"",telNumber:V.telNumber||"",gender:V.gender||"",address:V.address||"",cardID:V.cardID||"",checkedOne:!1}),A(!1)}catch(V){console.error("Error fetching users:",V),p(V.message),A(!1)}})()},[void 0,t]);const v=W=>({id:W.id,name:W.name,alternativeText:W.alternativeText||null,caption:W.caption||null,width:W.width,height:W.height,formats:W.formats,hash:W.hash,ext:W.ext,mime:W.mime,size:W.size,url:W.url,provider:W.provider,createdAt:W.createdAt,updatedAt:W.updatedAt}),f=async W=>{W.preventDefault();try{let V=null;if(i.photoImage){const R=await KI(i.photoImage);V=v(R)}const X={username:i.username,email:i.email,password:i.password,photoImage:V,fullName:i.fullName,telNumber:i.telNumber,gender:i.gender,address:i.address,cardID:i.cardID};await qF(a.id,X,t),alert("User data updated successfully!")}catch(V){console.error("Error updating user data:",V),alert("Error updating user data")}},G=W=>{s(V=>({...V,photoImage:W}))};return C?d.jsx("p",{children:"Loading..."}):m?d.jsxs("p",{children:["Error: ",m]}):d.jsxs(or,{theme:o,children:[d.jsx(En,{}),d.jsx(_f,{photoImage:(y=a==null?void 0:a.photoImage)!=null&&y.url?`${n}${a.photoImage.url}`:"",onFileChange:b}),d.jsxs("form",{onSubmit:f,children:[d.jsx("div",{className:"container mx-auto px-4 py-8",children:d.jsxs("div",{className:"flex flex-wrap -mx-2",children:[d.jsx("div",{className:"w-full md:w-1/2 px-2",children:d.jsx(st,{id:"username",label:"ชื่อผู้ใช้",variant:"outlined",className:"w-full bg-white",required:!0,value:i.username,onChange:Z})}),d.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:d.jsx(st,{id:"fullName",label:"ชื่อ-นามสกุล",variant:"outlined",className:"w-full bg-white",required:!0,value:i.fullName,onChange:Z})}),d.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:d.jsx(st,{id:"telNumber",label:"เบอร์โทร",variant:"outlined",className:"w-full bg-white",required:!0,value:i.telNumber,onChange:Z})}),d.jsx("div",{className:"w-full px-2 mt-4",children:d.jsxs(gr,{children:[d.jsx(cA,{children:"เพศ"}),d.jsxs(s0,{row:!0,name:"gender",value:"Null",onChange:Z,children:[d.jsx(Vl,{value:"Male",control:d.jsx(Rl,{}),label:"ชาย"}),d.jsx(Vl,{value:"Female",control:d.jsx(Rl,{}),label:"หญิง"})]})]})}),d.jsx("div",{className:"w-full px-2 mt-4",children:d.jsx(st,{id:"address",label:"ที่อยู่",placeholder:"ที่อยู่",multiline:!0,rows:4,className:"w-full bg-white",required:!0,value:i.address,onChange:Z})}),d.jsx("div",{className:"w-full px-2 mt-4",children:d.jsx(st,{id:"cardID",label:"หมายเลขบัตรประจำตัวประชาชน",variant:"outlined",className:"w-full bg-white",required:!0,value:i.cardID,onChange:Z})}),d.jsx("div",{className:"w-full px-2 mt-4",children:d.jsx($l,{onCapture:G})})]})}),d.jsxs("div",{className:"container mx-auto px-4 mt-10 mb-5",children:[d.jsx(Pl,{id:"checkedOne",checked:i.checkedOne,onChange:Z,required:!0,sx:{"& .MuiSvgIcon-root":{fontSize:30}}}),d.jsxs("span",{children:[d.jsx("strong",{children:"กุ๊ก"}),"ให้ความสำคัญเกี่ยวกับความปลอดภัยข้อมูลของคุณ"," ",d.jsx("span",{className:"text-left leading-loose",children:"และเพื่อให้คุณมั่นใจว่า กุ๊กมีความมุ่งมั่นที่จะให้ความคุ้มครองและดำเนินการด้วยความรับผิดชอบต่อการเก็บรวบรวม ใช้ เปิดเผย และโอนข้อมูลของคุณ กุ๊กจึงขอความยินยอมจากคุณ"})]})]}),d.jsx("div",{className:"container mx-auto px-4",children:d.jsx("button",{type:"submit",disabled:!r,className:`w-full h-12 mb-10 flex justify-center rounded-xl items-center text-white ${r?"bg-green-500":"bg-slate-300"}`,children:"บันทึกข้อมูล"})})]})]})}const d8=()=>{const e=os(),{storedCounts:t,cartItems:n}=e.state||{},o=typeof t=="string"?JSON.parse(t):t,[i,s]=B.useState(!1),r=()=>{s(!i)};let I=0,a=0;return d.jsxs(d.Fragment,{children:[d.jsx(En,{}),d.jsx("div",{className:"flex justify-center mt-6 px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"bg-white shadow-md rounded-lg p-4 sm:p-6 w-full max-w-md border-2 border-gray-300",children:[d.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-center mb-4",children:"Cart Summary"}),d.jsx("h2",{className:"text-md sm:text-lg font-semibold text-gray-700 mb-4 text-center",children:"รายการที่เลือก"}),d.jsx("div",{className:"border-b-2 border-gray-300 mb-4"}),n&&n.length>0?d.jsx("ul",{className:"space-y-3 sm:space-y-4",children:n.map((c,C)=>{const A=o[c.id];if(A>0){const m=c.point*A;return I+=m,a+=A,d.jsxs("li",{className:"flex flex-row justify-between items-start sm:items-center py-4 border-b border-gray-200",children:[d.jsxs("div",{className:"sm:w-full",children:[d.jsxs("span",{className:"font-semibold text-lg sm:text-xl",children:["รายการที่ ",C+1,":"]}),d.jsx("span",{className:"text-md sm:text-lg ml-2",children:c.name}),d.jsx("br",{}),d.jsxs("span",{className:"text-sm sm:text-md text-gray-600",children:["จำนวน ",A," รายการ"]})]}),c.point?d.jsxs("div",{className:"mt-2 text-md sm:text-lg text-gray-700",children:[d.jsx("p",{children:"ใช้แต้มไป"}),d.jsxs("p",{children:[" ",m," แต้ม"]})]}):d.jsx("span",{className:"text-md sm:text-lg text-gray-500",children:"ไม่มีแต้มสำหรับสินค้านี้"})]},c.id)}return null})}):d.jsx("p",{className:"text-center text-gray-500",children:"ไม่มีสินค้าในตะกร้า"}),d.jsxs("div",{className:"border-t-2 border-gray-300 mt-4 pt-4",children:[d.jsxs("p",{className:"text-center text-sm font-light",children:["จำนวนทั้งหมด: ",a," รายการ"]}),d.jsxs("p",{className:"text-center text-lg font-semibold",children:["แต้มรวมทั้งหมด: ",I," แต้ม"]}),d.jsx("br",{}),d.jsx("p",{className:"text-center text-sm sm:text-lg text-gray-500 mt-2",children:"ขอบคุณที่ใช้บริการ"})]}),d.jsx("p",{className:"text-center pt-10 text-xl",children:"สร้าง QR Code"}),d.jsx("div",{className:"mt-10 flex justify-center",children:d.jsx("div",{className:`slider-container ${i?"on":""}`,onClick:r,children:d.jsx("div",{className:"slider",children:d.jsx("div",{className:"slider-button"})})})}),i&&d.jsx("div",{className:"mt-10 flex justify-center",children:d.jsx($w,{value:"https://google.com"})})]})})]})};function QS(){const[e,t]=B.useState([]),[n,o]=B.useState(!0),[i,s]=B.useState(null),r="https://cookbstaging.careervio.com",I=localStorage.getItem("accessToken")||"XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",a=JSON.parse(localStorage.getItem("user")||"{}"),c=a.id,C=a.pictureUrl,A=mo();return B.useEffect(()=>{(async()=>{try{o(!0);const p=await yu(I,c);console.log("Fetched shop data:",p),p&&typeof p=="object"?t([p]):(A("/ProfileStore"),t([]))}catch(p){s(p.message)}finally{o(!1)}})()},[I,c]),console.log(C),n?d.jsx("p",{children:"Loading..."}):i?d.jsxs("p",{children:["Error: ",i]}):d.jsxs(d.Fragment,{children:[d.jsx(hi,{}),d.jsx("div",{className:"mx-auto px-2",children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 mt-5",children:e.map(m=>{const p=m.shop||{};return d.jsx(vf,{to:"/partner/add-product",className:"btn-link",children:d.jsxs("div",{className:"shop-2",children:[d.jsx("span",{className:"circle block w-full h-100 md:h-100 lg:h-100 rounded-lg",style:{backgroundImage:m.backgroundImage?`url(${r}${m.backgroundImage})`:"url(https://cdn.britannica.com/70/234870-050-D4D024BB/Orange-colored-cat-yawns-displaying-teeth.jpg)",backgroundSize:"cover",backgroundPosition:"center",aspectRatio:"1 / 1"}}),d.jsx("span",{className:"pl-2 text-center block",children:p.name||""})]})},m.id)})})})]})}var U0={},u8=nr;Object.defineProperty(U0,"__esModule",{value:!0});var MI=U0.default=void 0,A8=u8(mc()),m8=d;MI=U0.default=(0,A8.default)((0,m8.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function h8(e,t,n){return(t=r3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p8(e){if(Array.isArray(e))return e}function b8(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o,i,s,r,I=[],a=!0,c=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(a=(o=s.call(n)).done)&&(I.push(o.value),I.length!==t);a=!0);}catch(C){c=!0,i=C}finally{try{if(!a&&n.return!=null&&(r=n.return(),Object(r)!==r))return}finally{if(c)throw i}}return I}}function PS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function f8(e,t){if(e){if(typeof e=="string")return PS(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?PS(e,t):void 0}}function Z8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y8(e,t){return p8(e)||b8(e,t)||f8(e,t)||Z8()}function G8(e,t){if(e==null)return{};var n,o,i=de(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var HX={exports:{}},bt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fn=typeof Symbol=="function"&&Symbol.for,D0=fn?Symbol.for("react.element"):60103,Q0=fn?Symbol.for("react.portal"):60106,JA=fn?Symbol.for("react.fragment"):60107,YA=fn?Symbol.for("react.strict_mode"):60108,HA=fn?Symbol.for("react.profiler"):60114,xA=fn?Symbol.for("react.provider"):60109,NA=fn?Symbol.for("react.context"):60110,P0=fn?Symbol.for("react.async_mode"):60111,FA=fn?Symbol.for("react.concurrent_mode"):60111,KA=fn?Symbol.for("react.forward_ref"):60112,EA=fn?Symbol.for("react.suspense"):60113,B8=fn?Symbol.for("react.suspense_list"):60120,MA=fn?Symbol.for("react.memo"):60115,LA=fn?Symbol.for("react.lazy"):60116,S8=fn?Symbol.for("react.block"):60121,v8=fn?Symbol.for("react.fundamental"):60117,W8=fn?Symbol.for("react.responder"):60118,V8=fn?Symbol.for("react.scope"):60119;function Ho(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case D0:switch(e=e.type,e){case P0:case FA:case JA:case HA:case YA:case EA:return e;default:switch(e=e&&e.$$typeof,e){case NA:case KA:case LA:case MA:case xA:return e;default:return t}}case Q0:return t}}}function xX(e){return Ho(e)===FA}bt.AsyncMode=P0;bt.ConcurrentMode=FA;bt.ContextConsumer=NA;bt.ContextProvider=xA;bt.Element=D0;bt.ForwardRef=KA;bt.Fragment=JA;bt.Lazy=LA;bt.Memo=MA;bt.Portal=Q0;bt.Profiler=HA;bt.StrictMode=YA;bt.Suspense=EA;bt.isAsyncMode=function(e){return xX(e)||Ho(e)===P0};bt.isConcurrentMode=xX;bt.isContextConsumer=function(e){return Ho(e)===NA};bt.isContextProvider=function(e){return Ho(e)===xA};bt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===D0};bt.isForwardRef=function(e){return Ho(e)===KA};bt.isFragment=function(e){return Ho(e)===JA};bt.isLazy=function(e){return Ho(e)===LA};bt.isMemo=function(e){return Ho(e)===MA};bt.isPortal=function(e){return Ho(e)===Q0};bt.isProfiler=function(e){return Ho(e)===HA};bt.isStrictMode=function(e){return Ho(e)===YA};bt.isSuspense=function(e){return Ho(e)===EA};bt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===JA||e===FA||e===HA||e===YA||e===EA||e===B8||typeof e=="object"&&e!==null&&(e.$$typeof===LA||e.$$typeof===MA||e.$$typeof===xA||e.$$typeof===NA||e.$$typeof===KA||e.$$typeof===v8||e.$$typeof===W8||e.$$typeof===V8||e.$$typeof===S8)};bt.typeOf=Ho;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var jS=Object.getOwnPropertySymbols,R8=Object.prototype.hasOwnProperty,k8=Object.prototype.propertyIsEnumerable;function w8(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function X8(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(o.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}X8();var J8="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Y8=J8;Function.call.bind(Object.prototype.hasOwnProperty);var H8=Y8;function NX(){}function FX(){}FX.resetWarningCache=NX;var x8=function(){function e(o,i,s,r,I,a){if(a!==H8){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:FX,resetWarningCache:NX};return n.PropTypes=n,n};HX.exports=x8();var Yr=HX.exports;function N8(e,t){var n=atob(e);return n}function F8(e,t,n){var o=N8(e),i=o.indexOf(`
`,10)+1,s=o.substring(i)+"",r=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(r)}function K8(e,t,n){var o;return function(s){return o=o||F8(e),new Worker(o,s)}}var E8=K8("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg=="),M8=["constraints","onError","onLoad","onScan","resolution","qrArea"];function _S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,o)}return n}function OS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_S(Object(n),!0).forEach(function(o){h8(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_S(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var L8=function(){return new E8},qS=function(t){t&&(t.getVideoTracks&&t.getAudioTracks?(t.getVideoTracks().forEach(function(n){t.removeTrack(n),n.stop()}),t.getAudioTracks().forEach(function(n){t.removeTrack(n),n.stop()})):t.stop())},j0=function(t){var n=t.constraints,o=t.onError,i=t.onLoad,s=t.onScan,r=t.resolution,I=t.qrArea,a=G8(t,M8),c=B.useRef(null),C=B.useRef(null),A=B.useRef(document.createElement("canvas")),m=B.useRef(null),p=B.useRef(),b=B.useState(null),Z=y8(b,2),v=Z[0],f=Z[1],G=B.useRef(!1),y=B.useRef();B.useEffect(function(){y.current=L8();var R=y.current;return R.onmessage=function(k){s&&s(k.data?OS(OS({},k.data),{},{canvas:A.current}):null),G.current=!1},function(){R.terminate()}},[s]);var W=JSON.stringify(I),V=B.useCallback(function(){var R=JSON.parse(W),k=y.current,F=C.current&&C.current.readyState===C.current.HAVE_ENOUGH_DATA;if(!G.current&&F){G.current=!0;var x=C.current.videoWidth,M=C.current.videoHeight,Q=x>M?x:M,q=Math.floor(r/Q*100)/100;M=Math.floor(q*M),x=Math.floor(q*x),A.current.width=x,A.current.height=M,m.current=A.current.getContext("2d"),m.current.drawImage(C.current,0,0,x,M);var j;R&&R.length===2&&R[0]>0&&R[1]>0?j=m.current.getImageData(Math.floor((x-R[0])/2),Math.floor((M-R[1])/2),R[0],R[1]):j=m.current.getImageData(0,0,x,M),k.postMessage(j)}p.current=requestAnimationFrame(V)},[r,W]),X=JSON.stringify(n);return B.useEffect(function(){var R=JSON.parse(X),k=!0;return navigator.mediaDevices.getUserMedia(R).then(function(F){if(!k)qS(F);else{c.current=F;try{C.current&&(C.current.srcObject=F,C.current.setAttribute("playsinline",!0))}catch{f(window.URL.createObjectURL(F))}i&&i(),p.current=requestAnimationFrame(V)}}).catch(function(F){return k?o(F):null}),function(){cancelAnimationFrame(p.current),k=!1,qS(c.current),v&&window.URL.revokeObjectURL(v)}},[V,X,o,i,v]),B.createElement("video",J({autoPlay:!0,playsInline:!0,src:v,ref:C},a))};j0.propTypes={constraints:Yr.object,onError:Yr.func.isRequired,onLoad:Yr.func,onScan:Yr.func.isRequired,resolution:Yr.number,qrArea:Yr.array};j0.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]};function $S(){const e=mg({typography:{fontFamily:"Sarabun"}}),t=mo(),[n,o]=B.useState("No result"),[i,s]=B.useState(!1),r=C=>{if(C){s(!1),console.log("QR Code data:",C);try{let A=C.text;typeof A=="string"?(A=A.replace(/\\"/g,'"').replace(/^"|"$/g,"").replace(/\\+/g,""),console.log("Formatted Data after cleaning:",A),t("/partner/ShopHomeDetailResive",{state:{rawData:A}})):o("QR Code ไม่ใช่ JSON format")}catch(A){console.error("Error parsing QR code data:",A),o("ไม่สามารถอ่านข้อมูล QR Code ได้")}}},I=C=>{console.error(C)},a=()=>{console.log("Card closed")},c={height:240,width:320};return d.jsx(or,{theme:e,children:d.jsxs(d.Fragment,{children:[d.jsx(hi,{}),d.jsx(ng,{display:"flex",justifyContent:"center",alignItems:"center",sx:{padding:"5px",marginTop:"10px",marginBottom:"10px",height:"100vh"},children:d.jsxs(Yd,{sx:{width:{xs:"90%",sm:"80%",md:"70%",lg:"60%"},maxWidth:"550px",position:"relative"},children:[d.jsx(xd,{sx:{backgroundColor:"#800020",color:"white"},action:d.jsx(vl,{onClick:a,sx:{color:"white"},children:d.jsx(MI,{})})}),d.jsxs(Hd,{children:[d.jsx(j0,{delay:300,onError:I,onScan:r,style:c}),i&&d.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(128, 0, 32, 0.8)",color:"white",padding:"15px",borderRadius:"8px",textAlign:"center",zIndex:1},children:[d.jsx(io,{variant:"h6",children:"กำลัง Scan QR Code..."}),d.jsx(io,{variant:"body2",children:"กรุณาอยู่ในพื้นที่ที่มีแสงสว่าง"})]}),d.jsx("div",{className:"qr-result",style:{marginTop:"10px"},children:d.jsx(io,{variant:"body1",sx:{fontSize:"1.5rem",lineHeight:1.5},children:n})})]})]})})]})})}function z8(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...o)=>e(...o);return new Proxy(n,{get:(o,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}function LI(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const gb=e=>Array.isArray(e);function KX(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let o=0;o<n;o++)if(t[o]!==e[o])return!1;return!0}function zI(e){return typeof e=="string"||Array.isArray(e)}function ev(e){const t=[{},{}];return e==null||e.values.forEach((n,o)=>{t[0][o]=n.get(),t[1][o]=n.getVelocity()}),t}function _0(e,t,n,o){if(typeof t=="function"){const[i,s]=ev(o);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=ev(o);t=t(n!==void 0?n:e.custom,i,s)}return t}function zA(e,t,n){const o=e.getProps();return _0(o,t,n!==void 0?n:o.custom,e)}const O0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],q0=["initial",...O0],bc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],gs=new Set(bc),ig=e=>e*1e3,gg=e=>e/1e3,T8={type:"spring",stiffness:500,damping:25,restSpeed:10},U8=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),D8={type:"keyframes",duration:.8},Q8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},P8=(e,{keyframes:t})=>t.length>2?D8:gs.has(e)?e.startsWith("scale")?U8(t[1]):T8:Q8;function $0(e,t){return e?e[t]||e.default||e:void 0}const j8={skipAnimations:!1,useManualTiming:!1},_8=e=>e!==null;function TA(e,{repeat:t,repeatType:n="loop"},o){const i=e.filter(_8),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return!s||o===void 0?i[s]:o}const Nn=e=>e;function O8(e){let t=new Set,n=new Set,o=!1,i=!1;const s=new WeakSet;let r={delta:0,timestamp:0,isProcessing:!1};function I(c){s.has(c)&&(a.schedule(c),e()),c(r)}const a={schedule:(c,C=!1,A=!1)=>{const p=A&&o?t:n;return C&&s.add(c),p.has(c)||p.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(r=c,o){i=!0;return}o=!0,[t,n]=[n,t],n.clear(),t.forEach(I),o=!1,i&&(i=!1,a.process(c))}};return a}const uC=["read","resolveKeyframes","update","preRender","render","postRender"],q8=40;function EX(e,t){let n=!1,o=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,r=uC.reduce((f,G)=>(f[G]=O8(s),f),{}),{read:I,resolveKeyframes:a,update:c,preRender:C,render:A,postRender:m}=r,p=()=>{const f=performance.now();n=!1,i.delta=o?1e3/60:Math.max(Math.min(f-i.timestamp,q8),1),i.timestamp=f,i.isProcessing=!0,I.process(i),a.process(i),c.process(i),C.process(i),A.process(i),m.process(i),i.isProcessing=!1,n&&t&&(o=!1,e(p))},b=()=>{n=!0,o=!0,i.isProcessing||e(p)};return{schedule:uC.reduce((f,G)=>{const y=r[G];return f[G]=(W,V=!1,X=!1)=>(n||b(),y.schedule(W,V,X)),f},{}),cancel:f=>{for(let G=0;G<uC.length;G++)r[uC[G]].cancel(f)},state:i,steps:r}}const{schedule:pt,cancel:Pg,state:Bn,steps:ph}=EX(typeof requestAnimationFrame<"u"?requestAnimationFrame:Nn,!0),MX=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,$8=1e-7,e7=12;function t7(e,t,n,o,i){let s,r,I=0;do r=t+(n-t)/2,s=MX(r,o,i)-e,s>0?n=r:t=r;while(Math.abs(s)>$8&&++I<e7);return r}function fc(e,t,n,o){if(e===t&&n===o)return Nn;const i=s=>t7(s,0,1,e,n);return s=>s===0||s===1?s:MX(i(s),t,o)}const LX=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,zX=e=>t=>1-e(1-t),TX=fc(.33,1.53,.69,.99),eZ=zX(TX),UX=LX(eZ),DX=e=>(e*=2)<1?.5*eZ(e):.5*(2-Math.pow(2,-10*(e-1))),tZ=e=>1-Math.sin(Math.acos(e)),QX=zX(tZ),PX=LX(tZ),jX=e=>/^0[^.\s]+$/u.test(e);function n7(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||jX(e):!0}let sb=Nn;const _X=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),OX=e=>t=>typeof t=="string"&&t.startsWith(e),qX=OX("--"),o7=OX("var(--"),nZ=e=>o7(e)?i7.test(e.split("/*")[0].trim()):!1,i7=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,g7=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function s7(e){const t=g7.exec(e);if(!t)return[,];const[,n,o,i]=t;return[`--${n??o}`,i]}function $X(e,t,n=1){const[o,i]=s7(e);if(!o)return;const s=window.getComputedStyle(t).getPropertyValue(o);if(s){const r=s.trim();return _X(r)?parseFloat(r):r}return nZ(i)?$X(i,t,n+1):i}const jg=(e,t,n)=>n>t?t:n<e?e:n,na={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},TI={...na,transform:e=>jg(0,1,e)},AC={...na,default:1},Zc=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),vg=Zc("deg"),Hi=Zc("%"),ve=Zc("px"),r7=Zc("vh"),l7=Zc("vw"),tv={...Hi,parse:e=>Hi.parse(e)/100,transform:e=>Hi.transform(e*100)},a7=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),nv=e=>e===na||e===ve,ov=(e,t)=>parseFloat(e.split(", ")[t]),iv=(e,t)=>(n,{transform:o})=>{if(o==="none"||!o)return 0;const i=o.match(/^matrix3d\((.+)\)$/u);if(i)return ov(i[1],t);{const s=o.match(/^matrix\((.+)\)$/u);return s?ov(s[1],e):0}},I7=new Set(["x","y","z"]),c7=bc.filter(e=>!I7.has(e));function C7(e){const t=[];return c7.forEach(n=>{const o=e.getValue(n);o!==void 0&&(t.push([n,o.get()]),o.set(n.startsWith("scale")?1:0))}),t}const Nl={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:iv(4,13),y:iv(5,14)};Nl.translateX=Nl.x;Nl.translateY=Nl.y;const eJ=e=>t=>t.test(e),d7={test:e=>e==="auto",parse:e=>e},tJ=[na,ve,Hi,vg,l7,r7,d7],gv=e=>tJ.find(eJ(e)),Ls=new Set;let rb=!1,lb=!1;function nJ(){if(lb){const e=Array.from(Ls).filter(o=>o.needsMeasurement),t=new Set(e.map(o=>o.element)),n=new Map;t.forEach(o=>{const i=C7(o);i.length&&(n.set(o,i),o.render())}),e.forEach(o=>o.measureInitialState()),t.forEach(o=>{o.render();const i=n.get(o);i&&i.forEach(([s,r])=>{var I;(I=o.getValue(s))===null||I===void 0||I.set(r)})}),e.forEach(o=>o.measureEndState()),e.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}lb=!1,rb=!1,Ls.forEach(e=>e.complete()),Ls.clear()}function oJ(){Ls.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(lb=!0)})}function u7(){oJ(),nJ()}class oZ{constructor(t,n,o,i,s,r=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=o,this.motionValue=i,this.element=s,this.isAsync=r}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ls.add(this),rb||(rb=!0,pt.read(oJ),pt.resolveKeyframes(nJ))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:o,motionValue:i}=this;for(let s=0;s<t.length;s++)if(t[s]===null)if(s===0){const r=i==null?void 0:i.get(),I=t[t.length-1];if(r!==void 0)t[0]=r;else if(o&&n){const a=o.readValue(n,I);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=I),i&&r===void 0&&i.set(t[0])}else t[s]=t[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ls.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ls.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const rI=e=>Math.round(e*1e5)/1e5,iZ=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function A7(e){return e==null}const m7=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,gZ=(e,t)=>n=>!!(typeof n=="string"&&m7.test(n)&&n.startsWith(e)||t&&!A7(n)&&Object.prototype.hasOwnProperty.call(n,t)),iJ=(e,t,n)=>o=>{if(typeof o!="string")return o;const[i,s,r,I]=o.match(iZ);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(r),alpha:I!==void 0?parseFloat(I):1}},h7=e=>jg(0,255,e),bh={...na,transform:e=>Math.round(h7(e))},Ys={test:gZ("rgb","red"),parse:iJ("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:o=1})=>"rgba("+bh.transform(e)+", "+bh.transform(t)+", "+bh.transform(n)+", "+rI(TI.transform(o))+")"};function p7(e){let t="",n="",o="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),o=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),o=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,o+=o,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(o,16),alpha:i?parseInt(i,16)/255:1}}const ab={test:gZ("#"),parse:p7,transform:Ys.transform},qr={test:gZ("hsl","hue"),parse:iJ("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:o=1})=>"hsla("+Math.round(e)+", "+Hi.transform(rI(t))+", "+Hi.transform(rI(n))+", "+rI(TI.transform(o))+")"},Yn={test:e=>Ys.test(e)||ab.test(e)||qr.test(e),parse:e=>Ys.test(e)?Ys.parse(e):qr.test(e)?qr.parse(e):ab.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ys.transform(e):qr.transform(e)},b7=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function f7(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(iZ))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(b7))===null||n===void 0?void 0:n.length)||0)>0}const gJ="number",sJ="color",Z7="var",y7="var(",sv="${}",G7=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function UI(e){const t=e.toString(),n=[],o={color:[],number:[],var:[]},i=[];let s=0;const I=t.replace(G7,a=>(Yn.test(a)?(o.color.push(s),i.push(sJ),n.push(Yn.parse(a))):a.startsWith(y7)?(o.var.push(s),i.push(Z7),n.push(a)):(o.number.push(s),i.push(gJ),n.push(parseFloat(a))),++s,sv)).split(sv);return{values:n,split:I,indexes:o,types:i}}function rJ(e){return UI(e).values}function lJ(e){const{split:t,types:n}=UI(e),o=t.length;return i=>{let s="";for(let r=0;r<o;r++)if(s+=t[r],i[r]!==void 0){const I=n[r];I===gJ?s+=rI(i[r]):I===sJ?s+=Yn.transform(i[r]):s+=i[r]}return s}}const B7=e=>typeof e=="number"?0:e;function S7(e){const t=rJ(e);return lJ(e)(t.map(B7))}const _g={test:f7,parse:rJ,createTransformer:lJ,getAnimatableNone:S7},v7=new Set(["brightness","contrast","saturate","opacity"]);function W7(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[o]=n.match(iZ)||[];if(!o)return e;const i=n.replace(o,"");let s=v7.has(t)?1:0;return o!==n&&(s*=100),t+"("+s+i+")"}const V7=/\b([a-z-]*)\(.*?\)/gu,Ib={..._g,getAnimatableNone:e=>{const t=e.match(V7);return t?t.map(W7).join(" "):e}},R7={borderWidth:ve,borderTopWidth:ve,borderRightWidth:ve,borderBottomWidth:ve,borderLeftWidth:ve,borderRadius:ve,radius:ve,borderTopLeftRadius:ve,borderTopRightRadius:ve,borderBottomRightRadius:ve,borderBottomLeftRadius:ve,width:ve,maxWidth:ve,height:ve,maxHeight:ve,top:ve,right:ve,bottom:ve,left:ve,padding:ve,paddingTop:ve,paddingRight:ve,paddingBottom:ve,paddingLeft:ve,margin:ve,marginTop:ve,marginRight:ve,marginBottom:ve,marginLeft:ve,backgroundPositionX:ve,backgroundPositionY:ve},k7={rotate:vg,rotateX:vg,rotateY:vg,rotateZ:vg,scale:AC,scaleX:AC,scaleY:AC,scaleZ:AC,skew:vg,skewX:vg,skewY:vg,distance:ve,translateX:ve,translateY:ve,translateZ:ve,x:ve,y:ve,z:ve,perspective:ve,transformPerspective:ve,opacity:TI,originX:tv,originY:tv,originZ:ve},rv={...na,transform:Math.round},sZ={...R7,...k7,zIndex:rv,size:ve,fillOpacity:TI,strokeOpacity:TI,numOctaves:rv},w7={...sZ,color:Yn,backgroundColor:Yn,outlineColor:Yn,fill:Yn,stroke:Yn,borderColor:Yn,borderTopColor:Yn,borderRightColor:Yn,borderBottomColor:Yn,borderLeftColor:Yn,filter:Ib,WebkitFilter:Ib},rZ=e=>w7[e];function aJ(e,t){let n=rZ(e);return n!==Ib&&(n=_g),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const X7=new Set(["auto","none","0"]);function J7(e,t,n){let o=0,i;for(;o<e.length&&!i;){const s=e[o];typeof s=="string"&&!X7.has(s)&&UI(s).values.length&&(i=e[o]),o++}if(i&&n)for(const s of t)e[s]=aJ(n,i)}class IJ extends oZ{constructor(t,n,o,i,s){super(t,n,o,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:o}=this;if(!n||!n.current)return;super.readKeyframes();for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="string"&&(c=c.trim(),nZ(c))){const C=$X(c,n.current);C!==void 0&&(t[a]=C),a===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!a7.has(o)||t.length!==2)return;const[i,s]=t,r=gv(i),I=gv(s);if(r!==I)if(nv(r)&&nv(I))for(let a=0;a<t.length;a++){const c=t[a];typeof c=="string"&&(t[a]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,o=[];for(let i=0;i<t.length;i++)n7(t[i])&&o.push(i);o.length&&J7(t,o,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:o}=this;if(!t||!t.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Nl[o](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(o,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:o,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(o);s&&s.jump(this.measuredOrigin,!1);const r=i.length-1,I=i[r];i[r]=Nl[o](n.measureViewportBox(),window.getComputedStyle(n.current)),I!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=I),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([a,c])=>{n.getValue(a).set(c)}),this.resolveNoneKeyframes()}}function lZ(e){return typeof e=="function"}let UC;function Y7(){UC=void 0}const xi={now:()=>(UC===void 0&&xi.set(Bn.isProcessing||j8.useManualTiming?Bn.timestamp:performance.now()),UC),set:e=>{UC=e,queueMicrotask(Y7)}},lv=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(_g.test(e)||e==="0")&&!e.startsWith("url("));function H7(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function x7(e,t,n,o){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],r=lv(i,t),I=lv(s,t);return!r||!I?!1:H7(e)||(n==="spring"||lZ(n))&&o}const N7=40;class cJ{constructor({autoplay:t=!0,delay:n=0,type:o="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:r="loop",...I}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=xi.now(),this.options={autoplay:t,delay:n,type:o,repeat:i,repeatDelay:s,repeatType:r,...I},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>N7?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&u7(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=xi.now(),this.hasAttemptedResolve=!0;const{name:o,type:i,velocity:s,delay:r,onComplete:I,onUpdate:a,isGenerator:c}=this.options;if(!c&&!x7(t,o,i,s))if(r)this.options.duration=0;else{a==null||a(TA(t,this.options,n)),I==null||I(),this.resolveFinishedPromise();return}const C=this.initPlayback(t,n);C!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...C},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}function CJ(e,t){return t?e*(1e3/t):0}const F7=5;function dJ(e,t,n){const o=Math.max(t-F7,0);return CJ(n-e(o),t-o)}const fh=.001,K7=.01,E7=10,M7=.05,L7=1;function z7({duration:e=800,bounce:t=.25,velocity:n=0,mass:o=1}){let i,s,r=1-t;r=jg(M7,L7,r),e=jg(K7,E7,gg(e)),r<1?(i=c=>{const C=c*r,A=C*e,m=C-n,p=cb(c,r),b=Math.exp(-A);return fh-m/p*b},s=c=>{const A=c*r*e,m=A*n+n,p=Math.pow(r,2)*Math.pow(c,2)*e,b=Math.exp(-A),Z=cb(Math.pow(c,2),r);return(-i(c)+fh>0?-1:1)*((m-p)*b)/Z}):(i=c=>{const C=Math.exp(-c*e),A=(c-n)*e+1;return-fh+C*A},s=c=>{const C=Math.exp(-c*e),A=(n-c)*(e*e);return C*A});const I=5/e,a=U7(i,s,I);if(e=ig(e),isNaN(a))return{stiffness:100,damping:10,duration:e};{const c=Math.pow(a,2)*o;return{stiffness:c,damping:r*2*Math.sqrt(o*c),duration:e}}}const T7=12;function U7(e,t,n){let o=n;for(let i=1;i<T7;i++)o=o-e(o)/t(o);return o}function cb(e,t){return e*Math.sqrt(1-t*t)}const D7=["duration","bounce"],Q7=["stiffness","damping","mass"];function av(e,t){return t.some(n=>e[n]!==void 0)}function P7(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!av(e,Q7)&&av(e,D7)){const n=z7(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function uJ({keyframes:e,restDelta:t,restSpeed:n,...o}){const i=e[0],s=e[e.length-1],r={done:!1,value:i},{stiffness:I,damping:a,mass:c,duration:C,velocity:A,isResolvedFromDuration:m}=P7({...o,velocity:-gg(o.velocity||0)}),p=A||0,b=a/(2*Math.sqrt(I*c)),Z=s-i,v=gg(Math.sqrt(I/c)),f=Math.abs(Z)<5;n||(n=f?.01:2),t||(t=f?.005:.5);let G;if(b<1){const y=cb(v,b);G=W=>{const V=Math.exp(-b*v*W);return s-V*((p+b*v*Z)/y*Math.sin(y*W)+Z*Math.cos(y*W))}}else if(b===1)G=y=>s-Math.exp(-v*y)*(Z+(p+v*Z)*y);else{const y=v*Math.sqrt(b*b-1);G=W=>{const V=Math.exp(-b*v*W),X=Math.min(y*W,300);return s-V*((p+b*v*Z)*Math.sinh(X)+y*Z*Math.cosh(X))/y}}return{calculatedDuration:m&&C||null,next:y=>{const W=G(y);if(m)r.done=y>=C;else{let V=0;b<1&&(V=y===0?ig(p):dJ(G,y,W));const X=Math.abs(V)<=n,R=Math.abs(s-W)<=t;r.done=X&&R}return r.value=r.done?s:W,r}}}function Iv({keyframes:e,velocity:t=0,power:n=.8,timeConstant:o=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:r,min:I,max:a,restDelta:c=.5,restSpeed:C}){const A=e[0],m={done:!1,value:A},p=k=>I!==void 0&&k<I||a!==void 0&&k>a,b=k=>I===void 0?a:a===void 0||Math.abs(I-k)<Math.abs(a-k)?I:a;let Z=n*t;const v=A+Z,f=r===void 0?v:r(v);f!==v&&(Z=f-A);const G=k=>-Z*Math.exp(-k/o),y=k=>f+G(k),W=k=>{const F=G(k),x=y(k);m.done=Math.abs(F)<=c,m.value=m.done?f:x};let V,X;const R=k=>{p(m.value)&&(V=k,X=uJ({keyframes:[m.value,b(m.value)],velocity:dJ(y,k,m.value),damping:i,stiffness:s,restDelta:c,restSpeed:C}))};return R(0),{calculatedDuration:null,next:k=>{let F=!1;return!X&&V===void 0&&(F=!0,W(k),R(k)),V!==void 0&&k>=V?X.next(k-V):(!F&&W(k),m)}}}const j7=fc(.42,0,1,1),_7=fc(0,0,.58,1),AJ=fc(.42,0,.58,1),O7=e=>Array.isArray(e)&&typeof e[0]!="number",aZ=e=>Array.isArray(e)&&typeof e[0]=="number",cv={linear:Nn,easeIn:j7,easeInOut:AJ,easeOut:_7,circIn:tZ,circInOut:PX,circOut:QX,backIn:eZ,backInOut:UX,backOut:TX,anticipate:DX},Cv=e=>{if(aZ(e)){sb(e.length===4);const[t,n,o,i]=e;return fc(t,n,o,i)}else if(typeof e=="string")return sb(cv[e]!==void 0),cv[e];return e},q7=(e,t)=>n=>t(e(n)),sg=(...e)=>e.reduce(q7),Fl=(e,t,n)=>{const o=t-e;return o===0?1:(n-e)/o},Ht=(e,t,n)=>e+(t-e)*n;function Zh(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function $7({hue:e,saturation:t,lightness:n,alpha:o}){e/=360,t/=100,n/=100;let i=0,s=0,r=0;if(!t)i=s=r=n;else{const I=n<.5?n*(1+t):n+t-n*t,a=2*n-I;i=Zh(a,I,e+1/3),s=Zh(a,I,e),r=Zh(a,I,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(r*255),alpha:o}}function _d(e,t){return n=>n>0?t:e}const yh=(e,t,n)=>{const o=e*e,i=n*(t*t-o)+o;return i<0?0:Math.sqrt(i)},eq=[ab,Ys,qr],tq=e=>eq.find(t=>t.test(e));function dv(e){const t=tq(e);if(!t)return!1;let n=t.parse(e);return t===qr&&(n=$7(n)),n}const uv=(e,t)=>{const n=dv(e),o=dv(t);if(!n||!o)return _d(e,t);const i={...n};return s=>(i.red=yh(n.red,o.red,s),i.green=yh(n.green,o.green,s),i.blue=yh(n.blue,o.blue,s),i.alpha=Ht(n.alpha,o.alpha,s),Ys.transform(i))},Cb=new Set(["none","hidden"]);function nq(e,t){return Cb.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function oq(e,t){return n=>Ht(e,t,n)}function IZ(e){return typeof e=="number"?oq:typeof e=="string"?nZ(e)?_d:Yn.test(e)?uv:sq:Array.isArray(e)?mJ:typeof e=="object"?Yn.test(e)?uv:iq:_d}function mJ(e,t){const n=[...e],o=n.length,i=e.map((s,r)=>IZ(s)(s,t[r]));return s=>{for(let r=0;r<o;r++)n[r]=i[r](s);return n}}function iq(e,t){const n={...e,...t},o={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(o[i]=IZ(e[i])(e[i],t[i]));return i=>{for(const s in o)n[s]=o[s](i);return n}}function gq(e,t){var n;const o=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const r=t.types[s],I=e.indexes[r][i[r]],a=(n=e.values[I])!==null&&n!==void 0?n:0;o[s]=a,i[r]++}return o}const sq=(e,t)=>{const n=_g.createTransformer(t),o=UI(e),i=UI(t);return o.indexes.var.length===i.indexes.var.length&&o.indexes.color.length===i.indexes.color.length&&o.indexes.number.length>=i.indexes.number.length?Cb.has(e)&&!i.values.length||Cb.has(t)&&!o.values.length?nq(e,t):sg(mJ(gq(o,i),i.values),n):_d(e,t)};function hJ(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Ht(e,t,n):IZ(e)(e,t)}function rq(e,t,n){const o=[],i=n||hJ,s=e.length-1;for(let r=0;r<s;r++){let I=i(e[r],e[r+1]);if(t){const a=Array.isArray(t)?t[r]||Nn:t;I=sg(a,I)}o.push(I)}return o}function lq(e,t,{clamp:n=!0,ease:o,mixer:i}={}){const s=e.length;if(sb(s===t.length),s===1)return()=>t[0];if(s===2&&e[0]===e[1])return()=>t[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const r=rq(t,o,i),I=r.length,a=c=>{let C=0;if(I>1)for(;C<e.length-2&&!(c<e[C+1]);C++);const A=Fl(e[C],e[C+1],c);return r[C](A)};return n?c=>a(jg(e[0],e[s-1],c)):a}function aq(e,t){const n=e[e.length-1];for(let o=1;o<=t;o++){const i=Fl(0,t,o);e.push(Ht(n,1,i))}}function Iq(e){const t=[0];return aq(t,e.length-1),t}function cq(e,t){return e.map(n=>n*t)}function Cq(e,t){return e.map(()=>t||AJ).splice(0,e.length-1)}function Od({duration:e=300,keyframes:t,times:n,ease:o="easeInOut"}){const i=O7(o)?o.map(Cv):Cv(o),s={done:!1,value:t[0]},r=cq(n&&n.length===t.length?n:Iq(t),e),I=lq(r,t,{ease:Array.isArray(i)?i:Cq(t,i)});return{calculatedDuration:e,next:a=>(s.value=I(a),s.done=a>=e,s)}}const Av=2e4;function dq(e){let t=0;const n=50;let o=e.next(t);for(;!o.done&&t<Av;)t+=n,o=e.next(t);return t>=Av?1/0:t}const uq=e=>{const t=({timestamp:n})=>e(n);return{start:()=>pt.update(t,!0),stop:()=>Pg(t),now:()=>Bn.isProcessing?Bn.timestamp:xi.now()}},Aq={decay:Iv,inertia:Iv,tween:Od,keyframes:Od,spring:uJ},mq=e=>e/100;class cZ extends cJ{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:a}=this.options;a&&a()};const{name:n,motionValue:o,element:i,keyframes:s}=this.options,r=(i==null?void 0:i.KeyframeResolver)||oZ,I=(a,c)=>this.onKeyframesResolved(a,c);this.resolver=new r(s,I,n,o,i),this.resolver.scheduleResolve()}initPlayback(t){const{type:n="keyframes",repeat:o=0,repeatDelay:i=0,repeatType:s,velocity:r=0}=this.options,I=lZ(n)?n:Aq[n]||Od;let a,c;I!==Od&&typeof t[0]!="number"&&(a=sg(mq,hJ(t[0],t[1])),t=[0,100]);const C=I({...this.options,keyframes:t});s==="mirror"&&(c=I({...this.options,keyframes:[...t].reverse(),velocity:-r})),C.calculatedDuration===null&&(C.calculatedDuration=dq(C));const{calculatedDuration:A}=C,m=A+i,p=m*(o+1)-i;return{generator:C,mirroredGenerator:c,mapPercentToKeyframes:a,calculatedDuration:A,resolvedDuration:m,totalDuration:p}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:o}=this;if(!o){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:r,mapPercentToKeyframes:I,keyframes:a,calculatedDuration:c,totalDuration:C,resolvedDuration:A}=o;if(this.startTime===null)return s.next(0);const{delay:m,repeat:p,repeatType:b,repeatDelay:Z,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-C/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const f=this.currentTime-m*(this.speed>=0?1:-1),G=this.speed>=0?f<0:f>C;this.currentTime=Math.max(f,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=C);let y=this.currentTime,W=s;if(p){const k=Math.min(this.currentTime,C)/A;let F=Math.floor(k),x=k%1;!x&&k>=1&&(x=1),x===1&&F--,F=Math.min(F,p+1),!!(F%2)&&(b==="reverse"?(x=1-x,Z&&(x-=Z/A)):b==="mirror"&&(W=r)),y=jg(0,1,x)*A}const V=G?{done:!1,value:a[0]}:W.next(y);I&&(V.value=I(V.value));let{done:X}=V;!G&&c!==null&&(X=this.speed>=0?this.currentTime>=C:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&X);return R&&i!==void 0&&(V.value=TA(a,this.options,i)),v&&v(V.value),R&&this.finish(),V}get duration(){const{resolved:t}=this;return t?gg(t.calculatedDuration):0}get time(){return gg(this.currentTime)}set time(t){t=ig(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=gg(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=uq,onPlay:n,startTime:o}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=o??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const pJ=new Set(["opacity","clipPath","filter","transform"]),hq=10,pq=(e,t)=>{let n="";const o=Math.max(Math.round(t/hq),2);for(let i=0;i<o;i++)n+=e(Fl(0,o-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function CZ(e){let t;return()=>(t===void 0&&(t=e()),t)}const bq={linearEasing:void 0};function fq(e,t){const n=CZ(e);return()=>{var o;return(o=bq[t])!==null&&o!==void 0?o:n()}}const qd=fq(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function bJ(e){return!!(typeof e=="function"&&qd()||!e||typeof e=="string"&&(e in db||qd())||aZ(e)||Array.isArray(e)&&e.every(bJ))}const Da=([e,t,n,o])=>`cubic-bezier(${e}, ${t}, ${n}, ${o})`,db={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Da([0,.65,.55,1]),circOut:Da([.55,0,1,.45]),backIn:Da([.31,.01,.66,-.59]),backOut:Da([.33,1.53,.69,.99])};function fJ(e,t){if(e)return typeof e=="function"&&qd()?pq(e,t):aZ(e)?Da(e):Array.isArray(e)?e.map(n=>fJ(n,t)||db.easeOut):db[e]}function Zq(e,t,n,{delay:o=0,duration:i=300,repeat:s=0,repeatType:r="loop",ease:I,times:a}={}){const c={[t]:n};a&&(c.offset=a);const C=fJ(I,i);return Array.isArray(C)&&(c.easing=C),e.animate(c,{delay:o,duration:i,easing:Array.isArray(C)?"linear":C,fill:"both",iterations:s+1,direction:r==="reverse"?"alternate":"normal"})}function mv(e,t){e.timeline=t,e.onfinish=null}const yq=CZ(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),$d=10,Gq=2e4;function Bq(e){return lZ(e.type)||e.type==="spring"||!bJ(e.ease)}function Sq(e,t){const n=new cZ({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let o={done:!1,value:e[0]};const i=[];let s=0;for(;!o.done&&s<Gq;)o=n.sample(s),i.push(o.value),s+=$d;return{times:void 0,keyframes:i,duration:s-$d,ease:"linear"}}const ZJ={anticipate:DX,backInOut:UX,circInOut:PX};function vq(e){return e in ZJ}class hv extends cJ{constructor(t){super(t);const{name:n,motionValue:o,element:i,keyframes:s}=this.options;this.resolver=new IJ(s,(r,I)=>this.onKeyframesResolved(r,I),n,o,i),this.resolver.scheduleResolve()}initPlayback(t,n){var o;let{duration:i=300,times:s,ease:r,type:I,motionValue:a,name:c,startTime:C}=this.options;if(!(!((o=a.owner)===null||o===void 0)&&o.current))return!1;if(typeof r=="string"&&qd()&&vq(r)&&(r=ZJ[r]),Bq(this.options)){const{onComplete:m,onUpdate:p,motionValue:b,element:Z,...v}=this.options,f=Sq(t,v);t=f.keyframes,t.length===1&&(t[1]=t[0]),i=f.duration,s=f.times,r=f.ease,I="keyframes"}const A=Zq(a.owner.current,c,t,{...this.options,duration:i,times:s,ease:r});return A.startTime=C??this.calcStartTime(),this.pendingTimeline?(mv(A,this.pendingTimeline),this.pendingTimeline=void 0):A.onfinish=()=>{const{onComplete:m}=this.options;a.set(TA(t,this.options,n)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:A,duration:i,times:s,type:I,ease:r,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return gg(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return gg(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:o}=n;o.currentTime=ig(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:o}=n;o.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Nn;const{animation:o}=n;mv(o,t)}return Nn}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:o,duration:i,type:s,ease:r,times:I}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:C,onComplete:A,element:m,...p}=this.options,b=new cZ({...p,keyframes:o,duration:i,type:s,ease:r,times:I,isGenerator:!0}),Z=ig(this.time);c.setWithVelocity(b.sample(Z-$d).value,b.sample(Z).value,$d)}const{onStop:a}=this.options;a&&a(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:o,repeatDelay:i,repeatType:s,damping:r,type:I}=t;return yq()&&o&&pJ.has(o)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&s!=="mirror"&&r!==0&&I!=="inertia"}}const Wq=CZ(()=>window.ScrollTimeline!==void 0);class Vq{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let o=0;o<this.animations.length;o++)this.animations[o][t]=n}attachTimeline(t,n){const o=this.animations.map(i=>Wq()&&i.attachTimeline?i.attachTimeline(t):n(i));return()=>{o.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function Rq({when:e,delay:t,delayChildren:n,staggerChildren:o,staggerDirection:i,repeat:s,repeatType:r,repeatDelay:I,from:a,elapsed:c,...C}){return!!Object.keys(C).length}const dZ=(e,t,n,o={},i,s)=>r=>{const I=$0(o,e)||{},a=I.delay||o.delay||0;let{elapsed:c=0}=o;c=c-ig(a);let C={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...I,delay:-c,onUpdate:m=>{t.set(m),I.onUpdate&&I.onUpdate(m)},onComplete:()=>{r(),I.onComplete&&I.onComplete()},name:e,motionValue:t,element:s?void 0:i};Rq(I)||(C={...C,...P8(e,C)}),C.duration&&(C.duration=ig(C.duration)),C.repeatDelay&&(C.repeatDelay=ig(C.repeatDelay)),C.from!==void 0&&(C.keyframes[0]=C.from);let A=!1;if((C.type===!1||C.duration===0&&!C.repeatDelay)&&(C.duration=0,C.delay===0&&(A=!0)),A&&!s&&t.get()!==void 0){const m=TA(C.keyframes,I);if(m!==void 0)return pt.update(()=>{C.onUpdate(m),C.onComplete()}),new Vq([])}return!s&&hv.supports(C)?new hv(C):new cZ(C)},kq=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),wq=e=>gb(e)?e[e.length-1]||0:e;function uZ(e,t){e.indexOf(t)===-1&&e.push(t)}function AZ(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class mZ{constructor(){this.subscriptions=[]}add(t){return uZ(this.subscriptions,t),()=>AZ(this.subscriptions,t)}notify(t,n,o){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,o);else for(let s=0;s<i;s++){const r=this.subscriptions[s];r&&r(t,n,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pv=30,Xq=e=>!isNaN(parseFloat(e));class Jq{constructor(t,n={}){this.version="11.11.9",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(o,i=!0)=>{const s=xi.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=xi.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Xq(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new mZ);const o=this.events[t].add(n);return t==="change"?()=>{o(),pt.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,o){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-o}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=xi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>pv)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,pv);return CJ(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function DI(e,t){return new Jq(e,t)}function Yq(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,DI(n))}function Hq(e,t){const n=zA(e,t);let{transitionEnd:o={},transition:i={},...s}=n||{};s={...s,...o};for(const r in s){const I=wq(s[r]);Yq(e,r,I)}}const UA=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xq="framerAppearId",yJ="data-"+UA(xq);function GJ(e){return e.props[yJ]}const xn=e=>!!(e&&e.getVelocity);function Nq(e){return!!(xn(e)&&e.add)}function ub(e,t){if(!e.applyWillChange)return;const n=e.getValue("willChange");if(Nq(n))return n.add(t)}function Fq({protectedKeys:e,needsAnimating:t},n){const o=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,o}function BJ(e,t,{delay:n=0,transitionOverride:o,type:i}={}){var s;let{transition:r=e.getDefaultTransition(),transitionEnd:I,...a}=t;o&&(r=o);const c=[],C=i&&e.animationState&&e.animationState.getState()[i];for(const A in a){const m=e.getValue(A,(s=e.latestValues[A])!==null&&s!==void 0?s:null),p=a[A];if(p===void 0||C&&Fq(C,A))continue;const b={delay:n,...$0(r||{},A)};let Z=!1;if(window.MotionHandoffAnimation){const f=GJ(e);if(f){const G=window.MotionHandoffAnimation(f,A,pt);G!==null&&(b.startTime=G,Z=!0)}}ub(e,A),m.start(dZ(A,m,p,e.shouldReduceMotion&&gs.has(A)?{type:!1}:b,e,Z));const v=m.animation;v&&c.push(v)}return I&&Promise.all(c).then(()=>{pt.update(()=>{I&&Hq(e,I)})}),c}function Ab(e,t,n={}){var o;const i=zA(e,t,n.type==="exit"?(o=e.presenceContext)===null||o===void 0?void 0:o.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const r=i?()=>Promise.all(BJ(e,i,n)):()=>Promise.resolve(),I=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:C=0,staggerChildren:A,staggerDirection:m}=s;return Kq(e,t,C+c,A,m,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,C]=a==="beforeChildren"?[r,I]:[I,r];return c().then(()=>C())}else return Promise.all([r(),I(n.delay)])}function Kq(e,t,n=0,o=0,i=1,s){const r=[],I=(e.variantChildren.size-1)*o,a=i===1?(c=0)=>c*o:(c=0)=>I-c*o;return Array.from(e.variantChildren).sort(Eq).forEach((c,C)=>{c.notify("AnimationStart",t),r.push(Ab(c,t,{...s,delay:n+a(C)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(r)}function Eq(e,t){return e.sortNodePosition(t)}function Mq(e,t,n={}){e.notify("AnimationStart",t);let o;if(Array.isArray(t)){const i=t.map(s=>Ab(e,s,n));o=Promise.all(i)}else if(typeof t=="string")o=Ab(e,t,n);else{const i=typeof t=="function"?zA(e,t,n.custom):t;o=Promise.all(BJ(e,i,n))}return o.then(()=>{e.notify("AnimationComplete",t)})}const Lq=q0.length;function SJ(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?SJ(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<Lq;n++){const o=q0[n],i=e.props[o];(zI(i)||i===!1)&&(t[o]=i)}return t}const zq=[...O0].reverse(),Tq=O0.length;function Uq(e){return t=>Promise.all(t.map(({animation:n,options:o})=>Mq(e,n,o)))}function Dq(e){let t=Uq(e),n=bv(),o=!0;const i=a=>(c,C)=>{var A;const m=zA(e,C,a==="exit"?(A=e.presenceContext)===null||A===void 0?void 0:A.custom:void 0);if(m){const{transition:p,transitionEnd:b,...Z}=m;c={...c,...Z,...b}}return c};function s(a){t=a(e)}function r(a){const{props:c}=e,C=SJ(e.parent)||{},A=[],m=new Set;let p={},b=1/0;for(let v=0;v<Tq;v++){const f=zq[v],G=n[f],y=c[f]!==void 0?c[f]:C[f],W=zI(y),V=f===a?G.isActive:null;V===!1&&(b=v);let X=y===C[f]&&y!==c[f]&&W;if(X&&o&&e.manuallyAnimateOnMount&&(X=!1),G.protectedKeys={...p},!G.isActive&&V===null||!y&&!G.prevProp||LI(y)||typeof y=="boolean")continue;const R=Qq(G.prevProp,y);let k=R||f===a&&G.isActive&&!X&&W||v>b&&W,F=!1;const x=Array.isArray(y)?y:[y];let M=x.reduce(i(f),{});V===!1&&(M={});const{prevResolvedValues:Q={}}=G,q={...Q,...M},j=te=>{k=!0,m.has(te)&&(F=!0,m.delete(te)),G.needsAnimating[te]=!0;const N=e.getValue(te);N&&(N.liveStyle=!1)};for(const te in q){const N=M[te],_=Q[te];if(p.hasOwnProperty(te))continue;let P=!1;gb(N)&&gb(_)?P=!KX(N,_):P=N!==_,P?N!=null?j(te):m.add(te):N!==void 0&&m.has(te)?j(te):G.protectedKeys[te]=!0}G.prevProp=y,G.prevResolvedValues=M,G.isActive&&(p={...p,...M}),o&&e.blockInitialAnimation&&(k=!1),k&&(!(X&&R)||F)&&A.push(...x.map(te=>({animation:te,options:{type:f}})))}if(m.size){const v={};m.forEach(f=>{const G=e.getBaseTarget(f),y=e.getValue(f);y&&(y.liveStyle=!0),v[f]=G??null}),A.push({animation:v})}let Z=!!A.length;return o&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(Z=!1),o=!1,Z?t(A):Promise.resolve()}function I(a,c){var C;if(n[a].isActive===c)return Promise.resolve();(C=e.variantChildren)===null||C===void 0||C.forEach(m=>{var p;return(p=m.animationState)===null||p===void 0?void 0:p.setActive(a,c)}),n[a].isActive=c;const A=r(a);for(const m in n)n[m].protectedKeys={};return A}return{animateChanges:r,setActive:I,setAnimateFunction:s,getState:()=>n,reset:()=>{n=bv(),o=!0}}}function Qq(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!KX(t,e):!1}function ps(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bv(){return{animate:ps(!0),whileInView:ps(),whileHover:ps(),whileTap:ps(),whileDrag:ps(),whileFocus:ps(),exit:ps()}}class ss{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Pq extends ss{constructor(t){super(t),t.animationState||(t.animationState=Dq(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();LI(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let jq=0;class _q extends ss{constructor(){super(...arguments),this.id=jq++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===o)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const Oq={animation:{Feature:Pq},exit:{Feature:_q}},vJ=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function DA(e,t="page"){return{point:{x:e[`${t}X`],y:e[`${t}Y`]}}}const qq=e=>t=>vJ(t)&&e(t,DA(t));function $i(e,t,n,o={passive:!0}){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n)}function rg(e,t,n,o){return $i(e,t,qq(n),o)}const fv=(e,t)=>Math.abs(e-t);function $q(e,t){const n=fv(e.x,t.x),o=fv(e.y,t.y);return Math.sqrt(n**2+o**2)}class WJ{constructor(t,n,{transformPagePoint:o,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=Bh(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,p=$q(A.offset,{x:0,y:0})>=3;if(!m&&!p)return;const{point:b}=A,{timestamp:Z}=Bn;this.history.push({...b,timestamp:Z});const{onStart:v,onMove:f}=this.handlers;m||(v&&v(this.lastMoveEvent,A),this.startEvent=this.lastMoveEvent),f&&f(this.lastMoveEvent,A)},this.handlePointerMove=(A,m)=>{this.lastMoveEvent=A,this.lastMoveEventInfo=Gh(m,this.transformPagePoint),pt.update(this.updatePoint,!0)},this.handlePointerUp=(A,m)=>{this.end();const{onEnd:p,onSessionEnd:b,resumeAnimation:Z}=this.handlers;if(this.dragSnapToOrigin&&Z&&Z(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Bh(A.type==="pointercancel"?this.lastMoveEventInfo:Gh(m,this.transformPagePoint),this.history);this.startEvent&&p&&p(A,v),b&&b(A,v)},!vJ(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=o,this.contextWindow=i||window;const r=DA(t),I=Gh(r,this.transformPagePoint),{point:a}=I,{timestamp:c}=Bn;this.history=[{...a,timestamp:c}];const{onSessionStart:C}=n;C&&C(t,Bh(I,this.history)),this.removeListeners=sg(rg(this.contextWindow,"pointermove",this.handlePointerMove),rg(this.contextWindow,"pointerup",this.handlePointerUp),rg(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Pg(this.updatePoint)}}function Gh(e,t){return t?{point:t(e.point)}:e}function Zv(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Bh({point:e},t){return{point:e,delta:Zv(e,VJ(t)),offset:Zv(e,e$(t)),velocity:t$(t,.1)}}function e$(e){return e[0]}function VJ(e){return e[e.length-1]}function t$(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,o=null;const i=VJ(e);for(;n>=0&&(o=e[n],!(i.timestamp-o.timestamp>ig(t)));)n--;if(!o)return{x:0,y:0};const s=gg(i.timestamp-o.timestamp);if(s===0)return{x:0,y:0};const r={x:(i.x-o.x)/s,y:(i.y-o.y)/s};return r.x===1/0&&(r.x=0),r.y===1/0&&(r.y=0),r}function RJ(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const yv=RJ("dragHorizontal"),Gv=RJ("dragVertical");function kJ(e){let t=!1;if(e==="y")t=Gv();else if(e==="x")t=yv();else{const n=yv(),o=Gv();n&&o?t=()=>{n(),o()}:(n&&n(),o&&o())}return t}function wJ(){const e=kJ(!0);return e?(e(),!1):!0}function $r(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const XJ=1e-4,n$=1-XJ,o$=1+XJ,JJ=.01,i$=0-JJ,g$=0+JJ;function Ro(e){return e.max-e.min}function s$(e,t,n){return Math.abs(e-t)<=n}function Bv(e,t,n,o=.5){e.origin=o,e.originPoint=Ht(t.min,t.max,e.origin),e.scale=Ro(n)/Ro(t),e.translate=Ht(n.min,n.max,e.origin)-e.originPoint,(e.scale>=n$&&e.scale<=o$||isNaN(e.scale))&&(e.scale=1),(e.translate>=i$&&e.translate<=g$||isNaN(e.translate))&&(e.translate=0)}function lI(e,t,n,o){Bv(e.x,t.x,n.x,o?o.originX:void 0),Bv(e.y,t.y,n.y,o?o.originY:void 0)}function Sv(e,t,n){e.min=n.min+t.min,e.max=e.min+Ro(t)}function r$(e,t,n){Sv(e.x,t.x,n.x),Sv(e.y,t.y,n.y)}function vv(e,t,n){e.min=t.min-n.min,e.max=e.min+Ro(t)}function aI(e,t,n){vv(e.x,t.x,n.x),vv(e.y,t.y,n.y)}function l$(e,{min:t,max:n},o){return t!==void 0&&e<t?e=o?Ht(t,e,o.min):Math.max(e,t):n!==void 0&&e>n&&(e=o?Ht(n,e,o.max):Math.min(e,n)),e}function Wv(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function a$(e,{top:t,left:n,bottom:o,right:i}){return{x:Wv(e.x,n,i),y:Wv(e.y,t,o)}}function Vv(e,t){let n=t.min-e.min,o=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,o]=[o,n]),{min:n,max:o}}function I$(e,t){return{x:Vv(e.x,t.x),y:Vv(e.y,t.y)}}function c$(e,t){let n=.5;const o=Ro(e),i=Ro(t);return i>o?n=Fl(t.min,t.max-o,e.min):o>i&&(n=Fl(e.min,e.max-i,t.min)),jg(0,1,n)}function C$(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const mb=.35;function d$(e=mb){return e===!1?e=0:e===!0&&(e=mb),{x:Rv(e,"left","right"),y:Rv(e,"top","bottom")}}function Rv(e,t,n){return{min:kv(e,t),max:kv(e,n)}}function kv(e,t){return typeof e=="number"?e:e[t]||0}const wv=()=>({translate:0,scale:1,origin:0,originPoint:0}),el=()=>({x:wv(),y:wv()}),Xv=()=>({min:0,max:0}),Tt=()=>({x:Xv(),y:Xv()});function Mo(e){return[e("x"),e("y")]}function YJ({top:e,left:t,right:n,bottom:o}){return{x:{min:t,max:n},y:{min:e,max:o}}}function u$({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function A$(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),o=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:o.y,right:o.x}}function Sh(e){return e===void 0||e===1}function hb({scale:e,scaleX:t,scaleY:n}){return!Sh(e)||!Sh(t)||!Sh(n)}function Gs(e){return hb(e)||HJ(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function HJ(e){return Jv(e.x)||Jv(e.y)}function Jv(e){return e&&e!=="0%"}function eu(e,t,n){const o=e-n,i=t*o;return n+i}function Yv(e,t,n,o,i){return i!==void 0&&(e=eu(e,i,o)),eu(e,n,o)+t}function pb(e,t=0,n=1,o,i){e.min=Yv(e.min,t,n,o,i),e.max=Yv(e.max,t,n,o,i)}function xJ(e,{x:t,y:n}){pb(e.x,t.translate,t.scale,t.originPoint),pb(e.y,n.translate,n.scale,n.originPoint)}const Hv=.999999999999,xv=1.0000000000001;function m$(e,t,n,o=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,r;for(let I=0;I<i;I++){s=n[I],r=s.projectionDelta;const{visualElement:a}=s.options;a&&a.props.style&&a.props.style.display==="contents"||(o&&s.options.layoutScroll&&s.scroll&&s!==s.root&&nl(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),r&&(t.x*=r.x.scale,t.y*=r.y.scale,xJ(e,r)),o&&Gs(s.latestValues)&&nl(e,s.latestValues))}t.x<xv&&t.x>Hv&&(t.x=1),t.y<xv&&t.y>Hv&&(t.y=1)}function tl(e,t){e.min=e.min+t,e.max=e.max+t}function Nv(e,t,n,o,i=.5){const s=Ht(e.min,e.max,i);pb(e,t,n,s,o)}function nl(e,t){Nv(e.x,t.x,t.scaleX,t.scale,t.originX),Nv(e.y,t.y,t.scaleY,t.scale,t.originY)}function NJ(e,t){return YJ(A$(e.getBoundingClientRect(),t))}function h$(e,t,n){const o=NJ(e,n),{scroll:i}=t;return i&&(tl(o.x,i.offset.x),tl(o.y,i.offset.y)),o}const FJ=({current:e})=>e?e.ownerDocument.defaultView:null,p$=new WeakMap;class b${constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tt(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const i=C=>{const{dragSnapToOrigin:A}=this.getProps();A?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(DA(C,"page").point)},s=(C,A)=>{const{drag:m,dragPropagation:p,onDragStart:b}=this.getProps();if(m&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=kJ(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Mo(v=>{let f=this.getAxisMotionValue(v).get()||0;if(Hi.test(f)){const{projection:G}=this.visualElement;if(G&&G.layout){const y=G.layout.layoutBox[v];y&&(f=Ro(y)*(parseFloat(f)/100))}}this.originPoint[v]=f}),b&&pt.postRender(()=>b(C,A)),ub(this.visualElement,"transform");const{animationState:Z}=this.visualElement;Z&&Z.setActive("whileDrag",!0)},r=(C,A)=>{const{dragPropagation:m,dragDirectionLock:p,onDirectionLock:b,onDrag:Z}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:v}=A;if(p&&this.currentDirection===null){this.currentDirection=f$(v),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",A.point,v),this.updateAxis("y",A.point,v),this.visualElement.render(),Z&&Z(C,A)},I=(C,A)=>this.stop(C,A),a=()=>Mo(C=>{var A;return this.getAnimationState(C)==="paused"&&((A=this.getAxisMotionValue(C).animation)===null||A===void 0?void 0:A.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new WJ(t,{onSessionStart:i,onStart:s,onMove:r,onSessionEnd:I,resumeAnimation:a},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:FJ(this.visualElement)})}stop(t,n){const o=this.isDragging;if(this.cancel(),!o)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&pt.postRender(()=>s(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,o){const{drag:i}=this.getProps();if(!o||!mC(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let r=this.originPoint[t]+o[t];this.constraints&&this.constraints[t]&&(r=l$(r,this.constraints[t],this.elastic[t])),s.set(r)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:o}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;n&&$r(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=a$(i.layoutBox,n):this.constraints=!1,this.elastic=d$(o),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Mo(r=>{this.constraints!==!1&&this.getAxisMotionValue(r)&&(this.constraints[r]=C$(i.layoutBox[r],this.constraints[r]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!$r(t))return!1;const o=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=h$(o,i.root,this.visualElement.getTransformPagePoint());let r=I$(i.layout.layoutBox,s);if(n){const I=n(u$(r));this.hasMutatedConstraints=!!I,I&&(r=YJ(I))}return r}startAnimation(t){const{drag:n,dragMomentum:o,dragElastic:i,dragTransition:s,dragSnapToOrigin:r,onDragTransitionEnd:I}=this.getProps(),a=this.constraints||{},c=Mo(C=>{if(!mC(C,n,this.currentDirection))return;let A=a&&a[C]||{};r&&(A={min:0,max:0});const m=i?200:1e6,p=i?40:1e7,b={type:"inertia",velocity:o?t[C]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...A};return this.startAxisValueAnimation(C,b)});return Promise.all(c).then(I)}startAxisValueAnimation(t,n){const o=this.getAxisMotionValue(t);return ub(this.visualElement,t),o.start(dZ(t,o,0,n,this.visualElement,!1))}stopAnimation(){Mo(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Mo(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,o=this.visualElement.getProps(),i=o[n];return i||this.visualElement.getValue(t,(o.initial?o.initial[t]:void 0)||0)}snapToCursor(t){Mo(n=>{const{drag:o}=this.getProps();if(!mC(n,o,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:r,max:I}=i.layout.layoutBox[n];s.set(t[n]-Ht(r,I,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:o}=this.visualElement;if(!$r(n)||!o||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Mo(r=>{const I=this.getAxisMotionValue(r);if(I&&this.constraints!==!1){const a=I.get();i[r]=c$({min:a,max:a},this.constraints[r])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),Mo(r=>{if(!mC(r,t,null))return;const I=this.getAxisMotionValue(r),{min:a,max:c}=this.constraints[r];I.set(Ht(a,c,i[r]))})}addListeners(){if(!this.visualElement.current)return;p$.set(this.visualElement,this);const t=this.visualElement.current,n=rg(t,"pointerdown",a=>{const{drag:c,dragListener:C=!0}=this.getProps();c&&C&&this.start(a)}),o=()=>{const{dragConstraints:a}=this.getProps();$r(a)&&a.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",o);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),pt.read(o);const r=$i(window,"resize",()=>this.scalePositionWithinConstraints()),I=i.addEventListener("didUpdate",({delta:a,hasLayoutChanged:c})=>{this.isDragging&&c&&(Mo(C=>{const A=this.getAxisMotionValue(C);A&&(this.originPoint[C]+=a[C].translate,A.set(A.get()+a[C].translate))}),this.visualElement.render())});return()=>{r(),n(),s(),I&&I()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:o=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:r=mb,dragMomentum:I=!0}=t;return{...t,drag:n,dragDirectionLock:o,dragPropagation:i,dragConstraints:s,dragElastic:r,dragMomentum:I}}}function mC(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function f$(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Z$ extends ss{constructor(t){super(t),this.removeGroupControls=Nn,this.removeListeners=Nn,this.controls=new b$(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Nn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Fv=e=>(t,n)=>{e&&pt.postRender(()=>e(t,n))};class y$ extends ss{constructor(){super(...arguments),this.removePointerDownListener=Nn}onPointerDown(t){this.session=new WJ(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:FJ(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:o,onPanEnd:i}=this.node.getProps();return{onSessionStart:Fv(t),onStart:Fv(n),onMove:o,onEnd:(s,r)=>{delete this.session,i&&pt.postRender(()=>i(s,r))}}}mount(){this.removePointerDownListener=rg(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hZ=B.createContext(null);function G$(){const e=B.useContext(hZ);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:o}=e,i=B.useId();B.useEffect(()=>o(i),[]);const s=B.useCallback(()=>n&&n(i),[i,n]);return!t&&n?[!1,s]:[!0]}const KJ=B.createContext({}),EJ=B.createContext({}),DC={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Kv(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const xa={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ve.test(e))e=parseFloat(e);else return e;const n=Kv(e,t.target.x),o=Kv(e,t.target.y);return`${n}% ${o}%`}},B$={correct:(e,{treeScale:t,projectionDelta:n})=>{const o=e,i=_g.parse(e);if(i.length>5)return o;const s=_g.createTransformer(e),r=typeof i[0]!="number"?1:0,I=n.x.scale*t.x,a=n.y.scale*t.y;i[0+r]/=I,i[1+r]/=a;const c=Ht(I,a,.5);return typeof i[2+r]=="number"&&(i[2+r]/=c),typeof i[3+r]=="number"&&(i[3+r]/=c),s(i)}},tu={};function S$(e){Object.assign(tu,e)}const{schedule:pZ,cancel:Zee}=EX(queueMicrotask,!1);class v$ extends B.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:o,layoutId:i}=this.props,{projection:s}=t;S$(W$),s&&(n.group&&n.group.add(s),o&&o.register&&i&&o.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),DC.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:o,drag:i,isPresent:s}=this.props,r=o.projection;return r&&(r.isPresent=s,i||t.layoutDependency!==n||n===void 0?r.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?r.promote():r.relegate()||pt.postRender(()=>{const I=r.getStack();(!I||!I.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),pZ.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:o}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),o&&o.deregister&&o.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function MJ(e){const[t,n]=G$(),o=B.useContext(KJ);return d.jsx(v$,{...e,layoutGroup:o,switchLayoutGroup:B.useContext(EJ),isPresent:t,safeToRemove:n})}const W$={borderRadius:{...xa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xa,borderTopRightRadius:xa,borderBottomLeftRadius:xa,borderBottomRightRadius:xa,boxShadow:B$},LJ=["TopLeft","TopRight","BottomLeft","BottomRight"],V$=LJ.length,Ev=e=>typeof e=="string"?parseFloat(e):e,Mv=e=>typeof e=="number"||ve.test(e);function R$(e,t,n,o,i,s){i?(e.opacity=Ht(0,n.opacity!==void 0?n.opacity:1,k$(o)),e.opacityExit=Ht(t.opacity!==void 0?t.opacity:1,0,w$(o))):s&&(e.opacity=Ht(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,o));for(let r=0;r<V$;r++){const I=`border${LJ[r]}Radius`;let a=Lv(t,I),c=Lv(n,I);if(a===void 0&&c===void 0)continue;a||(a=0),c||(c=0),a===0||c===0||Mv(a)===Mv(c)?(e[I]=Math.max(Ht(Ev(a),Ev(c),o),0),(Hi.test(c)||Hi.test(a))&&(e[I]+="%")):e[I]=c}(t.rotate||n.rotate)&&(e.rotate=Ht(t.rotate||0,n.rotate||0,o))}function Lv(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const k$=zJ(0,.5,QX),w$=zJ(.5,.95,Nn);function zJ(e,t,n){return o=>o<e?0:o>t?1:n(Fl(e,t,o))}function zv(e,t){e.min=t.min,e.max=t.max}function Eo(e,t){zv(e.x,t.x),zv(e.y,t.y)}function Tv(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Uv(e,t,n,o,i){return e-=t,e=eu(e,1/n,o),i!==void 0&&(e=eu(e,1/i,o)),e}function X$(e,t=0,n=1,o=.5,i,s=e,r=e){if(Hi.test(t)&&(t=parseFloat(t),t=Ht(r.min,r.max,t/100)-r.min),typeof t!="number")return;let I=Ht(s.min,s.max,o);e===s&&(I-=t),e.min=Uv(e.min,t,n,I,i),e.max=Uv(e.max,t,n,I,i)}function Dv(e,t,[n,o,i],s,r){X$(e,t[n],t[o],t[i],t.scale,s,r)}const J$=["x","scaleX","originX"],Y$=["y","scaleY","originY"];function Qv(e,t,n,o){Dv(e.x,t,J$,n?n.x:void 0,o?o.x:void 0),Dv(e.y,t,Y$,n?n.y:void 0,o?o.y:void 0)}function Pv(e){return e.translate===0&&e.scale===1}function TJ(e){return Pv(e.x)&&Pv(e.y)}function jv(e,t){return e.min===t.min&&e.max===t.max}function H$(e,t){return jv(e.x,t.x)&&jv(e.y,t.y)}function _v(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function UJ(e,t){return _v(e.x,t.x)&&_v(e.y,t.y)}function Ov(e){return Ro(e.x)/Ro(e.y)}function qv(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class x${constructor(){this.members=[]}add(t){uZ(this.members,t),t.scheduleRender()}remove(t){if(AZ(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let o;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){o=s;break}}return o?(this.promote(o),!0):!1}promote(t,n){const o=this.lead;if(t!==o&&(this.prevLead=o,this.lead=t,t.show(),o)){o.instance&&o.scheduleRender(),t.scheduleRender(),t.resumeFrom=o,n&&(t.resumeFrom.preserveOpacity=!0),o.snapshot&&(t.snapshot=o.snapshot,t.snapshot.latestValues=o.animationValues||o.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:o}=t;n.onExitComplete&&n.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function N$(e,t,n){let o="";const i=e.x.translate/t.x,s=e.y.translate/t.y,r=(n==null?void 0:n.z)||0;if((i||s||r)&&(o=`translate3d(${i}px, ${s}px, ${r}px) `),(t.x!==1||t.y!==1)&&(o+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:c,rotate:C,rotateX:A,rotateY:m,skewX:p,skewY:b}=n;c&&(o=`perspective(${c}px) ${o}`),C&&(o+=`rotate(${C}deg) `),A&&(o+=`rotateX(${A}deg) `),m&&(o+=`rotateY(${m}deg) `),p&&(o+=`skewX(${p}deg) `),b&&(o+=`skewY(${b}deg) `)}const I=e.x.scale*t.x,a=e.y.scale*t.y;return(I!==1||a!==1)&&(o+=`scale(${I}, ${a})`),o||"none"}const F$=(e,t)=>e.depth-t.depth;class K${constructor(){this.children=[],this.isDirty=!1}add(t){uZ(this.children,t),this.isDirty=!0}remove(t){AZ(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(F$),this.isDirty=!1,this.children.forEach(t)}}function QC(e){const t=xn(e)?e.get():e;return kq(t)?t.toValue():t}function E$(e,t){const n=xi.now(),o=({timestamp:i})=>{const s=i-n;s>=t&&(Pg(o),e(s-t))};return pt.read(o,!0),()=>Pg(o)}function M$(e){return e instanceof SVGElement&&e.tagName!=="svg"}function L$(e,t,n){const o=xn(e)?e:DI(e);return o.start(dZ("",o,t,n)),o.animation}const Bs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Qa=typeof window<"u"&&window.MotionDebug!==void 0,vh=["","X","Y","Z"],z$={visibility:"hidden"},$v=1e3;let T$=0;function Wh(e,t,n,o){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),o&&(o[e]=0))}function DJ(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=GJ(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",pt,!(i||s))}const{parent:o}=e;o&&!o.hasCheckedOptimisedAppear&&DJ(o)}function QJ({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:o,resetTransform:i}){return class{constructor(r={},I=t==null?void 0:t()){this.id=T$++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Qa&&(Bs.totalNodes=Bs.resolvedTargetDeltas=Bs.recalculatedProjection=0),this.nodes.forEach(Q$),this.nodes.forEach(q$),this.nodes.forEach($$),this.nodes.forEach(P$),Qa&&window.MotionDebug.record(Bs)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=r,this.root=I?I.root||I:this,this.path=I?[...I.path,I]:[],this.parent=I,this.depth=I?I.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new K$)}addEventListener(r,I){return this.eventHandlers.has(r)||this.eventHandlers.set(r,new mZ),this.eventHandlers.get(r).add(I)}notifyListeners(r,...I){const a=this.eventHandlers.get(r);a&&a.notify(...I)}hasListeners(r){return this.eventHandlers.has(r)}mount(r,I=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=M$(r),this.instance=r;const{layoutId:a,layout:c,visualElement:C}=this.options;if(C&&!C.current&&C.mount(r),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),I&&(c||a)&&(this.isLayoutDirty=!0),e){let A;const m=()=>this.root.updateBlockedByResize=!1;e(r,()=>{this.root.updateBlockedByResize=!0,A&&A(),A=E$(m,250),DC.hasAnimatedSinceResize&&(DC.hasAnimatedSinceResize=!1,this.nodes.forEach(tW))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&C&&(a||c)&&this.addEventListener("didUpdate",({delta:A,hasLayoutChanged:m,hasRelativeTargetChanged:p,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const Z=this.options.transition||C.getDefaultTransition()||i6,{onLayoutAnimationStart:v,onLayoutAnimationComplete:f}=C.getProps(),G=!this.targetLayout||!UJ(this.targetLayout,b)||p,y=!m&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||m&&(G||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(A,y);const W={...$0(Z,"layout"),onPlay:v,onComplete:f};(C.shouldReduceMotion||this.options.layoutRoot)&&(W.delay=0,W.type=!1),this.startAnimation(W)}else m||tW(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const r=this.getStack();r&&r.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Pg(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(e6),this.animationId++)}getTransformTemplate(){const{visualElement:r}=this.options;return r&&r.getProps().transformTemplate}willUpdate(r=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&DJ(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let C=0;C<this.path.length;C++){const A=this.path[C];A.shouldResetTransform=!0,A.updateScroll("snapshot"),A.options.layoutRoot&&A.willUpdate(!1)}const{layoutId:I,layout:a}=this.options;if(I===void 0&&!a)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),r&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(eW);return}this.isUpdating||this.nodes.forEach(_$),this.isUpdating=!1,this.nodes.forEach(O$),this.nodes.forEach(U$),this.nodes.forEach(D$),this.clearAllSnapshots();const I=xi.now();Bn.delta=jg(0,1e3/60,I-Bn.timestamp),Bn.timestamp=I,Bn.isProcessing=!0,ph.update.process(Bn),ph.preRender.process(Bn),ph.render.process(Bn),Bn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,pZ.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(j$),this.sharedNodes.forEach(t6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,pt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){pt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();const r=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:I}=this.options;I&&I.notify("LayoutMeasure",this.layout.layoutBox,r?r.layoutBox:void 0)}updateScroll(r="measure"){let I=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===r&&(I=!1),I){const a=o(this.instance);this.scroll={animationId:this.root.animationId,phase:r,isRoot:a,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:a}}}resetTransform(){if(!i)return;const r=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,I=this.projectionDelta&&!TJ(this.projectionDelta),a=this.getTransformTemplate(),c=a?a(this.latestValues,""):void 0,C=c!==this.prevTransformTemplateValue;r&&(I||Gs(this.latestValues)||C)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(r=!0){const I=this.measurePageBox();let a=this.removeElementScroll(I);return r&&(a=this.removeTransform(a)),g6(a),{animationId:this.root.animationId,measuredBox:I,layoutBox:a,latestValues:{},source:this.id}}measurePageBox(){var r;const{visualElement:I}=this.options;if(!I)return Tt();const a=I.measureViewportBox();if(!(((r=this.scroll)===null||r===void 0?void 0:r.wasRoot)||this.path.some(s6))){const{scroll:C}=this.root;C&&(tl(a.x,C.offset.x),tl(a.y,C.offset.y))}return a}removeElementScroll(r){var I;const a=Tt();if(Eo(a,r),!((I=this.scroll)===null||I===void 0)&&I.wasRoot)return a;for(let c=0;c<this.path.length;c++){const C=this.path[c],{scroll:A,options:m}=C;C!==this.root&&A&&m.layoutScroll&&(A.wasRoot&&Eo(a,r),tl(a.x,A.offset.x),tl(a.y,A.offset.y))}return a}applyTransform(r,I=!1){const a=Tt();Eo(a,r);for(let c=0;c<this.path.length;c++){const C=this.path[c];!I&&C.options.layoutScroll&&C.scroll&&C!==C.root&&nl(a,{x:-C.scroll.offset.x,y:-C.scroll.offset.y}),Gs(C.latestValues)&&nl(a,C.latestValues)}return Gs(this.latestValues)&&nl(a,this.latestValues),a}removeTransform(r){const I=Tt();Eo(I,r);for(let a=0;a<this.path.length;a++){const c=this.path[a];if(!c.instance||!Gs(c.latestValues))continue;hb(c.latestValues)&&c.updateSnapshot();const C=Tt(),A=c.measurePageBox();Eo(C,A),Qv(I,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,C)}return Gs(this.latestValues)&&Qv(I,this.latestValues),I}setTargetDelta(r){this.targetDelta=r,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(r){this.options={...this.options,...r,crossfade:r.crossfade!==void 0?r.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Bn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(r=!1){var I;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(r||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((I=this.parent)===null||I===void 0)&&I.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:A,layoutId:m}=this.options;if(!(!this.layout||!(A||m))){if(this.resolvedRelativeTargetAt=Bn.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),aI(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Eo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Tt(),this.targetWithTransforms=Tt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),r$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Eo(this.target,this.layout.layoutBox),xJ(this.target,this.targetDelta)):Eo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),aI(this.relativeTargetOrigin,this.target,p.target),Eo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Qa&&Bs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hb(this.parent.latestValues)||HJ(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var r;const I=this.getLead(),a=!!this.resumingFrom||this!==I;let c=!0;if((this.isProjectionDirty||!((r=this.parent)===null||r===void 0)&&r.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Bn.timestamp&&(c=!1),c)return;const{layout:C,layoutId:A}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(C||A))return;Eo(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;m$(this.layoutCorrected,this.treeScale,this.path,a),I.layout&&!I.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(I.target=I.layout.layoutBox,I.targetWithTransforms=Tt());const{target:b}=I;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Tv(this.prevProjectionDelta.x,this.projectionDelta.x),Tv(this.prevProjectionDelta.y,this.projectionDelta.y)),lI(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==p||!qv(this.projectionDelta.x,this.prevProjectionDelta.x)||!qv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),Qa&&Bs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(r=!0){var I;if((I=this.options.visualElement)===null||I===void 0||I.scheduleRender(),r){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=el(),this.projectionDelta=el(),this.projectionDeltaWithTransform=el()}setAnimationOrigin(r,I=!1){const a=this.snapshot,c=a?a.latestValues:{},C={...this.latestValues},A=el();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!I;const m=Tt(),p=a?a.source:void 0,b=this.layout?this.layout.source:void 0,Z=p!==b,v=this.getStack(),f=!v||v.members.length<=1,G=!!(Z&&!f&&this.options.crossfade===!0&&!this.path.some(o6));this.animationProgress=0;let y;this.mixTargetDelta=W=>{const V=W/1e3;nW(A.x,r.x,V),nW(A.y,r.y,V),this.setTargetDelta(A),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(aI(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),n6(this.relativeTarget,this.relativeTargetOrigin,m,V),y&&H$(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=Tt()),Eo(y,this.relativeTarget)),Z&&(this.animationValues=C,R$(C,c,this.latestValues,V,G,f)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(r){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Pg(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=pt.update(()=>{DC.hasAnimatedSinceResize=!0,this.currentAnimation=L$(0,$v,{...r,onUpdate:I=>{this.mixTargetDelta(I),r.onUpdate&&r.onUpdate(I)},onComplete:()=>{r.onComplete&&r.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const r=this.getStack();r&&r.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($v),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const r=this.getLead();let{targetWithTransforms:I,target:a,layout:c,latestValues:C}=r;if(!(!I||!a||!c)){if(this!==r&&this.layout&&c&&PJ(this.options.animationType,this.layout.layoutBox,c.layoutBox)){a=this.target||Tt();const A=Ro(this.layout.layoutBox.x);a.x.min=r.target.x.min,a.x.max=a.x.min+A;const m=Ro(this.layout.layoutBox.y);a.y.min=r.target.y.min,a.y.max=a.y.min+m}Eo(I,a),nl(I,C),lI(this.projectionDeltaWithTransform,this.layoutCorrected,I,C)}}registerSharedNode(r,I){this.sharedNodes.has(r)||this.sharedNodes.set(r,new x$),this.sharedNodes.get(r).add(I);const c=I.options.initialPromotionConfig;I.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(I):void 0})}isLead(){const r=this.getStack();return r?r.lead===this:!0}getLead(){var r;const{layoutId:I}=this.options;return I?((r=this.getStack())===null||r===void 0?void 0:r.lead)||this:this}getPrevLead(){var r;const{layoutId:I}=this.options;return I?(r=this.getStack())===null||r===void 0?void 0:r.prevLead:void 0}getStack(){const{layoutId:r}=this.options;if(r)return this.root.sharedNodes.get(r)}promote({needsReset:r,transition:I,preserveFollowOpacity:a}={}){const c=this.getStack();c&&c.promote(this,a),r&&(this.projectionDelta=void 0,this.needsReset=!0),I&&this.setOptions({transition:I})}relegate(){const r=this.getStack();return r?r.relegate(this):!1}resetSkewAndRotation(){const{visualElement:r}=this.options;if(!r)return;let I=!1;const{latestValues:a}=r;if((a.z||a.rotate||a.rotateX||a.rotateY||a.rotateZ||a.skewX||a.skewY)&&(I=!0),!I)return;const c={};a.z&&Wh("z",r,c,this.animationValues);for(let C=0;C<vh.length;C++)Wh(`rotate${vh[C]}`,r,c,this.animationValues),Wh(`skew${vh[C]}`,r,c,this.animationValues);r.render();for(const C in c)r.setStaticValue(C,c[C]),this.animationValues&&(this.animationValues[C]=c[C]);r.scheduleRender()}getProjectionStyles(r){var I,a;if(!this.instance||this.isSVG)return;if(!this.isVisible)return z$;const c={visibility:""},C=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=QC(r==null?void 0:r.pointerEvents)||"",c.transform=C?C(this.latestValues,""):"none",c;const A=this.getLead();if(!this.projectionDelta||!this.layout||!A.target){const Z={};return this.options.layoutId&&(Z.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,Z.pointerEvents=QC(r==null?void 0:r.pointerEvents)||""),this.hasProjected&&!Gs(this.latestValues)&&(Z.transform=C?C({},""):"none",this.hasProjected=!1),Z}const m=A.animationValues||A.latestValues;this.applyTransformsToTarget(),c.transform=N$(this.projectionDeltaWithTransform,this.treeScale,m),C&&(c.transform=C(m,c.transform));const{x:p,y:b}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${b.origin*100}% 0`,A.animationValues?c.opacity=A===this?(a=(I=m.opacity)!==null&&I!==void 0?I:this.latestValues.opacity)!==null&&a!==void 0?a:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=A===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const Z in tu){if(m[Z]===void 0)continue;const{correct:v,applyTo:f}=tu[Z],G=c.transform==="none"?m[Z]:v(m[Z],A);if(f){const y=f.length;for(let W=0;W<y;W++)c[f[W]]=G}else c[Z]=G}return this.options.layoutId&&(c.pointerEvents=A===this?QC(r==null?void 0:r.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(r=>{var I;return(I=r.currentAnimation)===null||I===void 0?void 0:I.stop()}),this.root.nodes.forEach(eW),this.root.sharedNodes.clear()}}}function U$(e){e.updateLayout()}function D$(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:i}=e.layout,{animationType:s}=e.options,r=n.source!==e.layout.source;s==="size"?Mo(A=>{const m=r?n.measuredBox[A]:n.layoutBox[A],p=Ro(m);m.min=o[A].min,m.max=m.min+p}):PJ(s,n.layoutBox,o)&&Mo(A=>{const m=r?n.measuredBox[A]:n.layoutBox[A],p=Ro(o[A]);m.max=m.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[A].max=e.relativeTarget[A].min+p)});const I=el();lI(I,o,n.layoutBox);const a=el();r?lI(a,e.applyTransform(i,!0),n.measuredBox):lI(a,o,n.layoutBox);const c=!TJ(I);let C=!1;if(!e.resumeFrom){const A=e.getClosestProjectingParent();if(A&&!A.resumeFrom){const{snapshot:m,layout:p}=A;if(m&&p){const b=Tt();aI(b,n.layoutBox,m.layoutBox);const Z=Tt();aI(Z,o,p.layoutBox),UJ(b,Z)||(C=!0),A.options.layoutRoot&&(e.relativeTarget=Z,e.relativeTargetOrigin=b,e.relativeParent=A)}}}e.notifyListeners("didUpdate",{layout:o,snapshot:n,delta:a,layoutDelta:I,hasLayoutChanged:c,hasRelativeTargetChanged:C})}else if(e.isLead()){const{onExitComplete:o}=e.options;o&&o()}e.options.transition=void 0}function Q$(e){Qa&&Bs.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function P$(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function j$(e){e.clearSnapshot()}function eW(e){e.clearMeasurements()}function _$(e){e.isLayoutDirty=!1}function O$(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function tW(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function q$(e){e.resolveTargetDelta()}function $$(e){e.calcProjection()}function e6(e){e.resetSkewAndRotation()}function t6(e){e.removeLeadSnapshot()}function nW(e,t,n){e.translate=Ht(t.translate,0,n),e.scale=Ht(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function oW(e,t,n,o){e.min=Ht(t.min,n.min,o),e.max=Ht(t.max,n.max,o)}function n6(e,t,n,o){oW(e.x,t.x,n.x,o),oW(e.y,t.y,n.y,o)}function o6(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const i6={duration:.45,ease:[.4,0,.1,1]},iW=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),gW=iW("applewebkit/")&&!iW("chrome/")?Math.round:Nn;function sW(e){e.min=gW(e.min),e.max=gW(e.max)}function g6(e){sW(e.x),sW(e.y)}function PJ(e,t,n){return e==="position"||e==="preserve-aspect"&&!s$(Ov(t),Ov(n),.2)}function s6(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const r6=QJ({attachResizeListener:(e,t)=>$i(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Vh={current:void 0},jJ=QJ({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Vh.current){const e=new r6({});e.mount(window),e.setOptions({layoutScroll:!0}),Vh.current=e}return Vh.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),l6={pan:{Feature:y$},drag:{Feature:Z$,ProjectionNode:jJ,MeasureLayout:MJ}};function rW(e,t){const n=t?"pointerenter":"pointerleave",o=t?"onHoverStart":"onHoverEnd",i=(s,r)=>{if(s.pointerType==="touch"||wJ())return;const I=e.getProps();e.animationState&&I.whileHover&&e.animationState.setActive("whileHover",t);const a=I[o];a&&pt.postRender(()=>a(s,r))};return rg(e.current,n,i,{passive:!e.getProps()[o]})}class a6 extends ss{mount(){this.unmount=sg(rW(this.node,!0),rW(this.node,!1))}unmount(){}}class I6 extends ss{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sg($i(this.node.current,"focus",()=>this.onFocus()),$i(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const _J=(e,t)=>t?e===t?!0:_J(e,t.parentElement):!1;function Rh(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,DA(n))}class c6 extends ss{constructor(){super(...arguments),this.removeStartListeners=Nn,this.removeEndListeners=Nn,this.removeAccessibleListeners=Nn,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const o=this.node.getProps(),s=rg(window,"pointerup",(I,a)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:C,globalTapTarget:A}=this.node.getProps(),m=!A&&!_J(this.node.current,I.target)?C:c;m&&pt.update(()=>m(I,a))},{passive:!(o.onTap||o.onPointerUp)}),r=rg(window,"pointercancel",(I,a)=>this.cancelPress(I,a),{passive:!(o.onTapCancel||o.onPointerCancel)});this.removeEndListeners=sg(s,r),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=s=>{if(s.key!=="Enter"||this.isPressing)return;const r=I=>{I.key!=="Enter"||!this.checkPressEnd()||Rh("up",(a,c)=>{const{onTap:C}=this.node.getProps();C&&pt.postRender(()=>C(a,c))})};this.removeEndListeners(),this.removeEndListeners=$i(this.node.current,"keyup",r),Rh("down",(I,a)=>{this.startPress(I,a)})},n=$i(this.node.current,"keydown",t),o=()=>{this.isPressing&&Rh("cancel",(s,r)=>this.cancelPress(s,r))},i=$i(this.node.current,"blur",o);this.removeAccessibleListeners=sg(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:o,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),o&&pt.postRender(()=>o(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!wJ()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:o}=this.node.getProps();o&&pt.postRender(()=>o(t,n))}mount(){const t=this.node.getProps(),n=rg(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),o=$i(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=sg(n,o)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const bb=new WeakMap,kh=new WeakMap,C6=e=>{const t=bb.get(e.target);t&&t(e)},d6=e=>{e.forEach(C6)};function u6({root:e,...t}){const n=e||document;kh.has(n)||kh.set(n,{});const o=kh.get(n),i=JSON.stringify(t);return o[i]||(o[i]=new IntersectionObserver(d6,{root:e,...t})),o[i]}function A6(e,t,n){const o=u6(t);return bb.set(e,n),o.observe(e),()=>{bb.delete(e),o.unobserve(e)}}const m6={some:0,all:1};class h6 extends ss{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:o,amount:i="some",once:s}=t,r={root:n?n.current:void 0,rootMargin:o,threshold:typeof i=="number"?i:m6[i]},I=a=>{const{isIntersecting:c}=a;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:C,onViewportLeave:A}=this.node.getProps(),m=c?C:A;m&&m(a)};return A6(this.node.current,r,I)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(p6(t,n))&&this.startObserver()}unmount(){}}function p6({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const b6={inView:{Feature:h6},tap:{Feature:c6},focus:{Feature:I6},hover:{Feature:a6}},f6={layout:{ProjectionNode:jJ,MeasureLayout:MJ}},OJ=B.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),QA=B.createContext({}),bZ=typeof window<"u",Z6=bZ?B.useLayoutEffect:B.useEffect,qJ=B.createContext({strict:!1});function y6(e,t,n,o,i){var s,r;const{visualElement:I}=B.useContext(QA),a=B.useContext(qJ),c=B.useContext(hZ),C=B.useContext(OJ).reducedMotion,A=B.useRef();o=o||a.renderer,!A.current&&o&&(A.current=o(e,{visualState:t,parent:I,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:C}));const m=A.current,p=B.useContext(EJ);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&G6(A.current,n,i,p),B.useInsertionEffect(()=>{m&&m.update(n,c)});const b=n[yJ],Z=B.useRef(!!b&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,b))&&((r=window.MotionHasOptimisedAnimation)===null||r===void 0?void 0:r.call(window,b)));return Z6(()=>{m&&(window.MotionIsMounted=!0,m.updateFeatures(),pZ.render(m.render),Z.current&&m.animationState&&m.animationState.animateChanges())}),B.useEffect(()=>{m&&(!Z.current&&m.animationState&&m.animationState.animateChanges(),Z.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,b)}),Z.current=!1))}),m}function G6(e,t,n,o){const{layoutId:i,layout:s,drag:r,dragConstraints:I,layoutScroll:a,layoutRoot:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:$J(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!r||I&&$r(I),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:o,layoutScroll:a,layoutRoot:c})}function $J(e){if(e)return e.options.allowProjection!==!1?e.projection:$J(e.parent)}function B6(e,t,n){return B.useCallback(o=>{o&&e.mount&&e.mount(o),t&&(o?t.mount(o):t.unmount()),n&&(typeof n=="function"?n(o):$r(n)&&(n.current=o))},[t])}function PA(e){return LI(e.animate)||q0.some(t=>zI(e[t]))}function eY(e){return!!(PA(e)||e.variants)}function S6(e,t){if(PA(e)){const{initial:n,animate:o}=e;return{initial:n===!1||zI(n)?n:void 0,animate:zI(o)?o:void 0}}return e.inherit!==!1?t:{}}function v6(e){const{initial:t,animate:n}=S6(e,B.useContext(QA));return B.useMemo(()=>({initial:t,animate:n}),[lW(t),lW(n)])}function lW(e){return Array.isArray(e)?e.join(" "):e}const aW={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Kl={};for(const e in aW)Kl[e]={isEnabled:t=>aW[e].some(n=>!!t[n])};function W6(e){for(const t in e)Kl[t]={...Kl[t],...e[t]}}const V6=Symbol.for("motionComponentSymbol");function R6({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:o,Component:i}){e&&W6(e);function s(I,a){let c;const C={...B.useContext(OJ),...I,layoutId:k6(I)},{isStatic:A}=C,m=v6(I),p=o(I,A);if(!A&&bZ){w6();const b=X6(C);c=b.MeasureLayout,m.visualElement=y6(i,p,C,t,b.ProjectionNode)}return d.jsxs(QA.Provider,{value:m,children:[c&&m.visualElement?d.jsx(c,{visualElement:m.visualElement,...C}):null,n(i,I,B6(p,m.visualElement,a),p,A,m.visualElement)]})}const r=B.forwardRef(s);return r[V6]=i,r}function k6({layoutId:e}){const t=B.useContext(KJ).id;return t&&e!==void 0?t+"-"+e:e}function w6(e,t){B.useContext(qJ).strict}function X6(e){const{drag:t,layout:n}=Kl;if(!t&&!n)return{};const o={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}const J6=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fZ(e){return typeof e!="string"||e.includes("-")?!1:!!(J6.indexOf(e)>-1||/[A-Z]/u.test(e))}function tY(e,{style:t,vars:n},o,i){Object.assign(e.style,t,i&&i.getProjectionStyles(o));for(const s in n)e.style.setProperty(s,n[s])}const nY=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function oY(e,t,n,o){tY(e,t,void 0,o);for(const i in t.attrs)e.setAttribute(nY.has(i)?i:UA(i),t.attrs[i])}function iY(e,{layout:t,layoutId:n}){return gs.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!tu[e]||e==="opacity")}function ZZ(e,t,n){var o;const{style:i}=e,s={};for(const r in i)(xn(i[r])||t.style&&xn(t.style[r])||iY(r,e)||((o=n==null?void 0:n.getValue(r))===null||o===void 0?void 0:o.liveStyle)!==void 0)&&(s[r]=i[r]);return n&&i&&typeof i.willChange=="string"&&(n.applyWillChange=!1),s}function gY(e,t,n){const o=ZZ(e,t,n);for(const i in e)if(xn(e[i])||xn(t[i])){const s=bc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;o[s]=e[i]}return o}function Y6(e){const t=B.useRef(null);return t.current===null&&(t.current=e()),t.current}function H6(e){if(gs.has(e))return"transform";if(pJ.has(e))return UA(e)}function x6({applyWillChange:e=!1,scrapeMotionValuesFromProps:t,createRenderState:n,onMount:o},i,s,r,I){const a={latestValues:N6(i,s,r,I?!1:e,t),renderState:n()};return o&&(a.mount=c=>o(i,c,a)),a}const sY=e=>(t,n)=>{const o=B.useContext(QA),i=B.useContext(hZ),s=()=>x6(e,t,o,i,n);return n?s():Y6(s)};function IW(e,t,n){const o=Array.isArray(t)?t:[t];for(let i=0;i<o.length;i++){const s=_0(e,o[i]);if(s){const{transitionEnd:r,transition:I,...a}=s;n(a,r)}}}function N6(e,t,n,o,i){var s;const r={},I=new Set,a=o&&((s=e.style)===null||s===void 0?void 0:s.willChange)===void 0,c=i(e,{});for(const v in c)r[v]=QC(c[v]);let{initial:C,animate:A}=e;const m=PA(e),p=eY(e);t&&p&&!m&&e.inherit!==!1&&(C===void 0&&(C=t.initial),A===void 0&&(A=t.animate));let b=n?n.initial===!1:!1;b=b||C===!1;const Z=b?A:C;return Z&&typeof Z!="boolean"&&!LI(Z)&&IW(e,Z,(v,f)=>{for(const G in v){let y=v[G];if(Array.isArray(y)){const W=b?y.length-1:0;y=y[W]}y!==null&&(r[G]=y)}for(const G in f)r[G]=f[G]}),a&&(A&&C!==!1&&!LI(A)&&IW(e,A,v=>{for(const f in v){const G=H6(f);G&&I.add(G)}}),I.size&&(r.willChange=Array.from(I).join(","))),r}const yZ=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),rY=()=>({...yZ(),attrs:{}}),lY=(e,t)=>t&&typeof e=="number"?t.transform(e):e,F6={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},K6=bc.length;function E6(e,t,n){let o="",i=!0;for(let s=0;s<K6;s++){const r=bc[s],I=e[r];if(I===void 0)continue;let a=!0;if(typeof I=="number"?a=I===(r.startsWith("scale")?1:0):a=parseFloat(I)===0,!a||n){const c=lY(I,sZ[r]);if(!a){i=!1;const C=F6[r]||r;o+=`${C}(${c}) `}n&&(t[r]=c)}}return o=o.trim(),n?o=n(t,i?"":o):i&&(o="none"),o}function GZ(e,t,n){const{style:o,vars:i,transformOrigin:s}=e;let r=!1,I=!1;for(const a in t){const c=t[a];if(gs.has(a)){r=!0;continue}else if(qX(a)){i[a]=c;continue}else{const C=lY(c,sZ[a]);a.startsWith("origin")?(I=!0,s[a]=C):o[a]=C}}if(t.transform||(r||n?o.transform=E6(t,e.transform,n):o.transform&&(o.transform="none")),I){const{originX:a="50%",originY:c="50%",originZ:C=0}=s;o.transformOrigin=`${a} ${c} ${C}`}}function cW(e,t,n){return typeof e=="string"?e:ve.transform(t+n*e)}function M6(e,t,n){const o=cW(t,e.x,e.width),i=cW(n,e.y,e.height);return`${o} ${i}`}const L6={offset:"stroke-dashoffset",array:"stroke-dasharray"},z6={offset:"strokeDashoffset",array:"strokeDasharray"};function T6(e,t,n=1,o=0,i=!0){e.pathLength=1;const s=i?L6:z6;e[s.offset]=ve.transform(-o);const r=ve.transform(t),I=ve.transform(n);e[s.array]=`${r} ${I}`}function BZ(e,{attrX:t,attrY:n,attrScale:o,originX:i,originY:s,pathLength:r,pathSpacing:I=1,pathOffset:a=0,...c},C,A){if(GZ(e,c,A),C){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:p,dimensions:b}=e;m.transform&&(b&&(p.transform=m.transform),delete m.transform),b&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=M6(b,i!==void 0?i:.5,s!==void 0?s:.5)),t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),o!==void 0&&(m.scale=o),r!==void 0&&T6(m,r,I,a,!1)}const SZ=e=>typeof e=="string"&&e.toLowerCase()==="svg",U6={useVisualState:sY({scrapeMotionValuesFromProps:gY,createRenderState:rY,onMount:(e,t,{renderState:n,latestValues:o})=>{pt.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),pt.render(()=>{BZ(n,o,SZ(t.tagName),e.transformTemplate),oY(t,n)})}})},D6={useVisualState:sY({applyWillChange:!0,scrapeMotionValuesFromProps:ZZ,createRenderState:yZ})};function aY(e,t,n){for(const o in t)!xn(t[o])&&!iY(o,n)&&(e[o]=t[o])}function Q6({transformTemplate:e},t){return B.useMemo(()=>{const n=yZ();return GZ(n,t,e),Object.assign({},n.vars,n.style)},[t])}function P6(e,t){const n=e.style||{},o={};return aY(o,n,e),Object.assign(o,Q6(e,t)),o}function j6(e,t){const n={},o=P6(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=o,n}const _6=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function nu(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||_6.has(e)}let IY=e=>!nu(e);function O6(e){e&&(IY=t=>t.startsWith("on")?!nu(t):e(t))}try{O6(require("@emotion/is-prop-valid").default)}catch{}function q6(e,t,n){const o={};for(const i in e)i==="values"&&typeof e.values=="object"||(IY(i)||n===!0&&nu(i)||!t&&!nu(i)||e.draggable&&i.startsWith("onDrag"))&&(o[i]=e[i]);return o}function $6(e,t,n,o){const i=B.useMemo(()=>{const s=rY();return BZ(s,t,SZ(o),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};aY(s,e.style,e),i.style={...s,...i.style}}return i}function eee(e=!1){return(n,o,i,{latestValues:s},r)=>{const a=(fZ(n)?$6:j6)(o,s,r,n),c=q6(o,typeof n=="string",e),C=n!==B.Fragment?{...c,...a,ref:i}:{},{children:A}=o,m=B.useMemo(()=>xn(A)?A.get():A,[A]);return B.createElement(n,{...C,children:m})}}function tee(e,t){return function(o,{forwardMotionProps:i}={forwardMotionProps:!1}){const r={...fZ(o)?U6:D6,preloadedFeatures:e,useRender:eee(i),createVisualElement:t,Component:o};return R6(r)}}const fb={current:null},cY={current:!1};function nee(){if(cY.current=!0,!!bZ)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>fb.current=e.matches;e.addListener(t),t()}else fb.current=!1}function oee(e,t,n){for(const o in t){const i=t[o],s=n[o];if(xn(i))e.addValue(o,i);else if(xn(s))e.addValue(o,DI(i,{owner:e}));else if(s!==i)if(e.hasValue(o)){const r=e.getValue(o);r.liveStyle===!0?r.jump(i):r.hasAnimated||r.set(i)}else{const r=e.getStaticValue(o);e.addValue(o,DI(r!==void 0?r:i,{owner:e}))}}for(const o in n)t[o]===void 0&&e.removeValue(o);return t}const CW=new WeakMap,iee=[...tJ,Yn,_g],gee=e=>iee.find(eJ(e)),dW=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class see{scrapeMotionValuesFromProps(t,n,o){return{}}constructor({parent:t,props:n,presenceContext:o,reducedMotionConfig:i,blockInitialAnimation:s,visualState:r},I={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=oZ,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=xi.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,pt.render(this.render,!1,!0))};const{latestValues:a,renderState:c}=r;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=o,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=I,this.blockInitialAnimation=!!s,this.isControllingVariants=PA(n),this.isVariantNode=eY(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:C,...A}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in A){const p=A[m];a[m]!==void 0&&xn(p)&&p.set(a[m],!1)}}mount(t){this.current=t,CW.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,o)=>this.bindToMotionValue(o,n)),cY.current||nee(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:fb.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){CW.delete(this.current),this.projection&&this.projection.unmount(),Pg(this.notifyUpdate),Pg(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const o=gs.has(t),i=n.on("change",I=>{this.latestValues[t]=I,this.props.onUpdate&&pt.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s(),r&&r(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Kl){const n=Kl[t];if(!n)continue;const{isEnabled:o,Feature:i}=n;if(!this.features[t]&&i&&o(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let o=0;o<dW.length;o++){const i=dW[o];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,r=t[s];r&&(this.propEventSubscriptions[i]=this.on(i,r))}this.prevMotionValues=oee(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const o=this.values.get(t);n!==o&&(o&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let o=this.values.get(t);return o===void 0&&n!==void 0&&(o=DI(n===null?void 0:n,{owner:this}),this.addValue(t,o)),o}readValue(t,n){var o;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(o=this.getBaseTargetFromProps(this.props,t))!==null&&o!==void 0?o:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(_X(i)||jX(i))?i=parseFloat(i):!gee(i)&&_g.test(n)&&(i=aJ(t,n)),this.setBaseTarget(t,xn(i)?i.get():i)),xn(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:o}=this.props;let i;if(typeof o=="string"||typeof o=="object"){const r=_0(this.props,o,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);r&&(i=r[t])}if(o&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!xn(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new mZ),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class CY extends see{constructor(){super(...arguments),this.KeyframeResolver=IJ}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:o}){delete n[t],delete o[t]}}function ree(e){return window.getComputedStyle(e)}class lee extends CY{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=tY}readValueFromInstance(t,n){if(gs.has(n)){const o=rZ(n);return o&&o.default||0}else{const o=ree(t),i=(qX(n)?o.getPropertyValue(n):o[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return NJ(t,n)}build(t,n,o){GZ(t,n,o.transformTemplate)}scrapeMotionValuesFromProps(t,n,o){return ZZ(t,n,o)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;xn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class aee extends CY{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Tt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(gs.has(n)){const o=rZ(n);return o&&o.default||0}return n=nY.has(n)?n:UA(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,o){return gY(t,n,o)}build(t,n,o){BZ(t,n,this.isSVGTag,o.transformTemplate)}renderInstance(t,n,o,i){oY(t,n,o,i)}mount(t){this.isSVGTag=SZ(t.tagName),super.mount(t)}}const Iee=(e,t)=>fZ(e)?new aee(t):new lee(t,{allowProjection:e!==B.Fragment}),cee=tee({...Oq,...b6,...l6,...f6},Iee),Cee=z8(cee);var vZ={},dee=nr;Object.defineProperty(vZ,"__esModule",{value:!0});var dY=vZ.default=void 0,uee=dee(mc()),Aee=d;dY=vZ.default=(0,uee.default)((0,Aee.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");const mee="https://cookbstaging.careervio.com",hee=async(e,t)=>{try{console.log("getRedeemByUserId : "+t);const n=`${mee}/api/redeems/${t}`,o=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok){const s=await o.json();throw console.error("Error fetching shop ID:",s),new Error(`Request failed with status ${o.status}: ${s.message||"Unauthorized"}`)}const i=await o.json();return i.data&&i.data.length>0?i.data[0].id:(console.warn("No shop found with the provided name."),null)}catch(n){throw console.error("Error fetching shop ID:",n.message),n}},hC="XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",uY=JSON.parse(localStorage.getItem("user")||"{}"),uW=uY.id,AW=uY.lineId;function mW(){var X;const e=os(),t=mo(),n=(X=e.state)==null?void 0:X.rawData,[o,i]=B.useState([]),[s,r]=B.useState([]),[I,a]=B.useState(!1),[c,C]=B.useState([]),[A,m]=B.useState(null),[p,b]=B.useState(!1);B.useEffect(()=>{if(n)try{const R=n.replace(/^"|"$/g,"").trim(),k=JSON.parse(R);i(k),console.log(n),k.length>0&&((async()=>{const x=new Set,M=[];for(const Q of k){const q=Q.id;if(!x.has(q)){x.add(q);const j=await n8(hC,AW,q);j&&M.push(j)}}r(M)})(),Z())}catch(R){console.error("Error parsing rawData:",R)}},[n,hC,AW]);const Z=async()=>{try{b(!0);const R=await yu(hC,uW);console.log("Fetched shop data:",R),R&&typeof R=="object"?(C([R]),m(R.id)):(t("/ProfileStore"),C([]),m(null))}catch(R){setError(R.message)}finally{b(!1)}},v=Array.isArray(s)?s.reduce((R,k)=>{const F=o.find(Q=>Q.id===k.id),x=F?F.counts:0,M=(k.price||0)*x;return R+M},0):0,[f,G]=B.useState(!1),y=()=>{G(!f)},W=()=>{console.log("Card closed")},V=async R=>{if(console.log("Redeem :",JSON.stringify(R,null,2)),a(k=>!k),!I)try{const k=R.id,F=await hee(hC,uW);console.log("Redeem Data:",F)}catch(k){console.error("Error fetching redeem data:",k)}};return d.jsxs(d.Fragment,{children:[d.jsx(hi,{}),d.jsx(ng,{display:"flex",justifyContent:"center",alignItems:"center",style:{minHeight:"40vh",marginBottom:"30px"},children:d.jsxs(Yd,{style:{width:"80%",maxWidth:"800px"},children:[d.jsx(xd,{style:{backgroundColor:"#800020",color:"white"},action:d.jsx(vl,{onClick:W,style:{color:"white"},children:d.jsx(MI,{})})}),d.jsxs(Hd,{children:[d.jsx(io,{variant:"h6",sx:{textAlign:"center",marginBottom:"16px",fontFamily:"Sarabun"}}),d.jsx(I0,{sx:{marginBottom:"24px"},children:d.jsxs(l0,{children:[d.jsx(c0,{children:d.jsxs(Tg,{children:[d.jsx(Jt,{sx:{textAlign:"left",fontFamily:"Sarabun, sans-serif",fontSize:"16px"},children:"รายการสินค้า"}),d.jsx(Jt,{sx:{textAlign:"center",fontFamily:"Sarabun, sans-serif",fontSize:"16px"},children:"จำนวน"}),d.jsx(Jt,{sx:{textAlign:"left",fontFamily:"Sarabun, sans-serif",fontSize:"16px"},children:"มูลค่า (บาท)"})]})}),d.jsx(a0,{children:Array.isArray(s)&&s.length>0?s.map((R,k)=>{const F=o.find(M=>M.id===R.id),x=F?F.counts:0;return d.jsxs(Tg,{children:[d.jsxs(Jt,{sx:{textAlign:"left",fontFamily:"Sarabun, sans-serif",fontSize:"14px"},children:[R.name," "]}),d.jsxs(Jt,{sx:{textAlign:"center",fontFamily:"Sarabun, sans-serif",fontSize:"14px"},children:[x," "]}),d.jsx(Jt,{sx:{textAlign:"left",fontFamily:"Sarabun, sans-serif",fontSize:"14px"},children:R.price!==void 0&&R.price!==null&&!isNaN(R.price)?`${Number(R.price).toLocaleString()} บาท`:"ไม่มีราคา"}),d.jsxs(Jt,{onClick:()=>V(R),sx:{textAlign:"left",fontFamily:"Sarabun, sans-serif",fontSize:"14px",cursor:"pointer"},children:[R.name," "]})]},k)}):d.jsx(Tg,{children:d.jsx(Jt,{colSpan:4,sx:{textAlign:"center"},children:"ไม่มีข้อมูลผลิตภัณฑ์"})})})]})}),d.jsxs(io,{variant:"h7",sx:{fontFamily:"Sarabun, sans-serif",fontWeight:"bold",marginTop:"24px",marginBottom:"24px",textAlign:"left"},children:["รวมเป็นมูลค่า : ",v.toFixed(2)," บาท"]})]})]})}),d.jsx(ng,{display:"flex",justifyContent:"center",alignItems:"center",style:{minHeight:"20vh"},children:d.jsxs(Yd,{style:{width:"80%",maxWidth:"800px"},children:[d.jsx(xd,{style:{backgroundColor:"#800020",color:"white"},action:d.jsx(vl,{onClick:W,style:{color:"white"},children:d.jsx(MI,{})})}),d.jsxs(Hd,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"200px"},children:[d.jsx(io,{variant:"h6",sx:{fontFamily:"Sarabun, sans-serif",fontSize:"18px",textAlign:"center",padding:"40px"},children:"ยืนยันการจัดส่งสินค้า"}),d.jsx("div",{children:A&&d.jsxs("p",{children:["Shop ID: ",A]})}),d.jsxs("div",{className:"switch",onClick:y,children:[d.jsx(Cee.div,{className:"handle",layout:!0,transition:{type:"spring",stiffness:700,damping:30},style:{backgroundColor:f?"#4CAF50":"#ccc",justifyContent:f?"flex-end":"flex-start"},children:d.jsx(dY,{style:{fontSize:"40px",color:"white"}})}),d.jsx("b",{children:f?"เปิด":"ปิด"})," "]})]})]})})]})}function hW(){const[e,t]=B.useState([]),[n,o]=B.useState(!0),[i,s]=B.useState([]),[r,I]=B.useState(null),[a,c]=B.useState({name:"",fullName:"",cardID:"",bookBankNumber:"",bank:"",location:"",checkedOne:!1}),C=localStorage.getItem("accessToken")||"XPjZnPIBXKKOBxxqYZrpbRhao+lckvS0JbPr+NXPezeQZXcOWmeIr0PK88HfqlSfRSsCr9rDV/55DiR6kTwHTdvimP4NPBjLUO75kCwGEBGFA5+naJWyUye4Y0Edf7E1cZaV5eZo8c1b0JLCaif5xgdB04t89/1O/w1cDnyilFU=",m=JSON.parse(localStorage.getItem("user")||"{}").id,p=mo();B.useEffect(()=>{(async()=>{try{o(!0);const V=await yu(C,m);console.log("Fetched shop data:",V),V&&typeof V=="object"?(t([V]),c({name:V.shop.name||"",fullName:V.fullName||"",cardID:V.cardID||"",bookBankNumber:V.shop.bookBankNumber||"",bank:V.shop.bank||"",location:V.shop.location||"",image:V.shop.image||"",bookBankImage:V.shop.bookBankImage||"",checkedOne:!1})):(p("/ProfileStore"),t([]))}catch(V){I(V.message)}finally{o(!1)}})()},[C,m]);const b=W=>{const{id:V,value:X}=W.target;c(R=>({...R,[V]:X}))},Z=W=>{const{id:V,value:X}=W.target;c(R=>({...R,[V]:X}))},v=W=>{const{checked:V}=W.target;c(X=>({...X,checkedOne:V}))},f=W=>{W&&c(V=>({...V,image:W}))},G=W=>{W&&c(V=>({...V,bookBankImage:W}))},y=W=>{W.preventDefault(),console.log("Form submitted:",a)};return n?d.jsx("p",{children:"Loading..."}):r?d.jsxs("p",{children:["Error: ",r]}):d.jsxs(d.Fragment,{children:[d.jsx(hi,{}),d.jsxs("form",{onSubmit:y,children:[d.jsx("div",{className:"container mx-auto px-4 py-8",children:d.jsxs("div",{className:"flex flex-wrap -mx-2",children:[d.jsx("div",{className:"w-full md:w-1/2 px-2",children:d.jsx(st,{id:"name",label:"ชื่อร้านค้า",variant:"outlined",className:"w-full bg-white",required:!0,value:a.name,onChange:b})}),d.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4 md:mt-0",children:d.jsx(st,{id:"fullName",label:"ชื่อ-นามสกุล",type:"text",variant:"outlined",className:"w-full bg-white",required:!0,value:a.fullName,onChange:b})}),d.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:d.jsx(st,{id:"cardID",label:"หมายเลขบัตรประจำตัวประชาชน",variant:"outlined",className:"w-full bg-white",required:!0,value:a.cardID,onChange:b})}),d.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:d.jsx(st,{id:"bookBankNumber",label:"หมายเลขบัญชีธนาคาร",variant:"outlined",className:"w-full bg-white",required:!0,value:a.bookBankNumber,onChange:b})}),d.jsx("div",{className:"w-full md:w-1/2 px-2 mt-4",children:d.jsxs(gr,{fullWidth:!0,children:[d.jsx(CA,{id:"bank-select-label",children:"ธนาคาร"}),d.jsx(uA,{className:"bg-white",labelId:"bank-select-label",id:"bank",value:a.bank,label:"ธนาคาร",onChange:Z,children:n?d.jsx(Jn,{disabled:!0,children:"กำลังโหลดข้อมูล..."}):i.map(W=>d.jsxs(Jn,{value:W.id,children:[W.name," "]},W.id))})]})}),d.jsxs("div",{className:"w-full px-2 mt-4",children:[d.jsx("div",{children:d.jsx("label",{children:"ถ่ายรูปตนเองพร้อมถือบัตรประจำตัวประชาชน"})}),d.jsx($l,{className:"bg-white",id:"image",onCapture:f,ModuleName:"IDCard"})]}),d.jsxs("div",{className:"w-full px-2 mt-4",children:[d.jsx("label",{children:"ถ่ายหน้าบุ๊คแบงก์"}),d.jsx(lX,{className:"bg-white",id:"bookBankImage",onCapture:G,ModuleName:"BookBank"})]}),d.jsx("div",{className:"w-full px-2 mt-4",children:d.jsx(st,{label:"ที่อยู่",placeholder:"ที่อยู่",id:"location",multiline:!0,minRows:3,maxRows:10,fullWidth:!0,className:"w-full bg-white",required:!0,value:a.location,onChange:b})})]})}),d.jsxs("div",{className:"container mx-auto px-4 mt-10 mb-5",children:[d.jsx(Pl,{id:"checkedOne",checked:a.checkedOne,onChange:v,required:!0,sx:{"& .MuiSvgIcon-root":{fontSize:30}}}),d.jsxs("span",{children:[d.jsx("strong",{children:"ยอมรับเงื่อนไข"})," "]})]}),d.jsx("div",{className:"container mx-auto px-4",children:d.jsx("button",{type:"submit",className:`w-full h-12 mb-10 flex justify-center rounded-xl items-center text-white ${a.name&&a.fullName&&a.cardID&&a.bookBankNumber&&a.bank&&a.location?"bg-green-500":"bg-slate-300"}`,children:"บันทึกข้อมูล"})})]})]})}function pW(){const e=os(),{customerRelation:t,totalPoints:n,status:o,invoice:i,productJsonArray:s,shop:r,date:I,time:a}=e.state||{},[c,C]=B.useState(s||[]);c.reduce((m,p)=>{const b=Number(p.value)||0;return m+b*p.quantity},0),B.useState(!1);const A=()=>{console.log("Card closed")};return d.jsxs(d.Fragment,{children:[d.jsx(hi,{}),d.jsx(ng,{display:"flex",justifyContent:"center",alignItems:"center",style:{minHeight:"40vh",marginBottom:"30px"},children:d.jsxs(Yd,{style:{width:"80%",maxWidth:"800px"},children:[d.jsx(xd,{style:{backgroundColor:"#800020",color:"white"},action:d.jsx(vl,{onClick:A,style:{color:"white"},children:d.jsx(MI,{})})}),d.jsxs(Hd,{children:[d.jsx(io,{variant:"h6",sx:{textAlign:"center",marginBottom:"16px",fontFamily:"Sarabun"}}),d.jsx(I0,{sx:{marginBottom:"24px"},children:d.jsxs(l0,{children:[d.jsx(c0,{children:d.jsxs(Tg,{children:[d.jsx(Jt,{sx:{textAlign:"left",fontFamily:"Sarabun, sans-serif",fontSize:"16px"},children:"รายการสินค้า"}),d.jsx(Jt,{sx:{textAlign:"center",fontFamily:"Sarabun, sans-serif",fontSize:"16px"},children:"จำนวน"}),d.jsx(Jt,{sx:{textAlign:"left",fontFamily:"Sarabun, sans-serif",fontSize:"16px"},children:"มูลค่า (บาท)"})]})}),d.jsx(a0,{children:c.map((m,p)=>d.jsxs(Tg,{children:[d.jsx(Jt,{sx:{textAlign:"left",fontFamily:"Sarabun, sans-serif",fontSize:"14px"},children:m.productId}),d.jsx(Jt,{sx:{textAlign:"center",fontFamily:"Sarabun, sans-serif",fontSize:"14px"},children:m.quantity}),d.jsx(Jt,{sx:{textAlign:"left",fontFamily:"Sarabun, sans-serif",fontSize:"14px"},children:m.value!==void 0&&m.value!==null&&!isNaN(m.value)?`${Number(m.value).toLocaleString()} บาท`:"ไม่มีราคา"})]},p))})]})})]})]})})]})}const pee="2006448899-kaB4QBVr",bee=yF([{path:"/",element:d.jsx(MF,{})},{path:"/home",element:d.jsx($F,{})},{path:"/cart",element:d.jsx(d8,{})},{path:"/register/:userId",element:d.jsx(DS,{})},{path:"/shopList",element:d.jsx(I8,{})},{path:"/first",element:d.jsx(l8,{})},{path:"/login",element:d.jsx(a8,{})},{path:"/choose/wimon",element:d.jsx(r8,{})},{path:"/shop/:id",element:d.jsx(s8,{})},{path:"/history-point/:id",element:d.jsx(kE,{})},{path:"/history-service-machine/:id",element:d.jsx(FE,{})},{path:"/UserProfile",element:d.jsx(l4,{})},{path:"/register/:userId",element:d.jsx(DS,{})},{path:"/update-user-profile",element:d.jsx(C8,{})},{path:"/store-map/khunnaiwimon",element:d.jsx(v4,{})},{path:"/store-map/naitonmai",element:d.jsx(W4,{})},{path:"/store-map/paranee",element:d.jsx(V4,{})},{path:"/store-map/krung",element:d.jsx(R4,{})},{path:"/store-map/kamalad",element:d.jsx(k4,{})},{path:"/conclusion",element:d.jsx(x4,{})},{path:"/machine-position",element:d.jsx(Q4,{})},{path:"/map",element:d.jsx(c8,{})},{path:"/contact-us",element:d.jsx(P4,{})},{path:"/partner",element:d.jsx(g_,{})},{path:"/partner/ProfileStore",element:d.jsx(RS,{})},{path:"/partner/contact-us",element:d.jsx(p_,{})},{path:"/partner/pdpa",element:d.jsx(b_,{})},{path:"/shopHome",element:d.jsx(QS,{})},{path:"/partner/shopHome",element:d.jsx(QS,{})},{path:"/partner/shopRegister",element:d.jsx("shopRegister",{})},{path:"/partner/get-money-item",element:d.jsx(y_,{})},{path:"/partner/add-product",element:d.jsx(g8,{})},{path:"/ProfileStore",element:d.jsx(RS,{})},{path:"/partner/shopHomeDetail",element:d.jsx($S,{})},{path:"/shopHomeDetail",element:d.jsx($S,{})},{path:"/partner/shopHomeDetailResive",element:d.jsx(mW,{})},{path:"/shopHomeDetailResive",element:d.jsx(mW,{})},{path:"/partner/ProfileStoreEdit",element:d.jsx(hW,{})},{path:"/ProfileStoreEdit",element:d.jsx(hW,{})},{path:"/partner/ShopHomeDetailPreSlip",element:d.jsx(pW,{})},{path:"/ShopHomeDetailPreSlip",element:d.jsx(pW,{})}]);JR(document.getElementById("root")).render(d.jsx(B.StrictMode,{children:d.jsx(tN,{liffId:pee,children:d.jsx(FR,{children:d.jsx(kF,{router:bee})})})}));export{fW as c,Zb as g};
